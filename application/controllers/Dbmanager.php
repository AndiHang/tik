<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\x42\101\123\x45\120\x41\x54\x48") or exit("\116\157\x20\144\x69\x72\145\x63\164\x20\163\x63\162\151\160\164\40\141\143\x63\145\163\x73\x20\141\154\x6c\157\167\x65\144"); class Dbmanager extends CI_Controller { public function __construct() { goto ASRR6; ASRR6: parent::__construct(); goto Wk5Wi; JIQKL: $this->load->helper("\144\x69\x72\145\143\164\x6f\x72\171"); goto EP_qa; LMI27: I2joA: goto qMdmH; RciNv: p0371: goto RdDDp; cBVfP: $this->load->library("\x75\x70\x6c\x6f\141\144"); goto UbnmS; qMdmH: redirect("\x61\x75\164\150"); goto apfiO; RdDDp: goto DBsQe; goto LMI27; LxGG0: $this->load->model("\x44\x61\x73\150\142\x6f\141\162\x64\137\x6d\x6f\144\x65\x6c", "\144\x61\x73\x68\x62\x6f\141\162\x64"); goto JIQKL; Wk5Wi: if (!$this->ion_auth->logged_in()) { goto I2joA; } goto munhw; munhw: if ($this->ion_auth->is_admin()) { goto p0371; } goto so1H2; UbnmS: $this->load->model("\123\x65\x74\164\x69\x6e\x67\x73\x5f\155\x6f\144\x65\154", "\x73\145\x74\164\151\156\x67\163"); goto LxGG0; apfiO: DBsQe: goto cBVfP; so1H2: show_error("\110\141\x6e\171\x61\x20\101\x64\155\x69\x6e\x20\x79\x61\156\x67\40\142\157\x6c\145\150\40\155\145\x6e\147\x61\x6b\x73\145\163\40\150\x61\x6c\x61\155\141\156\x20\151\x6e\x69", 403, "\101\153\163\145\x73\x20\x64\x69\x6c\x61\x72\141\156\x67"); goto RciNv; EP_qa: } public function output_json($data, $encode = true) { goto OnK6W; F6kwx: $data = json_encode($data); goto WZXxd; OnK6W: if (!$encode) { goto TsExg; } goto F6kwx; WZXxd: TsExg: goto NjZJP; NjZJP: $this->output->set_content_type("\x61\160\160\x6c\x69\x63\141\x74\151\157\156\x2f\x6a\163\157\156")->set_output($data); goto aBEAQ; aBEAQ: } public function index() { goto gpxRR; chb1Y: $data["\x74\160"] = $this->dashboard->getTahun(); goto lt9CQ; hOvp2: $this->load->view("\x5f\x74\x65\155\160\x6c\141\x74\145\x73\x2f\x64\x61\x73\150\x62\x6f\x61\162\x64\57\137\150\x65\141\x64\x65\162", $data); goto IW15B; PsYsY: $data["\163\x6d\164\x5f\141\143\x74\x69\166\x65"] = $this->dashboard->getSemesterActive(); goto WGkqb; FLC0d: $arrFile = []; goto ULAPV; q_Yoi: XJEL6: goto kMY7B; gpxRR: $user = $this->ion_auth->user()->row(); goto XCAjX; lt9CQ: $data["\x74\160\137\x61\x63\164\x69\x76\x65"] = $this->dashboard->getTahunActive(); goto YN73w; Aw8Lt: $data["\x74\x61\142\x6c\145\163"] = $this->db->list_tables(); goto hOvp2; WGkqb: $list = directory_map("\x2e\x2f\142\141\x63\153\x75\x70\163\57"); goto FLC0d; CHCZo: $this->load->view("\x5f\164\145\x6d\160\154\141\164\x65\x73\x2f\x64\x61\163\x68\142\157\x61\x72\x64\x2f\137\146\x6f\x6f\x74\145\162"); goto HPB_f; IW15B: $this->load->view("\163\145\x74\x74\x69\x6e\x67\57\x64\142"); goto CHCZo; XCAjX: $data = ["\165\163\x65\x72" => $user, "\152\x75\x64\x75\154" => "\x42\141\x63\x6b\x75\x70\x20\144\x61\x6e\x20\122\x65\x73\164\157\162\x65", "\x73\x75\x62\x6a\165\x64\x75\154" => "\102\141\x63\153\165\160\x20\123\145\x6d\x75\x61\x20\104\141\164\x61\142\x61\163\x65\x20\x64\141\156\x20\x46\151\x6c\x65", "\160\x72\157\146\151\154\x65" => $this->dashboard->getProfileAdmin($user->id), "\163\x65\164\164\x69\x6e\x67" => $this->dashboard->getSetting()]; goto chb1Y; kMY7B: $data["\x6c\x69\163\x74"] = $arrFile; goto Aw8Lt; ULAPV: foreach ($list as $key => $value) { goto s8UxK; s8UxK: $nfile = explode("\x2e", $value); goto JVsST; RapJP: $arrFile[$key] = ["\164\x79\160\x65" => $type, "\x6e\x61\x6d\141" => $nama, "\x74\x67\154" => $tgl, "\x73\x69\x7a\x65" => $size, "\x73\162\143" => $value]; goto jmmGC; JVsST: $nama = $nfile[0]; goto bQKbg; jmmGC: exZLc: goto rJEjj; bQKbg: $type = $nfile[1]; goto zfl1Z; IYHN0: $size = $this->formatSizeUnits(filesize("\56\57\142\x61\143\x6b\x75\x70\x73\57" . $value)); goto RapJP; zfl1Z: $tgl = filemtime("\x2e\x2f\x62\x61\143\153\165\160\x73\57" . $value); goto IYHN0; rJEjj: } goto q_Yoi; YN73w: $data["\163\x6d\x74"] = $this->dashboard->getSemester(); goto PsYsY; HPB_f: } public function manage() { goto EHpzh; GoCmk: $data = ["\165\163\145\162" => $user, "\152\x75\144\x75\x6c" => "\102\x65\162\163\x69\x68\153\x61\x6e\40\x44\x61\164\141", "\163\x75\x62\x6a\165\x64\x75\x6c" => "\110\141\x70\x75\163\x20\104\141\164\x61", "\160\162\x6f\146\x69\154\x65" => $this->dashboard->getProfileAdmin($user->id), "\163\145\164\x74\151\x6e\147" => $this->dashboard->getSetting()]; goto dQ3vj; gMbmj: $this->load->view("\163\145\164\164\151\156\x67\x2f\155\x61\x6e\x61\147\x65"); goto J9KuN; JT4G6: sP2Me: goto W1rfU; mduBy: foreach ($tables as $table) { $data_tables[$table] = $this->settings->toJSON($table); PrCLb: } goto JT4G6; ilmJi: $data_tables = []; goto jIvqi; J9KuN: $this->load->view("\x5f\x74\145\155\160\x6c\141\164\145\x73\57\x64\x61\x73\150\x62\x6f\141\162\144\57\137\x66\x6f\157\x74\x65\162"); goto EDlw2; W1rfU: $data["\x74\x61\x62\x6c\145\x73"] = $data_tables; goto VGBMJ; STQ3E: $data["\x74\x70\x5f\141\x63\x74\x69\x76\145"] = $this->dashboard->getTahunActive(); goto yYz52; VGBMJ: $this->load->view("\x5f\x74\145\155\160\x6c\141\x74\x65\x73\x2f\x64\x61\x73\x68\x62\157\x61\x72\144\x2f\137\150\145\x61\144\145\x72", $data); goto gMbmj; dQ3vj: $data["\x74\160"] = $this->dashboard->getTahun(); goto STQ3E; QM2U3: $data["\163\155\x74\x5f\141\143\x74\151\x76\x65"] = $this->dashboard->getSemesterActive(); goto ilmJi; jIvqi: $tables = $this->db->list_tables(); goto mduBy; EHpzh: $user = $this->ion_auth->user()->row(); goto GoCmk; yYz52: $data["\163\x6d\x74"] = $this->dashboard->getSemester(); goto QM2U3; EDlw2: } public function truncate() { goto zE196; dmvMT: $this->settings->truncate($tables); goto RDrHF; zE196: $tables = $this->db->list_tables(); goto dmvMT; RDrHF: $this->output_json(["\163\x74\141\164\x75\x73" => true]); goto Wp8PO; Wp8PO: } public function backupDb() { goto i4XoY; DWZ7A: $this->dbutil->optimize_database(); goto NE6Yn; h9NH1: $backup = $this->dbutil->backup($prefs); goto JxSQ0; NE6Yn: $prefs = ["\x74\141\142\x6c\145\x73" => $this->db->list_tables(), "\x69\147\156\157\162\x65" => array(), "\146\x6f\162\x6d\x61\164" => "\172\x69\160", "\x66\151\154\x65\156\141\x6d\145" => "\x62\141\143\x6b\165\160\x2e\x73\x71\x6c", "\x61\144\x64\x5f\x64\162\157\x70" => TRUE, "\141\x64\144\x5f\151\156\x73\x65\162\164" => TRUE, "\x6e\145\x77\x6c\151\156\145" => "\xa"]; goto h9NH1; n6CWJ: $this->output_json(["\x74\171\160\145" => "\144\141\164\141\142\x61\x73\145", "\155\145\x73\x73\x61\x67\145" => "\104\x61\x74\141\142\x61\163\145\40\142\145\x72\150\141\x73\x69\154\40\x64\151\142\x61\x63\153\x75\160"]); goto ZWpna; JxSQ0: $this->load->helper("\x66\151\154\145"); goto HofTo; i4XoY: $this->load->dbutil(); goto DWZ7A; HofTo: write_file("\x2e\x2f\x62\x61\143\153\x75\x70\x73\57\142\x61\x63\x6b\x75\x70\55\x64\142\55" . date("\131\55\155\55\144\x2d\x48\x2d\x69\55\x73") . "\56\x73\161\x6c\x2e\172\151\160", $backup); goto n6CWJ; ZWpna: } public function backupData() { goto mKD6d; u5jjd: $this->zip->archive("\56\x2f\x62\x61\x63\153\x75\160\x73\x2f\142\141\x63\x6b\x75\x70\55\146\x69\x6c\145\55" . date("\x59\x2d\x6d\x2d\x64\55\x48\x2d\x69\55\163") . "\56\x7a\151\x70"); goto n0dl5; n0dl5: $this->output_json(["\164\x79\x70\x65" => "\x66\x69\154\145", "\x6d\x65\163\163\141\x67\145" => "\106\x69\x6c\x65\x20\144\x61\164\141\x20\x62\145\162\150\141\x73\x69\154\x20\x64\151\x62\141\143\153\165\x70"]); goto PMH0p; jDAxO: $this->zip->read_dir("\x75\x70\154\x6f\141\144\x73"); goto u5jjd; mKD6d: $this->load->library("\x7a\151\x70"); goto jDAxO; PMH0p: } public function hapusBackup($src) { goto xYjDn; yFqjJ: fiFia: goto jqjXF; kCRMS: $this->output_json(["\163\x74\141\164\x75\163" => false, "\155\145\163\x73\x61\x67\x65" => "\x47\141\147\x61\x6c\40\155\145\x6e\147\150\141\x70\165\x73\40\x62\141\143\x6b\165\x70"]); goto uiZqv; jqjXF: $this->output_json(["\x73\x74\141\164\x75\x73" => true, "\x6d\x65\x73\x73\x61\147\145" => "\x42\x61\143\x6b\165\160\x20\142\145\162\150\141\163\x69\x6c\40\144\151\150\x61\160\165\x73"]); goto STXvJ; uiZqv: goto q0rzx; goto yFqjJ; xYjDn: if (unlink("\x2e\x2f\x62\141\143\x6b\165\x70\x73\57" . $src)) { goto fiFia; } goto kCRMS; STXvJ: q0rzx: goto JvKtE; JvKtE: } function formatSizeUnits($bytes) { goto HUVsS; PFYsz: $bytes = $bytes . "\40\x62\171\164\145"; goto QOBlO; SGziV: $bytes = number_format($bytes / 1073741824, 2) . "\40\107\x42"; goto e6HNs; bztQK: F87fT: goto TxgbW; e6HNs: goto JFwDy; goto rCEiT; y0A63: if ($bytes >= 1024) { goto FlBrH; } goto kBMAe; L1nY0: goto JFwDy; goto bztQK; rCEiT: kLN7a: goto cgt__; TxgbW: $bytes = $bytes . "\40\142\171\x74\x65\163"; goto eqUpB; EjKki: return $bytes; goto OVu9c; z32LQ: goto JFwDy; goto vUqTJ; eqUpB: goto JFwDy; goto CbiLL; C2baK: if ($bytes >= 1048576) { goto kLN7a; } goto y0A63; aVI8y: goto JFwDy; goto Di5pK; Di5pK: FlBrH: goto JWLJ2; QOBlO: JFwDy: goto EjKki; HUVsS: if ($bytes >= 1073741824) { goto PxKZp; } goto C2baK; JWLJ2: $bytes = number_format($bytes / 1024, 2) . "\x20\113\x42"; goto L1nY0; xXT17: $bytes = "\x30\40\142\x79\x74\145\x73"; goto z32LQ; kBMAe: if ($bytes > 1) { goto F87fT; } goto hTrHK; vUqTJ: PxKZp: goto SGziV; cgt__: $bytes = number_format($bytes / 1048576, 2) . "\x20\115\102"; goto aVI8y; CbiLL: aLZ0l: goto PFYsz; hTrHK: if ($bytes == 1) { goto aLZ0l; } goto xXT17; OVu9c: } }
