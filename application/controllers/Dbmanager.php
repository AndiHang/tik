<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\101\123\x45\120\101\x54\110") or exit("\116\x6f\40\144\151\162\145\143\164\x20\163\143\162\151\160\x74\40\141\143\143\x65\163\163\40\141\154\x6c\157\x77\x65\144"); class Dbmanager extends CI_Controller { public function __construct() { goto v6_FJ; jha4d: $this->load->library("\x75\160\x6c\157\x61\144"); goto cG1C5; cH9Vj: GYxwC: goto YbKUC; O543g: if ($this->ion_auth->is_admin()) { goto qp7Qh; } goto S8wUZ; YbKUC: redirect("\141\165\164\x68"); goto I1j60; DZajm: if (!$this->ion_auth->logged_in()) { goto GYxwC; } goto O543g; Ie0ux: goto Afxyi; goto cH9Vj; LA3NJ: $this->load->helper("\144\151\x72\145\x63\x74\157\162\x79"); goto b1J5R; YLV1g: qp7Qh: goto Ie0ux; v6_FJ: parent::__construct(); goto DZajm; I1j60: Afxyi: goto jha4d; dqPGX: $this->load->model("\x44\141\x73\150\x62\x6f\x61\x72\144\137\x6d\x6f\144\145\x6c", "\144\141\163\x68\x62\x6f\x61\162\x64"); goto LA3NJ; S8wUZ: show_error("\x48\x61\x6e\x79\x61\40\101\144\155\x69\x6e\x20\171\141\156\x67\x20\142\157\154\x65\x68\x20\155\x65\156\147\141\153\x73\x65\x73\x20\x68\x61\154\141\155\141\156\x20\151\x6e\x69", 403, "\101\x6b\x73\x65\x73\40\x64\151\x6c\x61\x72\141\156\147"); goto YLV1g; cG1C5: $this->load->model("\x53\145\164\164\x69\x6e\147\x73\137\155\x6f\144\145\154", "\163\145\x74\164\x69\x6e\x67\x73"); goto dqPGX; b1J5R: } public function output_json($data, $encode = true) { goto e3Kam; ym7NI: $data = json_encode($data); goto J0Tcj; e3Kam: if (!$encode) { goto WFUYd; } goto ym7NI; LBULx: $this->output->set_content_type("\141\x70\x70\154\x69\x63\x61\x74\151\x6f\x6e\57\152\163\x6f\156")->set_output($data); goto Dv6YI; J0Tcj: WFUYd: goto LBULx; Dv6YI: } public function index() { goto jTXw6; lrXix: $this->load->view("\x5f\164\x65\x6d\x70\x6c\x61\x74\x65\163\57\x64\141\x73\x68\142\x6f\x61\x72\144\x2f\137\146\x6f\x6f\164\x65\162"); goto PGwOk; UrRuI: $data["\164\x61\x62\x6c\x65\x73"] = $this->db->list_tables(); goto rxWxN; jTXw6: $user = $this->ion_auth->user()->row(); goto w0FHe; AGV94: $this->load->view("\163\x65\x74\164\151\156\147\x2f\144\x62"); goto lrXix; WartW: O8FZo: goto Q9Aic; Jr0E1: $data["\x73\x6d\164"] = $this->dashboard->getSemester(); goto d2qY4; R1Y4C: foreach ($list as $key => $value) { goto Q6lIt; JBKI0: TvuUs: goto vbdQd; Q6lIt: $nfile = explode("\56", $value); goto LyPYW; LyPYW: $nama = $nfile[0]; goto JFOFt; l1GgF: $arrFile[$key] = ["\164\171\160\x65" => $type, "\156\141\155\141" => $nama, "\164\x67\x6c" => $tgl, "\x73\x69\x7a\x65" => $size, "\163\x72\x63" => $value]; goto JBKI0; JFOFt: $type = $nfile[1]; goto Yr73x; Mb8BN: $size = $this->formatSizeUnits(filesize("\56\57\142\x61\143\x6b\165\160\x73\57" . $value)); goto l1GgF; Yr73x: $tgl = filemtime("\56\x2f\142\141\143\153\x75\160\163\x2f" . $value); goto Mb8BN; vbdQd: } goto WartW; d2qY4: $data["\163\x6d\164\x5f\x61\x63\164\151\166\x65"] = $this->dashboard->getSemesterActive(); goto VzFey; Kd4fz: $data["\x74\160\137\x61\x63\164\x69\166\x65"] = $this->dashboard->getTahunActive(); goto Jr0E1; q1eBi: $data["\x74\160"] = $this->dashboard->getTahun(); goto Kd4fz; mtm4n: $arrFile = []; goto R1Y4C; w0FHe: $data = ["\x75\x73\x65\162" => $user, "\152\165\x64\x75\154" => "\x42\x61\x63\153\x75\160\x20\144\x61\156\40\122\x65\x73\164\157\162\145", "\x73\x75\142\152\x75\144\165\x6c" => "\x42\141\x63\153\x75\160\40\123\145\155\165\x61\x20\x44\x61\164\x61\x62\x61\163\145\x20\x64\141\156\40\106\151\x6c\x65", "\x70\x72\157\146\151\154\x65" => $this->dashboard->getProfileAdmin($user->id), "\x73\x65\164\x74\x69\156\x67" => $this->dashboard->getSetting()]; goto q1eBi; rxWxN: $this->load->view("\x5f\x74\x65\155\160\x6c\141\x74\x65\163\x2f\x64\x61\x73\x68\x62\157\x61\162\x64\x2f\137\150\145\x61\x64\145\x72", $data); goto AGV94; VzFey: $list = directory_map("\x2e\x2f\x62\x61\143\x6b\165\x70\x73\x2f"); goto mtm4n; Q9Aic: $data["\154\x69\163\164"] = $arrFile; goto UrRuI; PGwOk: } public function manage() { goto vLjGx; sdH_c: $this->load->view("\x5f\164\x65\155\x70\154\141\x74\x65\163\x2f\x64\x61\163\x68\x62\157\x61\162\x64\x2f\x5f\x66\x6f\157\x74\145\x72"); goto IoMUr; ISScs: foreach ($tables as $table) { $data_tables[$table] = $this->settings->toJSON($table); YAMm5: } goto BFzeE; lqjem: $data["\x74\141\142\154\145\x73"] = $data_tables; goto AcW1d; vLjGx: $user = $this->ion_auth->user()->row(); goto aeBTg; BFzeE: sHzh1: goto lqjem; gvqNN: $data["\164\x70"] = $this->dashboard->getTahun(); goto u58dx; AcW1d: $this->load->view("\137\164\145\155\x70\x6c\141\x74\145\x73\x2f\x64\141\163\150\142\157\141\x72\144\x2f\137\150\x65\x61\x64\x65\x72", $data); goto s06vK; i_q3r: $data["\163\155\x74"] = $this->dashboard->getSemester(); goto QIUDb; AQjPu: $tables = $this->db->list_tables(); goto ISScs; aeBTg: $data = ["\x75\163\x65\x72" => $user, "\x6a\165\x64\165\x6c" => "\x42\145\x72\163\x69\150\x6b\141\x6e\40\x44\141\164\x61", "\163\x75\142\x6a\x75\x64\x75\x6c" => "\110\141\160\x75\x73\x20\104\141\x74\141", "\160\162\157\x66\151\x6c\x65" => $this->dashboard->getProfileAdmin($user->id), "\163\145\x74\x74\x69\x6e\147" => $this->dashboard->getSetting()]; goto gvqNN; u58dx: $data["\x74\160\x5f\141\x63\x74\151\166\x65"] = $this->dashboard->getTahunActive(); goto i_q3r; s06vK: $this->load->view("\163\x65\x74\x74\x69\x6e\x67\x2f\155\141\x6e\x61\147\x65"); goto sdH_c; M_bSF: $data_tables = []; goto AQjPu; QIUDb: $data["\163\155\x74\137\x61\x63\164\151\x76\145"] = $this->dashboard->getSemesterActive(); goto M_bSF; IoMUr: } public function truncate() { goto cMcZR; RooOv: $this->output_json(["\163\x74\141\164\x75\163" => true]); goto wDHRt; cMcZR: $tables = $this->db->list_tables(); goto fATyJ; fATyJ: $this->settings->truncate($tables); goto RooOv; wDHRt: } public function backupDb() { goto DHKiL; Hl_GA: $this->dbutil->optimize_database(); goto aN7gS; aN7gS: $prefs = ["\164\141\x62\x6c\145\163" => $this->db->list_tables(), "\x69\147\x6e\157\x72\145" => array(), "\x66\x6f\162\x6d\141\x74" => "\x7a\x69\160", "\x66\151\154\145\156\141\x6d\x65" => "\x62\x61\x63\x6b\165\x70\56\163\161\x6c", "\x61\144\x64\137\x64\x72\157\x70" => TRUE, "\x61\144\x64\x5f\151\156\163\x65\x72\x74" => TRUE, "\x6e\145\167\x6c\x69\156\x65" => "\12"]; goto Qaxd4; qc13U: write_file("\56\x2f\142\141\143\x6b\165\160\163\57\x62\x61\143\x6b\x75\160\55\144\142\55" . date("\x59\55\x6d\55\144\55\x48\x2d\x69\x2d\163") . "\56\x73\161\154\56\x7a\x69\x70", $backup); goto xZkDP; Qaxd4: $backup = $this->dbutil->backup($prefs); goto dfFdS; DHKiL: $this->load->dbutil(); goto Hl_GA; dfFdS: $this->load->helper("\x66\151\x6c\145"); goto qc13U; xZkDP: $this->output_json(["\164\x79\160\145" => "\144\x61\164\141\142\141\163\145", "\x6d\145\x73\x73\141\x67\x65" => "\x44\141\164\141\142\141\x73\x65\40\142\145\x72\x68\x61\163\151\x6c\x20\x64\151\x62\141\143\x6b\x75\160"]); goto GjdOS; GjdOS: } public function backupData() { goto jX3zS; Xwn4e: $this->output_json(["\164\x79\160\145" => "\146\x69\x6c\145", "\155\145\163\163\141\147\145" => "\106\151\x6c\145\40\x64\x61\164\x61\x20\142\x65\162\150\x61\163\151\154\x20\144\151\x62\x61\143\153\x75\x70"]); goto owmPC; SPZ_F: $this->zip->read_dir("\x75\160\154\x6f\141\x64\163"); goto ctzRl; ctzRl: $this->zip->archive("\56\x2f\x62\141\x63\153\165\160\163\57\142\141\x63\x6b\165\160\55\146\151\x6c\145\55" . date("\131\x2d\x6d\x2d\x64\x2d\110\x2d\151\x2d\163") . "\56\172\151\x70"); goto Xwn4e; jX3zS: $this->load->library("\172\x69\x70"); goto SPZ_F; owmPC: } public function hapusBackup($src) { goto Cy57P; mszEb: $this->output_json(["\163\x74\141\x74\x75\163" => false, "\155\145\163\x73\141\x67\x65" => "\x47\x61\x67\x61\x6c\40\x6d\145\x6e\x67\x68\x61\160\x75\x73\40\142\141\x63\153\165\160"]); goto knvOi; PBYja: $this->output_json(["\x73\x74\141\164\165\x73" => true, "\x6d\x65\x73\163\x61\x67\x65" => "\x42\141\143\153\165\160\40\142\x65\162\150\x61\163\151\x6c\x20\144\151\150\x61\x70\165\163"]); goto DvMXu; spC40: SP05j: goto PBYja; Cy57P: if (unlink("\56\57\142\141\143\153\x75\x70\163\x2f" . $src)) { goto SP05j; } goto mszEb; knvOi: goto tmqJ0; goto spC40; DvMXu: tmqJ0: goto BAXFd; BAXFd: } function formatSizeUnits($bytes) { goto T7IC4; BrhRi: goto zOhB5; goto BTa2y; Cjl9C: goto zOhB5; goto dlCin; iUu_U: if ($bytes >= 1048576) { goto wK5Vw; } goto v_Xw_; P2rBx: YGnSu: goto IFoBP; VXNrk: if ($bytes == 1) { goto pryCj; } goto sc8Uw; TUSI_: $bytes = $bytes . "\40\142\x79\x74\145\x73"; goto BfrpN; sc8Uw: $bytes = "\60\40\142\171\164\145\x73"; goto zy_Vj; IFoBP: $bytes = number_format($bytes / 1073741824, 2) . "\40\107\102"; goto Cjl9C; zy_Vj: goto zOhB5; goto P2rBx; cvQSF: return $bytes; goto Q1p8M; oGxIN: if ($bytes > 1) { goto i4Qv5; } goto VXNrk; vn3D_: goto zOhB5; goto tAbGl; BfrpN: goto zOhB5; goto aFxhG; BTa2y: Gpe6E: goto mHfqE; Oc9SP: zOhB5: goto cvQSF; mHfqE: $bytes = number_format($bytes / 1024, 2) . "\40\113\102"; goto vn3D_; LLAct: $bytes = number_format($bytes / 1048576, 2) . "\40\x4d\102"; goto BrhRi; tAbGl: i4Qv5: goto TUSI_; T7IC4: if ($bytes >= 1073741824) { goto YGnSu; } goto iUu_U; L8xWj: $bytes = $bytes . "\40\x62\171\164\x65"; goto Oc9SP; aFxhG: pryCj: goto L8xWj; v_Xw_: if ($bytes >= 1024) { goto Gpe6E; } goto oGxIN; dlCin: wK5Vw: goto LLAct; Q1p8M: } }
