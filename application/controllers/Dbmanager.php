<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\x42\x41\x53\105\x50\x41\x54\110") or exit("\x4e\x6f\x20\144\151\162\145\143\x74\40\x73\x63\x72\151\160\x74\x20\141\x63\143\145\x73\163\40\x61\x6c\154\x6f\x77\145\144"); class Dbmanager extends CI_Controller { public function __construct() { goto gazf6; JaUuF: injgZ: goto XuabO; uX4JT: if (!$this->ion_auth->logged_in()) { goto injgZ; } goto AdN_P; Bl0t8: $this->load->helper("\x64\x69\x72\145\143\x74\157\x72\171"); goto IqRBm; Oz4eb: $this->load->model("\x44\x61\163\x68\x62\157\x61\x72\144\137\x6d\157\x64\145\x6c", "\x64\x61\x73\150\142\x6f\x61\x72\x64"); goto Bl0t8; ji2YZ: hENpE: goto nbf_P; vvBUb: V9v8k: goto px1r5; px1r5: goto hENpE; goto JaUuF; nbf_P: $this->load->library("\165\x70\x6c\157\141\x64"); goto pE3y3; XuabO: redirect("\x61\x75\164\x68"); goto ji2YZ; sJCPt: show_error("\x48\x61\156\171\141\40\101\x64\x6d\x69\156\40\x79\141\x6e\147\40\x62\157\154\145\150\40\155\x65\x6e\147\x61\153\x73\x65\x73\40\150\x61\x6c\141\155\x61\x6e\40\x69\x6e\x69", 403, "\101\x6b\x73\145\163\x20\x64\x69\x6c\x61\x72\141\156\x67"); goto vvBUb; AdN_P: if ($this->ion_auth->is_admin()) { goto V9v8k; } goto sJCPt; pE3y3: $this->load->model("\x53\x65\164\164\x69\156\x67\x73\x5f\x6d\157\144\145\154", "\163\x65\164\x74\x69\x6e\147\163"); goto Oz4eb; gazf6: parent::__construct(); goto uX4JT; IqRBm: } public function output_json($data, $encode = true) { goto QYv50; QYv50: if (!$encode) { goto tusdg; } goto C0yGq; kLIPq: $this->output->set_content_type("\x61\160\160\x6c\x69\x63\x61\164\x69\x6f\x6e\x2f\152\x73\157\x6e")->set_output($data); goto HT7lc; C0yGq: $data = json_encode($data); goto mbizG; mbizG: tusdg: goto kLIPq; HT7lc: } public function index() { goto tgiyA; cjmKM: $this->load->view("\137\164\x65\155\160\x6c\141\164\145\163\x2f\x64\x61\163\x68\142\x6f\x61\x72\144\x2f\137\150\x65\141\144\x65\162", $data); goto BAJA4; BAJA4: $this->load->view("\163\x65\164\x74\x69\x6e\147\57\x64\x62"); goto TPF1e; tgiyA: $user = $this->ion_auth->user()->row(); goto klzeh; mpGdU: $data["\x74\141\x62\154\x65\x73"] = $this->db->list_tables(); goto cjmKM; jv3e1: $data["\154\151\163\x74"] = $arrFile; goto mpGdU; TPF1e: $this->load->view("\137\x74\145\x6d\160\154\x61\164\145\x73\57\x64\x61\163\x68\142\157\141\162\144\57\x5f\146\x6f\x6f\164\145\x72"); goto kJfkE; iAbHs: $arrFile = []; goto w5yRU; ruPBc: $data["\x73\x6d\164\137\141\143\x74\x69\166\x65"] = $this->dashboard->getSemesterActive(); goto F72fu; w5yRU: foreach ($list as $key => $value) { goto GyLGu; HWTQY: $tgl = filemtime("\56\x2f\x62\x61\143\x6b\x75\160\163\57" . $value); goto da5kS; oyS3S: $arrFile[$key] = ["\164\x79\160\x65" => $type, "\x6e\x61\155\x61" => $nama, "\x74\x67\x6c" => $tgl, "\163\151\x7a\145" => $size, "\x73\162\143" => $value]; goto cAEkw; GyLGu: $nfile = explode("\x2e", $value); goto e56uV; p09aG: $type = $nfile[1]; goto HWTQY; e56uV: $nama = $nfile[0]; goto p09aG; da5kS: $size = $this->formatSizeUnits(filesize("\x2e\57\x62\141\143\x6b\165\160\163\57" . $value)); goto oyS3S; cAEkw: ajcC4: goto I8nA1; I8nA1: } goto iId2r; jccE_: $data["\163\155\164"] = $this->dashboard->getSemester(); goto ruPBc; iId2r: t_2pD: goto jv3e1; klzeh: $data = ["\165\163\145\162" => $user, "\152\165\x64\x75\154" => "\x42\141\x63\x6b\x75\x70\40\144\141\x6e\40\x52\x65\163\x74\157\162\145", "\x73\165\142\152\165\x64\x75\x6c" => "\x42\x61\x63\x6b\x75\x70\x20\x53\x65\x6d\165\141\x20\x44\141\x74\x61\142\141\x73\x65\40\144\141\156\40\106\x69\154\x65", "\x70\162\157\146\x69\x6c\x65" => $this->dashboard->getProfileAdmin($user->id), "\163\x65\164\164\151\x6e\x67" => $this->dashboard->getSetting()]; goto XzJDB; XzJDB: $data["\x74\160"] = $this->dashboard->getTahun(); goto NdlVt; F72fu: $list = directory_map("\56\x2f\x62\141\143\x6b\165\x70\x73\57"); goto iAbHs; NdlVt: $data["\x74\160\x5f\141\x63\164\x69\166\x65"] = $this->dashboard->getTahunActive(); goto jccE_; kJfkE: } public function manage() { goto Jr8w0; Jr8w0: $user = $this->ion_auth->user()->row(); goto ySLFt; uZe5U: $data_tables = []; goto gEJru; EkXNP: foreach ($tables as $table) { $data_tables[$table] = $this->settings->toJSON($table); BL9b2: } goto j9Jps; UUUB1: $data["\164\x70\137\x61\143\164\x69\x76\145"] = $this->dashboard->getTahunActive(); goto DxNpE; yyRkJ: $data["\164\141\142\154\145\x73"] = $data_tables; goto BYTy1; tPSp0: $data["\x73\x6d\164\x5f\x61\143\x74\151\x76\145"] = $this->dashboard->getSemesterActive(); goto uZe5U; nJX94: $data["\164\160"] = $this->dashboard->getTahun(); goto UUUB1; j9Jps: Fvl1q: goto yyRkJ; WEI_V: $this->load->view("\x5f\164\145\155\160\154\141\164\x65\x73\57\144\141\163\150\x62\x6f\x61\162\144\57\137\x66\x6f\157\164\145\x72"); goto lUWbS; BYTy1: $this->load->view("\x5f\x74\x65\x6d\x70\154\141\x74\145\163\57\x64\141\163\150\142\157\141\162\x64\57\x5f\x68\x65\141\144\145\162", $data); goto dWE0J; DxNpE: $data["\x73\155\x74"] = $this->dashboard->getSemester(); goto tPSp0; ySLFt: $data = ["\165\163\x65\162" => $user, "\152\x75\144\x75\154" => "\x42\x65\162\x73\x69\150\153\x61\156\40\x44\141\164\x61", "\x73\x75\x62\x6a\165\x64\165\x6c" => "\x48\141\160\x75\x73\x20\x44\x61\x74\141", "\x70\x72\157\146\x69\154\x65" => $this->dashboard->getProfileAdmin($user->id), "\163\x65\x74\164\151\x6e\x67" => $this->dashboard->getSetting()]; goto nJX94; dWE0J: $this->load->view("\x73\145\164\164\151\x6e\147\x2f\155\141\x6e\141\x67\x65"); goto WEI_V; gEJru: $tables = $this->db->list_tables(); goto EkXNP; lUWbS: } public function truncate() { goto fEPVB; TTm2x: $this->output_json(["\x73\x74\141\x74\165\x73" => true]); goto F3w7y; QIZSP: $this->settings->truncate($tables); goto TTm2x; fEPVB: $tables = $this->db->list_tables(); goto QIZSP; F3w7y: } public function backupDb() { goto ghDAh; j8w45: $this->output_json(["\164\171\x70\x65" => "\144\x61\x74\x61\x62\141\163\x65", "\x6d\x65\163\x73\x61\147\x65" => "\104\x61\164\141\x62\141\x73\145\x20\x62\x65\162\x68\x61\x73\151\x6c\x20\x64\x69\142\x61\x63\x6b\x75\x70"]); goto LqeRV; ghDAh: $this->load->dbutil(); goto SoR0m; L_jgR: write_file("\56\57\x62\141\143\x6b\x75\x70\163\x2f\142\x61\x63\153\x75\x70\x2d\144\142\x2d" . date("\x59\x2d\155\55\x64\x2d\110\x2d\x69\55\163") . "\x2e\x73\x71\x6c\56\172\x69\x70", $backup); goto j8w45; SoR0m: $this->dbutil->optimize_database(); goto n5pho; Pkb10: $this->load->helper("\x66\151\x6c\x65"); goto L_jgR; n5pho: $prefs = ["\164\x61\x62\154\145\x73" => $this->db->list_tables(), "\x69\x67\x6e\x6f\162\x65" => array(), "\146\x6f\162\x6d\x61\x74" => "\x7a\x69\160", "\x66\151\x6c\145\x6e\141\x6d\x65" => "\142\x61\143\153\165\160\x2e\x73\161\x6c", "\141\144\x64\137\144\x72\157\x70" => TRUE, "\x61\144\144\x5f\151\x6e\x73\x65\x72\164" => TRUE, "\156\x65\x77\154\151\156\x65" => "\12"]; goto D7T3M; D7T3M: $backup = $this->dbutil->backup($prefs); goto Pkb10; LqeRV: } public function backupData() { goto IJ0KU; ZfigP: $this->output_json(["\164\171\x70\x65" => "\x66\151\x6c\x65", "\x6d\x65\x73\163\141\147\x65" => "\106\x69\154\145\x20\x64\141\x74\x61\x20\x62\x65\x72\x68\141\163\x69\x6c\x20\x64\x69\142\x61\143\x6b\x75\160"]); goto vMRWU; IJ0KU: $this->load->library("\x7a\151\x70"); goto i62m9; i62m9: $this->zip->read_dir("\x75\160\x6c\157\141\x64\x73"); goto qyIh0; qyIh0: $this->zip->archive("\56\57\142\141\x63\x6b\x75\160\163\57\x62\141\143\x6b\165\x70\55\146\x69\154\x65\55" . date("\131\x2d\x6d\x2d\x64\x2d\110\55\151\x2d\x73") . "\56\172\x69\x70"); goto ZfigP; vMRWU: } public function hapusBackup($src) { goto YElFi; vLXbq: $this->output_json(["\x73\164\x61\x74\165\163" => false, "\x6d\145\163\163\141\x67\x65" => "\107\141\147\141\154\x20\x6d\x65\x6e\147\150\x61\x70\x75\163\40\x62\x61\143\153\x75\160"]); goto vEVYs; uXVEt: GoWuB: goto QyxY1; fAAqK: lX4Zl: goto n7g9y; n7g9y: $this->output_json(["\x73\164\141\164\x75\163" => true, "\155\145\x73\163\141\x67\x65" => "\102\x61\x63\153\x75\160\x20\x62\x65\x72\150\x61\x73\151\154\x20\144\151\x68\141\x70\165\163"]); goto uXVEt; YElFi: if (unlink("\56\57\142\x61\143\153\x75\x70\163\57" . $src)) { goto lX4Zl; } goto vLXbq; vEVYs: goto GoWuB; goto fAAqK; QyxY1: } function formatSizeUnits($bytes) { goto T2pcT; w3Eaq: if ($bytes > 1) { goto YbazQ; } goto InIQZ; oAPqJ: goto Uvs56; goto WEsbe; Stue2: $bytes = number_format($bytes / 1024, 2) . "\40\113\x42"; goto s72nE; s72nE: goto Uvs56; goto kZKOM; WEsbe: jGgx9: goto NLOG0; kBoF6: goto Uvs56; goto y0MaZ; l5DU2: $bytes = "\60\40\142\171\x74\x65\x73"; goto TNysa; mxzsp: goto Uvs56; goto lz2rR; h87Is: if ($bytes >= 1024) { goto Mfl_k; } goto w3Eaq; TNysa: goto Uvs56; goto sWPg6; InIQZ: if ($bytes == 1) { goto jGgx9; } goto l5DU2; NLOG0: $bytes = $bytes . "\x20\x62\171\164\x65"; goto MXYQp; y0MaZ: h2w0_: goto uCYYC; eObFN: $bytes = number_format($bytes / 1073741824, 2) . "\x20\107\x42"; goto kBoF6; lz2rR: Mfl_k: goto Stue2; MXYQp: Uvs56: goto X6gVu; alrAL: $bytes = $bytes . "\40\x62\171\164\145\163"; goto oAPqJ; kZKOM: YbazQ: goto alrAL; llJvG: if ($bytes >= 1048576) { goto h2w0_; } goto h87Is; T2pcT: if ($bytes >= 1073741824) { goto KWoUm; } goto llJvG; X6gVu: return $bytes; goto jSgyQ; uCYYC: $bytes = number_format($bytes / 1048576, 2) . "\40\115\x42"; goto mxzsp; sWPg6: KWoUm: goto eObFN; jSgyQ: } }
