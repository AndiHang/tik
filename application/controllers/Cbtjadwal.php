<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 class Cbtjadwal extends CI_Controller { public function __construct() { goto UtTgM; lZGX3: $this->load->model("\103\x62\164\137\x6d\x6f\x64\145\154", "\x63\x62\x74"); goto TQ_c8; rio2x: goto mDbV4; goto muCQo; tfOTl: $this->load->model("\x4d\141\163\x74\x65\162\x5f\x6d\x6f\x64\145\x6c", "\x6d\141\163\x74\x65\x72"); goto Ym9rK; QO0Ok: $this->load->model("\104\162\157\160\144\x6f\x77\x6e\137\x6d\x6f\x64\x65\x6c", "\144\162\157\160\144\x6f\167\156"); goto Z9MxB; Fv4R2: $this->load->library(["\144\141\x74\141\x74\141\142\154\145\x73", "\146\157\x72\x6d\x5f\166\141\154\151\x64\x61\x74\x69\x6f\156"]); goto tfOTl; TQ_c8: $this->load->model("\114\157\x67\137\x6d\x6f\x64\x65\x6c", "\154\157\147\147\151\x6e\x67"); goto KJ2bf; k0NAM: MoO76: goto rio2x; s88jj: show_error("\110\x61\x6e\x79\x61\40\x41\144\x6d\151\156\151\163\164\x72\141\164\157\162\x20\x64\141\156\40\147\x75\x72\x75\x20\171\141\x6e\x67\40\x64\x69\x62\x65\162\x69\x20\150\141\153\x20\165\156\x74\165\153\x20\x6d\x65\x6e\147\141\x6b\163\x65\x73\x20\x68\141\154\141\x6d\141\x6e\40\151\156\x69\x2c\x20\74\x61\x20\150\x72\145\146\75\42" . base_url("\x64\x61\x73\150\142\x6f\x61\162\x64") . "\42\x3e\113\145\x6d\x62\x61\x6c\x69\40\153\x65\x20\x6d\145\x6e\165\40\141\167\x61\x6c\x3c\57\141\x3e", 403, "\x41\x6b\163\x65\163\40\x54\x65\162\x6c\x61\x72\141\x6e\147"); goto k0NAM; muCQo: fis6Z: goto bNBV2; HolAf: if (!(!$this->ion_auth->is_admin() && !$this->ion_auth->in_group("\x67\x75\162\x75"))) { goto MoO76; } goto s88jj; j_DCD: if (!$this->ion_auth->logged_in()) { goto fis6Z; } goto HolAf; KJ2bf: $this->load->model("\x4b\145\154\141\x73\x5f\155\157\144\x65\x6c", "\x6b\145\x6c\141\x73"); goto QO0Ok; Z9MxB: $this->form_validation->set_error_delimiters('', ''); goto aribA; bNBV2: redirect("\141\x75\164\150"); goto VEkrg; UtTgM: parent::__construct(); goto j_DCD; VEkrg: mDbV4: goto Fv4R2; Ym9rK: $this->load->model("\104\x61\x73\150\142\157\141\162\x64\x5f\x6d\x6f\x64\x65\x6c", "\144\x61\x73\x68\142\157\x61\162\x64"); goto lZGX3; aribA: } public function output_json($data, $encode = true) { goto Lsj5O; yQUnu: Ij78L: goto Bb7hZ; Bb7hZ: $this->output->set_content_type("\x61\x70\160\154\151\x63\141\x74\x69\x6f\x6e\x2f\152\x73\157\x6e")->set_output($data); goto r_wIJ; Lsj5O: if (!$encode) { goto Ij78L; } goto P90Yl; P90Yl: $data = json_encode($data); goto yQUnu; r_wIJ: } public function index() { goto UC0MK; jsOkM: $this->load->view("\x63\x62\164\x2f\x6a\x61\144\167\x61\x6c\x2f\144\x61\x74\x61"); goto G0zfC; vq_hp: $data["\162\x75\x61\156\x67\x73"] = $this->cbt->getAllRuang(); goto w0BkN; kTtuh: $data["\152\x6d\x6c\x49\x73\x74"] = []; goto r0zn2; j14N0: SnAEd: goto ae5d5; FrhYa: $smt = $this->dashboard->getSemesterActive(); goto duoJ7; Agwv6: $data["\x73\x6d\164"] = $this->dashboard->getSemester(); goto lalb4; pTd9L: $this->load->view("\x5f\164\145\x6d\160\x6c\141\x74\x65\x73\x2f\144\x61\163\x68\x62\x6f\x61\x72\144\57\137\150\145\141\x64\145\162", $data); goto yOBbI; hZx34: $tp = $this->dashboard->getTahunActive(); goto FrhYa; vOIAr: $data["\164\157\164\141\x6c\x5f\163\151\x73\x77\141"] = $this->cbt->getJadwalTerpakai(); goto TuKUW; lalb4: $data["\x73\x6d\x74\x5f\141\x63\164\x69\x76\145"] = $smt; goto Uvmbl; uhtVt: $data["\x74\x70\x5f\141\x63\x74\151\166\x65"] = $tp; goto Agwv6; YVl1z: $data["\x70\x72\157\x66\x69\x6c\x65"] = $this->dashboard->getProfileAdmin($user->id); goto QtC27; ceEDs: $data["\152\145\156\x69\163"] = $this->cbt->getAllJenisUjian(); goto sCsd1; pmzRg: $data["\142\141\156\153\163"] = $this->cbt->getAllBankSoal(); goto pTd9L; HT3bW: $level = $lvl == null ? "\60" : $lvl; goto eu7RX; FR6DU: goto SnAEd; goto u143L; DI3c6: $data["\153\x65\154\x61\163"] = $this->cbt->getKelas(); goto U_PcT; Pw80k: $this->load->view("\x6d\x65\x6d\x62\145\162\163\57\x67\165\x72\x75\57\x74\145\155\x70\154\x61\x74\x65\x73\57\x68\x65\141\x64\145\x72", $data); goto jsOkM; eu7RX: $user = $this->ion_auth->user()->row(); goto OL_q9; sCsd1: $data["\152\141\x64\167\x61\154"] = json_decode(json_encode($this->cbt->dummyJadwal())); goto DI3c6; U_PcT: $data["\154\x65\166\145\154"] = $level; goto kTtuh; Rr8ts: $nguru[$guru->id_guru] = $guru->nama_guru; goto AZHVf; r0zn2: $data["\x6a\x6d\154\115\141\160\x65\154"] = []; goto pEX8n; yOBbI: $this->load->view("\143\142\164\x2f\152\x61\x64\167\141\x6c\57\144\x61\x74\141"); goto MMkNn; OL_q9: $data = ["\165\163\145\x72" => $user, "\152\165\x64\165\154" => "\112\x61\144\x77\x61\x6c\40\x50\145\156\x69\x6c\141\151\141\x6e", "\163\x75\142\152\165\x64\165\x6c" => "\120\110\57\120\x54\x53\57\120\x41\124\57\125\x53\x42\113", "\x73\145\x74\164\x69\x6e\147" => $this->dashboard->getSetting()]; goto hZx34; TuKUW: if ($this->ion_auth->is_admin()) { goto EPULu; } goto TyKy1; Uvmbl: $mode = $this->input->get("\x6d\x6f\144\145"); goto u2c1Z; w0BkN: $data["\x73\x65\163\151\163"] = $this->dropdown->getAllSesi(); goto ceEDs; d4O0R: $data["\142\141\156\153\x73"] = $this->cbt->getAllBankSoal($guru->id_guru); goto ljRYd; QtC27: $data["\152\141\144\167\141\154\x73"] = $this->cbt->getAllDataJadwal($tp->id_tp, $smt->id_smt); goto pmzRg; MMkNn: $this->load->view("\x5f\164\x65\155\160\154\141\164\145\x73\57\144\141\163\x68\142\157\x61\x72\x64\x2f\137\146\x6f\157\164\x65\x72"); goto j14N0; TyKy1: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto Rr8ts; pEX8n: $data["\154\145\166\x65\154"] = $level; goto vOIAr; ljRYd: $data["\152\x61\144\167\141\x6c\163"] = $this->cbt->getAllDataJadwal($tp->id_tp, $smt->id_smt, $guru->id_guru); goto Pw80k; u143L: EPULu: goto YVl1z; u2c1Z: $data["\155\157\144\145"] = $mode == null ? "\x31" : $mode; goto vq_hp; UC0MK: $lvl = $this->input->get("\x6c\145\x76\x65\154", true); goto HT3bW; G0zfC: $this->load->view("\155\145\155\142\x65\x72\163\x2f\x67\x75\162\165\x2f\164\x65\155\160\154\141\164\145\163\x2f\x66\x6f\157\164\x65\162"); goto FR6DU; duoJ7: $data["\x74\160"] = $this->dashboard->getTahun(); goto uhtVt; AZHVf: $data["\x67\x75\x72\165"] = $guru; goto d4O0R; ae5d5: } public function add($id_jadwal) { goto sQxuq; WCZmp: $arrMapel = []; goto DdYKk; ZLZwM: $user = $this->ion_auth->user()->row(); goto jdeA7; RUnwO: $data["\142\x61\x6e\x6b\163"] = $this->cbt->getAllBankSoalByTp($tp->id_tp, $smt->id_smt, $guru->id_guru); goto SqUN1; YIvGJ: $data["\160\162\157\x66\x69\x6c\145"] = $this->dashboard->getProfileAdmin($user->id); goto OG7aU; EoP0H: f4tjn: goto dIJsq; hvwlv: $data["\152\145\156\x69\163"] = $this->cbt->getAllJenisUjian(); goto sL8vy; sL8vy: $data["\x6b\145\154\x61\163"] = $this->cbt->getKelas($tp->id_tp, $smt->id_smt); goto w3rqP; MzCu_: if ($this->ion_auth->is_admin()) { goto j1TnK; } goto XbnQw; NzTTN: $data["\x62\141\x6e\x6b\x73"] = $this->cbt->getAllBankSoalByTp($tp->id_tp, $smt->id_smt); goto n3toC; SqUN1: $this->load->view("\x6d\x65\x6d\142\145\x72\163\x2f\x67\165\162\x75\x2f\x74\145\155\x70\x6c\x61\x74\145\x73\57\150\x65\x61\x64\x65\x72", $data); goto poe6h; g0aR9: $data["\164\x70\x5f\141\x63\x74\151\x76\145"] = $tp; goto AcCzy; ylU_4: $data["\152\x61\144\x77\x61\x6c"] = json_decode(json_encode($this->cbt->dummyJadwal())); goto unRd3; erHoS: $data["\147\165\x72\165"] = $guru; goto jKNam; JSTKx: $smt = $this->dashboard->getSemesterActive(); goto d9ObT; zypDx: goto Lgp2r; goto PcABI; dIJsq: $data["\x6d\x61\x70\145\154"] = $arrMapel; goto RUnwO; AcCzy: $data["\x73\155\164"] = $this->dashboard->getSemester(); goto rxAFO; cz9Sp: $this->load->view("\137\164\x65\155\x70\154\141\164\x65\163\57\x64\141\x73\150\142\157\x61\162\x64\x2f\x5f\146\x6f\157\x74\145\162"); goto qeXYA; sQxuq: $enable = $this->input->get("\145\x6e\141\142\154\145", true); goto ZLZwM; poe6h: $this->load->view("\143\142\x74\57\x6a\x61\144\167\141\x6c\57\141\144\144"); goto tPnGA; rxAFO: $data["\x73\x6d\164\137\x61\x63\x74\x69\x76\x65"] = $smt; goto ErO3q; jKNam: $mapel_guru = $this->kelas->getGuruMapelKelas($guru->id_guru, $tp->id_tp, $smt->id_smt); goto Uai_e; Qb0BZ: $data["\155\x61\160\x65\x6c"] = $this->dropdown->getAllMapel(); goto NzTTN; Gm3uB: $this->load->view("\143\142\164\57\152\141\144\x77\141\x6c\57\x61\144\x64"); goto cz9Sp; ErO3q: if ($id_jadwal == 0) { goto GVmkz; } goto e6Lsz; d9ObT: $data["\x74\160"] = $this->dashboard->getTahun(); goto g0aR9; y13xZ: $gurus = $this->dropdown->getAllGuru(); goto mbjGy; TMLF8: $tp = $this->dashboard->getTahunActive(); goto JSTKx; e6Lsz: $data["\152\x61\144\x77\141\x6c"] = $this->cbt->getJadwalById($id_jadwal); goto wxsU1; mbjGy: $data["\162\x75\x61\x6e\147\163"] = $this->cbt->getAllRuang(); goto I26cY; tPnGA: $this->load->view("\x6d\145\x6d\142\145\x72\163\57\x67\165\162\x75\57\x74\145\155\x70\x6c\x61\164\x65\163\x2f\x66\157\157\164\145\162"); goto zypDx; jdeA7: $data = ["\x75\x73\145\162" => $user, "\152\165\144\x75\x6c" => $id_jadwal == 0 ? "\x54\x61\155\142\141\150\40\112\141\x64\x77\x61\x6c\40\125\x6a\151\x61\156" : "\105\x64\151\x74\40\x4a\141\144\x77\141\154\x20\125\152\x69\x61\156", "\x73\165\142\152\x75\x64\x75\x6c" => "\112\141\144\167\x61\x6c", "\x73\145\x74\164\151\x6e\147" => $this->dashboard->getSetting()]; goto TMLF8; n3toC: $this->load->view("\x5f\164\145\155\x70\154\x61\164\x65\x73\57\x64\x61\x73\150\142\x6f\x61\x72\x64\57\x5f\x68\x65\141\x64\145\162", $data); goto Gm3uB; Uai_e: $mapel = json_decode(json_encode(unserialize($mapel_guru->mapel_kelas))); goto WCZmp; wxsU1: goto ILPo0; goto c6SaD; PcABI: j1TnK: goto YIvGJ; DdYKk: foreach ($mapel as $m) { $arrMapel[$m->id_mapel] = $m->nama_mapel; sVbh0: } goto EoP0H; I26cY: $data["\163\145\163\x69\x73"] = $this->dropdown->getAllSesi(); goto hvwlv; qeXYA: Lgp2r: goto xHFUs; XbnQw: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto erHoS; OG7aU: $data["\x67\x75\x72\165"] = $gurus; goto Qb0BZ; c6SaD: GVmkz: goto ylU_4; unRd3: ILPo0: goto y13xZ; w3rqP: $data["\x64\151\163\141\142\x6c\x65\x5f\157\160\x73\x69"] = $enable != null && $enable == 1; goto MzCu_; xHFUs: } public function getBankGuru($id_guru) { goto o7Vtx; o7Vtx: $tp = $this->dashboard->getTahunActive(); goto K2hLJ; K2hLJ: $smt = $this->dashboard->getSemesterActive(); goto H3dx7; H3dx7: $this->output_json($this->cbt->getAllBankSoalByTp($tp->id_tp, $smt->id_smt, $id_guru)); goto cJAcj; cJAcj: } public function getBankMapel($id_mapel) { goto samCo; TBT5o: $this->output_json($this->cbt->getAllBankSoalByMapel($tp->id_tp, $smt->id_smt, $id_mapel)); goto DYA4n; samCo: $tp = $this->dashboard->getTahunActive(); goto VJce3; VJce3: $smt = $this->dashboard->getSemesterActive(); goto TBT5o; DYA4n: } public function saveJadwal() { goto I28Hh; uvLP9: $data["\163\165\x63\x63\145\x73\163"] = $status; goto bHYYD; KxHDy: $res = $this->cbt->saveJadwalUjian($tp->id_tp, $smt->id_smt); goto Gao1j; UUIVY: pK3SP: goto uvLP9; IGP4T: $status = FALSE; goto jFVxb; DEUtN: ulDBo: goto mAU44; q48mA: goto RWYc5; goto DEUtN; I28Hh: $tp = $this->dashboard->getTahunActive(); goto BYKoX; bHYYD: $id = $this->input->post("\151\x64\137\x6a\141\x64\167\x61\154", true); goto UXzPH; UXzPH: if (!$id) { goto ulDBo; } goto fxoO4; SHMXm: oTa0v: goto KxHDy; xsriG: $status = $res; goto UUIVY; bRqJP: $data["\x6d\145\x73\163\x61\x67\145"] = "\113\x65\163\141\154\x61\150\x61\156\40\64\60\x34"; goto IGP4T; JEG2C: RWYc5: goto wV2pp; fxoO4: $this->logging->saveLog(4, "\155\145\156\x67\x65\144\151\x74\40\x6a\141\x64\167\x61\154\40\160\145\154\141\152\x61\x72\141\x6e"); goto q48mA; BYKoX: $smt = $this->dashboard->getSemesterActive(); goto FjA_K; FjA_K: if ($this->input->post()) { goto oTa0v; } goto bRqJP; Gao1j: $data["\x6d\145\163\163\x61\147\145"] = $res ? "\x4a\141\144\167\x61\154\40\142\145\x72\150\x61\x73\x69\154\40\x64\151\163\x69\x6d\x70\141\156" : "\x4a\141\144\x77\x61\x6c\40\x73\165\x64\x61\x68\x20\x61\144\141"; goto xsriG; jFVxb: goto pK3SP; goto SHMXm; mAU44: $this->logging->saveLog(3, "\155\145\x6e\141\x6d\142\141\x68\40\152\x61\x64\167\x61\154\x20\x70\145\x6c\x61\152\141\162\141\x6e"); goto JEG2C; wV2pp: $this->output_json($data); goto RrubG; RrubG: } public function deleteJadwal() { goto iS5bh; WtIUI: $jadwal_dikerjakan = $this->cbt->getJadwalTerpakai(); goto pMv3d; dhMJT: if ($this->master->delete("\x63\142\x74\137\152\141\144\x77\x61\x6c", $id, "\151\144\137\152\141\144\167\x61\154")) { goto jbAZ6; } goto JbUOu; squmm: $data["\x73\164\141\x74\x75\x73"] = false; goto NdZOE; Xx62m: goto bV34z; goto X4te5; g9ZtM: $this->logging->saveLog(5, "\x6d\x65\x6e\147\x68\x61\x70\165\x73\40\152\141\x64\167\141\x6c\40\165\x6a\151\x61\x6e"); goto OcoDU; iS5bh: $id = $this->input->get("\x69\144\x5f\x6a\x61\144\x77\x61\154", true); goto WtIUI; HLDhG: $data["\155\145\163\163\x61\147\x65"] = "\x62\145\162\150\x61\x73\x69\154"; goto EIuaY; pseim: $hapusDurasiSiswa = $this->master->delete("\x63\142\x74\137\144\x75\162\x61\163\151\x5f\163\151\163\167\141", $id, "\151\144\137\x6a\141\144\167\141\154"); goto g9ZtM; WxrK3: $this->output_json($data); goto jXvT8; EIuaY: bV34z: goto B3OmV; TRPom: $hapusNilaiSiswa = $this->master->delete("\x63\x62\x74\137\x73\157\141\x6c\137\163\151\x73\167\x61", $id, "\151\144\137\x6a\141\x64\x77\x61\x6c"); goto pseim; v5xBu: $data["\x6d\145\163\163\x61\147\145"] = "\x4a\141\144\x77\141\154\40\125\x6a\151\x61\x6e\40\163\x65\144\141\156\147\x20\x64\151\147\x75\x6e\141\153\141\x6e"; goto Xx62m; NdZOE: $data["\x6d\145\163\x73\141\147\145"] = "\x48\x61\x73\x69\154\x20\x55\x6a\x69\141\x6e\40\x62\145\154\165\155\x20\x64\x69\162\x65\153\x61\160"; goto Uy7iu; PvvdW: $data["\x73\164\x61\164\x75\x73"] = false; goto uTRGx; rxCgD: yPD6b: goto squmm; Uy7iu: hXKCb: goto WxrK3; s1Nn7: if ($terpakai && $jadwal->rekap == 0) { goto yPD6b; } goto dhMJT; B3OmV: goto hXKCb; goto rxCgD; pMv3d: $terpakai = isset($jadwal_dikerjakan[$id]) && count($jadwal_dikerjakan[$id]) > 0; goto PvvdW; JbUOu: $data["\163\x74\141\x74\x75\x73"] = false; goto v5xBu; uTRGx: $jadwal = $this->cbt->getJadwalById($id); goto s1Nn7; X4te5: jbAZ6: goto TRPom; OcoDU: $data["\x73\164\x61\x74\x75\x73"] = $hapusNilaiSiswa && $hapusDurasiSiswa; goto HLDhG; jXvT8: } public function deleteAllJadwal() { goto O1nki; hu0LP: $jadwals = $this->cbt->getJadwalByArrId($arrId); goto rSI3N; ovLV3: $digunakan = []; goto NXvfw; Z1ILc: $data["\x64\151\147\165\x6e\141\x6b\x61\156"] = $count_terpakai; goto VPzLb; pppL0: $this->output_json($data); goto mByP5; Psbq0: $data["\x73\164\141\164\x75\163"] = false; goto mNRyo; rSI3N: $jadwal_dikerjakan = $this->cbt->getJadwalTerpakai(); goto xUBKC; yFKsb: ob_end_clean(); goto yG9MW; rQ4k5: goto Onevx; goto Iev1e; ROS_H: ob_end_clean(); goto Psbq0; yh8A_: $hapusNilaiSiswa = $this->master->delete("\143\142\x74\137\x73\x6f\141\154\x5f\163\151\163\x77\141", $arrId, "\151\144\137\152\141\x64\x77\141\x6c"); goto fdEpf; BGTGB: ob_end_clean(); goto qQwg_; ya8jj: wS8q6: goto rQ4k5; sZ_CT: if ($this->master->delete("\143\142\x74\137\152\x61\144\167\141\154", $arrId, "\151\144\x5f\x6a\x61\144\167\141\x6c")) { goto dNsOA; } goto ROS_H; ng1RE: goto wS8q6; goto eGymp; eGymp: dNsOA: goto yh8A_; yG9MW: $data["\163\x74\141\164\165\163"] = false; goto jJbhh; SyoeQ: $this->logging->saveLog(5, "\155\145\x6e\147\x68\x61\x70\x75\163\40\x6a\141\x64\167\141\x6c\x20\165\152\151\x61\x6e"); goto BGTGB; O1nki: $arrId = json_decode($this->input->post("\143\x68\145\143\x6b\145\x64", true)); goto ryd9d; Iev1e: YPFy8: goto yFKsb; fdEpf: $hapusDurasiSiswa = $this->master->delete("\x63\x62\x74\137\144\165\x72\x61\x73\x69\137\163\151\x73\x77\141", $arrId, "\151\144\137\x6a\x61\x64\167\x61\154"); goto SyoeQ; nwzGQ: $count_terpakai = array_count_values($digunakan); goto DTlf0; aaO2H: KhrOH: goto nwzGQ; NXvfw: foreach ($jadwals as $jadwal) { goto Vmk8t; IDYPp: array_push($digunakan, $terpakai); goto n7d64; Vmk8t: $terpakai = isset($jadwal_dikerjakan[$jadwal->id_jadwal]) && count($jadwal_dikerjakan[$jadwal->id_jadwal]) > 0 ? 1 : 0; goto vYmmr; n7d64: tADjA: goto nUJbC; vYmmr: array_push($backuped, $jadwal->rekap); goto IDYPp; nUJbC: } goto aaO2H; v0MA7: if ($count_terpakai[1] > 0 && $counts[0] > 0) { goto YPFy8; } goto sZ_CT; xUBKC: $backuped = []; goto ovLV3; tVMpe: Onevx: goto Z1ILc; DTlf0: $counts = array_count_values($backuped); goto v0MA7; mNRyo: $data["\x6d\x65\x73\x73\141\x67\x65"] = "\x4a\141\144\x77\141\x6c\40\125\152\x69\141\156\40\163\145\x64\141\156\x67\x20\x64\x69\x67\x75\156\141\x6b\141\156"; goto ng1RE; jJbhh: $data["\155\x65\x73\163\141\147\x65"] = "\x48\141\x73\x69\x6c\40\125\152\151\x61\156\40\x62\145\154\165\155\40\x64\x69\x72\145\x6b\141\160"; goto tVMpe; qQwg_: $data["\x73\x74\141\x74\x75\x73"] = $hapusNilaiSiswa && $hapusDurasiSiswa; goto AsLu5; VPzLb: $data["\142\141\143\x6b\x75\160"] = $counts; goto pppL0; AsLu5: $data["\x6d\x65\x73\163\x61\x67\145"] = "\x62\x65\162\150\141\163\151\x6c"; goto ya8jj; ryd9d: ob_start(); goto hu0LP; mByP5: } }
