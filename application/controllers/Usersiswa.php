<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\x42\101\123\x45\120\101\x54\x48") or exit("\116\x6f\x20\144\151\162\x65\x63\164\40\x73\x63\162\151\160\x74\x20\x61\x63\x63\145\163\x73\x20\141\x6c\x6c\x6f\167\145\x64"); class Usersiswa extends CI_Controller { public function __construct() { goto r1aHy; EYN6U: qDEC3: goto rld6p; Su6Up: $this->load->model("\125\163\145\x72\x73\137\x6d\x6f\x64\145\154", "\x75\163\145\162\163"); goto tpCNy; tpCNy: $this->load->model("\115\x61\163\x74\x65\162\137\155\x6f\x64\x65\x6c", "\x6d\141\163\x74\145\x72"); goto wUBuK; rld6p: $this->load->library(["\144\x61\164\x61\164\141\142\154\145\163", "\x66\x6f\162\x6d\x5f\166\x61\154\151\x64\141\164\x69\157\x6e"]); goto Su6Up; UyYIe: redirect("\141\x75\x74\150"); goto EYN6U; r1aHy: parent::__construct(); goto Tu49o; Ak4mE: $this->form_validation->set_error_delimiters('', ''); goto DMsmo; wUBuK: $this->load->model("\x44\x61\163\x68\x62\157\x61\162\x64\137\155\157\144\x65\154", "\x64\141\x73\x68\x62\157\x61\162\x64"); goto Ak4mE; Tu49o: if ($this->ion_auth->logged_in()) { goto qDEC3; } goto UyYIe; DMsmo: } public function is_has_access() { goto mVnFe; g333N: show_error("\x48\x61\x6e\171\141\x20\101\144\x6d\151\x6e\x69\x73\x74\162\141\164\157\162\x20\x79\x61\156\x67\40\x64\x69\142\145\x72\151\40\x68\141\x6b\40\x75\156\x74\x75\x6b\40\x6d\x65\x6e\x67\x61\x6b\x73\x65\x73\x20\x68\141\154\141\155\141\x6e\40\x69\156\151\x2c\x20\74\141\x20\150\162\145\x66\75\x22" . base_url("\x64\x61\163\x68\x62\x6f\x61\x72\x64") . "\42\76\113\145\x6d\x62\x61\x6c\151\x20\153\145\x20\x6d\145\x6e\x75\x20\141\x77\x61\x6c\x3c\57\x61\76", 403, "\x41\153\163\x65\163\40\x54\x65\x72\x6c\x61\x72\x61\156\x67"); goto bzjRp; IltgR: if (!(!$group === "\x61\144\155\x69\156" or !$group === "\147\x75\x72\165")) { goto zicDZ; } goto g333N; VsmXp: $group = $this->ion_auth->get_users_groups($user_id)->row()->name; goto IltgR; mVnFe: $user_id = $this->ion_auth->user()->row()->id; goto VsmXp; bzjRp: zicDZ: goto jzD5N; jzD5N: } public function output_json($data, $encode = true) { goto TxV3D; KJnQm: $this->output->set_content_type("\x61\160\x70\x6c\151\143\x61\x74\x69\157\x6e\x2f\152\163\x6f\156")->set_output($data); goto xjsZ0; KBMyh: iM1dl: goto KJnQm; ZFIy0: $data = json_encode($data); goto KBMyh; TxV3D: if (!$encode) { goto iM1dl; } goto ZFIy0; xjsZ0: } public function data() { goto HrlMv; LTEdE: $tp = $this->dashboard->getTahunActive(); goto ugW1M; ugW1M: $smt = $this->dashboard->getSemesterActive(); goto YXwdG; YXwdG: $this->output_json($this->users->getUserSiswa($tp->id_tp, $smt->id_smt), false); goto G39iW; HrlMv: $this->is_has_access(); goto LTEdE; G39iW: } public function index() { goto DUDzb; rWgA4: $this->load->view("\165\163\x65\162\163\57\163\151\163\167\141\57\x64\x61\164\141"); goto tZtbX; tZtbX: $this->load->view("\137\164\x65\155\160\x6c\141\164\145\163\57\144\x61\x73\150\x62\157\141\162\144\x2f\137\146\x6f\x6f\x74\x65\162"); goto dCCWh; k9CRR: $data["\x74\x70\137\x61\143\164\151\x76\145"] = $this->dashboard->getTahunActive(); goto AhbUY; L817i: $user = $this->ion_auth->user()->row(); goto x4f3Z; EQCeK: $data["\164\x70"] = $this->dashboard->getTahun(); goto k9CRR; AhbUY: $data["\x73\155\164"] = $this->dashboard->getSemester(); goto G4HlQ; DUDzb: $this->is_has_access(); goto L817i; x4f3Z: $data = ["\165\x73\145\162" => $user, "\x6a\x75\x64\x75\154" => "\x55\163\145\162\x20\115\141\156\x61\147\145\155\145\x6e\x74", "\x73\165\x62\x6a\165\144\165\x6c" => "\104\x61\x74\141\x20\125\x73\145\162\x20\x53\x69\163\167\141", "\160\x72\157\146\151\154\x65" => $this->dashboard->getProfileAdmin($user->id), "\x73\x65\164\164\151\156\x67" => $this->dashboard->getSetting()]; goto EQCeK; fe648: $this->load->view("\x5f\164\x65\155\x70\154\141\x74\x65\x73\x2f\x64\x61\163\x68\142\x6f\141\x72\x64\x2f\x5f\x68\x65\x61\x64\x65\162", $data); goto rWgA4; G4HlQ: $data["\163\x6d\164\137\141\x63\164\151\x76\x65"] = $this->dashboard->getSemesterActive(); goto fe648; dCCWh: } public function list() { goto QElqh; slEGJ: $smt = $this->dashboard->getSemesterActive(); goto jlyqs; tDWiG: $data = ["\154\x69\163\164\163" => $lists, "\164\x6f\164\141\x6c" => $count_siswa, "\x70\141\x67\145\x73" => ceil($count_siswa / $limit), "\x73\x65\x61\x72\x63\150" => $search, "\x70\145\x72\160\x61\147\x65" => $limit]; goto jnGiW; jlyqs: $count_siswa = $this->users->getUserSiswaTotalPage($search); goto FLk98; FLk98: $lists = $this->users->getUserSiswaPage($tp->id_tp, $smt->id_smt, $offset, $limit, $search); goto tDWiG; TmG3Z: $offset = ($page - 1) * $limit; goto ifR42; QElqh: $page = $this->input->post("\x70\141\147\x65", true); goto Pb_h1; jnGiW: $this->output_json($data); goto UXjdl; ifR42: $tp = $this->dashboard->getTahunActive(); goto slEGJ; yblAx: $search = $this->input->post("\x73\145\141\162\x63\x68", true); goto TmG3Z; Pb_h1: $limit = $this->input->post("\x6c\x69\x6d\x69\x74", true); goto yblAx; UXjdl: } private function registerSiswa($username, $password, $email, $additional_data, $group) { goto NAFSx; NAFSx: $reg = $this->ion_auth->register($username, $password, $email, $additional_data, $group); goto P3ZNp; wBAxA: if (!($reg == false)) { goto bLAKU; } goto u19uP; P3ZNp: $data["\x73\x74\141\164\165\x73"] = true; goto st00M; u19uP: $data["\x73\164\x61\x74\x75\163"] = false; goto tNMat; st00M: $data["\151\144"] = $reg; goto wBAxA; TTqeP: return $data; goto W5V90; tNMat: bLAKU: goto TTqeP; W5V90: } public function activate($id) { goto y2GPP; yLnWy: $deleted = $this->ion_auth->delete_user($user_siswa->id); goto I0OaM; uOsLl: baEv1: goto GMrNF; mvC28: $username = trim($siswa->username); goto OGaBx; p27Ke: $data = ["\x73\164\141\164\165\163" => false, "\x6d\x73\147" => "\x41\x6b\x75\x6e\40\163\x69\x73\x77\141\x20\x74\x69\x64\141\153\x20\x74\145\x72\163\145\x64\151\141\40\x28\163\x75\x64\x61\150\40\x64\x69\147\165\x6e\141\x6b\141\156\51\x2e"]; goto HsKsZ; y2GPP: $siswa = $this->users->getDataSiswa($id); goto vQTJG; B2tgg: $data = ["\163\164\x61\x74\165\163" => $reg, "\155\x73\147" => !$reg ? "\101\x6b\x75\156\40" . $siswa->nama . "\40\x67\x61\147\141\x6c\40\144\x69\141\x6b\x74\x69\146\x6b\x61\x6e\56" : "\x41\153\x75\x6e\x20" . $siswa->nama . "\x20\x64\151\x61\x6b\x74\x69\146\x6b\141\x6e\x2e"]; goto uOsLl; nm8Cp: $email = $siswa->nis . "\x40\163\151\x73\x77\141\56\143\157\x6d"; goto Lagqt; vQTJG: $nama = explode("\40", $siswa->nama); goto S6fTe; S6wfD: $reg = $this->registerSiswa($username, $password, $email, $additional_data, $group); goto B2tgg; zxY5j: $group = array("\x33"); goto hprb5; aFvPF: $deleted = true; goto oggLI; F5LHm: DzHeZ: goto S6wfD; GMrNF: $this->output_json($data); goto XTwnX; S6fTe: $first_name = $nama[0]; goto FE1m7; HsKsZ: goto baEv1; goto F5LHm; hprb5: $user_siswa = $this->db->get_where("\165\x73\145\x72\x73", "\145\x6d\141\151\154\75\x22" . $email . "\42")->row(); goto aFvPF; oggLI: if (!($user_siswa != null)) { goto Ausvz; } goto yLnWy; I0OaM: Ausvz: goto GMah9; OGaBx: $password = trim($siswa->password); goto nm8Cp; GMah9: if ($deleted) { goto DzHeZ; } goto p27Ke; FE1m7: $last_name = end($nama); goto mvC28; Lagqt: $additional_data = ["\146\151\162\163\x74\x5f\x6e\x61\x6d\x65" => $first_name, "\154\141\x73\x74\137\156\x61\155\x65" => $last_name]; goto zxY5j; XTwnX: } public function deactivate($id, $nama) { goto dk0Ip; ZYJ5Y: $deleted = $this->ion_auth->delete_user($id); goto b5wK_; dk0Ip: if (!$this->ion_auth->logged_in() || !$this->ion_auth->is_admin()) { goto Y0EpD; } goto u4ixt; IB2mw: sHRkw: goto ZYJ5Y; Q1Gsu: if ($this->ion_auth->logged_in() && $this->ion_auth->is_admin()) { goto sHRkw; } goto KD1C4; b5wK_: $data = ["\163\164\x61\164\x75\163" => $deleted, "\x6d\x73\x67" => $deleted ? "\x53\151\x73\167\141\x20" . urldecode($nama) . "\40\144\x69\x6e\157\x6e\141\x6b\164\x69\x66\153\141\156\56" : "\x53\151\x73\x77\141\x20" . urldecode($nama) . "\40\147\141\x67\x61\x6c\x20\x64\151\156\x6f\x6e\141\153\x74\151\x66\x6b\141\156\x2e"]; goto kz1Uw; OClzt: goto Utqut; goto IB2mw; aLPlR: K0yNm: goto C7z0H; C7z0H: $this->output_json($data, true); goto G0gdI; qgNnN: goto K0yNm; goto DOS7n; KD1C4: $data = ["\163\164\141\164\x75\163" => false, "\155\x73\147" => "\x41\x6e\x64\141\40\x62\x75\x6b\141\x6e\40\x61\x64\155\x69\x6e\56"]; goto OClzt; YcAJo: $data = ["\163\164\141\164\x75\x73" => false, "\x6d\x73\x67" => "\131\x6f\165\x20\x6d\165\x73\164\x20\x62\145\40\x61\x6e\40\141\x64\155\151\x6e\x69\163\x74\x72\141\x74\x6f\x72\x20\x74\x6f\40\x76\x69\x65\x77\x20\164\x68\x69\x73\x20\160\141\x67\x65\x2e"]; goto aLPlR; u4ixt: $id = (int) $id; goto Q1Gsu; kz1Uw: Utqut: goto qgNnN; DOS7n: Y0EpD: goto YcAJo; G0gdI: } public function aktifkanSemua() { goto p_Wrj; o35wE: $jum = 0; goto dzvoL; QawdA: $data = ["\x73\x74\141\164\x75\x73" => true, "\152\x75\x6d\154\x61\150" => $jum, "\155\163\x67" => $jum . "\x20\163\151\x73\167\141\40\x64\x69\x61\x6b\x74\x69\x66\x6b\x61\156\x2e"]; goto WJ3m2; dzvoL: foreach ($siswaAktif as $siswa) { goto Xh_MR; r2hqa: goto HOMBL; goto t7Bz2; t7Bz2: IdPcj: goto FFMT2; auRXE: HOMBL: goto U4aMU; FFMT2: goto YY7MS; goto auRXE; Nik3j: YY7MS: goto unRgN; Xh_MR: if ($siswa->id != null) { goto IdPcj; } goto W6Uq5; U4aMU: $jum += 1; goto Nik3j; W6Uq5: $this->activate($siswa->id_siswa); goto r2hqa; unRgN: } goto mNwsB; p_Wrj: $ids = $this->input->post("\x69\x64\163", true); goto THt8n; WJ3m2: $this->output_json($data); goto IgsuD; mNwsB: h3qP4: goto QawdA; THt8n: $siswaAktif = $this->users->getSiswaAktif($ids); goto o35wE; IgsuD: } public function nonaktifkanSemua() { goto LF0xs; LF0xs: $ids = $this->input->post("\151\144\x73", true); goto EnqBO; ko2zy: $data = ["\163\x74\x61\x74\x75\163" => true, "\x6a\165\155\x6c\x61\x68" => $jum, "\x6d\x73\x67" => $jum . "\x20\163\x69\163\x77\141\x20\144\151\156\x6f\156\141\x6b\164\x69\x66\x6b\141\x6e\x2e"]; goto ng8NF; EnqBO: $siswaAktif = $this->users->getSiswaAktif($ids); goto JXrwJ; ng8NF: $this->output_json($data); goto t8uVD; NGVec: TDOjI: goto ko2zy; JXrwJ: $jum = 0; goto foC0u; foC0u: foreach ($siswaAktif as $siswa) { goto CUPqJ; GtceZ: $this->output_json($del); goto zlnwj; IKt1g: G0Xf0: goto ACErC; rAG5g: goto DLL6e; goto dNHEy; dNHEy: kYuFJ: goto WKdvB; CUPqJ: if ($siswa->id != null) { goto kYuFJ; } goto ueeKa; zlnwj: DLL6e: goto SC_EM; ueeKa: goto G0Xf0; goto rAG5g; SC_EM: $jum += 1; goto IKt1g; WKdvB: $del = $this->deactivate($siswa->id, ''); goto GtceZ; ACErC: } goto NGVec; t8uVD: } public function edit($id) { goto u4AJQ; PsakT: $data["\x73\155\164"] = $this->dashboard->getSemester(); goto Y4iZP; TIXW9: $user = $this->ion_auth->user()->row(); goto F_3BU; kHE_e: $this->load->view("\137\164\x65\155\160\x6c\141\164\145\163\57\144\141\x73\150\142\x6f\x61\x72\144\57\x5f\146\x6f\x6f\164\x65\x72"); goto jhE5W; OI5Fg: $data["\x74\160\137\141\143\x74\x69\x76\145"] = $tp; goto PsakT; qLGSZ: $data["\160\x72\157\146\151\154\145"] = $this->dashboard->getProfileAdmin($user->id); goto qXbcZ; c6QPQ: $siswa = $this->master->getDataSiswaById($tp->id_tp, $smt->id_smt, $id); goto TIXW9; nq_s5: $this->load->view("\x75\163\145\162\x73\57\163\151\163\x77\x61\x2f\x65\x64\151\x74"); goto cLGFh; ZtRw4: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto cudU6; u4AJQ: $tp = $this->dashboard->getTahunActive(); goto CAxZC; cudU6: $data["\147\x75\x72\x75"] = $guru; goto nd9PL; cqEMx: if ($this->ion_auth->is_admin()) { goto je6xC; } goto ZtRw4; a6v_H: je6xC: goto qLGSZ; CAxZC: $smt = $this->dashboard->getSemesterActive(); goto c6QPQ; YN83s: $data["\x74\160"] = $this->dashboard->getTahun(); goto OI5Fg; qXbcZ: $this->load->view("\x5f\164\145\x6d\160\154\x61\x74\x65\x73\x2f\x64\x61\163\x68\x62\x6f\141\x72\144\x2f\137\150\145\141\x64\x65\162", $data); goto x0PhC; Y4iZP: $data["\x73\x6d\164\137\x61\x63\164\x69\166\x65"] = $smt; goto cqEMx; x0PhC: $this->load->view("\x75\x73\x65\162\163\57\x73\x69\x73\167\x61\x2f\x65\x64\x69\164"); goto kHE_e; cLGFh: $this->load->view("\155\145\155\142\145\x72\x73\x2f\147\x75\x72\165\57\164\145\x6d\160\154\141\x74\x65\x73\57\146\x6f\157\164\145\x72"); goto kGwIz; F_3BU: $data = ["\165\163\145\x72" => $user, "\x6a\165\144\165\154" => "\x55\163\145\162\40\115\x61\156\141\x67\x65\155\145\x6e\164", "\x73\x75\x62\x6a\165\x64\165\154" => "\x45\x64\151\x74\x20\104\x61\164\x61\x20\x55\163\x65\x72", "\x73\145\164\164\151\156\147" => $this->dashboard->getSetting()]; goto iWGY7; kGwIz: goto PnUQy; goto a6v_H; jhE5W: PnUQy: goto SthzW; nd9PL: $this->load->view("\155\x65\x6d\x62\145\x72\163\x2f\x67\165\162\165\57\164\145\155\160\x6c\141\x74\x65\x73\x2f\150\x65\x61\x64\x65\x72", $data); goto nq_s5; iWGY7: $data["\163\x69\163\x77\x61"] = $siswa; goto YN83s; SthzW: } public function update() { goto k4ZCI; TzPS5: $this->form_validation->set_rules("\157\154\144", "\x50\141\x73\163\167\x6f\x72\144\40\114\141\x6d\141", "\162\145\161\165\151\162\145\144\x7c\156\165\x6d\145\162\x69\143\x7c\x74\162\151\x6d\x7c\155\151\x6e\x5f\x6c\145\x6e\147\164\150\x5b\66\x5d"); goto Td8FG; fRP3W: $this->form_validation->set_rules("\x75\163\145\162\156\x61\155\145", "\125\163\x65\x72\x6e\141\155\x65", "\162\x65\x71\165\x69\162\x65\x64\174\156\x75\x6d\x65\x72\x69\143\174\x74\162\151\x6d\x7c\155\x69\156\x5f\x6c\145\156\147\x74\x68\133\x36\x5d\x7c\151\x73\137\x75\156\x69\x71\x75\145\x5b\x6d\141\163\x74\x65\162\x5f\163\151\x73\167\141\x2e\165\x73\145\x72\156\141\155\x65\135"); goto TzPS5; Td8FG: $this->form_validation->set_rules("\x6e\145\167", "\x50\x61\163\163\x77\x6f\162\144\x20\x42\141\x72\165", "\162\145\x71\x75\x69\162\145\144\x7c\x6e\165\155\x65\x72\x69\x63\x7c\x74\x72\151\155\174\155\151\156\137\x6c\145\x6e\x67\x74\x68\x5b\66\x5d"); goto xg7CW; alZut: $oldPass = $this->input->post("\x6f\154\144", true); goto voaNe; k4ZCI: $id_siswa = $this->input->post("\x69\144\x5f\163\151\163\167\x61", true); goto KCRV0; voaNe: $newPass = $this->input->post("\156\145\x77", true); goto fRP3W; KCRV0: $username = $this->input->post("\x75\163\145\x72\156\x61\155\x65", true); goto alZut; xg7CW: } public function change_password() { goto YFAEO; wMiYg: goto bFX7C; goto ipD9q; zahDt: $this->form_validation->set_rules("\x6e\x65\167", $this->lang->line("\x63\150\141\x6e\x67\x65\x5f\x70\x61\x73\163\x77\157\x72\x64\x5f\x76\x61\x6c\x69\x64\x61\164\x69\157\x6e\137\x6e\x65\167\137\160\141\163\163\167\157\x72\144\137\154\141\142\145\154"), "\x72\x65\161\165\151\162\x65\x64\x7c\155\x69\156\137\154\145\156\x67\x74\x68\x5b" . $this->config->item("\155\151\156\x5f\160\x61\163\163\167\x6f\162\144\137\154\x65\156\147\164\x68", "\151\157\156\x5f\141\165\x74\x68") . "\x5d\174\155\x61\164\143\150\145\163\x5b\156\x65\x77\137\143\157\156\146\x69\x72\155\x5d"); goto N20za; HrMKn: $this->output_json($data); goto V2nTN; ipD9q: Vc760: goto c61V8; YFAEO: $this->form_validation->set_rules("\x6f\x6c\x64", $this->lang->line("\x63\150\141\156\147\x65\x5f\x70\x61\163\x73\167\157\162\144\137\x76\x61\x6c\151\x64\x61\x74\151\x6f\x6e\137\157\154\x64\137\x70\141\x73\163\x77\x6f\x72\144\x5f\154\141\x62\x65\x6c"), "\162\x65\x71\x75\151\x72\145\x64"); goto zahDt; LrjJs: $identity = $this->session->userdata("\151\x64\145\156\164\x69\164\171"); goto ZdH1_; c61V8: $data["\163\x74\x61\164\165\163"] = true; goto RP1FL; Mi89r: if ($change) { goto Vc760; } goto S63S4; LySFJ: AJWFZ: goto HrMKn; N20za: $this->form_validation->set_rules("\x6e\x65\167\x5f\x63\x6f\156\x66\x69\x72\155", $this->lang->line("\143\150\141\156\x67\145\137\x70\x61\x73\163\167\x6f\x72\x64\x5f\x76\141\154\x69\x64\x61\x74\x69\x6f\156\137\x6e\145\x77\x5f\160\141\x73\x73\167\157\x72\144\137\x63\x6f\156\146\151\162\155\x5f\x6c\x61\142\145\154"), "\x72\145\161\165\151\x72\145\x64"); goto qQtGq; jRrnQ: $data = ["\163\x74\141\164\165\163" => false, "\x65\x72\162\157\162\x73" => ["\157\x6c\x64" => form_error("\x6f\x6c\x64"), "\x6e\145\x77" => form_error("\156\145\167"), "\156\x65\167\x5f\x63\157\x6e\146\x69\x72\155" => form_error("\x6e\x65\167\137\143\157\156\x66\151\x72\155")]]; goto LySFJ; qQtGq: if ($this->form_validation->run() === FALSE) { goto hQkR4; } goto LrjJs; RP1FL: bFX7C: goto fJ7kl; DXtgg: hQkR4: goto jRrnQ; fJ7kl: goto AJWFZ; goto DXtgg; S63S4: $data = ["\x73\x74\x61\x74\165\163" => false, "\x6d\163\x67" => $this->ion_auth->errors()]; goto wMiYg; ZdH1_: $change = $this->ion_auth->change_password($identity, $this->input->post("\x6f\154\x64"), $this->input->post("\x6e\145\x77")); goto Mi89r; V2nTN: } public function delete($id) { goto QLYUK; Uvg2m: $this->output_json($data); goto bccKl; xv3g6: $data["\x73\164\x61\164\165\x73"] = $this->ion_auth->delete_user($id) ? true : false; goto Uvg2m; QLYUK: $this->is_has_access(); goto xv3g6; bccKl: } private function hash_password($password) { goto KBrpV; vpWd2: return FALSE; goto z1F4X; PpChW: return password_hash($password, PASSWORD_BCRYPT); goto WfiHQ; z1F4X: qTWhn: goto PpChW; KBrpV: if (!(empty($password) || strpos($password, "\0") !== FALSE || strlen($password) > 4096)) { goto qTWhn; } goto vpWd2; WfiHQ: } }
