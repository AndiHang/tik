<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\x42\x41\123\105\x50\x41\x54\x48") or exit("\x4e\157\x20\x64\x69\x72\145\143\x74\40\163\x63\162\151\x70\x74\x20\141\x63\143\x65\x73\163\40\x61\154\x6c\157\167\x65\x64"); class Usersiswa extends CI_Controller { public function __construct() { goto Dpf3U; MUup5: $this->form_validation->set_error_delimiters('', ''); goto i81ld; hru3X: $this->load->model("\115\141\x73\x74\145\162\137\155\x6f\x64\145\x6c", "\x6d\141\163\164\145\x72"); goto qW0Ny; Dpf3U: parent::__construct(); goto NwHrV; BXepk: $this->load->model("\x55\163\145\x72\163\x5f\x6d\157\144\145\154", "\165\163\145\x72\x73"); goto hru3X; j5Lh6: vdECe: goto M4iYU; NwHrV: if ($this->ion_auth->logged_in()) { goto vdECe; } goto A3_BZ; qW0Ny: $this->load->model("\x44\141\163\150\x62\157\x61\x72\x64\x5f\x6d\157\144\145\154", "\144\x61\163\150\x62\x6f\x61\162\144"); goto MUup5; A3_BZ: redirect("\141\x75\164\150"); goto j5Lh6; M4iYU: $this->load->library(["\x64\x61\164\x61\x74\141\142\154\x65\x73", "\146\157\x72\155\x5f\x76\x61\x6c\x69\x64\141\164\151\157\x6e"]); goto BXepk; i81ld: } public function is_has_access() { goto MBQGw; kMWyG: if (!(!$group === "\141\144\155\x69\156" or !$group === "\147\x75\x72\x75")) { goto DjJwS; } goto cBn2b; lEETy: $group = $this->ion_auth->get_users_groups($user_id)->row()->name; goto kMWyG; zMuNu: DjJwS: goto kX3kV; cBn2b: show_error("\110\141\156\171\x61\x20\x41\144\x6d\x69\156\151\x73\x74\162\141\164\x6f\x72\x20\x79\141\x6e\147\40\x64\151\x62\x65\162\151\40\x68\141\153\x20\165\x6e\x74\x75\x6b\40\x6d\x65\x6e\147\141\x6b\x73\x65\x73\40\x68\x61\x6c\141\x6d\141\156\40\151\x6e\x69\54\x20\74\x61\40\150\x72\x65\x66\75\x22" . base_url("\x64\x61\x73\150\x62\x6f\141\x72\x64") . "\42\x3e\113\x65\155\142\x61\154\151\x20\153\145\x20\155\x65\x6e\x75\x20\x61\167\x61\154\x3c\57\x61\76", 403, "\x41\x6b\x73\x65\x73\40\124\x65\x72\x6c\x61\162\x61\x6e\x67"); goto zMuNu; MBQGw: $user_id = $this->ion_auth->user()->row()->id; goto lEETy; kX3kV: } public function output_json($data, $encode = true) { goto XTmQg; RLFAd: $this->output->set_content_type("\x61\x70\x70\x6c\151\x63\141\164\151\157\156\x2f\152\163\157\156")->set_output($data); goto CgZln; ePlpc: qB3sd: goto RLFAd; XTmQg: if (!$encode) { goto qB3sd; } goto vXk9s; vXk9s: $data = json_encode($data); goto ePlpc; CgZln: } public function data() { goto dN6Cd; XfEkA: $this->output_json($this->users->getUserSiswa($tp->id_tp, $smt->id_smt), false); goto f0SYq; dN6Cd: $this->is_has_access(); goto n5KDn; r1idq: $smt = $this->dashboard->getSemesterActive(); goto XfEkA; n5KDn: $tp = $this->dashboard->getTahunActive(); goto r1idq; f0SYq: } public function index() { goto FRiSJ; sh1V0: $data["\164\x70\x5f\x61\x63\164\151\166\x65"] = $this->dashboard->getTahunActive(); goto xjKPw; rebNY: $this->load->view("\165\x73\x65\162\163\57\x73\x69\163\167\141\57\144\141\x74\141"); goto qWuru; Fpa5X: $data["\163\155\164\x5f\x61\x63\x74\151\166\x65"] = $this->dashboard->getSemesterActive(); goto wgEHt; wgEHt: $this->load->view("\137\164\145\x6d\160\154\x61\164\145\163\57\144\x61\x73\150\x62\157\x61\x72\144\57\137\150\145\x61\144\145\x72", $data); goto rebNY; WJgfT: $user = $this->ion_auth->user()->row(); goto HSSob; HSSob: $data = ["\165\x73\145\162" => $user, "\152\x75\x64\x75\154" => "\x55\163\x65\x72\40\x4d\141\156\141\147\145\155\x65\156\164", "\x73\x75\142\x6a\165\x64\x75\x6c" => "\104\141\x74\141\40\x55\x73\x65\x72\40\123\151\x73\x77\x61", "\x70\x72\x6f\x66\151\154\x65" => $this->dashboard->getProfileAdmin($user->id), "\163\145\164\164\151\x6e\x67" => $this->dashboard->getSetting()]; goto S6nn5; xjKPw: $data["\x73\x6d\x74"] = $this->dashboard->getSemester(); goto Fpa5X; FRiSJ: $this->is_has_access(); goto WJgfT; S6nn5: $data["\x74\x70"] = $this->dashboard->getTahun(); goto sh1V0; qWuru: $this->load->view("\137\164\x65\x6d\160\154\x61\x74\145\163\x2f\x64\141\163\150\142\x6f\141\162\144\x2f\137\146\x6f\157\164\145\162"); goto Wjxql; Wjxql: } private function registerSiswa($username, $password, $email, $additional_data, $group) { goto ok_L4; lwkft: CCbG_: goto oS2tz; ok_L4: $reg = $this->ion_auth->register($username, $password, $email, $additional_data, $group); goto hNElD; YJo4F: $data["\163\164\x61\x74\x75\163"] = false; goto lwkft; oS2tz: return $data; goto cGnmr; hNElD: $data["\x73\164\141\164\165\163"] = true; goto SfDBi; YkPAl: if (!($reg == false)) { goto CCbG_; } goto YJo4F; SfDBi: $data["\x69\x64"] = $reg; goto YkPAl; cGnmr: } public function activate($id) { goto ZY70l; VDUGG: bYhfx: goto pflz_; pUFH9: $reg = $this->registerSiswa($username, $password, $email, $additional_data, $group); goto siBrn; qNRYf: $password = trim($siswa->password); goto PkKXw; FIJqq: FDEAn: goto FaMAF; BHh02: if ($this->ion_auth->email_check($email)) { goto DP6JW; } goto pUFH9; Ypb9X: $data["\160\141\x73\163"] = $password; goto d5oMI; j4wuJ: $group = array("\63"); goto exfad; XHIVo: goto FDEAn; goto fUXmd; PtEO0: $first_name = $nama[0]; goto vKjIX; pflz_: $data = ["\x73\164\x61\x74\165\163" => false, "\155\163\147" => "\125\163\145\x72\156\x61\x6d\x65\40" . $username . "\40\x74\151\x64\141\x6b\x20\164\145\x72\x73\145\x64\x69\141\40\50\163\165\x64\x61\150\40\x64\151\x67\165\x6e\141\153\x61\156\51\x2e"]; goto iDPzG; UZdE1: $additional_data = ["\146\x69\162\163\x74\137\x6e\141\155\145" => $first_name, "\x6c\x61\163\x74\x5f\x6e\141\x6d\145" => $last_name]; goto j4wuJ; d5oMI: $this->output_json($data); goto eIU6O; PkKXw: $email = $siswa->nis . "\100\x73\x69\163\167\141\56\143\157\x6d"; goto UZdE1; ZY70l: $siswa = $this->users->getDataSiswa($id); goto U9fIo; U9fIo: $nama = explode("\40", $siswa->nama); goto PtEO0; siBrn: $data = ["\163\164\x61\x74\x75\163" => $reg, "\155\x73\147" => !$reg ? "\x41\153\x75\156\x20" . $siswa->nama . "\x20\147\x61\x67\x61\154\40\x64\x69\x61\x6b\x74\151\x66\153\141\156\x2e" : "\x41\153\165\156\40" . $siswa->nama . "\x20\144\151\141\153\x74\151\146\x6b\x61\x6e\56"]; goto XHIVo; M6Lhf: $username = trim($siswa->username); goto qNRYf; iDPzG: r0Nn7: goto Ypb9X; exfad: if ($this->ion_auth->username_check($username)) { goto bYhfx; } goto BHh02; KsBuo: $data = ["\x73\x74\141\x74\165\163" => false, "\x6d\163\147" => "\x45\155\x61\151\x6c\x20" . $email . "\40\x74\x69\144\141\153\x20\x74\145\162\163\145\144\151\141\40\x28\x73\x75\144\x61\x68\x20\144\151\147\165\156\x61\153\141\x6e\x29\56"]; goto FIJqq; vKjIX: $last_name = end($nama); goto M6Lhf; fUXmd: DP6JW: goto KsBuo; FaMAF: goto r0Nn7; goto VDUGG; eIU6O: } public function deactivate($id, $nama) { goto CHUxN; npcgq: $deleted = $this->ion_auth->delete_user($id); goto H8uYU; wdoKS: if ($this->ion_auth->logged_in() && $this->ion_auth->is_admin()) { goto aG5Sd; } goto koUsN; xl0oG: $id = (int) $id; goto wdoKS; CHUxN: if (!$this->ion_auth->logged_in() || !$this->ion_auth->is_admin()) { goto S92pD; } goto xl0oG; Y2Vpk: S92pD: goto QhT0L; QhT0L: $data = ["\x73\164\141\164\x75\163" => false, "\155\163\147" => "\131\x6f\x75\40\155\165\163\164\x20\142\145\x20\141\x6e\x20\141\144\155\x69\156\x69\x73\x74\162\141\x74\157\x72\40\x74\157\40\166\151\145\167\x20\164\150\x69\163\40\x70\141\147\145\56"]; goto TAzN5; H8uYU: $data = ["\x73\x74\141\164\165\163" => $deleted, "\x6d\x73\147" => $deleted ? "\x53\151\x73\x77\x61\40" . urldecode($nama) . "\x20\144\x69\x6e\157\156\141\x6b\164\x69\x66\153\x61\156\56" : "\123\x69\163\167\141\x20" . urldecode($nama) . "\x20\x67\x61\147\x61\154\x20\144\151\156\x6f\x6e\x61\153\x74\x69\x66\x6b\x61\156\x2e"]; goto lM6Xw; koUsN: $data = ["\x73\x74\141\x74\165\163" => false, "\155\x73\x67" => "\x41\x6e\x64\141\40\142\165\x6b\x61\x6e\x20\x61\144\x6d\x69\156\56"]; goto C7ttY; srIu8: $this->output_json($data, true); goto z3Wxe; C7ttY: goto xUw6c; goto z_fVI; TAzN5: NG1u1: goto srIu8; U9zv0: goto NG1u1; goto Y2Vpk; lM6Xw: xUw6c: goto U9zv0; z_fVI: aG5Sd: goto npcgq; z3Wxe: } public function aktifkanSemua() { goto VgFI2; P89JM: $this->output_json($data); goto KZCoR; hgOt3: $jum = 0; goto TLXlR; wg521: $data = ["\163\x74\141\x74\165\163" => true, "\x6a\165\x6d\x6c\x61\x68" => $jum, "\x6d\163\x67" => $jum . "\x20\163\151\163\167\141\40\144\151\x61\153\x74\151\146\153\x61\156\56"]; goto P89JM; TLXlR: foreach ($siswaAktif as $siswa) { goto DYGWR; jk_U2: DuaQY: goto Vy58R; dCezz: $this->activate($siswa->id_siswa); goto PiTTy; DYGWR: if ($siswa->aktif > 0) { goto znmek; } goto dCezz; usy2E: EJ1xU: goto e1C1C; GjQlr: znmek: goto Nls1g; e1C1C: $jum += 1; goto jk_U2; Nls1g: goto DuaQY; goto usy2E; PiTTy: goto EJ1xU; goto GjQlr; Vy58R: } goto KgPcb; VgFI2: $siswaAktif = $this->users->getSiswaAktif(); goto hgOt3; KgPcb: o1JIC: goto wg521; KZCoR: } public function nonaktifkanSemua() { goto Ay7NC; Fpxgt: $data = ["\x73\x74\141\164\165\163" => true, "\152\x75\155\154\141\x68" => $jum, "\155\x73\x67" => $jum . "\x20\163\x69\163\x77\x61\40\144\151\156\x6f\156\x61\x6b\164\x69\x66\153\x61\x6e\56"]; goto SJfAY; Ay7NC: $siswaAktif = $this->users->getSiswaAktif(); goto RH7gq; RH7gq: $jum = 0; goto fJP7S; fJP7S: foreach ($siswaAktif as $siswa) { goto V3Ryg; JhtaB: kvdWH: goto QIZfw; H4EOq: $del = $this->deactivate($siswa->id, ''); goto QY_Gf; V8gGa: $jum += 1; goto JhtaB; t3Cj1: u6Nby: goto H4EOq; vosgj: goto kvdWH; goto EpIxv; V3Ryg: if ($siswa->aktif > 0) { goto u6Nby; } goto vosgj; QY_Gf: $this->output_json($del); goto ShCXi; EpIxv: goto tE3n0; goto t3Cj1; ShCXi: tE3n0: goto V8gGa; QIZfw: } goto ZJhhO; SJfAY: $this->output_json($data); goto aG3_5; ZJhhO: fzq3M: goto Fpxgt; aG3_5: } public function edit($id) { goto KKsb9; KdKg9: goto AhNhd; goto IddCu; KcCpD: $this->load->view("\137\164\x65\x6d\160\x6c\141\x74\145\163\57\x64\x61\x73\x68\x62\157\x61\162\x64\x2f\x5f\x66\157\x6f\164\x65\x72"); goto iBbSn; CVJyV: $this->load->view("\x5f\x74\145\x6d\x70\x6c\141\x74\145\x73\57\x64\141\x73\150\142\157\x61\x72\x64\57\137\x68\145\x61\144\x65\x72", $data); goto xmbUW; xmbUW: $this->load->view("\165\163\x65\x72\x73\57\x73\x69\x73\x77\x61\57\x65\x64\x69\164"); goto KcCpD; vPOG6: $data["\x73\155\164"] = $this->dashboard->getSemester(); goto OCtb6; Y6GGB: $data = ["\x75\x73\x65\162" => $user, "\x6a\165\144\165\154" => "\x55\x73\x65\x72\x20\x4d\141\x6e\141\x67\145\155\145\156\164", "\163\x75\x62\x6a\x75\x64\x75\x6c" => "\105\x64\151\x74\40\x44\141\x74\x61\40\125\x73\x65\162", "\x73\145\164\x74\x69\x6e\147" => $this->dashboard->getSetting()]; goto kCEVn; mhHZq: $siswa = $this->master->getDataSiswaById($tp->id_tp, $smt->id_smt, $id); goto C223F; OCtb6: $data["\163\155\x74\x5f\141\143\164\151\166\x65"] = $smt; goto SkcF2; l4wxR: $smt = $this->dashboard->getSemesterActive(); goto mhHZq; SiZFc: $this->load->view("\x75\x73\145\x72\163\57\x73\x69\163\x77\x61\x2f\x65\x64\151\164"); goto k5EIN; iBbSn: AhNhd: goto wdW0r; C223F: $user = $this->ion_auth->user()->row(); goto Y6GGB; ngh7R: $data["\160\x72\x6f\146\x69\x6c\145"] = $this->dashboard->getProfileAdmin($user->id); goto CVJyV; DZdR2: $this->load->view("\155\145\x6d\x62\145\x72\163\57\147\x75\x72\165\x2f\x74\145\155\160\x6c\x61\164\x65\x73\x2f\150\x65\141\x64\145\162", $data); goto SiZFc; Dy60A: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto ya_7t; ya_7t: $data["\147\165\x72\165"] = $guru; goto DZdR2; k5EIN: $this->load->view("\x6d\145\x6d\x62\145\162\x73\x2f\147\165\162\165\x2f\164\145\x6d\160\x6c\x61\x74\145\163\57\146\157\x6f\x74\145\162"); goto KdKg9; SkcF2: if ($this->ion_auth->is_admin()) { goto NH9ax; } goto Dy60A; IddCu: NH9ax: goto ngh7R; kCEVn: $data["\163\x69\x73\167\x61"] = $siswa; goto AxKcO; KKsb9: $tp = $this->dashboard->getTahunActive(); goto l4wxR; sX5Fp: $data["\164\x70\x5f\141\143\164\151\166\145"] = $tp; goto vPOG6; AxKcO: $data["\164\x70"] = $this->dashboard->getTahun(); goto sX5Fp; wdW0r: } public function update() { goto Mi_rg; dYne0: $this->form_validation->set_rules("\156\145\167", "\x50\x61\163\163\167\157\162\144\x20\x42\141\x72\x75", "\x72\x65\x71\x75\151\x72\145\x64\174\156\165\155\x65\162\151\x63\174\164\162\151\155\x7c\155\151\156\x5f\x6c\145\156\147\x74\x68\133\66\x5d"); goto AjIJa; FWdD6: $newPass = $this->input->post("\156\x65\167", true); goto r7s3s; r7s3s: $this->form_validation->set_rules("\x75\x73\145\162\x6e\141\155\145", "\x55\163\145\162\156\141\x6d\x65", "\162\145\x71\165\x69\162\145\144\x7c\156\165\155\x65\162\151\x63\174\x74\162\151\x6d\x7c\155\x69\156\137\154\x65\156\147\x74\x68\x5b\x36\x5d\174\151\163\x5f\165\x6e\x69\161\x75\145\x5b\x6d\x61\x73\x74\145\x72\x5f\x73\151\163\x77\141\56\165\163\145\x72\156\x61\x6d\x65\135"); goto qhTc7; QZRbp: $oldPass = $this->input->post("\157\x6c\144", true); goto FWdD6; Mi_rg: $id_siswa = $this->input->post("\x69\144\x5f\163\151\x73\167\x61", true); goto wElk1; qhTc7: $this->form_validation->set_rules("\157\x6c\x64", "\x50\x61\x73\163\167\x6f\x72\x64\x20\114\141\155\141", "\162\x65\x71\x75\151\162\x65\x64\174\x6e\x75\x6d\x65\162\x69\143\174\x74\x72\x69\155\x7c\x6d\151\x6e\x5f\154\145\x6e\x67\164\150\x5b\66\x5d"); goto dYne0; wElk1: $username = $this->input->post("\x75\163\145\x72\156\141\x6d\x65", true); goto QZRbp; AjIJa: } public function change_password() { goto wheqS; atPyC: qx5uH: goto HKhgb; xEXkg: if ($change) { goto drCNW; } goto tI26U; WwDLk: $this->form_validation->set_rules("\156\x65\167", $this->lang->line("\x63\x68\x61\x6e\x67\145\137\160\x61\163\163\x77\x6f\x72\144\137\x76\141\x6c\x69\144\x61\164\x69\157\156\x5f\x6e\x65\167\x5f\x70\141\163\163\167\157\162\144\x5f\x6c\141\142\x65\154"), "\x72\x65\x71\x75\151\162\x65\144\x7c\x6d\151\156\137\154\x65\156\x67\164\150\x5b" . $this->config->item("\x6d\x69\x6e\x5f\x70\141\x73\163\167\157\162\x64\x5f\154\145\156\147\164\x68", "\151\157\x6e\137\141\165\x74\x68") . "\x5d\x7c\x6d\141\x74\143\x68\145\163\x5b\x6e\145\x77\137\x63\x6f\156\x66\151\x72\155\x5d"); goto x1w7Z; t10uJ: goto qx5uH; goto DMPjI; VG5jA: if ($this->form_validation->run() === FALSE) { goto rByvW; } goto c9lG0; HKhgb: $this->output_json($data); goto h1Pdi; i8GgN: goto iitZn; goto ZeHE7; fudRB: $data["\x73\164\x61\164\x75\x73"] = true; goto aUf4W; c9lG0: $identity = $this->session->userdata("\151\x64\145\156\164\x69\164\171"); goto ZMNe1; wheqS: $this->form_validation->set_rules("\x6f\154\x64", $this->lang->line("\143\x68\141\x6e\x67\145\137\x70\x61\163\163\x77\x6f\162\144\137\166\x61\154\151\x64\x61\164\151\157\x6e\137\x6f\154\144\x5f\160\x61\x73\x73\167\157\162\x64\x5f\x6c\141\x62\145\x6c"), "\x72\x65\x71\x75\151\162\x65\144"); goto WwDLk; crGRt: $data = ["\x73\164\141\x74\x75\x73" => false, "\145\162\x72\x6f\x72\x73" => ["\x6f\154\144" => form_error("\x6f\x6c\144"), "\156\x65\167" => form_error("\156\x65\167"), "\x6e\145\x77\137\143\x6f\156\x66\151\162\155" => form_error("\x6e\x65\167\x5f\x63\x6f\156\x66\151\162\x6d")]]; goto atPyC; aUf4W: iitZn: goto t10uJ; DMPjI: rByvW: goto crGRt; ZMNe1: $change = $this->ion_auth->change_password($identity, $this->input->post("\157\x6c\x64"), $this->input->post("\156\x65\x77")); goto xEXkg; x1w7Z: $this->form_validation->set_rules("\156\x65\x77\x5f\x63\157\156\x66\151\x72\155", $this->lang->line("\143\x68\x61\156\147\145\137\x70\x61\163\163\167\157\x72\144\x5f\x76\141\154\151\x64\x61\164\151\157\156\x5f\x6e\145\x77\x5f\x70\141\x73\163\x77\x6f\162\x64\137\x63\x6f\x6e\146\x69\x72\x6d\x5f\x6c\x61\142\145\x6c"), "\x72\x65\161\x75\151\x72\x65\144"); goto VG5jA; tI26U: $data = ["\163\x74\x61\164\x75\163" => false, "\155\163\x67" => $this->ion_auth->errors()]; goto i8GgN; ZeHE7: drCNW: goto fudRB; h1Pdi: } public function delete($id) { goto APcFZ; ifByB: $data["\x73\164\x61\x74\165\163"] = $this->ion_auth->delete_user($id) ? true : false; goto FLg0s; FLg0s: $this->output_json($data); goto kLuzb; APcFZ: $this->is_has_access(); goto ifByB; kLuzb: } }
