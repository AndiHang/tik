<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\x41\123\105\x50\101\x54\110") or exit("\116\x6f\40\144\151\162\145\143\164\40\163\143\162\151\160\x74\x20\141\x63\143\145\163\x73\40\x61\154\154\x6f\167\145\x64"); class Usersiswa extends CI_Controller { public function __construct() { goto LV6EU; rxoF2: $this->form_validation->set_error_delimiters('', ''); goto dGaRr; ndIo6: $this->load->model("\104\x61\163\x68\142\157\x61\x72\x64\x5f\155\x6f\144\145\154", "\144\141\x73\x68\x62\157\x61\162\144"); goto rxoF2; Z6IDG: $this->load->model("\x55\163\x65\162\163\137\155\x6f\144\x65\154", "\165\163\145\x72\163"); goto U60Z3; DYomS: redirect("\141\x75\164\x68"); goto Eeb2y; U60Z3: $this->load->model("\115\x61\163\164\x65\x72\137\x6d\157\144\145\x6c", "\155\x61\163\x74\145\x72"); goto ndIo6; Eeb2y: anXyN: goto iHCuU; iHCuU: $this->load->library(["\144\141\164\141\164\141\x62\154\x65\x73", "\x66\157\x72\x6d\137\x76\x61\x6c\x69\x64\141\164\x69\x6f\x6e"]); goto Z6IDG; LV6EU: parent::__construct(); goto t8a5Y; t8a5Y: if ($this->ion_auth->logged_in()) { goto anXyN; } goto DYomS; dGaRr: } public function is_has_access() { goto zNWkI; mhwBC: if (!(!$group === "\x61\x64\155\x69\156" or !$group === "\x67\x75\x72\x75")) { goto KgVOM; } goto PICI3; inF_v: $group = $this->ion_auth->get_users_groups($user_id)->row()->name; goto mhwBC; PICI3: show_error("\110\x61\x6e\171\x61\x20\101\144\155\x69\x6e\151\x73\164\162\141\x74\157\162\40\171\141\156\x67\x20\x64\x69\x62\145\162\151\40\150\141\x6b\x20\x75\156\164\165\x6b\40\155\145\156\x67\x61\153\163\145\x73\x20\x68\141\x6c\x61\x6d\x61\156\40\151\x6e\151\54\40\x3c\x61\x20\150\x72\x65\x66\75\42" . base_url("\144\x61\163\x68\x62\x6f\141\x72\x64") . "\x22\76\113\145\x6d\x62\x61\154\x69\40\153\145\x20\155\145\156\165\x20\x61\167\x61\x6c\74\57\141\76", 403, "\101\153\x73\145\163\x20\x54\x65\x72\154\x61\x72\x61\156\147"); goto sjE03; sjE03: KgVOM: goto CU7ld; zNWkI: $user_id = $this->ion_auth->user()->row()->id; goto inF_v; CU7ld: } public function output_json($data, $encode = true) { goto vgryR; ZBtfG: iL7be: goto G4w9B; G4w9B: $this->output->set_content_type("\x61\x70\x70\x6c\151\x63\x61\164\151\157\156\x2f\152\x73\x6f\156")->set_output($data); goto YPf5W; B3e3w: $data = json_encode($data); goto ZBtfG; vgryR: if (!$encode) { goto iL7be; } goto B3e3w; YPf5W: } public function data() { goto JUETx; JUETx: $this->is_has_access(); goto DJytf; H4oE2: $smt = $this->dashboard->getSemesterActive(); goto c4009; DJytf: $tp = $this->dashboard->getTahunActive(); goto H4oE2; c4009: $this->output_json($this->users->getUserSiswa($tp->id_tp, $smt->id_smt), false); goto trfTg; trfTg: } public function index() { goto NIJBB; f0e5h: $user = $this->ion_auth->user()->row(); goto nv90U; WAinM: $this->load->view("\x5f\164\x65\155\160\154\141\x74\145\163\x2f\x64\x61\163\150\x62\x6f\141\162\x64\x2f\x5f\146\x6f\157\x74\145\162"); goto vN8No; E6WzL: $data["\x74\x70\x5f\x61\143\x74\x69\x76\145"] = $this->dashboard->getTahunActive(); goto WwRB5; WwRB5: $data["\163\155\x74"] = $this->dashboard->getSemester(); goto wkAxU; NIJBB: $this->is_has_access(); goto f0e5h; nv90U: $data = ["\165\x73\145\x72" => $user, "\152\165\144\x75\x6c" => "\x55\x73\145\162\40\115\x61\x6e\x61\147\x65\x6d\x65\156\164", "\x73\165\142\x6a\x75\x64\165\154" => "\x44\x61\164\141\x20\125\x73\x65\x72\40\123\x69\163\x77\x61", "\x70\x72\x6f\x66\x69\x6c\x65" => $this->dashboard->getProfileAdmin($user->id), "\x73\145\164\x74\151\x6e\x67" => $this->dashboard->getSetting()]; goto Nwjcr; Nwjcr: $data["\164\160"] = $this->dashboard->getTahun(); goto E6WzL; wkAxU: $data["\x73\x6d\x74\x5f\141\x63\x74\151\166\x65"] = $this->dashboard->getSemesterActive(); goto LpBdy; U038U: $this->load->view("\165\163\x65\162\163\x2f\163\x69\x73\167\141\57\144\141\164\141"); goto WAinM; LpBdy: $this->load->view("\137\164\x65\155\160\154\x61\164\145\163\57\x64\x61\163\150\142\x6f\141\x72\x64\x2f\137\150\145\x61\144\145\162", $data); goto U038U; vN8No: } public function list() { goto fcvoA; Nk_ky: $tp = $this->dashboard->getTahunActive(); goto ZkF2d; d95Rm: $data = ["\154\x69\x73\x74\163" => $lists, "\164\x6f\x74\141\154" => $count_siswa, "\x70\x61\x67\x65\x73" => ceil($count_siswa / $limit), "\163\145\x61\162\143\150" => $search, "\160\145\162\160\141\147\x65" => $limit]; goto mHZvw; fcvoA: $page = $this->input->post("\x70\x61\x67\145", true); goto CA_Tk; KZ1aW: $offset = ($page - 1) * $limit; goto Nk_ky; gJ04C: $lists = $this->users->getUserSiswaPage($tp->id_tp, $smt->id_smt, $offset, $limit, $search); goto d95Rm; WBIEi: $count_siswa = $this->users->getUserSiswaTotalPage($search); goto gJ04C; pnhR5: $search = $this->input->post("\163\145\x61\162\143\150", true); goto KZ1aW; mHZvw: $this->output_json($data); goto MuAMu; CA_Tk: $limit = $this->input->post("\x6c\x69\x6d\151\x74", true); goto pnhR5; ZkF2d: $smt = $this->dashboard->getSemesterActive(); goto WBIEi; MuAMu: } private function registerSiswa($username, $password, $email, $additional_data, $group) { goto yS8b9; QaUh7: $data["\x73\x74\x61\164\165\x73"] = true; goto XzGKT; yS8b9: $reg = $this->ion_auth->register($username, $password, $email, $additional_data, $group); goto QaUh7; likA1: if (!($reg == false)) { goto AhWJG; } goto VAqEU; VAqEU: $data["\x73\164\141\x74\x75\x73"] = false; goto U0D6O; XzGKT: $data["\x69\144"] = $reg; goto likA1; wF9k2: return $data; goto cJDFo; U0D6O: AhWJG: goto wF9k2; cJDFo: } public function activate($id) { goto EZ2zx; WJh4f: if (!($user_siswa != null)) { goto Lg8Bc; } goto g0Gkd; ZiBJK: $data = ["\163\x74\x61\x74\165\x73" => false, "\155\x73\x67" => "\x41\153\165\156\x20\x73\151\x73\x77\x61\x20\164\151\x64\x61\153\x20\x74\x65\162\x73\x65\144\151\141\40\x28\163\165\x64\x61\x68\40\144\151\x67\x75\x6e\141\x6b\141\156\x29\x2e"]; goto PfPqz; rTvlC: $first_name = $nama[0]; goto h3XF3; zW0JK: iCZfV: goto AkDju; RPZpv: $data = ["\163\x74\x61\x74\165\x73" => $reg, "\155\x73\147" => !$reg ? "\x41\153\x75\156\x20" . $siswa->nama . "\40\147\x61\x67\x61\x6c\40\x64\151\x61\x6b\164\151\x66\x6b\141\156\x2e" : "\x41\x6b\165\x6e\40" . $siswa->nama . "\x20\144\151\x61\153\164\x69\146\x6b\x61\156\x2e"]; goto zW0JK; wR4M6: $username = trim($siswa->username); goto oIHdB; h3XF3: $last_name = end($nama); goto wR4M6; EZ2zx: $siswa = $this->users->getDataSiswa($id); goto zpor5; YxW2O: $group = array("\x33"); goto iok2t; g0Gkd: $deleted = $this->ion_auth->delete_user($user_siswa->id); goto HBi46; PfPqz: goto iCZfV; goto axgPt; oIHdB: $password = trim($siswa->password); goto r4wng; iok2t: $user_siswa = $this->db->get_where("\165\x73\x65\x72\x73", "\145\x6d\x61\151\154\75\x22" . $email . "\42")->row(); goto Gk4Dx; r4wng: $email = $siswa->nis . "\100\163\151\x73\x77\141\x2e\143\x6f\x6d"; goto U5EUU; jio5g: $reg = $this->registerSiswa($username, $password, $email, $additional_data, $group); goto RPZpv; axgPt: UcGDU: goto jio5g; HBi46: Lg8Bc: goto ECx2T; ECx2T: if ($deleted) { goto UcGDU; } goto ZiBJK; Gk4Dx: $deleted = true; goto WJh4f; U5EUU: $additional_data = ["\146\151\x72\163\x74\x5f\156\141\x6d\145" => $first_name, "\154\x61\x73\164\137\x6e\x61\x6d\145" => $last_name]; goto YxW2O; AkDju: $this->output_json($data); goto k1_sL; zpor5: $nama = explode("\40", $siswa->nama); goto rTvlC; k1_sL: } public function deactivate($id, $nama) { goto NzAQQ; E_oUL: $data = ["\x73\x74\x61\x74\x75\163" => false, "\155\x73\147" => "\101\156\144\141\40\x62\x75\153\x61\x6e\x20\141\x64\x6d\151\x6e\x2e"]; goto ts_HZ; XvoRi: goto zVfzq; goto j7ajg; NzAQQ: if (!$this->ion_auth->logged_in() || !$this->ion_auth->is_admin()) { goto n3z22; } goto Edh3V; j7ajg: n3z22: goto QsjFM; F0eFE: $data = ["\x73\x74\x61\164\165\x73" => $deleted, "\x6d\x73\147" => $deleted ? "\x53\x69\x73\167\x61\x20" . urldecode($nama) . "\x20\x64\x69\x6e\157\x6e\x61\153\164\151\x66\x6b\x61\x6e\56" : "\x53\x69\x73\167\141\x20" . urldecode($nama) . "\x20\147\x61\x67\141\154\x20\x64\151\x6e\157\x6e\x61\x6b\x74\x69\146\153\141\x6e\56"]; goto O_wSd; Zn4Qr: if ($this->ion_auth->logged_in() && $this->ion_auth->is_admin()) { goto lMUHc; } goto E_oUL; zuy_X: $this->output_json($data, true); goto m5CMD; yFQBz: zVfzq: goto zuy_X; ts0be: lMUHc: goto peeeO; QsjFM: $data = ["\x73\164\x61\164\x75\163" => false, "\155\x73\147" => "\131\x6f\x75\40\155\x75\163\164\x20\142\145\40\x61\156\40\141\x64\x6d\x69\156\151\163\164\x72\141\x74\x6f\x72\40\x74\x6f\40\x76\x69\145\167\x20\164\x68\x69\x73\x20\160\141\x67\145\56"]; goto yFQBz; Edh3V: $id = (int) $id; goto Zn4Qr; O_wSd: FwT5u: goto XvoRi; peeeO: $deleted = $this->ion_auth->delete_user($id); goto F0eFE; ts_HZ: goto FwT5u; goto ts0be; m5CMD: } public function aktifkanSemua() { goto e58IY; bQsoD: foreach ($siswaAktif as $siswa) { goto FR_Ex; nPxTI: goto s51Og; goto B38ia; XFUy6: goto WdEii; goto n2rAB; UE5CQ: WdEii: goto jmmRj; FR_Ex: if ($siswa->id != null) { goto EwFdU; } goto RxXus; RxXus: $this->activate($siswa->id_siswa); goto nPxTI; B38ia: EwFdU: goto XFUy6; n2rAB: s51Og: goto kuaP7; kuaP7: $jum += 1; goto UE5CQ; jmmRj: } goto BudKm; E1NBU: $jum = 0; goto bQsoD; e58IY: $ids = $this->input->post("\151\144\163", true); goto usVJQ; BudKm: gdafZ: goto kESt_; VApC5: $this->output_json($data); goto pS3Fn; usVJQ: $siswaAktif = $this->users->getSiswaAktif($ids); goto E1NBU; kESt_: $data = ["\x73\164\x61\x74\x75\163" => true, "\x6a\165\155\x6c\x61\150" => $jum, "\x6d\163\x67" => $jum . "\x20\163\151\x73\x77\141\x20\x64\x69\141\153\x74\x69\x66\x6b\x61\x6e\x2e"]; goto VApC5; pS3Fn: } public function nonaktifkanSemua() { goto S6_7Z; k0zon: foreach ($siswaAktif as $siswa) { goto nqJAR; CXRAk: goto c8w6Z; goto F1MYP; nqJAR: if ($siswa->id != null) { goto PmvtF; } goto Gqrt8; YRaKY: tMddz: goto Otywt; UL4Z6: c8w6Z: goto vCxIH; W2jVH: $this->output_json($del); goto UL4Z6; Gqrt8: goto tMddz; goto CXRAk; vCxIH: $jum += 1; goto YRaKY; V62_o: $del = $this->deactivate($siswa->id, ''); goto W2jVH; F1MYP: PmvtF: goto V62_o; Otywt: } goto Ugghm; B7T9C: $data = ["\163\x74\x61\164\x75\163" => true, "\152\165\155\x6c\x61\150" => $jum, "\x6d\163\x67" => $jum . "\40\163\x69\163\x77\141\x20\144\x69\156\x6f\x6e\x61\153\x74\151\x66\x6b\141\x6e\56"]; goto cXkbq; S6_7Z: $ids = $this->input->post("\x69\x64\x73", true); goto LzlYQ; cXkbq: $this->output_json($data); goto bg3of; ZHxBK: $jum = 0; goto k0zon; LzlYQ: $siswaAktif = $this->users->getSiswaAktif($ids); goto ZHxBK; Ugghm: T1D3E: goto B7T9C; bg3of: } public function edit($id) { goto k09N5; tgkp9: $this->load->view("\155\145\x6d\x62\x65\162\x73\x2f\x67\165\x72\165\57\x74\x65\x6d\x70\154\x61\164\x65\163\x2f\x68\x65\141\x64\145\x72", $data); goto JB4Ke; JjuHa: cISj9: goto HFyXJ; HFyXJ: $data["\160\x72\157\x66\151\x6c\x65"] = $this->dashboard->getProfileAdmin($user->id); goto ZUoEW; OaWR2: $data["\x74\160\137\x61\x63\164\x69\166\x65"] = $tp; goto tBA8J; w8RCv: $this->load->view("\165\163\145\x72\x73\57\163\151\163\x77\141\57\145\x64\x69\x74"); goto vZ0R8; Hpf2F: if ($this->ion_auth->is_admin()) { goto cISj9; } goto WZ0bE; xpFnp: $data["\147\165\162\165"] = $guru; goto tgkp9; WZ0bE: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto xpFnp; tBA8J: $data["\163\155\164"] = $this->dashboard->getSemester(); goto IN6Kf; gheAq: $data["\164\x70"] = $this->dashboard->getTahun(); goto OaWR2; n4A8Z: $this->load->view("\155\145\155\142\145\x72\163\x2f\147\x75\x72\165\x2f\164\x65\x6d\x70\154\x61\164\145\x73\57\146\x6f\x6f\164\x65\162"); goto ym9JX; keIHy: $user = $this->ion_auth->user()->row(); goto OtB_z; f_OI9: $siswa = $this->master->getDataSiswaById($tp->id_tp, $smt->id_smt, $id); goto keIHy; vD3Y3: $smt = $this->dashboard->getSemesterActive(); goto f_OI9; OtB_z: $data = ["\165\163\x65\162" => $user, "\152\x75\x64\165\154" => "\x55\163\145\x72\40\115\141\x6e\141\x67\x65\x6d\145\x6e\x74", "\x73\165\142\x6a\165\x64\x75\x6c" => "\105\144\151\164\40\104\141\164\x61\x20\125\163\x65\x72", "\x73\145\x74\164\x69\x6e\x67" => $this->dashboard->getSetting()]; goto b7qRM; JB4Ke: $this->load->view("\x75\163\145\x72\163\57\163\x69\x73\167\141\57\145\144\151\164"); goto n4A8Z; k09N5: $tp = $this->dashboard->getTahunActive(); goto vD3Y3; b7qRM: $data["\x73\151\163\167\141"] = $siswa; goto gheAq; vZ0R8: $this->load->view("\x5f\164\145\x6d\160\154\141\x74\x65\163\57\x64\141\163\x68\142\157\141\162\144\x2f\137\x66\x6f\157\164\x65\x72"); goto UNjIJ; IN6Kf: $data["\x73\155\x74\137\x61\x63\x74\x69\166\145"] = $smt; goto Hpf2F; UNjIJ: B23Vu: goto T1P_v; ZUoEW: $this->load->view("\x5f\x74\x65\x6d\160\154\x61\164\145\163\x2f\144\141\163\150\142\x6f\141\162\144\x2f\x5f\x68\145\x61\144\x65\x72", $data); goto w8RCv; ym9JX: goto B23Vu; goto JjuHa; T1P_v: } public function update() { goto jwn1u; kHQjY: $this->form_validation->set_rules("\x6f\154\144", "\x50\x61\x73\x73\x77\x6f\x72\144\x20\114\141\155\141", "\x72\145\x71\x75\x69\x72\x65\x64\174\x6e\x75\x6d\145\x72\151\143\x7c\x74\162\x69\155\174\x6d\151\x6e\137\154\x65\156\147\164\150\x5b\66\x5d"); goto FJMhe; fl30A: $this->form_validation->set_rules("\165\163\145\162\x6e\x61\155\145", "\125\x73\145\162\156\141\x6d\145", "\162\145\161\165\151\x72\145\x64\174\x6e\165\155\145\162\x69\143\174\164\162\x69\155\x7c\x6d\x69\x6e\x5f\x6c\145\156\147\164\x68\133\66\x5d\174\151\163\x5f\165\x6e\x69\x71\x75\145\x5b\155\x61\163\164\145\162\137\x73\151\x73\x77\x61\56\165\x73\145\162\x6e\141\155\145\x5d"); goto kHQjY; exuCO: $username = $this->input->post("\165\x73\x65\162\156\x61\155\x65", true); goto KXKoV; jwn1u: $id_siswa = $this->input->post("\151\144\x5f\x73\x69\163\167\x61", true); goto exuCO; FJMhe: $this->form_validation->set_rules("\156\x65\x77", "\120\141\x73\163\167\157\162\x64\x20\102\x61\162\x75", "\162\x65\x71\x75\x69\x72\145\x64\174\156\165\155\x65\x72\151\143\174\x74\162\x69\x6d\174\155\151\x6e\x5f\154\145\156\147\164\150\133\66\135"); goto mHwue; KXKoV: $oldPass = $this->input->post("\157\154\x64", true); goto rLyrE; rLyrE: $newPass = $this->input->post("\x6e\145\x77", true); goto fl30A; mHwue: } public function change_password() { goto hsNyX; vU0E6: if ($change) { goto hqdiV; } goto iYkiE; lJu1C: goto ZX4rw; goto Sa5oR; sv1oD: $data = ["\x73\164\141\x74\165\163" => false, "\x65\x72\x72\x6f\162\163" => ["\157\x6c\144" => form_error("\x6f\x6c\144"), "\156\145\x77" => form_error("\x6e\x65\167"), "\156\x65\167\x5f\x63\x6f\156\146\x69\x72\x6d" => form_error("\156\x65\167\x5f\143\157\x6e\146\151\x72\x6d")]]; goto PdY2n; ZSIRT: $this->form_validation->set_rules("\156\x65\167\137\143\x6f\x6e\x66\x69\x72\155", $this->lang->line("\x63\x68\x61\x6e\147\x65\137\160\x61\x73\163\x77\x6f\162\144\x5f\x76\x61\x6c\x69\x64\x61\164\x69\157\x6e\137\x6e\x65\x77\x5f\160\141\x73\x73\167\x6f\x72\x64\137\x63\x6f\156\x66\151\x72\155\137\154\141\142\145\154"), "\162\x65\x71\165\151\x72\145\144"); goto fxeY5; fxeY5: if ($this->form_validation->run() === FALSE) { goto VQys9; } goto rn_Os; Sa5oR: VQys9: goto sv1oD; PdY2n: ZX4rw: goto u7h2T; hsNyX: $this->form_validation->set_rules("\157\154\x64", $this->lang->line("\x63\x68\141\156\x67\x65\137\160\x61\163\163\167\157\x72\144\x5f\x76\141\154\151\x64\x61\164\151\x6f\156\x5f\157\x6c\144\137\x70\141\163\163\167\x6f\x72\144\x5f\154\141\142\x65\154"), "\162\x65\161\x75\151\x72\x65\x64"); goto d0_tO; Gfhrk: FfIW2: goto lJu1C; iYkiE: $data = ["\x73\x74\141\x74\165\163" => false, "\x6d\163\147" => $this->ion_auth->errors()]; goto LtCCP; FU8j3: $data["\x73\164\141\164\x75\163"] = true; goto Gfhrk; m8NGQ: hqdiV: goto FU8j3; hyGQb: $change = $this->ion_auth->change_password($identity, $this->input->post("\157\x6c\x64"), $this->input->post("\x6e\145\167")); goto vU0E6; u7h2T: $this->output_json($data); goto XBtIW; d0_tO: $this->form_validation->set_rules("\156\x65\x77", $this->lang->line("\143\150\141\156\x67\145\137\160\x61\163\163\x77\x6f\162\x64\137\166\x61\154\x69\x64\x61\164\x69\157\x6e\x5f\x6e\145\x77\137\x70\x61\163\163\x77\157\x72\144\x5f\x6c\141\x62\145\154"), "\x72\x65\x71\x75\x69\x72\x65\144\174\155\151\x6e\137\154\145\156\147\x74\150\133" . $this->config->item("\x6d\x69\x6e\137\160\x61\163\163\167\157\162\x64\137\x6c\x65\156\147\164\150", "\x69\157\156\x5f\141\x75\x74\150") . "\135\174\155\141\164\143\x68\x65\x73\133\156\145\167\x5f\x63\157\x6e\x66\151\x72\155\135"); goto ZSIRT; LtCCP: goto FfIW2; goto m8NGQ; rn_Os: $identity = $this->session->userdata("\x69\144\x65\156\x74\151\164\171"); goto hyGQb; XBtIW: } public function delete($id) { goto SGWC5; gM8O2: $data["\163\164\141\164\165\163"] = $this->ion_auth->delete_user($id) ? true : false; goto Z1wqQ; Z1wqQ: $this->output_json($data); goto c0k7R; SGWC5: $this->is_has_access(); goto gM8O2; c0k7R: } private function hash_password($password) { goto xgMKu; Mi11m: T2W8R: goto ike4X; JnxEa: return FALSE; goto Mi11m; xgMKu: if (!(empty($password) || strpos($password, "\x0") !== FALSE || strlen($password) > 4096)) { goto T2W8R; } goto JnxEa; ike4X: return password_hash($password, PASSWORD_BCRYPT); goto hhG9t; hhG9t: } }
