<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\x41\123\x45\120\101\x54\x48") or exit("\116\x6f\x20\144\151\x72\x65\x63\164\x20\163\143\162\151\160\164\40\141\143\x63\x65\x73\x73\x20\x61\x6c\x6c\157\167\145\144"); class Usersiswa extends CI_Controller { public function __construct() { goto FPopr; FPopr: parent::__construct(); goto H_Fso; zOl33: $this->load->model("\x55\163\145\162\x73\x5f\155\x6f\x64\x65\154", "\165\x73\x65\x72\163"); goto dzoa1; qF3xT: $this->load->model("\x44\141\x73\x68\x62\x6f\141\162\144\137\x6d\157\x64\145\154", "\144\141\163\x68\142\x6f\141\x72\x64"); goto ngHn2; ngHn2: $this->form_validation->set_error_delimiters('', ''); goto QYNYg; H_Fso: if ($this->ion_auth->logged_in()) { goto Oyu5i; } goto rX5k8; rX5k8: redirect("\x61\x75\x74\x68"); goto v2qM0; pvb9R: $this->load->library(["\144\141\164\141\x74\x61\x62\x6c\145\163", "\146\157\162\155\x5f\x76\141\x6c\x69\x64\x61\x74\151\x6f\x6e"]); goto zOl33; v2qM0: Oyu5i: goto pvb9R; dzoa1: $this->load->model("\115\x61\x73\x74\x65\x72\137\x6d\157\144\145\x6c", "\155\141\x73\164\145\162"); goto qF3xT; QYNYg: } public function is_has_access() { goto yAyMZ; emB_I: show_error("\110\141\156\x79\x61\40\x41\x64\x6d\x69\x6e\151\163\164\x72\141\x74\x6f\x72\x20\171\141\156\147\x20\x64\151\142\145\162\151\40\x68\141\153\40\x75\156\x74\165\153\40\x6d\x65\156\x67\141\x6b\x73\145\x73\x20\150\x61\154\x61\x6d\x61\x6e\x20\151\156\x69\x2c\40\x3c\141\40\x68\x72\145\x66\75\42" . base_url("\x64\x61\x73\x68\x62\x6f\x61\x72\144") . "\42\x3e\x4b\x65\155\142\141\x6c\151\x20\153\145\40\155\145\156\165\40\x61\x77\x61\x6c\x3c\x2f\x61\76", 403, "\101\153\163\x65\163\40\124\x65\162\154\141\x72\141\156\x67"); goto qhcV7; RKt18: if (!(!$group === "\141\144\x6d\151\156" or !$group === "\147\x75\162\x75")) { goto sYJET; } goto emB_I; yAyMZ: $user_id = $this->ion_auth->user()->row()->id; goto C7YT0; C7YT0: $group = $this->ion_auth->get_users_groups($user_id)->row()->name; goto RKt18; qhcV7: sYJET: goto pBa1o; pBa1o: } public function output_json($data, $encode = true) { goto pXxpb; QqBto: $data = json_encode($data); goto sgQL6; sgQL6: JKTW6: goto l7jtW; l7jtW: $this->output->set_content_type("\x61\160\x70\x6c\151\x63\141\164\151\157\156\x2f\x6a\x73\157\x6e")->set_output($data); goto Nk0bi; pXxpb: if (!$encode) { goto JKTW6; } goto QqBto; Nk0bi: } public function data() { goto srsBH; srsBH: $this->is_has_access(); goto mj3e8; WSffW: $this->output_json($this->users->getUserSiswa($tp->id_tp, $smt->id_smt), false); goto pCUFj; mj3e8: $tp = $this->dashboard->getTahunActive(); goto A9dYR; A9dYR: $smt = $this->dashboard->getSemesterActive(); goto WSffW; pCUFj: } public function index() { goto oIAnE; j80xl: $this->load->view("\165\x73\145\162\x73\57\163\x69\x73\x77\141\57\x64\141\164\141"); goto GtfWv; bdLm1: $data = ["\x75\x73\x65\x72" => $user, "\152\165\x64\x75\x6c" => "\125\163\145\x72\40\115\141\156\x61\147\145\155\145\156\164", "\x73\x75\x62\x6a\165\144\165\154" => "\104\x61\164\x61\40\125\163\x65\x72\40\123\151\x73\167\x61", "\160\x72\157\x66\x69\154\x65" => $this->dashboard->getProfileAdmin($user->id), "\163\145\164\x74\x69\156\x67" => $this->dashboard->getSetting()]; goto lCIBr; FFjw6: $data["\164\x70\x5f\141\143\164\151\166\x65"] = $this->dashboard->getTahunActive(); goto ZIh4s; oIAnE: $this->is_has_access(); goto GBu2O; GBu2O: $user = $this->ion_auth->user()->row(); goto bdLm1; ZIh4s: $data["\163\x6d\x74"] = $this->dashboard->getSemester(); goto s6XT2; GtfWv: $this->load->view("\137\164\145\155\160\154\x61\164\145\x73\x2f\144\141\x73\x68\x62\x6f\x61\162\x64\57\x5f\146\x6f\157\x74\x65\x72"); goto kfptJ; lCIBr: $data["\164\x70"] = $this->dashboard->getTahun(); goto FFjw6; s6XT2: $data["\163\x6d\x74\x5f\141\x63\x74\151\x76\x65"] = $this->dashboard->getSemesterActive(); goto Vo10O; Vo10O: $this->load->view("\137\164\145\x6d\x70\154\141\x74\145\x73\x2f\144\x61\163\x68\x62\157\x61\x72\144\x2f\137\x68\x65\141\144\145\162", $data); goto j80xl; kfptJ: } private function registerSiswa($username, $password, $email, $additional_data, $group) { goto gEESS; qkyEK: return $data; goto UhGRT; SypIs: r2CU2: goto qkyEK; LAZ20: $data["\x69\144"] = $reg; goto vnCfH; gEESS: $reg = $this->ion_auth->register($username, $password, $email, $additional_data, $group); goto Mxrok; Mxrok: $data["\163\164\141\164\x75\x73"] = true; goto LAZ20; DeL10: $data["\163\x74\x61\164\165\163"] = false; goto SypIs; vnCfH: if (!($reg == false)) { goto r2CU2; } goto DeL10; UhGRT: } public function activate($id) { goto GEBEh; xqWjG: OAT5P: goto E0gOY; Vcmcy: $this->output_json($data); goto HPr2f; q0mHF: $username = trim($siswa->username); goto H7F3Y; VUhHN: $additional_data = ["\146\x69\162\x73\164\137\156\x61\x6d\x65" => $first_name, "\154\x61\163\x74\x5f\156\x61\155\145" => $last_name]; goto JAOuU; NjwCN: $first_name = $nama[0]; goto dynyS; DHd3t: E3cTI: goto WHCoT; dynyS: $last_name = end($nama); goto q0mHF; E0gOY: goto j0llu; goto DHd3t; nhD7g: sewuN: goto rvzR2; QWjW4: $nama = explode("\x20", $siswa->nama); goto NjwCN; IPzts: j0llu: goto VeiJm; VeiJm: $data["\x70\x61\163\163"] = $password; goto Vcmcy; PbVXG: if ($this->ion_auth->username_check($username)) { goto E3cTI; } goto tEEn9; JAOuU: $group = array("\63"); goto PbVXG; GEBEh: $siswa = $this->users->getDataSiswa($id); goto QWjW4; RT0c5: $reg = $this->registerSiswa($username, $password, $email, $additional_data, $group); goto EHLzv; WHCoT: $data = ["\163\x74\x61\164\165\163" => false, "\155\163\147" => "\125\163\145\x72\156\x61\x6d\145\x20" . $username . "\x20\x74\151\x64\141\x6b\x20\x74\x65\x72\x73\145\144\151\x61\40\50\x73\x75\144\x61\x68\x20\144\x69\x67\x75\156\141\x6b\141\156\x29\x2e"]; goto IPzts; EHLzv: $data = ["\x73\x74\x61\x74\165\x73" => $reg, "\155\163\147" => !$reg ? "\101\153\165\156\40" . $siswa->nama . "\40\147\x61\x67\x61\154\40\144\151\x61\x6b\164\x69\x66\x6b\141\156\x2e" : "\x41\x6b\165\156\40" . $siswa->nama . "\x20\144\151\141\x6b\164\x69\x66\x6b\x61\x6e\56"]; goto ZYOhj; BKzjU: $email = $siswa->nis . "\100\163\x69\163\167\x61\x2e\x63\x6f\155"; goto VUhHN; tEEn9: if ($this->ion_auth->email_check($email)) { goto sewuN; } goto RT0c5; ZYOhj: goto OAT5P; goto nhD7g; H7F3Y: $password = trim($siswa->password); goto BKzjU; rvzR2: $data = ["\163\x74\141\164\x75\x73" => false, "\x6d\x73\x67" => "\x45\155\x61\x69\x6c\x20" . $email . "\x20\164\151\144\141\x6b\40\164\145\162\x73\x65\144\151\x61\x20\50\x73\165\x64\141\150\40\144\x69\147\165\156\141\x6b\x61\x6e\x29\x2e"]; goto xqWjG; HPr2f: } public function deactivate($id, $nama) { goto Jm6Y9; uwPhV: $data = ["\x73\x74\x61\164\x75\x73" => false, "\155\163\x67" => "\131\x6f\165\40\155\165\x73\x74\x20\x62\x65\40\x61\x6e\x20\x61\144\x6d\151\156\x69\x73\x74\x72\141\x74\157\x72\40\164\157\x20\x76\x69\x65\167\x20\x74\150\x69\163\x20\x70\141\x67\145\x2e"]; goto f7ido; BTBHX: pFxXk: goto uwPhV; PSJOz: goto RFTra; goto EVfgA; gJmaR: $data = ["\x73\x74\x61\164\x75\x73" => false, "\x6d\x73\x67" => "\101\x6e\144\141\40\142\165\153\x61\156\40\141\x64\x6d\x69\156\x2e"]; goto PSJOz; ugzIo: $this->output_json($data, true); goto CKnRf; tNQEz: goto UMBUw; goto BTBHX; q_2bo: if ($this->ion_auth->logged_in() && $this->ion_auth->is_admin()) { goto qm7a0; } goto gJmaR; Jm6Y9: if (!$this->ion_auth->logged_in() || !$this->ion_auth->is_admin()) { goto pFxXk; } goto uvaBh; Hq6kF: RFTra: goto tNQEz; kBd0y: $deleted = $this->ion_auth->delete_user($id); goto rRbIA; EVfgA: qm7a0: goto kBd0y; f7ido: UMBUw: goto ugzIo; rRbIA: $data = ["\163\x74\141\164\165\163" => $deleted, "\x6d\163\147" => $deleted ? "\x53\151\x73\167\141\40" . urldecode($nama) . "\40\144\x69\x6e\157\x6e\141\153\164\x69\x66\x6b\141\156\x2e" : "\123\151\163\x77\141\40" . urldecode($nama) . "\40\147\141\x67\x61\154\x20\144\151\156\x6f\156\141\153\x74\x69\146\x6b\141\156\x2e"]; goto Hq6kF; uvaBh: $id = (int) $id; goto q_2bo; CKnRf: } public function aktifkanSemua() { goto qSh0B; t4D7c: $this->output_json($data); goto RUZ06; FVvwI: $jum = 0; goto uNguH; uNguH: foreach ($siswaAktif as $siswa) { goto OQxiW; QdI9S: goto Lu1gQ; goto kmYlO; OQxiW: if ($siswa->aktif > 0) { goto dCs7j; } goto XWNyz; UDE1D: dCs7j: goto QdI9S; XWNyz: $this->activate($siswa->id_siswa); goto ETPnv; rmf5k: $jum += 1; goto OhdST; kmYlO: SjXwB: goto rmf5k; OhdST: Lu1gQ: goto uFs87; ETPnv: goto SjXwB; goto UDE1D; uFs87: } goto K2nnU; y2o5P: $data = ["\x73\x74\141\x74\x75\x73" => true, "\152\165\155\154\x61\x68" => $jum, "\155\x73\147" => $jum . "\x20\x73\151\163\167\141\x20\x64\x69\x61\x6b\x74\x69\146\153\141\156\x2e"]; goto t4D7c; qSh0B: $siswaAktif = $this->users->getSiswaAktif(); goto FVvwI; K2nnU: lMCDZ: goto y2o5P; RUZ06: } public function nonaktifkanSemua() { goto VMW3B; oJh9k: foreach ($siswaAktif as $siswa) { goto M_iv1; yRnJV: DezrC: goto GWzGp; d88Ng: U6PIL: goto NlBko; GWzGp: $jum += 1; goto z8tKn; NlBko: $del = $this->deactivate($siswa->id, ''); goto Vkilv; OaVLA: goto DezrC; goto d88Ng; M_iv1: if ($siswa->aktif > 0) { goto U6PIL; } goto mKQud; Vkilv: $this->output_json($del); goto yRnJV; mKQud: goto Nj0yH; goto OaVLA; z8tKn: Nj0yH: goto nRQ84; nRQ84: } goto qjHif; qjHif: kY4Y8: goto wLlSI; drqwS: $this->output_json($data); goto UWZHa; sFESC: $jum = 0; goto oJh9k; wLlSI: $data = ["\x73\x74\141\164\x75\x73" => true, "\152\165\x6d\x6c\141\x68" => $jum, "\155\163\x67" => $jum . "\x20\163\151\x73\x77\x61\x20\x64\151\x6e\x6f\156\141\153\164\151\146\153\x61\x6e\56"]; goto drqwS; VMW3B: $siswaAktif = $this->users->getSiswaAktif(); goto sFESC; UWZHa: } public function edit($id) { goto HU1wH; k4d_r: $siswa = $this->master->getDataSiswaById($tp->id_tp, $smt->id_smt, $id); goto IXobB; UP7X0: $this->load->view("\155\x65\155\142\145\x72\x73\x2f\147\165\x72\165\57\164\145\155\160\x6c\x61\164\145\x73\57\146\x6f\157\164\x65\x72"); goto OM24c; eezpf: ww2o2: goto mxzyk; HU1wH: $tp = $this->dashboard->getTahunActive(); goto WhpKQ; IXobB: $user = $this->ion_auth->user()->row(); goto dPzC5; LIIo_: $this->load->view("\x5f\x74\145\155\160\154\141\164\x65\x73\x2f\144\x61\x73\150\x62\x6f\141\162\144\57\x5f\146\157\x6f\164\x65\x72"); goto eezpf; dPzC5: $data = ["\x75\x73\x65\x72" => $user, "\152\x75\x64\x75\154" => "\125\163\145\162\40\115\x61\x6e\x61\x67\x65\155\145\156\x74", "\x73\x75\142\152\165\x64\x75\x6c" => "\105\144\151\x74\x20\x44\141\164\141\40\x55\163\145\162", "\x73\145\x74\164\x69\x6e\x67" => $this->dashboard->getSetting()]; goto Y6g8d; jdskH: $this->load->view("\155\145\x6d\x62\x65\x72\x73\x2f\147\165\162\x75\x2f\164\145\x6d\x70\154\141\x74\145\x73\x2f\x68\x65\141\144\145\x72", $data); goto A7UzD; PujXz: $data["\160\x72\x6f\146\x69\154\x65"] = $this->dashboard->getProfileAdmin($user->id); goto hDx6H; l3phu: if ($this->ion_auth->is_admin()) { goto xmEpg; } goto YJhw6; dcLUw: $data["\x73\x6d\x74\x5f\x61\x63\164\x69\x76\145"] = $smt; goto l3phu; hDx6H: $this->load->view("\137\x74\x65\155\160\154\x61\164\145\x73\x2f\x64\141\163\x68\x62\x6f\141\x72\144\57\x5f\x68\145\141\x64\145\x72", $data); goto L8qHv; WhpKQ: $smt = $this->dashboard->getSemesterActive(); goto k4d_r; k3xWP: xmEpg: goto PujXz; ZYlwd: $data["\x74\160"] = $this->dashboard->getTahun(); goto mnYiH; YJhw6: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto iBeCp; L8qHv: $this->load->view("\165\163\x65\x72\x73\57\163\x69\163\x77\141\x2f\145\x64\x69\x74"); goto LIIo_; Y6g8d: $data["\x73\x69\x73\167\141"] = $siswa; goto ZYlwd; iBeCp: $data["\x67\x75\x72\165"] = $guru; goto jdskH; lCqxt: $data["\x73\155\x74"] = $this->dashboard->getSemester(); goto dcLUw; OM24c: goto ww2o2; goto k3xWP; mnYiH: $data["\x74\x70\x5f\141\x63\164\x69\166\x65"] = $tp; goto lCqxt; A7UzD: $this->load->view("\165\163\x65\x72\163\x2f\x73\x69\163\167\x61\57\x65\144\151\x74"); goto UP7X0; mxzyk: } public function update() { goto a4nU0; uKAFN: $newPass = $this->input->post("\156\x65\x77", true); goto c9GkM; a4nU0: $id_siswa = $this->input->post("\x69\144\137\163\x69\x73\167\x61", true); goto Auqkm; AqMPK: $oldPass = $this->input->post("\x6f\x6c\144", true); goto uKAFN; v87NT: $this->form_validation->set_rules("\156\x65\x77", "\x50\141\x73\163\x77\x6f\162\x64\x20\x42\141\162\165", "\x72\x65\161\x75\151\162\145\x64\x7c\156\165\155\145\162\x69\143\174\x74\x72\151\x6d\174\x6d\151\156\x5f\x6c\145\156\147\x74\150\133\x36\135"); goto Lvme4; Auqkm: $username = $this->input->post("\165\x73\x65\162\156\x61\x6d\x65", true); goto AqMPK; MT9kO: $this->form_validation->set_rules("\157\x6c\x64", "\x50\141\x73\163\x77\x6f\x72\144\40\x4c\x61\x6d\141", "\162\x65\161\x75\x69\x72\145\x64\174\x6e\165\155\x65\x72\151\143\x7c\x74\x72\151\x6d\x7c\155\x69\156\137\x6c\x65\x6e\147\x74\x68\133\66\135"); goto v87NT; c9GkM: $this->form_validation->set_rules("\x75\x73\x65\162\156\x61\x6d\x65", "\125\x73\x65\x72\x6e\141\x6d\x65", "\x72\145\x71\x75\151\162\x65\x64\x7c\x6e\x75\x6d\145\x72\151\143\174\164\x72\x69\x6d\x7c\x6d\151\x6e\137\x6c\145\156\147\164\150\133\66\x5d\x7c\x69\x73\x5f\165\x6e\151\161\x75\x65\x5b\155\141\x73\x74\x65\x72\137\x73\x69\x73\167\x61\56\165\x73\145\x72\156\x61\x6d\145\135"); goto MT9kO; Lvme4: } public function change_password() { goto qHurX; W9l6y: LunoR: goto xsaCt; tUSHH: if ($this->form_validation->run() === FALSE) { goto iEWj_; } goto F7i9i; hWNSC: $data = ["\163\164\x61\164\165\x73" => false, "\x6d\x73\x67" => $this->ion_auth->errors()]; goto lCdVm; lCdVm: goto LunoR; goto HkzcL; xsaCt: goto CUe2u; goto aey8D; aey8D: iEWj_: goto IhLHj; IhLHj: $data = ["\x73\164\x61\164\x75\163" => false, "\145\x72\162\157\x72\x73" => ["\x6f\x6c\x64" => form_error("\157\154\x64"), "\156\x65\167" => form_error("\x6e\x65\167"), "\156\x65\x77\x5f\x63\157\x6e\146\x69\162\155" => form_error("\156\145\167\x5f\143\x6f\x6e\146\151\162\155")]]; goto uqCNp; fqx20: $data["\163\164\141\164\x75\163"] = true; goto W9l6y; F7i9i: $identity = $this->session->userdata("\151\144\145\156\x74\151\x74\171"); goto o9cwg; HkzcL: ndGJM: goto fqx20; qHurX: $this->form_validation->set_rules("\x6f\x6c\x64", $this->lang->line("\143\x68\141\156\147\x65\x5f\160\x61\x73\x73\167\157\x72\x64\x5f\x76\x61\154\x69\x64\141\164\151\x6f\156\137\x6f\x6c\x64\x5f\160\x61\x73\163\167\x6f\162\144\137\x6c\141\142\145\154"), "\x72\x65\x71\165\x69\x72\145\x64"); goto iZSBi; ApJFF: if ($change) { goto ndGJM; } goto hWNSC; PTnr6: $this->form_validation->set_rules("\x6e\x65\x77\x5f\143\157\156\x66\151\162\155", $this->lang->line("\143\x68\141\156\x67\x65\x5f\x70\141\x73\x73\x77\x6f\162\144\x5f\166\x61\154\151\x64\141\x74\151\x6f\156\x5f\x6e\145\167\x5f\160\x61\x73\163\167\x6f\162\x64\137\x63\157\156\x66\x69\162\x6d\x5f\154\141\x62\145\x6c"), "\x72\x65\161\x75\x69\162\145\144"); goto tUSHH; o9cwg: $change = $this->ion_auth->change_password($identity, $this->input->post("\x6f\x6c\x64"), $this->input->post("\156\145\167")); goto ApJFF; uqCNp: CUe2u: goto GVOfs; iZSBi: $this->form_validation->set_rules("\156\145\x77", $this->lang->line("\x63\150\x61\x6e\x67\145\x5f\x70\141\x73\163\167\157\162\x64\x5f\166\141\154\151\144\141\x74\x69\x6f\156\x5f\x6e\145\167\x5f\160\x61\163\x73\167\157\x72\144\x5f\x6c\141\142\145\x6c"), "\x72\x65\x71\165\151\162\145\144\174\155\x69\156\x5f\x6c\x65\x6e\x67\164\150\133" . $this->config->item("\x6d\x69\x6e\x5f\160\141\x73\x73\x77\x6f\162\x64\137\154\145\x6e\x67\x74\150", "\151\x6f\156\x5f\x61\x75\164\x68") . "\135\174\x6d\x61\x74\x63\150\145\x73\x5b\x6e\x65\x77\x5f\143\x6f\156\146\x69\x72\155\135"); goto PTnr6; GVOfs: $this->output_json($data); goto b2160; b2160: } public function delete($id) { goto joj3x; EbHaU: $this->output_json($data); goto fz89b; joj3x: $this->is_has_access(); goto qOU0t; qOU0t: $data["\x73\x74\x61\x74\165\163"] = $this->ion_auth->delete_user($id) ? true : false; goto EbHaU; fz89b: } }
