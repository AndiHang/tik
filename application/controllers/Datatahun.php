<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\x42\x41\123\x45\x50\x41\124\110") or exit("\116\x6f\x20\144\151\162\145\143\x74\40\x73\x63\162\x69\160\164\40\141\143\x63\145\163\163\40\x61\154\154\157\x77\145\144"); class Datatahun extends CI_Controller { public function __construct() { goto o3fSQ; cAfJU: $this->form_validation->set_error_delimiters('', ''); goto QgScM; pLERM: if ($this->ion_auth->is_admin()) { goto g9bKj; } goto cV6GU; hUHxD: $this->load->library(["\x64\141\x74\x61\x74\x61\x62\x6c\145\163", "\x66\x6f\x72\x6d\137\x76\x61\x6c\151\144\141\164\x69\x6f\x6e"]); goto Ja0he; Ja0he: $this->load->model("\115\141\163\164\145\x72\x5f\155\157\x64\145\154", "\155\141\x73\164\x65\162"); goto luJdz; aAaK_: $this->load->model("\114\x6f\x67\137\155\157\144\145\x6c", "\154\157\147\x67\x69\156\x67"); goto cAfJU; mqamW: Bk9sm: goto gMMOg; DoktK: if (!$this->ion_auth->logged_in()) { goto Bk9sm; } goto pLERM; gMMOg: redirect("\x61\x75\x74\150"); goto Jmupc; RR9at: g9bKj: goto DYUdq; Jmupc: g8F1K: goto hUHxD; cV6GU: show_error("\110\141\156\171\141\40\101\144\155\x69\x6e\x69\x73\164\x72\141\164\x6f\x72\40\x79\x61\x6e\147\x20\x64\x69\x62\145\162\x69\x20\x68\141\153\x20\x75\x6e\164\165\153\x20\155\x65\x6e\147\x61\153\163\x65\163\x20\150\x61\x6c\x61\155\141\156\x20\151\156\x69\54\40\x3c\x61\x20\x68\162\145\x66\75\x22" . base_url("\144\141\x73\150\142\157\x61\162\144") . "\x22\76\x4b\145\155\142\x61\154\x69\40\153\x65\x20\155\x65\156\165\x20\141\x77\141\x6c\74\57\141\76", 403, "\101\153\163\145\x73\40\x54\x65\x72\154\x61\x72\141\156\x67"); goto RR9at; o3fSQ: parent::__construct(); goto DoktK; DYUdq: goto g8F1K; goto mqamW; luJdz: $this->load->model("\x44\141\x73\x68\x62\x6f\141\x72\144\x5f\x6d\157\144\x65\154", "\144\x61\163\150\x62\157\x61\x72\144"); goto aAaK_; QgScM: } public function output_json($data, $encode = true) { goto HVAqO; HVAqO: if (!$encode) { goto Z5C7Z; } goto HknPj; HknPj: $data = json_encode($data); goto IdW1Z; sWZFH: $this->output->set_content_type("\141\x70\x70\154\x69\143\141\164\x69\157\156\57\x6a\x73\x6f\x6e")->set_output($data); goto PQAGt; IdW1Z: Z5C7Z: goto sWZFH; PQAGt: } public function index() { goto j7T3t; JS92i: $data["\x74\160"] = $this->dashboard->getTahun(); goto CbNpe; jW2gF: $this->load->view("\x5f\x74\x65\x6d\x70\x6c\x61\164\x65\x73\x2f\x64\141\163\x68\142\x6f\x61\162\x64\x2f\x5f\x66\157\x6f\164\145\x72"); goto ur4S1; yd6Lu: $data["\x73\155\164\137\x61\143\164\151\166\145"] = $smt; goto valeI; CbNpe: $data["\x74\x70\137\141\x63\x74\151\166\x65"] = $tp; goto TlPMu; j7T3t: $user = $this->ion_auth->user()->row(); goto jop4B; Iw6wd: $this->load->view("\137\x74\x65\x6d\x70\x6c\141\x74\145\163\57\x64\141\163\x68\142\157\x61\x72\x64\x2f\137\x68\x65\141\x64\145\162", $data); goto c8UXi; qFOMU: $data["\152\155\154\137\x68\141\x72\x69"] = $jml == null ? "\60" : $jml->jml_hari_efektif; goto Iw6wd; X4xQA: $smt = $this->dashboard->getSemesterActive(); goto JS92i; MHWek: $tp = $this->dashboard->getTahunActive(); goto X4xQA; c8UXi: $this->load->view("\x6d\141\x73\x74\145\162\57\x74\x61\x68\x75\156\57\x64\x61\x74\141"); goto jW2gF; jop4B: $data = ["\x75\x73\x65\x72" => $user, "\x6a\x75\x64\165\x6c" => "\x45\x64\151\x74\40\124\141\x68\165\x6e\x20\x50\x65\x6c\x61\x6a\x61\162\141\156\x20\144\141\156\40\x53\x65\x6d\145\x73\x74\x65\162", "\x73\165\142\152\x75\144\x75\x6c" => "\x54\x61\150\165\x6e\40\x50\145\x6c\x61\x6a\141\162\141\156\x20\144\141\156\40\x53\145\x6d\145\163\164\x65\162", "\160\x72\157\x66\151\154\145" => $this->dashboard->getProfileAdmin($user->id), "\x73\x65\x74\164\x69\156\x67" => $this->dashboard->getSetting()]; goto MHWek; TlPMu: $data["\163\x6d\x74"] = $this->dashboard->getSemester(); goto yd6Lu; valeI: $jml = $this->master->getJmlHariEfektif($tp->id_tp . $smt->id_smt); goto qFOMU; ur4S1: } public function data() { $this->output_json($this->dashboard->getDataTahun(), false); } public function gantiTahun() { goto zS1YT; EbFsE: $data["\x73\164\141\x74\x75\163"] = true; goto EKJj4; tW61Y: $this->output_json($data); goto zdDvI; ry76P: $this->dashboard->update("\x6d\141\163\164\x65\x72\137\164\160", $update, "\151\x64\x5f\164\160", null, true); goto bH0nf; OknJl: foreach ($inputTp as $tps) { goto TTuj2; vMBT9: IvIO4: goto YIOm9; TTuj2: $id_tp = $tps->id; goto ErZW8; hTKc9: $active = 0; goto J1vt6; LN5dl: AroEE: goto J3O8U; YIOm9: $active = 1; goto LN5dl; J1vt6: goto AroEE; goto vMBT9; J3O8U: $update[] = array("\x69\144\137\x74\160" => $id_tp, "\x74\x61\x68\165\156" => $tahun, "\141\143\x74\x69\x76\145" => $active); goto LYcGC; LYcGC: n7l6g: goto JILuq; ErZW8: $tahun = $tps->tp; goto px8lz; px8lz: if ($id_tp === $aktif) { goto IvIO4; } goto hTKc9; JILuq: } goto J3OOj; kdBwK: $inputTp = json_decode($this->input->post("\164\x61\150\165\x6e", false)); goto OknJl; zS1YT: $aktif = $this->input->post("\141\143\164\x69\x76\145", true); goto kdBwK; EKJj4: $this->logging->saveLog(4, "\155\145\x6e\147\147\141\x6e\x74\x69\40\x74\x61\150\165\156\40\x61\x6a\141\x72\x61\x6e\x20\141\153\164\x69\x66"); goto tW61Y; bH0nf: $data["\155\163\147"] = "\115\x65\x72\x75\142\x61\150\40\124\x61\x68\165\156\x20\101\x6b\x74\x69\146"; goto DyH1U; J3OOj: SJFOE: goto ry76P; DyH1U: $data["\x75\160\x64\x61\x74\x65"] = $update; goto EbFsE; zdDvI: } public function gantiSemester() { goto GPrOo; WkZd7: $data["\163\x74\x61\164\x75\x73"] = true; goto hMnNR; x2Laz: $data["\155\x73\x67"] = "\115\145\162\165\x62\x61\x68\x20\x53\x65\x6d\x65\x73\164\x65\x72\40\x41\153\164\151\146"; goto PYiYI; PYiYI: $data["\x75\160\x64\x61\x74\145"] = $update; goto WkZd7; udLWm: $this->dashboard->update("\155\141\163\164\x65\162\137\x73\155\x74", $update, "\x69\x64\x5f\163\155\164", null, true); goto x2Laz; hMnNR: $this->logging->saveLog(4, "\155\145\x6e\147\x67\x61\x6e\x74\151\x20\163\145\x6d\145\x73\x74\145\162\x20\x61\153\164\151\x66"); goto jS425; jS425: $this->output_json($data); goto W1Tu3; GPrOo: $aktif = $this->input->post("\141\x63\x74\151\x76\x65", true); goto SC6Hx; MlG2q: foreach ($inputSmt as $tps) { goto lEE2z; lEE2z: $id_smt = $tps->id; goto sfOZR; FIn3X: $active = 1; goto DkpEv; DkpEv: FJAWV: goto R_h0w; R_h0w: $update[] = array("\151\x64\x5f\163\x6d\x74" => $id_smt, "\x73\x6d\x74" => $smt, "\141\x63\x74\x69\x76\145" => $active); goto Jb4c_; w7rTt: $active = 0; goto Dsbr1; Dsbr1: goto FJAWV; goto WkXY4; Jb4c_: ncELd: goto Uo5W4; WkXY4: h2pVC: goto FIn3X; drpOW: if ($id_smt === $aktif) { goto h2pVC; } goto w7rTt; sfOZR: $smt = $tps->Semester; goto drpOW; Uo5W4: } goto sZg0x; SC6Hx: $inputSmt = json_decode($this->input->post("\x73\x65\155\x65\x73\x74\145\162", false)); goto MlG2q; sZg0x: l6Wy5: goto udLWm; W1Tu3: } public function add() { goto BP9rx; oIpDQ: $this->logging->saveLog(4, "\x6d\x65\x6e\x67\x65\x64\151\x74\x20\x74\141\150\x75\156\x20\160\145\154\141\152\x61\x72\141\156"); goto OaOEd; sl0PL: $this->logging->saveLog(3, "\155\145\x6e\x61\155\x62\x61\x68\x20\x74\x61\x68\x75\156\x20\x70\145\x6c\x61\152\141\162\x61\156"); goto Nt2jo; IwS5y: $data = $this->master->create("\155\141\x73\x74\145\162\x5f\164\160", $insert); goto sl0PL; nsPrg: $this->output->set_content_type("\x61\x70\x70\x6c\x69\143\x61\x74\151\157\x6e\57\x6a\x73\x6f\x6e")->set_output($data); goto wuyoS; nZuD6: BSIvU: goto ewrNZ; Nt2jo: tg602: goto nsPrg; OaOEd: goto tg602; goto nZuD6; jk7bx: if ($method === "\x61\144\x64") { goto BSIvU; } goto smDtX; ewrNZ: $insert = ["\x74\x61\x68\x75\x6e" => $tahun]; goto IwS5y; BP9rx: $method = $this->input->post("\x6d\145\x74\150\157\x64", true); goto l81IG; cc4el: $update = array("\x69\x64\137\x74\160" => $id, "\x74\141\x68\165\x6e" => $tahun); goto UpXZF; smDtX: $id = $this->input->post("\151\144\137\164\x61\150\165\x6e", true); goto cc4el; UpXZF: $data = $this->master->update("\155\141\163\x74\x65\162\x5f\164\160", $update, "\x69\144\137\164\160", $id); goto oIpDQ; l81IG: $tahun = $this->input->post("\x74\x61\150\165\156", true); goto jk7bx; wuyoS: } public function saveHariEfektif() { goto rgIlQ; uuesi: $smt = $this->dashboard->getSemesterActive(); goto RmGtm; h4CMJ: $data["\x73\x74\x61\x74\x75\163"] = $update; goto GZvMI; zfKUF: $update = $this->db->replace("\155\141\x73\x74\145\x72\x5f\150\141\x72\x69\137\145\x66\145\x6b\x74\x69\x66", $input); goto h4CMJ; RmGtm: $input = ["\x69\x64\x5f\x68\x61\x72\151\x5f\145\146\145\153\164\x69\146" => $tp->id_tp . $smt->id_smt, "\x6a\155\x6c\137\150\141\162\151\137\x65\146\x65\x6b\x74\x69\146" => $this->input->post("\152\155\154\137\150\141\x72\x69", true)]; goto zfKUF; rgIlQ: $tp = $this->dashboard->getTahunActive(); goto uuesi; GZvMI: $this->output_json($data); goto xFqUo; xFqUo: } public function hapusTahun() { goto c_k6F; c_k6F: $id = $this->input->post("\150\x61\160\165\163", true); goto KbetY; nqFd7: $this->logging->saveLog(5, "\155\145\156\x67\x68\141\160\165\x73\x20\164\141\x68\x75\156\40\160\145\154\x61\x6a\141\162\x61\x6e"); goto taaPX; KbetY: if ($this->dashboard->hapus("\x6d\141\163\x74\145\x72\137\x74\x70", $id, "\151\x64\x5f\164\x70")) { goto sL8D9; } goto qnvhA; taaPX: $data["\x73\164\x61\x74\165\x73"] = true; goto TqUeT; B7sai: goto v4WE1; goto RlusI; TqUeT: v4WE1: goto ltKdR; ltKdR: $data["\x6d\x73\147"] = "\x4d\145\156\147\150\x61\x70\x75\163\x20\x54\141\150\x75\156\x20\120\145\154\x61\x6a\141\162\141\x6e"; goto c1db6; RlusI: sL8D9: goto nqFd7; qnvhA: $data["\x73\x74\x61\164\x75\x73"] = false; goto B7sai; c1db6: $this->output_json($data); goto feuqI; feuqI: } public function hapus() { goto jOi8c; FpjE0: yurmf: goto CQfOk; CQfOk: $this->output_json(["\163\164\141\x74\x75\163" => false]); goto SmXJc; Md9iL: if (!$chk) { goto yurmf; } goto BS1p7; AwGgE: MtjiS: goto s0iSW; egGJV: $this->logging->saveLog(5, "\x6d\x65\x6e\x67\150\x61\160\165\x73\x20\x74\141\x68\x75\156\x20\160\x65\154\141\x6a\x61\162\141\156"); goto VdQ5a; BS1p7: if (!$this->dashboard->hapus("\x6d\x61\x73\164\x65\162\x5f\x74\x70", $chk, "\151\x64\x5f\x74\x70")) { goto MtjiS; } goto egGJV; VdQ5a: $this->output_json(["\163\x74\141\164\x75\163" => true, "\x74\x6f\x74\x61\154" => count($chk)]); goto AwGgE; jOi8c: $chk = $this->input->post("\143\x68\x65\x63\153\145\x64", true); goto Md9iL; SmXJc: D51tI: goto jhr9h; s0iSW: goto D51tI; goto FpjE0; jhr9h: } }
