<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\x41\123\105\120\101\124\110") or exit("\x4e\x6f\x20\x64\151\162\x65\x63\164\x20\x73\143\x72\x69\x70\x74\40\141\x63\143\x65\x73\x73\x20\141\154\154\157\167\145\x64"); class Datatahun extends CI_Controller { public function __construct() { goto ON1r5; CaWZw: show_error("\110\141\x6e\171\x61\x20\x41\144\x6d\x69\x6e\151\163\164\162\x61\x74\x6f\162\40\171\x61\156\147\x20\x64\x69\x62\145\162\x69\x20\x68\141\153\40\x75\156\x74\165\153\40\x6d\x65\x6e\147\141\153\x73\145\163\40\150\x61\154\141\x6d\x61\x6e\40\x69\156\x69\54\40\74\x61\40\150\x72\145\x66\75\42" . base_url("\x64\x61\x73\x68\142\x6f\141\x72\x64") . "\x22\76\113\x65\155\x62\x61\154\151\40\153\x65\40\x6d\145\x6e\x75\40\x61\x77\141\x6c\74\57\x61\76", 403, "\x41\153\x73\x65\163\40\x54\x65\162\154\x61\x72\x61\156\x67"); goto sSRq0; p6RWw: if (!$this->ion_auth->logged_in()) { goto PXTHu; } goto Ph6LL; Ph6LL: if ($this->ion_auth->is_admin()) { goto wue2v; } goto CaWZw; EDL2I: PXTHu: goto Abhuo; sSRq0: wue2v: goto fLAOI; dN8M8: $this->load->model("\x44\141\163\x68\x62\157\x61\162\144\x5f\155\x6f\x64\x65\x6c", "\x64\141\x73\150\142\x6f\141\x72\144"); goto oyx_v; fLAOI: goto mMB5x; goto EDL2I; TAZP9: $this->form_validation->set_error_delimiters('', ''); goto yrXxd; oyx_v: $this->load->model("\114\x6f\x67\137\155\x6f\144\145\x6c", "\x6c\x6f\x67\147\151\x6e\147"); goto TAZP9; ON1r5: parent::__construct(); goto p6RWw; shpKz: $this->load->library(["\x64\x61\x74\141\164\141\x62\154\x65\163", "\146\157\162\x6d\137\x76\141\x6c\x69\x64\x61\x74\151\157\156"]); goto QYX8Q; NFyn2: mMB5x: goto shpKz; Abhuo: redirect("\x61\x75\x74\x68"); goto NFyn2; QYX8Q: $this->load->model("\x4d\x61\x73\x74\145\162\x5f\155\157\144\145\154", "\155\141\x73\164\145\x72"); goto dN8M8; yrXxd: } public function output_json($data, $encode = true) { goto hw_nE; hw_nE: if (!$encode) { goto MAR3w; } goto eicgh; eicgh: $data = json_encode($data); goto hsVEy; hsVEy: MAR3w: goto ZzWcn; ZzWcn: $this->output->set_content_type("\x61\160\160\154\x69\x63\x61\x74\x69\x6f\156\x2f\152\x73\x6f\x6e")->set_output($data); goto Caew6; Caew6: } public function index() { goto qgBbM; WqE_L: $this->load->view("\137\164\145\x6d\160\154\141\x74\x65\163\57\144\141\163\150\x62\x6f\141\x72\x64\x2f\x5f\146\157\x6f\x74\145\162"); goto MeZh4; z3XYc: $jml = $this->master->getJmlHariEfektif($tp->id_tp . $smt->id_smt); goto CkolO; zLKW_: $data = ["\x75\163\x65\x72" => $user, "\152\165\144\x75\x6c" => "\x54\141\x68\x75\x6e\x20\x50\x65\154\x61\x6a\x61\162\141\156\40\x64\x61\156\x20\123\x65\155\145\x73\x74\145\162", "\x73\165\142\152\165\144\165\154" => "\x41\x74\x75\x72\x20\124\141\x68\165\156\40\120\145\x6c\141\x6a\141\162\x61\x6e\x20\x64\x61\x6e\x20\123\145\x6d\x65\163\164\x65\162", "\160\162\157\146\x69\154\145" => $this->dashboard->getProfileAdmin($user->id), "\x73\145\x74\164\151\x6e\147" => $this->dashboard->getSetting()]; goto qpptm; xJ31m: $data["\x73\x6d\164"] = $this->dashboard->getSemester(); goto ZroZS; K28iF: $this->load->view("\x6d\x61\x73\x74\x65\162\x2f\164\x61\x68\165\x6e\x2f\x64\x61\164\141"); goto WqE_L; ZroZS: $data["\x73\x6d\164\137\x61\143\164\x69\x76\145"] = $smt; goto z3XYc; qpptm: $tp = $this->dashboard->getTahunActive(); goto f0n5a; f0n5a: $smt = $this->dashboard->getSemesterActive(); goto XsgBa; BTAkR: $this->load->view("\x5f\x74\x65\155\x70\154\141\164\145\163\57\144\141\163\x68\142\x6f\141\x72\144\57\x5f\150\x65\x61\144\145\x72", $data); goto K28iF; TmeQM: $data["\164\160\x5f\x61\143\164\151\166\145"] = $tp; goto xJ31m; XsgBa: $data["\164\x70"] = $this->dashboard->getTahun(); goto TmeQM; CkolO: $data["\152\155\x6c\137\x68\x61\162\x69"] = $jml == null ? "\60" : $jml->jml_hari_efektif; goto BTAkR; qgBbM: $user = $this->ion_auth->user()->row(); goto zLKW_; MeZh4: } public function data() { $this->output_json($this->dashboard->getDataTahun(), false); } public function gantiTahun() { goto ofVvO; ixMzy: $this->dashboard->update("\155\141\x73\164\x65\162\137\x74\x70", $update, "\x69\x64\x5f\164\160", null, true); goto Qm9_O; gqNgo: NU41l: goto ixMzy; xm7zm: foreach ($inputTp as $tps) { goto AuMAS; rAA7M: $tahun = $tps->tp; goto rVyG3; sedLm: gIiGH: goto e_yJK; nC0Rl: GsGFh: goto h3O2z; e_yJK: $active = 1; goto pJkSq; yL_LM: $active = 0; goto pfjkc; pfjkc: goto dca1A; goto sedLm; ct5Fa: $update[] = array("\x69\144\x5f\164\x70" => $id_tp, "\x74\141\150\165\156" => $tahun, "\x61\x63\164\x69\166\145" => $active); goto nC0Rl; rVyG3: if ($id_tp === $aktif) { goto gIiGH; } goto yL_LM; AuMAS: $id_tp = $tps->id; goto rAA7M; pJkSq: dca1A: goto ct5Fa; h3O2z: } goto gqNgo; nv225: $data["\165\160\144\141\164\x65"] = $update; goto Tt0qO; WeQN1: $this->output_json($data); goto cfus_; Tt0qO: $data["\x73\164\141\x74\x75\163"] = true; goto c2SkC; c2SkC: $this->logging->saveLog(4, "\x6d\x65\156\147\x67\x61\156\x74\151\40\x74\141\150\x75\156\x20\x61\152\141\162\141\x6e\x20\141\x6b\x74\x69\x66"); goto WeQN1; ofVvO: $aktif = $this->input->post("\141\143\x74\x69\166\145", true); goto Zm0cz; Zm0cz: $inputTp = json_decode($this->input->post("\x74\141\x68\x75\x6e", false)); goto xm7zm; Qm9_O: $data["\x6d\163\x67"] = "\115\145\162\x75\x62\141\x68\x20\x54\x61\150\x75\x6e\40\101\x6b\x74\x69\x66"; goto nv225; cfus_: } public function gantiSemester() { goto NxqHf; fh853: e7u02: goto xci1H; MiyU2: $this->logging->saveLog(4, "\x6d\145\x6e\147\x67\x61\156\164\x69\40\163\145\x6d\145\x73\164\145\x72\40\x61\x6b\164\x69\146"); goto Mg1iz; NxqHf: $aktif = $this->input->post("\x61\143\x74\151\x76\x65", true); goto tOtlW; D0Q4J: foreach ($inputSmt as $tps) { goto Vb9uV; g1cwe: $active = 1; goto qwywB; E0HZ2: goto PquQq; goto xr4N2; YfNtE: $active = 0; goto E0HZ2; xr4N2: flwaP: goto g1cwe; pCn2P: rJ5QQ: goto dysTM; lTouz: $update[] = array("\x69\144\x5f\x73\x6d\x74" => $id_smt, "\x73\x6d\164" => $smt, "\141\143\x74\151\x76\x65" => $active); goto pCn2P; KkirZ: if ($id_smt === $aktif) { goto flwaP; } goto YfNtE; m3CQV: $smt = $tps->Semester; goto KkirZ; Vb9uV: $id_smt = $tps->id; goto m3CQV; qwywB: PquQq: goto lTouz; dysTM: } goto fh853; zWGfz: $data["\x75\x70\144\141\164\x65"] = $update; goto NY8D3; Mg1iz: $this->output_json($data); goto W75Vm; tOtlW: $inputSmt = json_decode($this->input->post("\x73\x65\155\145\163\x74\x65\x72", false)); goto D0Q4J; xci1H: $this->dashboard->update("\x6d\x61\x73\164\145\162\137\x73\x6d\164", $update, "\x69\144\x5f\163\155\x74", null, true); goto AHvq0; AHvq0: $data["\x6d\x73\x67"] = "\115\x65\162\165\142\141\x68\40\x53\x65\x6d\x65\x73\164\145\x72\40\x41\x6b\x74\151\146"; goto zWGfz; NY8D3: $data["\163\164\141\x74\165\x73"] = true; goto MiyU2; W75Vm: } public function add() { goto UopYj; XWd4R: $data = $this->master->create("\x6d\x61\163\164\145\162\137\164\x70", $insert); goto sTBTZ; vc2OD: Ide9v: goto pR3N0; osTdy: $this->logging->saveLog(4, "\x6d\x65\x6e\x67\x65\x64\x69\x74\x20\x74\141\x68\x75\156\x20\160\145\154\x61\152\141\x72\141\x6e"); goto AYujy; vaOtQ: $tahun = $this->input->post("\164\x61\150\165\x6e", true); goto rH0Dl; rH0Dl: if ($method === "\141\144\144") { goto Ide9v; } goto XPiWx; uVqm8: $data = $this->master->update("\x6d\141\163\164\x65\162\137\164\160", $update, "\x69\144\x5f\164\x70", $id); goto osTdy; l80G0: $update = array("\151\144\x5f\164\160" => $id, "\164\141\x68\x75\x6e" => $tahun); goto uVqm8; pR3N0: $insert = ["\x74\141\x68\x75\156" => $tahun]; goto XWd4R; UopYj: $method = $this->input->post("\155\x65\x74\150\157\144", true); goto vaOtQ; XPiWx: $id = $this->input->post("\x69\144\137\x74\141\x68\165\156", true); goto l80G0; I3NVd: $this->output->set_content_type("\x61\x70\x70\154\151\x63\141\x74\151\x6f\156\x2f\152\163\x6f\x6e")->set_output($data); goto NP7T4; AYujy: goto USyI7; goto vc2OD; PbUgE: USyI7: goto I3NVd; sTBTZ: $this->logging->saveLog(3, "\x6d\x65\156\141\155\x62\x61\x68\40\x74\x61\150\165\156\40\160\x65\154\141\152\x61\162\x61\x6e"); goto PbUgE; NP7T4: } public function saveHariEfektif() { goto UI_HA; UI_HA: $tp = $this->dashboard->getTahunActive(); goto x1h5H; sqOp2: $input = ["\x69\x64\x5f\x68\141\x72\151\137\x65\x66\x65\153\x74\151\x66" => $tp->id_tp . $smt->id_smt, "\152\x6d\x6c\137\150\141\x72\x69\x5f\x65\x66\145\153\164\x69\146" => $this->input->post("\152\x6d\154\x5f\x68\x61\x72\151", true)]; goto TR2hR; x1h5H: $smt = $this->dashboard->getSemesterActive(); goto sqOp2; TR2hR: $update = $this->db->replace("\x6d\x61\x73\x74\145\x72\x5f\x68\141\162\151\x5f\145\146\145\x6b\164\x69\x66", $input); goto s6hSN; TTaOA: $this->output_json($data); goto dWhgl; s6hSN: $data["\163\164\x61\x74\165\163"] = $update; goto TTaOA; dWhgl: } public function hapusTahun() { goto Lrs1I; OvN6i: $data["\163\164\x61\x74\165\163"] = false; goto g4Bew; D5iAI: GaNIn: goto NzZLN; Lrs1I: $id = $this->input->post("\150\x61\160\165\x73", true); goto ItXQE; ItXQE: if ($this->dashboard->hapus("\155\141\163\x74\145\162\x5f\164\x70", $id, "\x69\144\x5f\x74\x70")) { goto GaNIn; } goto OvN6i; yV_lo: $data["\x6d\163\x67"] = "\x4d\145\156\147\x68\141\160\165\163\x20\x54\141\x68\165\156\40\120\x65\x6c\x61\152\141\162\x61\x6e"; goto b_uND; g4Bew: goto Felv4; goto D5iAI; NzZLN: $this->logging->saveLog(5, "\155\145\156\x67\x68\x61\160\x75\x73\40\164\x61\x68\165\x6e\40\160\145\x6c\141\152\141\162\x61\x6e"); goto oX6XD; UL3nB: Felv4: goto yV_lo; b_uND: $this->output_json($data); goto X3JVj; oX6XD: $data["\x73\164\x61\x74\165\163"] = true; goto UL3nB; X3JVj: } public function hapus() { goto kry8S; LlZao: if (!$this->dashboard->hapus("\x6d\141\x73\x74\145\162\x5f\164\160", $chk, "\x69\144\137\x74\x70")) { goto BIeWu; } goto XOtq1; vlNxY: goto lvtqO; goto KlVVH; kry8S: $chk = $this->input->post("\143\x68\145\143\x6b\x65\x64", true); goto p4I0y; qzjDy: $this->output_json(["\x73\x74\x61\164\165\163" => true, "\x74\x6f\x74\x61\x6c" => count($chk)]); goto PhsJy; W2Rxm: $this->output_json(["\x73\164\x61\164\x75\x73" => false]); goto IJPaS; IJPaS: lvtqO: goto ZzdUT; KlVVH: ddDOE: goto W2Rxm; PhsJy: BIeWu: goto vlNxY; p4I0y: if (!$chk) { goto ddDOE; } goto LlZao; XOtq1: $this->logging->saveLog(5, "\x6d\145\156\147\150\141\160\x75\x73\x20\164\x61\x68\165\x6e\40\x70\x65\x6c\x61\152\141\162\141\x6e"); goto qzjDy; ZzdUT: } }
