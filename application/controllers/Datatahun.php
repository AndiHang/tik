<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\x42\101\x53\105\120\101\x54\110") or exit("\116\157\x20\144\151\x72\145\143\164\x20\163\143\x72\151\x70\164\x20\141\x63\143\145\163\x73\40\x61\154\154\x6f\x77\x65\x64"); class Datatahun extends CI_Controller { public function __construct() { goto fiQTj; SwJF4: $this->load->model("\104\x61\x73\x68\x62\157\x61\162\144\137\155\157\x64\x65\x6c", "\x64\141\x73\x68\142\157\141\x72\144"); goto BnuGM; fiQTj: parent::__construct(); goto fA8nh; E6ShN: $this->load->library(["\144\141\x74\x61\164\x61\142\x6c\145\x73", "\146\x6f\x72\x6d\x5f\166\141\154\151\x64\x61\x74\x69\x6f\x6e"]); goto A61Ai; SKZ7_: q6noR: goto E6ShN; qvKlv: nTMcN: goto TtT9a; fA8nh: if (!$this->ion_auth->logged_in()) { goto VdTgM; } goto xdvLT; RixEB: $this->form_validation->set_error_delimiters('', ''); goto aOJEd; A61Ai: $this->load->model("\x4d\x61\x73\x74\x65\x72\137\155\x6f\x64\145\154", "\x6d\141\x73\x74\145\162"); goto SwJF4; BnuGM: $this->load->model("\x4c\x6f\x67\x5f\155\x6f\x64\145\x6c", "\154\x6f\x67\147\151\156\x67"); goto RixEB; TtT9a: goto q6noR; goto PP6rj; xdvLT: if ($this->ion_auth->is_admin()) { goto nTMcN; } goto K9yI3; PP6rj: VdTgM: goto aM2Y8; aM2Y8: redirect("\x61\x75\x74\150"); goto SKZ7_; K9yI3: show_error("\110\x61\156\171\x61\x20\x41\144\x6d\151\156\151\x73\x74\x72\x61\x74\x6f\x72\x20\x79\141\x6e\147\40\144\x69\x62\x65\x72\x69\40\x68\141\x6b\40\x75\x6e\x74\x75\153\x20\155\x65\x6e\x67\141\x6b\163\x65\x73\x20\x68\x61\154\x61\x6d\141\x6e\40\151\x6e\x69\54\x20\x3c\141\x20\150\x72\145\x66\75\x22" . base_url("\x64\141\163\150\x62\157\x61\162\144") . "\42\x3e\113\145\x6d\x62\x61\x6c\151\40\153\145\x20\155\x65\x6e\x75\x20\x61\x77\141\154\74\x2f\141\x3e", 403, "\101\x6b\x73\x65\x73\x20\124\145\162\154\x61\x72\x61\x6e\x67"); goto qvKlv; aOJEd: } public function output_json($data, $encode = true) { goto VzrCs; VzrCs: if (!$encode) { goto p1noH; } goto BsATY; TzsAA: p1noH: goto PjaWv; BsATY: $data = json_encode($data); goto TzsAA; PjaWv: $this->output->set_content_type("\141\160\x70\154\x69\x63\141\164\x69\x6f\x6e\x2f\x6a\163\x6f\156")->set_output($data); goto EqUpr; EqUpr: } public function index() { goto bLrPy; kON3_: $data["\x74\160"] = $this->dashboard->getTahun(); goto glr3R; FsCXN: $smt = $this->dashboard->getSemesterActive(); goto kON3_; FWeor: $this->load->view("\137\x74\x65\155\160\154\141\164\145\163\57\x64\141\163\150\x62\x6f\x61\162\144\57\x5f\146\157\157\164\x65\162"); goto A1lTq; Qf6JV: $this->load->view("\155\x61\163\164\x65\162\57\164\x61\x68\x75\x6e\57\x64\x61\x74\x61"); goto FWeor; glr3R: $data["\164\x70\x5f\x61\143\x74\x69\166\145"] = $tp; goto IfyV_; wMgBO: $data = ["\165\163\145\162" => $user, "\x6a\x75\x64\165\154" => "\124\x61\150\x75\156\40\120\x65\154\141\x6a\x61\x72\141\x6e\40\144\x61\x6e\x20\x53\145\155\x65\x73\164\x65\x72", "\163\165\142\152\165\144\x75\x6c" => "\101\164\x75\162\x20\124\x61\150\x75\156\40\120\x65\x6c\x61\x6a\x61\162\x61\x6e\40\x64\x61\156\x20\123\145\x6d\145\x73\164\145\162", "\160\162\157\146\151\x6c\x65" => $this->dashboard->getProfileAdmin($user->id), "\x73\x65\164\164\x69\x6e\147" => $this->dashboard->getSetting()]; goto dXYe0; MF3Ws: $data["\163\155\164\137\141\143\164\151\x76\x65"] = $smt; goto MdSgR; tAlPq: $this->load->view("\x5f\x74\x65\155\160\154\x61\164\x65\x73\57\144\141\x73\150\x62\x6f\x61\162\x64\57\x5f\150\x65\x61\144\145\x72", $data); goto Qf6JV; bLrPy: $user = $this->ion_auth->user()->row(); goto wMgBO; dXYe0: $tp = $this->dashboard->getTahunActive(); goto FsCXN; MdSgR: $jml = $this->master->getJmlHariEfektif($tp->id_tp . $smt->id_smt); goto HOWPD; HOWPD: $data["\x6a\x6d\x6c\x5f\150\141\162\x69"] = $jml == null ? "\60" : $jml->jml_hari_efektif; goto tAlPq; IfyV_: $data["\163\155\x74"] = $this->dashboard->getSemester(); goto MF3Ws; A1lTq: } public function data() { $this->output_json($this->dashboard->getDataTahun(), false); } public function gantiTahun() { goto kbAsl; miVUx: $this->logging->saveLog(4, "\x6d\x65\156\147\147\x61\156\164\x69\40\x74\x61\150\165\156\40\x61\152\x61\162\141\156\x20\x61\x6b\164\x69\x66"); goto EzAnX; kbAsl: $aktif = $this->input->post("\141\x63\164\151\x76\x65", true); goto mSub2; EzAnX: $this->output_json($data); goto PNLRy; mSub2: $inputTp = json_decode($this->input->post("\x74\141\x68\x75\x6e", false)); goto BV2A0; BV2A0: foreach ($inputTp as $tps) { goto vUSUo; fgwL0: RE2fb: goto nP9dv; Yo3iq: if ($id_tp === $aktif) { goto ba239; } goto Ij6gU; lPO5X: $active = 1; goto fgwL0; ZuUEp: mHf_I: goto mibwK; PhWl3: ba239: goto lPO5X; vUSUo: $id_tp = $tps->id; goto cJ011; nP9dv: $update[] = array("\151\x64\137\x74\x70" => $id_tp, "\164\141\150\x75\156" => $tahun, "\141\143\164\151\x76\x65" => $active); goto ZuUEp; lAKbo: goto RE2fb; goto PhWl3; Ij6gU: $active = 0; goto lAKbo; cJ011: $tahun = $tps->tp; goto Yo3iq; mibwK: } goto omTTC; fDpAd: $data["\x75\160\144\x61\x74\145"] = $update; goto ccB9H; omTTC: W79pS: goto cvIZB; cvIZB: $this->dashboard->update("\155\x61\x73\x74\x65\x72\x5f\x74\160", $update, "\x69\144\x5f\164\160", null, true); goto yROm_; ccB9H: $data["\x73\164\141\x74\x75\163"] = true; goto miVUx; yROm_: $data["\x6d\x73\x67"] = "\115\x65\x72\x75\142\141\x68\x20\x54\141\150\x75\x6e\x20\x41\153\164\x69\146"; goto fDpAd; PNLRy: } public function gantiSemester() { goto r05oc; g6g2Q: $data["\x6d\163\x67"] = "\x4d\145\162\x75\x62\x61\150\40\x53\145\155\x65\163\x74\145\x72\x20\101\153\x74\x69\146"; goto OwGC7; fDNOn: $inputSmt = json_decode($this->input->post("\163\145\155\145\163\164\145\162", false)); goto Jp5V8; Jp5V8: foreach ($inputSmt as $tps) { goto BczKy; R1tTx: goto KnuEw; goto e0rvA; rwer7: if ($id_smt === $aktif) { goto xtzzA; } goto dfhNX; hx_In: ypOla: goto qp3QU; YSMdL: $update[] = array("\151\x64\x5f\163\x6d\164" => $id_smt, "\163\x6d\164" => $smt, "\141\143\x74\x69\x76\x65" => $active); goto hx_In; nPwZr: $active = 1; goto SEEX_; oAPAT: $smt = $tps->Semester; goto rwer7; SEEX_: KnuEw: goto YSMdL; BczKy: $id_smt = $tps->id; goto oAPAT; e0rvA: xtzzA: goto nPwZr; dfhNX: $active = 0; goto R1tTx; qp3QU: } goto Ffviy; r05oc: $aktif = $this->input->post("\141\143\x74\151\166\x65", true); goto fDNOn; fiKY1: $this->output_json($data); goto I1UEA; mlG6m: $this->logging->saveLog(4, "\x6d\145\156\x67\x67\141\x6e\164\x69\40\163\x65\155\x65\x73\x74\x65\x72\40\141\153\x74\x69\146"); goto fiKY1; OwGC7: $data["\x75\160\144\141\x74\145"] = $update; goto kg1wR; SHZ_C: $this->dashboard->update("\155\x61\x73\164\x65\x72\137\163\155\x74", $update, "\151\x64\x5f\x73\x6d\x74", null, true); goto g6g2Q; kg1wR: $data["\x73\164\x61\x74\x75\163"] = true; goto mlG6m; Ffviy: FsbzM: goto SHZ_C; I1UEA: } public function add() { goto nUCTS; QxgET: $tahun = $this->input->post("\x74\x61\x68\x75\156", true); goto JeHXV; C26Oj: $data = $this->master->create("\x6d\x61\x73\164\x65\162\x5f\x74\x70", $insert); goto Shftn; nUCTS: $method = $this->input->post("\155\145\164\150\157\144", true); goto QxgET; qraoP: goto D5mP0; goto s2Q_3; I1kVD: $insert = ["\164\141\150\165\x6e" => $tahun]; goto C26Oj; xTKSX: $this->output->set_content_type("\x61\x70\x70\154\151\143\x61\x74\151\x6f\156\57\x6a\163\157\x6e")->set_output($data); goto r9HYY; Icbgg: $data = $this->master->update("\155\141\x73\164\x65\x72\137\x74\x70", $update, "\151\x64\137\x74\160", $id); goto MsjOb; MZASr: $update = array("\151\x64\137\x74\160" => $id, "\164\x61\150\x75\x6e" => $tahun); goto Icbgg; s2Q_3: dxQsh: goto I1kVD; Tf7GU: $id = $this->input->post("\151\x64\137\164\x61\150\165\x6e", true); goto MZASr; Shftn: $this->logging->saveLog(3, "\155\145\156\141\155\142\141\x68\x20\164\x61\150\165\156\40\160\x65\154\141\x6a\141\x72\x61\x6e"); goto DHAqu; DHAqu: D5mP0: goto xTKSX; JeHXV: if ($method === "\x61\144\144") { goto dxQsh; } goto Tf7GU; MsjOb: $this->logging->saveLog(4, "\155\145\156\x67\145\x64\151\164\x20\164\x61\x68\165\156\x20\x70\x65\x6c\x61\152\x61\162\x61\x6e"); goto qraoP; r9HYY: } public function saveHariEfektif() { goto P0dGz; AWdFz: $smt = $this->dashboard->getSemesterActive(); goto nyCam; qpKmT: $data["\163\164\x61\x74\x75\163"] = $update; goto Reoeu; nyCam: $input = ["\x69\x64\137\150\x61\162\151\137\145\146\x65\x6b\x74\151\x66" => $tp->id_tp . $smt->id_smt, "\x6a\155\x6c\x5f\150\141\x72\151\137\145\x66\x65\153\164\x69\146" => $this->input->post("\152\x6d\x6c\137\x68\141\162\151", true)]; goto ur_Ot; P0dGz: $tp = $this->dashboard->getTahunActive(); goto AWdFz; Reoeu: $this->output_json($data); goto qmhk0; ur_Ot: $update = $this->db->replace("\155\x61\x73\164\x65\x72\x5f\x68\141\x72\x69\x5f\145\146\x65\x6b\164\151\146", $input); goto qpKmT; qmhk0: } public function hapusTahun() { goto rV3vW; t0JPe: $data["\x6d\x73\147"] = "\x4d\145\156\x67\x68\x61\160\165\x73\x20\x54\x61\x68\165\156\x20\120\x65\154\141\x6a\141\162\x61\x6e"; goto M65qW; b2jkS: $data["\163\x74\141\164\165\163"] = false; goto bcCkx; SwdHK: PcXhh: goto t0JPe; bcCkx: goto PcXhh; goto qFzZV; BwXAL: $this->logging->saveLog(5, "\155\145\x6e\x67\150\x61\x70\x75\x73\40\x74\141\x68\165\x6e\x20\160\145\154\x61\x6a\x61\x72\141\156"); goto jGAGU; M65qW: $this->output_json($data); goto mzGxl; qFzZV: mcghd: goto BwXAL; rV3vW: $id = $this->input->post("\150\141\x70\165\163", true); goto G2602; jGAGU: $data["\163\164\x61\164\165\163"] = true; goto SwdHK; G2602: if ($this->dashboard->hapus("\155\x61\x73\164\145\x72\x5f\164\160", $id, "\151\x64\137\x74\x70")) { goto mcghd; } goto b2jkS; mzGxl: } public function hapus() { goto KkP7z; KkP7z: $chk = $this->input->post("\143\150\145\143\153\x65\144", true); goto X7esE; AAweQ: $this->logging->saveLog(5, "\155\145\x6e\x67\150\x61\x70\x75\163\x20\164\x61\150\165\x6e\x20\x70\x65\x6c\141\152\141\x72\141\x6e"); goto WarIE; FqmCW: XL9BC: goto MRiqn; KYcl0: bddr8: goto vBLnp; MRiqn: goto xlwMh; goto KYcl0; vBLnp: $this->output_json(["\163\x74\141\164\x75\163" => false]); goto vmW3T; WarIE: $this->output_json(["\x73\164\x61\164\165\x73" => true, "\x74\157\164\x61\x6c" => count($chk)]); goto FqmCW; rsRbu: if (!$this->dashboard->hapus("\x6d\141\x73\164\145\162\x5f\x74\160", $chk, "\151\144\x5f\x74\160")) { goto XL9BC; } goto AAweQ; X7esE: if (!$chk) { goto bddr8; } goto rsRbu; vmW3T: xlwMh: goto Mozcs; Mozcs: } }
