<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\101\x53\105\120\x41\124\110") or exit("\116\157\40\x64\151\x72\x65\143\x74\40\x73\x63\x72\x69\x70\x74\x20\141\x63\x63\x65\163\x73\40\x61\154\154\x6f\167\145\144"); class Update extends CI_Controller { function __construct() { goto IFOl0; K4lpT: $this->load->dbforge(); goto MZzHf; MZzHf: $this->load->database(); goto pnLoh; IFOl0: parent::__construct(); goto yXxJU; pnLoh: $this->load->library("\x65\x6e\x63\x72\x79\x70\x74\x69\x6f\156"); goto iyWq3; yXxJU: include APPPATH . "\x63\x6f\156\x66\151\x67\57\x64\x61\164\x61\142\141\x73\x65\x2e\x70\x68\160"; goto K4lpT; iyWq3: } public function output_json($data, $encode = true) { goto ZAuhL; ZAuhL: if (!$encode) { goto kaiUO; } goto BUJl_; czU0S: kaiUO: goto ndPL6; ndPL6: $this->output->set_content_type("\141\160\160\x6c\151\x63\141\x74\151\x6f\156\x2f\x6a\x73\157\156")->set_output($data); goto NACeU; BUJl_: $data = json_encode($data); goto czU0S; NACeU: } public function index() { goto YEWt0; RWU8P: $this->load->view("\x69\x6e\x73\164\x61\154\154\57\150\x65\x61\x64\x65\x72", $data); goto CCZFG; CCZFG: $this->load->view("\151\x6e\163\164\x61\x6c\154\57\165\160\x64\x61\164\145"); goto CGwqw; LtFtM: $json = json_decode($json); goto GVE2V; GVE2V: $json = (array) $json; goto mHTNY; CGwqw: $this->load->view("\151\x6e\x73\x74\141\154\154\57\146\x6f\157\164\x65\x72"); goto g9c2s; YEWt0: $json = file_get_contents("\56\x2f\x61\x73\163\145\x74\x73\57\x61\x70\160\x2f\x64\x62\57\144\x61\164\141\x62\141\163\145\x2e\152\163\x6f\156"); goto LtFtM; mHTNY: $data["\x6a\x73\157\156"] = $json; goto RWU8P; g9c2s: } function object_to_array($data) { goto YUa69; LW2VA: F6igD: goto PpK4z; Ju6a0: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; nvDjY: } goto LW2VA; EaJdB: pHgQz: goto hXXOy; hXXOy: return $data; goto qjl3t; lnA0H: $result = []; goto Ju6a0; YUa69: if (!(is_array($data) || is_object($data))) { goto pHgQz; } goto lnA0H; PpK4z: return $result; goto EaJdB; qjl3t: } public function checkDatabase() { goto XfcPc; d2TMa: $tbl_baru = array_keys($json); goto ubL6B; Tnr9V: $full_tables = array_merge($tbl_baru, $tbl_ada); goto rgUiU; oyPlB: $data = ["\144\x62" => $fields, "\x63\x72\145\x61\164\x65" => $create_tables, "\x6d\x6f\144\x69\x66\171" => $edit_columns, "\x61\x64\144" => $add_columns, "\x63\157\165\156\x74\x73" => $counts, "\x6a\163\157\156" => $json, "\143\x75\x72\162\x65\156\164" => $currentDb]; goto mlONJ; RkaKj: foreach ($tabless as $table) { goto TtK_C; nRvhV: $retval[$i]->name = $query[$i]->column_name; goto B7RZK; uns0P: goto eJs6H; goto YWZ13; SxNeP: $i++; goto ys106; DG_GE: PuuHg: goto iniiq; h3tG4: $c = count($query); goto drM3p; b3nxe: if (!($query[$i]->extra != '')) { goto w3UuH; } goto BMNDm; M30QV: $sql = "\123\x45\x4c\x45\103\x54\40\x60\x63\157\154\165\x6d\x6e\x5f\156\x61\155\145\140\x2c\x20\140\x6e\165\x6d\145\x72\151\x63\137\160\162\x65\143\151\x73\151\157\x6e\140\54\x20\140\x65\x78\x74\162\x61\140\x2c\x20\140\x69\x73\137\156\165\x6c\x6c\141\x62\x6c\x65\140" . "\40\106\122\x4f\x4d\40\140\x69\x6e\146\x6f\162\x6d\x61\x74\x69\157\x6e\137\x73\x63\x68\145\155\141\x60\56\140\143\x6f\x6c\x75\155\x6e\x73\x60\x20\x57\110\x45\x52\105\x20\164\x61\x62\x6c\x65\x5f\x73\x63\x68\x65\x6d\141\x20\x3d\40\42" . $this->db->database . "\42\x20\101\x4e\x44\40\164\141\x62\x6c\145\x5f\x6e\x61\155\145\x20\75\x20\x22" . $table . "\x22"; goto NHXqw; TtK_C: $datafld = $this->db->field_data($table); goto M30QV; BMNDm: if ($query[$i]->extra == "\x61\x75\164\x6f\x5f\151\x6e\143\162\145\155\x65\156\x74") { goto xTl_X; } goto BT0cg; HLrUO: $fields[$table] = $datafld; goto viqY_; VGLUK: $datafld[$i]->auto_increment = true; goto uSGAH; KE833: if (!($i < $c)) { goto Z1xbn; } goto GaTek; m26SQ: $currentDb = FALSE; goto DG_GE; aTGv7: $retval = array(); goto xcT18; BT0cg: $datafld[$i]->extra = $query[$i]->extra; goto uns0P; YWZ13: xTl_X: goto VGLUK; uSGAH: eJs6H: goto uj5Ct; Ocwf8: kZNQq: goto SxNeP; NHXqw: if (!(($query = $this->db->query($sql)) === FALSE)) { goto PuuHg; } goto m26SQ; B7RZK: $retval[$i]->extra = $query[$i]->extra; goto Ocwf8; wBqh3: rA6Gm: goto o5iB5; xcT18: $i = 0; goto h3tG4; iniiq: $query = $query->result_object(); goto aTGv7; ys106: goto Y2OQq; goto wcOM2; drM3p: Y2OQq: goto KE833; viqY_: nrcWR: goto hbrf2; uj5Ct: w3UuH: goto wBqh3; GaTek: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto rA6Gm; } goto b3nxe; balTh: $currentDb[$table] = $retval; goto HLrUO; wcOM2: Z1xbn: goto balTh; o5iB5: $retval[$i] = new stdClass(); goto nRvhV; hbrf2: } goto D0bex; fxBc6: $fields = []; goto mSh1q; eu_vY: $json = file_get_contents("\56\57\x61\163\163\x65\x74\163\x2f\141\160\x70\x2f\x64\x62\57\144\141\x74\141\142\x61\x73\x65\x2e\x6a\x73\157\156"); goto OPKt4; VkNZ5: oJi5a: goto UdeLo; OPKt4: $json = json_decode($json); goto ABfZH; mSh1q: $currentDb = []; goto RkaKj; rgUiU: $full_tables = array_unique($full_tables); goto NgCvj; ubL6B: $tbl_ada = array_keys($fields); goto Tnr9V; FUZTL: $edit_columns = []; goto vU6vr; D0bex: qqyKs: goto eu_vY; c9mN2: $create_tables = []; goto lK5Aw; NgCvj: sort($full_tables); goto c9mN2; vU6vr: foreach ($full_tables as $table) { goto zfm8s; I3iGr: foreach ($json[$table] as $jtbl) { goto EXj1A; EXj1A: if ($this->db->field_exists($jtbl->name, $table)) { goto GWHwO; } goto F1VDd; m4vt_: goto TOHGO; goto kmXVc; kmXVc: GWHwO: goto WOwz_; Y8O30: FPHGg: goto LSF03; XB387: aC1aP: goto cww46; LSF03: TOHGO: goto XB387; F1VDd: $add_columns[$table][] = $jtbl; goto m4vt_; WOwz_: foreach ($fields[$table] as $ftbl) { goto TR3M7; y0t7m: $edit_columns[$table][] = $jtbl; goto dOiAG; TR3M7: if (!($jtbl->name == $ftbl->name)) { goto V0Ysi; } goto TnTUM; dOiAG: zM4QB: goto aIrDA; aIrDA: V0Ysi: goto hR4U_; hR4U_: BfE7T: goto i18jS; TnTUM: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto zM4QB; } goto y0t7m; i18jS: } goto Y8O30; cww46: } goto OQQsF; I6gLN: lr7ib: goto FptYl; hyNjf: OkDjo: goto YhXAC; zfm8s: if ($this->db->table_exists($table)) { goto lr7ib; } goto eLkD9; eLkD9: $create_tables[$table] = $json[$table]; goto MORzo; DSlZr: lpC7n: goto hyNjf; FptYl: if (!isset($json[$table])) { goto lpC7n; } goto I3iGr; OQQsF: cO03P: goto DSlZr; YhXAC: tQfYq: goto yw7qT; MORzo: goto OkDjo; goto I6gLN; yw7qT: } goto VkNZ5; mlONJ: $this->output_json($data); goto iwMh_; NW3aD: $tabless = $this->db->list_tables(); goto fxBc6; XfcPc: $db_debug = $this->db->db_debug; goto invDT; ABfZH: $json = (array) $json; goto d2TMa; UdeLo: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto oyPlB; lK5Aw: $add_columns = []; goto FUZTL; invDT: $this->db->db_debug = FALSE; goto NW3aD; iwMh_: } public function updateDatabase() { goto njtc5; A1dgo: foreach ($full_tables as $table) { goto QFhSk; X1sQW: qGZBZ: goto Ifkkm; arSHk: fwRWo: goto wxhJC; jcqww: $this->db->query("\x41\114\124\x45\x52\40\124\101\102\114\x45\x20\40\140" . $table . "\x60\40\x45\x4e\107\111\x4e\x45\40\x3d\x20\111\156\x6e\157\104\102"); goto gYSLU; ML230: LUlaz: goto Qp_YK; xZoGw: $this->dbforge->create_table($table, TRUE); goto jcqww; QFhSk: if ($this->db->table_exists($table)) { goto fwRWo; } goto wKMx6; Yoamz: foreach ($json[$table] as $tbl => $jtbl) { goto EqNts; c3HWe: OmvC7: goto NXWOS; TtLXA: if (!($jtbl->primary_key == 1)) { goto OmvC7; } goto U2GLZ; U2GLZ: $this->dbforge->add_key($jtbl->name, true); goto c3HWe; T2Gef: $this->dbforge->add_field($field); goto TtLXA; EqNts: $field = [$jtbl->name => ["\164\x79\x70\x65" => $jtbl->type, "\143\157\156\x73\x74\x72\x61\x69\156\x74" => $jtbl->max_length, "\x6e\x75\154\x6c" => $jtbl->primary_key == 0]]; goto T2Gef; NXWOS: LnFsN: goto em4CC; em4CC: } goto CJBvW; gYSLU: IkUW6: goto Igf14; fZZQd: foreach ($json[$table] as $jtbl) { goto HUlRv; x8Zxi: foreach ($fields[$table] as $ftbl) { goto QOK52; YlRsj: $field = array($jtbl->name . "\40\x64\141\x74\145\164\x69\155\x65\x20\x64\x65\146\141\165\x6c\164\x20\x63\x75\162\x72\145\x6e\164\x5f\x74\151\x6d\145\163\x74\141\x6d\x70" . $onUpdate); goto V69_P; tsDBt: $this->dbforge->modify_column($table, $field); goto crcpY; VG6cL: goto MoG4u; goto xZD3E; xZD3E: JX_bM: goto gEWyq; eGF2v: $onUpdate = isset($jtbl->extra) ? "\x20" . strtolower($jtbl->extra) : ''; goto YlRsj; DramZ: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto wvl_Y; } goto WgIFn; V69_P: T9Cif: goto RAyKG; gmXDd: UWyal: goto eGF2v; gEWyq: $field = array($jtbl->name => array("\164\x79\x70\145" => $jtbl->type, "\143\x6f\x6e\163\164\162\141\x69\x6e\x74" => $jtbl->max_length, "\156\x75\154\154" => false, "\141\x75\x74\157\137\151\156\x63\162\x65\155\145\x6e\164" => true)); goto uIWTa; RAyKG: $this->dbforge->modify_column($table, $field); goto JoDQm; C8X7k: $this->dbforge->add_key($jtbl->name, true); goto tsDBt; uIWTa: MoG4u: goto C8X7k; IZlz9: if ($jtbl->auto_increment == true) { goto JX_bM; } goto A0C9B; JoDQm: X7doc: goto RFb4M; WgIFn: if ($jtbl->primary_key == 0) { goto Sx1ec; } goto IZlz9; epC1c: Sx1ec: goto Hmqqr; Hmqqr: if ($jtbl->default == "\x43\x55\122\122\x45\x4e\x54\137\x54\111\x4d\x45\123\x54\x41\x4d\120") { goto UWyal; } goto t7NZN; RFb4M: wvl_Y: goto T7IAL; WWeAs: YjV4u: goto ZyWXa; QOK52: if (!($jtbl->name == $ftbl->name)) { goto hKaOA; } goto DramZ; crcpY: goto X7doc; goto epC1c; T7IAL: hKaOA: goto WWeAs; djP9g: goto T9Cif; goto gmXDd; A0C9B: $field = array($jtbl->name => array("\164\x79\160\145" => $jtbl->type, "\x63\x6f\156\163\x74\162\x61\x69\156\164" => $jtbl->max_length, "\156\x75\154\x6c" => false)); goto VG6cL; t7NZN: $field = array($jtbl->name => array("\164\x79\x70\145" => $jtbl->type, "\143\x6f\156\163\x74\x72\141\151\156\x74" => $jtbl->max_length, "\x64\x65\x66\x61\165\x6c\x74" => $jtbl->default)); goto djP9g; ZyWXa: } goto z3Y1s; m5zuB: Ufs4D: goto x8Zxi; HUlRv: if ($this->db->field_exists($jtbl->name, $table)) { goto Ufs4D; } goto CjIli; yW84w: $this->dbforge->add_key($jtbl->name, true); goto AhiqZ; HHzqL: mbnsJ: goto Xj56w; oMj28: qeXiW: goto yg_l6; CjIli: if ($jtbl->primary_key == 0) { goto cUICl; } goto wUGsM; Pi6Gn: $field = array($jtbl->name => array("\x74\x79\160\145" => $jtbl->type, "\143\x6f\156\x73\x74\x72\x61\x69\x6e\x74" => $jtbl->max_length, "\x64\145\x66\141\x75\x6c\x74" => $jtbl->default)); goto QBLYU; FHtqz: wT8AU: goto HHzqL; AhiqZ: $this->dbforge->add_column($table, $field); goto bETWG; QBLYU: $this->dbforge->add_column($table, $field); goto oMj28; yg_l6: goto wT8AU; goto m5zuB; bETWG: goto qeXiW; goto YJwuK; YJwuK: cUICl: goto Pi6Gn; z3Y1s: PhYRj: goto FHtqz; wUGsM: $field = array($jtbl->name => array("\164\x79\x70\145" => $jtbl->type, "\x63\x6f\x6e\x73\164\x72\x61\151\x6e\164" => $jtbl->max_length, "\156\165\x6c\x6c" => false)); goto yW84w; Xj56w: } goto ML230; wKMx6: if (!isset($json[$table])) { goto IkUW6; } goto Yoamz; Qp_YK: cWpHs: goto KJrk_; KJrk_: LIiEJ: goto X1sQW; Igf14: goto LIiEJ; goto arSHk; CJBvW: V01yK: goto xZoGw; wxhJC: if (!isset($json[$table])) { goto cWpHs; } goto fZZQd; Ifkkm: } goto YBU62; NhfHx: sort($full_tables); goto A1dgo; dMhjv: echo true; goto BFnha; dX7Qs: $json = file_get_contents("\56\57\x61\163\x73\145\164\163\57\141\x70\160\x2f\x64\142\57\144\141\x74\141\142\141\x73\x65\56\x6a\163\157\x6e"); goto TJvaJ; YBU62: OmIX5: goto dMhjv; TJvaJ: $json = json_decode($json); goto fIc_W; f6SZh: l1etU: goto dX7Qs; fIc_W: $json = (array) $json; goto xogzi; n9XJg: $full_tables = array_merge($tbl_baru, $tbl_ada); goto y6w0t; xogzi: $tbl_baru = array_keys($json); goto rqmvv; pJisC: $fields = []; goto o0myw; o0myw: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); RrJEf: } goto f6SZh; y6w0t: $full_tables = array_unique($full_tables); goto NhfHx; rqmvv: $tbl_ada = array_keys($fields); goto n9XJg; njtc5: $tabless = $this->db->list_tables(); goto pJisC; BFnha: } public function checkDb() { goto ovxbr; q5pAq: x756c: goto iql1m; MNOLO: $this->output_json($data); goto ZZsFZ; iql1m: $json = file_get_contents("\x2e\x2f\x61\x73\163\145\164\x73\x2f\141\x70\x70\57\x64\x62\x2f\x64\x61\164\141\x62\141\163\x65\56\x6a\x73\x6f\x6e"); goto SWEj1; MkEYs: $json = (array) $json; goto dQf_X; ggjbc: sort($full_tables); goto lfVVb; BeXvp: $data = ["\x66\x69\x65\154\x64\163" => $fields, "\x63\x72\x65\x61\164\145\x5f\164\141\x62\154\145\163" => $create_tables, "\x63\157\x75\x6e\164\x5f\x74\x62\x6c" => count($create_tables), "\x61\144\x64\x5f\143\157\x6c\165\x6d\156\163\137\x74\157\137\164\x61\x62\x6c\145" => $add_columns, "\143\x6f\165\x6e\164\x5f\143\157\154" => count($add_columns), "\145\144\151\164\x5f\x63\x6f\x6c\165\155\x6e\163" => $edit_columns, "\x63\157\165\x6e\164\x5f\x6d\157\144" => count($edit_columns), "\x61\144\x64\x5f\x74\x62\x6c" => $this->encryption->encrypt(json_encode($script_create_table)), "\x61\x64\x64\137\143\157\x6c" => $this->encryption->encrypt(json_encode($script_create_column)), "\155\x6f\x64\137\143\157\x6c" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto MNOLO; cT8T1: $script_edit_column = []; goto NsEp5; dQf_X: $tbl_seharusnya = array_keys($json); goto mYhCZ; ovxbr: $db_debug = $this->db->db_debug; goto WIk7o; y7JsX: psK7L: goto N2GG9; lfVVb: $create_tables = []; goto fTQZ7; N2GG9: $this->db->db_debug = $db_debug; goto BeXvp; SWEj1: $json = json_decode($json); goto MkEYs; WIk7o: $this->db->db_debug = FALSE; goto RTGq5; fTQZ7: $script_create_table = []; goto g6BH5; AP1A6: $full_tables = array_unique($full_tables); goto ggjbc; I95qS: foreach ($tabless as $table) { goto nWa0U; gq1h4: gstJP: goto nQjIT; lkBlw: $retval[$i]->primary = $query[$i]->column_key; goto AEjyE; AEjyE: XDDPu: goto YTdlN; nWa0U: $sql = "\123\x45\114\105\103\x54\x20\x60\x63\157\154\165\x6d\x6e\137\156\x61\155\145\140\x2c\x20\x60\x63\x6f\x6c\x75\155\x6e\x5f\x74\171\160\x65\140\54\x20\x60\143\x6f\154\154\x61\164\x69\157\x6e\137\156\141\x6d\145\x60\54\x20\x60\144\x61\x74\141\137\164\x79\x70\x65\x60\x2c\40\140\x63\150\141\162\x61\x63\x74\x65\x72\x5f\155\x61\x78\151\155\165\155\137\x6c\x65\156\147\x74\x68\140\x2c\40\x60\x6e\x75\x6d\145\162\x69\x63\137\x70\x72\145\x63\151\163\151\157\x6e\140\x2c" . "\x20\x60\x63\x6f\154\165\155\156\x5f\144\x65\x66\141\x75\x6c\164\140\x2c\40\x60\x63\157\154\x75\x6d\x6e\x5f\153\x65\171\x60\x2c\x20\x60\143\x6f\154\x75\155\x6e\137\143\157\x6d\155\145\x6e\x74\140\x2c\x20\140\145\170\164\162\141\x60\x2c\x20\140\151\x73\137\x6e\x75\x6c\x6c\x61\x62\x6c\145\x60\xd\12\11\x9\11\x46\122\x4f\115\40\x60\x69\156\x66\157\162\155\x61\x74\x69\157\156\x5f\163\143\150\145\155\x61\140\x2e\x60\143\157\154\x75\155\156\163\x60\40\x57\110\x45\122\x45\x20\164\141\x62\154\x65\137\x73\x63\x68\x65\x6d\x61\x20\75\40\x22" . $this->db->database . "\x22\40\x41\116\104\x20\x74\141\x62\154\x65\x5f\156\x61\155\145\40\x3d\x20\42" . $table . "\42"; goto Zj1bm; IN5w2: $retval[$i]->nullable = $query[$i]->is_nullable; goto lkBlw; nAZLX: $retval[$i]->type = $query[$i]->data_type; goto CEGtj; vDmLT: NIxiT: goto XfZif; CEGtj: $retval[$i]->collation = $query[$i]->collation_name; goto G_2QA; Au5vW: $fields = FALSE; goto vDmLT; KlHwh: mQ35Y: goto S31wy; s1itm: goto gstJP; goto KlHwh; q9_9a: $retval[$i]->comment = $query[$i]->column_comment; goto ck911; Wvj1o: $retval[$i]->name = $query[$i]->column_name; goto zIj6J; CTB8H: $retval[$i] = new stdClass(); goto Wvj1o; nQjIT: if (!($i < $c)) { goto mQ35Y; } goto CTB8H; j1fRE: $i = 0; goto BjgAV; S31wy: $fields[$table] = (object) ["\x74\x61\x62\154\145\x5f\x6e\x61\155\x65" => $table, "\x63\x6f\154\165\155\x6e\163" => $retval]; goto XcYX2; G_2QA: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto HIfHG; HIfHG: $retval[$i]->default = $query[$i]->column_default; goto q9_9a; yc85k: $retval = array(); goto j1fRE; Zj1bm: if (!(($query = $this->db->query($sql)) === FALSE)) { goto NIxiT; } goto Au5vW; zIj6J: $retval[$i]->col_type = $query[$i]->column_type; goto nAZLX; YTdlN: $i++; goto s1itm; ck911: $retval[$i]->extra = $query[$i]->extra; goto IN5w2; XcYX2: e53aH: goto DxUa6; BjgAV: $c = count($query); goto gq1h4; XfZif: $query = $query->result_object(); goto yc85k; DxUa6: } goto q5pAq; g6BH5: $add_columns = []; goto VybL6; VybL6: $script_create_column = []; goto ulcbs; RTGq5: $tabless = $this->db->list_tables(); goto hRLxS; NsEp5: foreach ($full_tables as $table) { goto eVLgH; BkQd9: $script_create_column[$table] = "\101\114\124\105\x52\40\x54\101\102\x4c\x45\40\140" . $table . "\x60\40" . implode("\x2c\40", $add_column) . "\x3b"; goto HoQvR; gId7W: $script .= $pri . "\x29\x20\105\116\107\111\116\x45\75\111\x6e\x6e\x6f\104\102\40\x44\x45\x46\101\x55\114\124\40\x43\x48\101\122\123\x45\x54\75\165\164\146\x38\155\142\64\x3b"; goto Inl2I; Wwu0D: Hft3u: goto GKZzl; DRqhF: $modif_column = []; goto rmIh7; sWslr: QZFUm: goto UF2s2; HoQvR: Wqtfx: goto B1IjA; VLCMg: $pri = ''; goto gwR29; zLRvX: if (!isset($json[$table])) { goto Hft3u; } goto srSZD; phkC7: jxlUV: goto Wwu0D; Kqmo1: hEy3Q: goto vHz8t; rmIh7: foreach ($json[$table]->columns as $jtbl) { goto dmKQk; U2fNC: goto YB51x; goto Pw91N; lHVFa: $add_columns[$table][] = $jtbl; goto xQaMV; V8TTx: if ($jtbl->type != "\x6c\157\156\147\x74\145\x78\164" && $jtbl->type != "\155\x65\144\x69\165\x6d\x74\x65\x78\x74" && $jtbl->type != "\x74\145\170\164") { goto RfRjN; } goto Kj3Tt; Yucch: kwRDR: goto srmO8; jvdEy: $length = ''; goto U2fNC; peiI3: tjWMq: goto q7DJl; JtixS: sOE3L: goto M4zOA; kcOg_: YB51x: goto Y9NDr; ydLPQ: $length = "\x28" . $jtbl->max_length . "\x29"; goto njAT6; xQaMV: if ($jtbl->max_length == null) { goto FD66m; } goto V8TTx; M4zOA: $comment = $jtbl->comment == '' ? '' : "\40\103\x4f\115\115\x45\x4e\124\x20\47" . $jtbl->comment . "\47"; goto bswsh; CEw6w: aVLWA: goto kcOg_; srmO8: foreach ($fields[$table]->columns as $ftbl) { goto Ei5S3; o8eIB: f3fj2: goto UQw8Q; ShiJi: sdNju: goto d24bV; K71Bm: $edit_columns[$table][$jtbl->name]["\143\x6f\155\155\x65\156\x74"] = $jtbl->comment; goto QCcrJ; EXeU0: $jtbl->extra = strtoupper($jtbl->extra); goto iGNyJ; KSvN_: FQJEM: goto gmtSp; m6YJa: tyoX5: goto xKNCw; NCzXY: if (!($ftbl->default != null)) { goto KwkWp; } goto rr56X; T5qea: jBOGD: goto F18YV; IwlQz: $ftbl->extra = strtoupper($ftbl->extra); goto ShiJi; QHfI0: uzuL7: goto bzyu3; ZSvP2: array_push($modif_column, "\x4d\117\x44\111\x46\x59\x20\140" . $jtbl->name . "\x60\40" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto H0k6V; bzyu3: if (!($jtbl->extra != null)) { goto V4O7O; } goto PzRQg; iGNyJ: V4O7O: goto I0f4x; I0f4x: if (!($ftbl->extra != null)) { goto sdNju; } goto zyXQ2; hQg6Z: Bw3C2: goto slvCO; BbC_C: $edit_columns[$table][$jtbl->name]["\144\145\x66\141\x75\x6c\164"] = $jtbl->default; goto QHfI0; zBp8B: $comment = $jtbl->comment == '' ? '' : "\x20\103\x4f\x4d\x4d\x45\x4e\124\x20\x27" . $jtbl->comment . "\47"; goto ZSvP2; eHFiR: if (!($jtbl->default != $ftbl->default)) { goto uzuL7; } goto BbC_C; wlkUe: $edit_columns[$table][$jtbl->name]["\x6e\x75\x6c\154\x61\142\154\145"] = $jtbl->nullable; goto hQg6Z; ZbMEP: $edit_columns[$table][$jtbl->name]["\145\x78\x74\162\141"] = $jtbl->extra; goto T5qea; omAw6: rsXqH: goto m6YJa; F4ddy: if (strtolower($jtbl->primary) == "\x70\162\151") { goto TBjyr; } goto zjAZ9; F18YV: if (!($jtbl->comment != $ftbl->comment)) { goto paZUf; } goto K71Bm; slvCO: if (!($jtbl->default != null)) { goto GgJi8; } goto MnDDE; PzRQg: $jtbl->extra = str_replace("\x28\x29", '', $jtbl->extra); goto EXeU0; Wzi2P: $jtbl->default = strtoupper($jtbl->default); goto t00Di; plVpj: goto rsXqH; goto TzSFZ; rr56X: $ftbl->default = str_replace("\50\x29", '', $ftbl->default); goto Ytt3n; p9vGz: $edit_columns[$table][$jtbl->name]["\x70\x72\151\155\x61\x72\x79"] = $jtbl->primary; goto F4ddy; ztVb7: goto rsXqH; goto fIrRQ; M07PV: $default = $jtbl->default == null ? '' : "\40\x44\x45\x46\101\125\x4c\124\x20" . $jtbl->default; goto kE0d3; kE0d3: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto zBp8B; uAk2Q: $nullable = $jtbl->nullable == "\116\117" ? "\x20\x4e\117\x54\40\116\x55\114\114" : ''; goto M07PV; QCcrJ: paZUf: goto bdoIk; mEGei: if (!($jtbl->col_type != $ftbl->col_type)) { goto FQJEM; } goto CQuyE; d24bV: if (!($jtbl->extra != $ftbl->extra)) { goto jBOGD; } goto ZbMEP; zjAZ9: if (strtolower($jtbl->primary) == "\x75\156\151") { goto CECFb; } goto plVpj; Ei5S3: if (!($jtbl->name == $ftbl->name)) { goto f3fj2; } goto mEGei; sFHJ7: array_push($modif_column, "\101\x44\104\40\x55\x4e\x49\x51\125\105\40\113\x45\x59\x20\x60" . $jtbl->name . "\x60\x20\x28\x60" . $jtbl->name . "\x60\51"); goto omAw6; H0k6V: gwT1p: goto o8eIB; JMJgr: array_push($modif_column, "\x41\x44\104\40\x50\x52\x49\115\101\122\131\x20\x4b\x45\x59\x20\x28\140" . $jtbl->name . "\140\51"); goto ztVb7; Ytt3n: $ftbl->default = strtoupper($ftbl->default); goto Sq6TB; Sq6TB: KwkWp: goto eHFiR; UQw8Q: DEMZY: goto P60uB; bdoIk: if (!($jtbl->primary != $ftbl->primary)) { goto tyoX5; } goto p9vGz; gmtSp: if (!($jtbl->nullable != $ftbl->nullable)) { goto Bw3C2; } goto wlkUe; MnDDE: $jtbl->default = str_replace("\x28\x29", '', $jtbl->default); goto Wzi2P; zyXQ2: $ftbl->extra = str_replace("\50\x29", '', $ftbl->extra); goto IwlQz; CQuyE: $edit_columns[$table][$jtbl->name]["\x63\x6f\x6c\x5f\164\x79\x70\145"] = $jtbl->col_type; goto KSvN_; fIrRQ: CECFb: goto sFHJ7; xKNCw: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto gwT1p; } goto uAk2Q; TzSFZ: TBjyr: goto JMJgr; t00Di: GgJi8: goto NCzXY; P60uB: } goto peiI3; Kj3Tt: $length = ''; goto EgNwq; EgNwq: goto YB51x; goto muvrj; dmKQk: if ($this->db->field_exists($jtbl->name, $table)) { goto kwRDR; } goto lHVFa; muvrj: FD66m: goto jvdEy; nUn8x: if ($jtbl->type == "\151\156\164") { goto Yk8ux; } goto ydLPQ; q7DJl: kzN7E: goto QX0gJ; Y9NDr: $nullable = $jtbl->nullable == "\116\117" ? "\40\116\x4f\124\x20\116\x55\114\x4c" : ''; goto OD0LS; QciYl: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto UqLIg; njAT6: goto aVLWA; goto j_pT9; ASak6: $extra .= "\x20\120\122\x49\115\101\x52\131\40\x4b\x45\x59"; goto JtixS; UqLIg: if (!(strtoupper($extra) == "\40\101\x55\x54\117\x5f\111\116\103\x52\105\x4d\x45\116\x54")) { goto sOE3L; } goto ASak6; CAbbS: $length = "\x28" . ($jtbl->max_length + 1) . "\x29"; goto CEw6w; OD0LS: $default = $jtbl->default == null ? '' : "\40\104\105\x46\x41\x55\x4c\x54\40" . $jtbl->default; goto QciYl; bswsh: array_push($add_column, "\x41\x44\x44\40\x60" . $jtbl->name . "\140\x20" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto Yucch; j_pT9: Yk8ux: goto CAbbS; Pw91N: RfRjN: goto nUn8x; QX0gJ: } goto sWslr; B1IjA: if (!(count($modif_column) > 0)) { goto jxlUV; } goto YiP3n; srSZD: $add_column = []; goto DRqhF; GKZzl: goto hEy3Q; goto UiU92; UF2s2: if (!(count($add_column) > 0)) { goto Wqtfx; } goto BkQd9; Inl2I: $script_create_table[$table] = $script; goto Kqmo1; UiU92: Fa1UG: goto Q1oH3; gwR29: foreach ($json[$table]->columns as $column) { goto N2WUj; sflwJ: p6Es1: goto f8MIB; f8MIB: PIMuI: goto NH4SH; uRV1r: $length = ''; goto QikDH; Do0uZ: $script .= "\x60" . $column->name . "\x60\x20" . $column->type . $length . $nullable . $default . $extra . $comment . "\54\40"; goto w1QmS; N2WUj: if ($column->max_length == null) { goto Huf3E; } goto QQ5Ym; kWFfd: $comment = $column->comment == '' ? '' : "\40\103\117\x4d\115\105\116\124\x20\x27" . $column->comment . "\47"; goto Do0uZ; eiZ6A: goto PIMuI; goto PfRXg; qqHQO: $default = $column->default == null ? '' : "\x20\x44\x45\x46\101\x55\114\x54\40" . $column->default; goto za9PL; xcuTm: $length = ''; goto eiZ6A; QikDH: goto PIMuI; goto Qxaml; Rvuef: $length = "\50" . $column->max_length . "\x29"; goto i7VGD; QQ5Ym: if ($column->type != "\x6c\157\x6e\147\x74\x65\x78\164" && $column->type != "\x6d\x65\144\151\165\155\164\x65\x78\x74" && $column->type != "\x74\x65\170\x74") { goto bVtwe; } goto xcuTm; M_ZnB: K22jJ: goto YQUYL; H4IEh: if ($column->type == "\x69\156\164") { goto K22jJ; } goto Rvuef; Qxaml: bVtwe: goto H4IEh; jLNU0: W8K5c: goto JT8Mh; PfRXg: Huf3E: goto uRV1r; YQUYL: $length = "\50" . ($column->max_length + 1) . "\51"; goto sflwJ; za9PL: $extra = $column->extra == '' ? '' : "\40" . strtoupper($column->extra); goto kWFfd; NH4SH: $nullable = $column->nullable == "\116\x4f" ? "\x20\116\117\x54\x20\x4e\x55\x4c\x4c" : ''; goto qqHQO; i7VGD: goto p6Es1; goto M_ZnB; w1QmS: $pri .= $column->primary != '' ? "\x50\122\x49\115\x41\122\131\40\113\x45\131\x20\x28\140" . $column->name . "\140\x29" : ''; goto jLNU0; JT8Mh: } goto VStEb; Q1oH3: $create_tables[] = $json[$table]; goto FWdZJ; VStEb: dsRfr: goto gId7W; eVLgH: if (!$this->db->table_exists($table)) { goto Fa1UG; } goto zLRvX; FWdZJ: $script = "\103\x52\105\x41\124\105\40\124\x41\x42\114\x45\40\x60" . $table . "\x60\x20\50"; goto VLCMg; vHz8t: BP3P5: goto P4yqm; YiP3n: $script_edit_column[$table] = "\x41\x4c\x54\105\122\x20\x54\101\102\x4c\105\x20\x60" . $table . "\x60\x20" . implode("\x2c\x20", $modif_column) . "\x3b"; goto phkC7; P4yqm: } goto y7JsX; ulcbs: $edit_columns = []; goto cT8T1; mYhCZ: $tbl_ada = array_keys($fields); goto WW3_H; hRLxS: $fields = []; goto I95qS; WW3_H: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto AP1A6; ZZsFZ: } public function createTable() { goto bF5Ua; mQICw: $queries = ''; goto JtMdK; bF5Ua: $scripts = $this->input->post("\144\141\164\x61", true); goto igTYm; lxopR: $data["\x73\x75\x63\143\145\163\x73"] = $this->runQuery($queries); goto QWvye; QWvye: $data["\155\x65\x73\x73\x61\x67\145"] = "\125\160\x64\141\x74\145\40\153\x6f\154\157\x6d"; goto Wx7vS; igTYm: str_replace("\45\62\102", "\53", $scripts); goto ujCoW; JtMdK: foreach ($scripts as $script) { $queries .= $script; JgATt: } goto F2f7y; PqDuX: $scripts = json_decode($this->encryption->decrypt($scripts)); goto mQICw; ujCoW: sleep(1); goto PqDuX; Wx7vS: $this->output_json($data); goto SXc31; F2f7y: JqGSW: goto lxopR; SXc31: } public function createColumn() { goto YeRvz; MmR5A: $data["\x6d\145\163\x73\141\147\145"] = "\x4d\x6f\x64\x69\x66\x79\40\153\157\x6c\157\x6d"; goto Lhagb; Qn_30: oBc8V: goto t31Zw; uZI_j: $queries = ''; goto mv6li; owMzl: if (!(strpos("\x60\165\x69\144\x60", $queries) !== false)) { goto oBc8V; } goto ItaFC; ItaFC: $this->updateUID(); goto Qn_30; YeRvz: $scripts = $this->input->post("\144\x61\x74\x61", true); goto Bj1jg; mv6li: foreach ($scripts as $script) { $queries .= $script; EZGEe: } goto smLqn; Bj1jg: str_replace("\45\62\102", "\x2b", $scripts); goto H3abU; H3abU: sleep(1); goto qThIo; qThIo: $scripts = json_decode($this->encryption->decrypt($scripts)); goto uZI_j; t31Zw: $data["\x73\x75\143\x63\x65\x73\163"] = $this->runQuery($queries); goto MmR5A; smLqn: h9H8h: goto owMzl; Lhagb: $this->output_json($data); goto GwhjZ; GwhjZ: } public function editColumn() { goto PvQUO; Ke_k3: $this->output_json($data); goto fmL8l; u6O3l: $queries = ''; goto jW32t; fKaTg: sleep(1); goto H7WIq; jW32t: foreach ($scripts as $script) { $queries .= $script; dqiE1: } goto p3sc3; p3sc3: m1DE0: goto HtLgr; H7WIq: $scripts = json_decode($this->encryption->decrypt($scripts)); goto u6O3l; kHY7Q: $data["\155\x65\163\x73\141\147\145"] = "\125\x70\x64\141\164\145\x20\163\145\x6c\145\x73\141\x69"; goto Ke_k3; HtLgr: $data["\x73\165\143\143\145\x73\x73"] = $this->runQuery($queries); goto kHY7Q; zsVmQ: str_replace("\x25\x32\102", "\53", $scripts); goto fKaTg; PvQUO: $scripts = $this->input->post("\144\x61\164\x61", true); goto zsVmQ; fmL8l: } function runQuery($script) { goto Hhv1y; ehTrv: if (!mysqli_connect_errno()) { goto VW7pj; } goto cGgw1; iX50V: VW7pj: goto PqOCi; sQGw1: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto ehTrv; Q4uNj: $database = $this->db->database; goto sQGw1; cGgw1: return mysqli_connect_errno(); goto iX50V; PqOCi: $mysqli->multi_query($script); goto ARmpU; QiScv: $hostuser = $this->db->username; goto gxiup; ARmpU: $mysqli->close(); goto qmU7F; qmU7F: return true; goto CZ6Zj; gxiup: $hostpass = $this->db->password; goto Q4uNj; Hhv1y: $hostname = $this->db->hostname; goto QiScv; CZ6Zj: } function updateUID() { goto CIXaB; CIXaB: $this->load->library("\125\x75\x69\144", "\x75\165\x69\144"); goto yUGxr; bLPHt: return $this->db->update_batch("\x6d\x61\x73\x74\145\x72\137\x73\151\163\167\141", $input, "\x69\144\x5f\163\x69\x73\x77\141"); goto cxWy_; C49v5: Bh5oa: goto bLPHt; FjgUF: $input = array(); goto WO3AC; yUGxr: $siswas = $this->db->get("\155\x61\x73\x74\x65\x72\137\163\151\163\x77\141")->result(); goto FjgUF; WO3AC: foreach ($siswas as $siswa) { $input[] = array("\x69\144\137\163\151\163\x77\141" => $siswa->id_siswa, "\x75\151\144" => $this->uuid->v4()); BOT8s: } goto C49v5; cxWy_: } function make_base() { } }
