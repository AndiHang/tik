<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\x42\x41\x53\x45\120\x41\124\110") or exit("\x4e\157\40\x64\x69\162\145\143\x74\x20\163\143\x72\x69\x70\x74\x20\141\143\143\x65\x73\x73\40\x61\x6c\x6c\x6f\x77\x65\x64"); class Update extends CI_Controller { function __construct() { goto PB2x0; sEJA1: $this->load->database(); goto EKLuE; fMWUf: $this->load->dbforge(); goto sEJA1; PB2x0: parent::__construct(); goto uQji_; EKLuE: $this->load->library("\145\x6e\143\162\171\160\x74\151\157\x6e"); goto kmi0D; uQji_: include APPPATH . "\143\157\x6e\146\x69\x67\x2f\x64\x61\164\x61\x62\x61\163\145\x2e\160\x68\x70"; goto fMWUf; kmi0D: } public function output_json($data, $encode = true) { goto QeEo3; QeEo3: if (!$encode) { goto vhTjY; } goto apu8o; apu8o: $data = json_encode($data); goto egGrR; hr8ml: $this->output->set_content_type("\141\x70\160\x6c\x69\143\141\164\151\157\x6e\57\x6a\163\x6f\156")->set_output($data); goto SepiL; egGrR: vhTjY: goto hr8ml; SepiL: } public function index() { goto eVKjI; eVKjI: $json = file_get_contents("\56\57\141\x73\x73\x65\164\x73\x2f\141\160\160\57\x64\x62\x2f\x64\x61\164\x61\142\141\163\x65\x2e\x6a\163\157\x6e"); goto V0_0f; V0_0f: $json = json_decode($json); goto jx50w; JAIJ8: $this->load->view("\151\x6e\163\164\141\x6c\x6c\x2f\165\160\x64\141\164\145"); goto yDyEa; yDyEa: $this->load->view("\151\x6e\163\x74\141\x6c\x6c\x2f\146\157\x6f\x74\x65\162"); goto g8ezo; jx50w: $json = (array) $json; goto zGWqa; kzrxG: $this->load->view("\x69\156\163\x74\141\154\154\x2f\x68\145\141\144\145\162", $data); goto JAIJ8; zGWqa: $data["\x6a\x73\157\x6e"] = $json; goto kzrxG; g8ezo: } function object_to_array($data) { goto TLR3a; Momhw: $result = []; goto oLKoQ; TLR3a: if (!(is_array($data) || is_object($data))) { goto q1Acb; } goto Momhw; zY09b: lwVBe: goto mmfUe; mmfUe: return $result; goto e2JYA; oLKoQ: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; sW6Ec: } goto zY09b; e2JYA: q1Acb: goto FMAr7; FMAr7: return $data; goto TsBdI; TsBdI: } public function checkDatabase() { goto onCMO; lQPYO: sort($full_tables); goto LV3gU; Uy7Sz: $edit_columns = []; goto VQqbe; LV3gU: $create_tables = []; goto mHfZL; uToqH: foreach ($tabless as $table) { goto p9Cqz; crGar: if (!($query[$i]->extra != '')) { goto NKFlf; } goto VhGhr; Ngf3t: goto xWUh_; goto R0s1L; d36mU: xWUh_: goto tGHHw; ff7C9: $datafld[$i]->auto_increment = true; goto rLx70; fHtCY: VPwCO: goto AeJdg; manDY: Yqu1x: goto yesmO; R0s1L: CL31i: goto GbZa9; p9Cqz: $datafld = $this->db->field_data($table); goto nZ0k0; vexss: lrOk7: goto eaCsc; P25Fi: goto XTqrJ; goto WcBaI; WcBaI: YcFfs: goto ff7C9; GbZa9: $currentDb[$table] = $retval; goto poBc9; xLNCT: $retval = array(); goto yTzlX; CWXU3: $c = count($query); goto d36mU; nZ0k0: $sql = "\123\x45\x4c\105\103\x54\40\140\x63\157\154\165\x6d\156\137\x6e\x61\155\x65\x60\x2c\x20\x60\x6e\x75\x6d\145\162\x69\x63\137\160\162\x65\143\x69\163\151\157\x6e\x60\x2c\40\x60\145\x78\x74\x72\141\140\54\x20\x60\151\163\x5f\x6e\x75\154\x6c\141\x62\154\x65\140" . "\40\x46\x52\x4f\x4d\x20\140\x69\156\x66\157\162\155\141\x74\x69\x6f\156\x5f\163\143\x68\145\155\141\x60\x2e\140\143\x6f\x6c\x75\x6d\156\163\x60\40\x57\x48\105\x52\105\x20\164\141\x62\154\x65\137\x73\x63\x68\x65\x6d\x61\x20\75\x20\x22" . $this->db->database . "\x22\x20\x41\x4e\104\x20\164\141\142\154\145\137\x6e\141\x6d\145\x20\x3d\x20\42" . $table . "\42"; goto YBcIr; u5zEL: $retval[$i]->name = $query[$i]->column_name; goto wANsa; eaCsc: $query = $query->result_object(); goto xLNCT; Qkkiv: Va881: goto Uw0sF; WJUiG: $datafld[$i]->extra = $query[$i]->extra; goto P25Fi; rLx70: XTqrJ: goto lim6R; RdlzF: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto Va881; } goto crGar; poBc9: $fields[$table] = $datafld; goto fHtCY; VhGhr: if ($query[$i]->extra == "\x61\x75\164\x6f\137\x69\x6e\143\x72\145\x6d\145\x6e\x74") { goto YcFfs; } goto WJUiG; yTzlX: $i = 0; goto CWXU3; Zqwq0: $currentDb = FALSE; goto vexss; wANsa: $retval[$i]->extra = $query[$i]->extra; goto manDY; yesmO: $i++; goto Ngf3t; tGHHw: if (!($i < $c)) { goto CL31i; } goto RdlzF; lim6R: NKFlf: goto Qkkiv; YBcIr: if (!(($query = $this->db->query($sql)) === FALSE)) { goto lrOk7; } goto Zqwq0; Uw0sF: $retval[$i] = new stdClass(); goto u5zEL; AeJdg: } goto nWHZM; nWHZM: VeZn6: goto JmD_4; VQqbe: foreach ($full_tables as $table) { goto cM5BV; hydWq: $create_tables[$table] = $json[$table]; goto cGY3o; cGY3o: goto PPrio; goto DIJlt; uVFHq: foreach ($json[$table] as $jtbl) { goto vRaD5; gIA1_: goto pvHHx; goto fTfhn; kKzdN: SGzy5: goto Dydf3; vRaD5: if ($this->db->field_exists($jtbl->name, $table)) { goto hzIYA; } goto gZ9Pr; oOKdj: ujhaS: goto KwyMk; BqxX2: foreach ($fields[$table] as $ftbl) { goto BCy27; BCy27: if (!($jtbl->name == $ftbl->name)) { goto PM_2o; } goto rlrJN; ZRwx9: PM_2o: goto E1Ikx; rlrJN: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto Gd8UR; } goto GR6S8; E1Ikx: sdv0G: goto y0NPa; GR6S8: $edit_columns[$table][] = $jtbl; goto MlKUe; MlKUe: Gd8UR: goto ZRwx9; y0NPa: } goto kKzdN; Dydf3: pvHHx: goto oOKdj; gZ9Pr: $add_columns[$table][] = $jtbl; goto gIA1_; fTfhn: hzIYA: goto BqxX2; KwyMk: } goto QVfch; Oqy0p: PPrio: goto oyf1w; cM5BV: if ($this->db->table_exists($table)) { goto CQf44; } goto hydWq; tswRD: if (!isset($json[$table])) { goto B69Up; } goto uVFHq; oyf1w: U_Pgu: goto lSyOd; QVfch: OAPnJ: goto bmuIZ; bmuIZ: B69Up: goto Oqy0p; DIJlt: CQf44: goto tswRD; lSyOd: } goto T9aak; mHfZL: $add_columns = []; goto Uy7Sz; T9aak: C9ZJU: goto umdZm; umdZm: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto R2cTs; FF7j9: $this->output_json($data); goto ygPpz; fjIXL: $tabless = $this->db->list_tables(); goto BfPfJ; BfPfJ: $fields = []; goto r2nDE; ntaHv: $tbl_ada = array_keys($fields); goto FPC8S; R2cTs: $data = ["\x64\142" => $fields, "\x63\x72\x65\141\x74\x65" => $create_tables, "\155\x6f\x64\x69\x66\171" => $edit_columns, "\x61\x64\x64" => $add_columns, "\143\157\165\x6e\164\x73" => $counts, "\x6a\163\157\x6e" => $json, "\143\x75\x72\x72\145\156\164" => $currentDb]; goto FF7j9; FPC8S: $full_tables = array_merge($tbl_baru, $tbl_ada); goto bBZQr; ADRP6: $this->db->db_debug = FALSE; goto fjIXL; iFxpL: $tbl_baru = array_keys($json); goto ntaHv; onCMO: $db_debug = $this->db->db_debug; goto ADRP6; r2nDE: $currentDb = []; goto uToqH; GLvQz: $json = (array) $json; goto iFxpL; JmD_4: $json = file_get_contents("\x2e\x2f\x61\x73\x73\x65\x74\163\57\141\x70\160\57\144\142\x2f\144\141\164\x61\x62\x61\x73\145\56\152\163\x6f\x6e"); goto r1vV3; bBZQr: $full_tables = array_unique($full_tables); goto lQPYO; r1vV3: $json = json_decode($json); goto GLvQz; ygPpz: } public function updateDatabase() { goto b1OHM; oftQO: $tbl_ada = array_keys($fields); goto xFbSY; zX2gV: sort($full_tables); goto TibKy; Zm_sd: $full_tables = array_unique($full_tables); goto zX2gV; D2_tD: $json = json_decode($json); goto uStsp; mVyVS: $json = file_get_contents("\x2e\57\141\163\x73\145\x74\x73\57\141\x70\160\57\144\142\x2f\144\x61\x74\141\x62\141\x73\145\x2e\152\x73\x6f\x6e"); goto D2_tD; xKjc4: echo true; goto J2r7O; uStsp: $json = (array) $json; goto qwDrY; qwDrY: $tbl_baru = array_keys($json); goto oftQO; s9Un7: $fields = []; goto bLWo0; QNLUE: K8SK0: goto mVyVS; xFbSY: $full_tables = array_merge($tbl_baru, $tbl_ada); goto Zm_sd; bLWo0: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); a9Cs3: } goto QNLUE; b1OHM: $tabless = $this->db->list_tables(); goto s9Un7; INDzG: ZRK7H: goto xKjc4; TibKy: foreach ($full_tables as $table) { goto QJSbI; T23F_: ZxiDd: goto Acf6r; qRsYN: goto jkOOG; goto Q469R; WILCr: foreach ($json[$table] as $tbl => $jtbl) { goto vDJrm; gUSfL: $this->dbforge->add_key($jtbl->name, true); goto LYxHe; vDJrm: $field = [$jtbl->name => ["\x74\x79\x70\145" => $jtbl->type, "\x63\x6f\156\163\x74\162\x61\x69\156\164" => $jtbl->max_length, "\x6e\165\x6c\x6c" => $jtbl->primary_key == 0]]; goto QHZLP; JtzaA: if (!($jtbl->primary_key == 1)) { goto Gs8F8; } goto gUSfL; uPGGB: i4uDK: goto v8XGY; LYxHe: Gs8F8: goto uPGGB; QHZLP: $this->dbforge->add_field($field); goto JtzaA; v8XGY: } goto T23F_; QJSbI: if ($this->db->table_exists($table)) { goto EPHex; } goto LFeqq; fVNeY: lLBsO: goto qRsYN; T50o_: $this->db->query("\x41\114\x54\x45\122\40\x54\x41\x42\114\x45\x20\40\140" . $table . "\140\x20\x45\116\x47\111\x4e\x45\x20\x3d\40\111\156\x6e\157\104\x42"); goto fVNeY; AfenG: UMma3: goto yXaPE; Met_G: foreach ($json[$table] as $jtbl) { goto llR8L; G0Zm4: ktaOR: goto qJwcR; Ocgp0: goto kxVA9; goto KNIxC; mYSsY: $field = array($jtbl->name => array("\164\x79\x70\145" => $jtbl->type, "\143\x6f\156\x73\164\x72\141\x69\x6e\x74" => $jtbl->max_length, "\x6e\165\154\154" => false)); goto wJRGD; KNIxC: sbP4D: goto LGtQi; oez9Q: goto FhDbD; goto Cpf6e; LGtQi: $field = array($jtbl->name => array("\164\171\160\x65" => $jtbl->type, "\x63\157\156\x73\x74\x72\141\151\156\164" => $jtbl->max_length, "\x64\145\x66\141\165\x6c\164" => $jtbl->default)); goto B4Sep; EGgZv: foreach ($fields[$table] as $ftbl) { goto LsqgS; RICK1: YL9dh: goto XKj4G; yH_4Q: $this->dbforge->add_key($jtbl->name, true); goto W4aQn; AQcX0: $this->dbforge->modify_column($table, $field); goto RICK1; QoQrB: goto SMj3h; goto ojPRZ; xZFZZ: $field = array($jtbl->name . "\40\144\141\x74\x65\x74\151\x6d\x65\x20\x64\x65\x66\141\x75\154\x74\40\x63\x75\x72\162\145\156\164\137\x74\151\155\145\x73\164\x61\x6d\x70" . $onUpdate); goto Lm5d3; s05dQ: $field = array($jtbl->name => array("\x74\x79\x70\145" => $jtbl->type, "\143\x6f\x6e\x73\x74\x72\141\x69\x6e\164" => $jtbl->max_length, "\156\x75\154\x6c" => false, "\x61\x75\x74\157\137\151\156\143\x72\x65\x6d\145\x6e\164" => true)); goto o6NTG; cfxsN: if ($jtbl->auto_increment == true) { goto pKP2f; } goto r1his; V10bE: goto YL9dh; goto Z8dTU; CSDdR: QABoR: goto bMsdY; MKtEp: $onUpdate = isset($jtbl->extra) ? "\40" . strtolower($jtbl->extra) : ''; goto xZFZZ; UPAri: pKP2f: goto s05dQ; UD8Lk: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto NfFqj; } goto BL71m; Qbx88: if ($jtbl->default == "\x43\x55\122\x52\x45\116\124\137\x54\x49\x4d\x45\123\124\x41\x4d\x50") { goto RSGlj; } goto SPS_D; LsqgS: if (!($jtbl->name == $ftbl->name)) { goto QABoR; } goto UD8Lk; r1his: $field = array($jtbl->name => array("\164\x79\160\x65" => $jtbl->type, "\x63\x6f\156\163\x74\162\141\151\x6e\x74" => $jtbl->max_length, "\156\165\x6c\154" => false)); goto sFlTX; bMsdY: ycNsi: goto hj0vc; W4aQn: $this->dbforge->modify_column($table, $field); goto V10bE; Lm5d3: SMj3h: goto AQcX0; XKj4G: NfFqj: goto CSDdR; o6NTG: cV4Vb: goto yH_4Q; SPS_D: $field = array($jtbl->name => array("\x74\171\160\x65" => $jtbl->type, "\143\x6f\x6e\163\164\162\x61\151\x6e\164" => $jtbl->max_length, "\144\x65\146\141\x75\x6c\x74" => $jtbl->default)); goto QoQrB; BL71m: if ($jtbl->primary_key == 0) { goto EGyhN; } goto cfxsN; Z8dTU: EGyhN: goto Qbx88; ojPRZ: RSGlj: goto MKtEp; sFlTX: goto cV4Vb; goto UPAri; hj0vc: } goto G0Zm4; wJRGD: $this->dbforge->add_key($jtbl->name, true); goto nOokL; B4Sep: $this->dbforge->add_column($table, $field); goto JZPNk; Cpf6e: CHSuf: goto EGgZv; qJwcR: FhDbD: goto PQbvu; PQbvu: lDfq_: goto EUuTI; nOokL: $this->dbforge->add_column($table, $field); goto Ocgp0; e_HyF: if ($jtbl->primary_key == 0) { goto sbP4D; } goto mYSsY; JZPNk: kxVA9: goto oez9Q; llR8L: if ($this->db->field_exists($jtbl->name, $table)) { goto CHSuf; } goto e_HyF; EUuTI: } goto AfenG; mweTt: jkOOG: goto h2YHp; shR4g: if (!isset($json[$table])) { goto qqJYn; } goto Met_G; Q469R: EPHex: goto shR4g; h2YHp: UYwLF: goto tOI7i; yXaPE: qqJYn: goto mweTt; Acf6r: $this->dbforge->create_table($table, TRUE); goto T50o_; LFeqq: if (!isset($json[$table])) { goto lLBsO; } goto WILCr; tOI7i: } goto INDzG; J2r7O: } public function checkDb() { goto Gku3V; zf_Ys: $tbl_ada = array_keys($fields); goto pIpxI; B64SS: sort($full_tables); goto Y4o4I; EDyVJ: $script_create_table = []; goto Pc37Y; gyVs9: $tabless = $this->db->list_tables(); goto LHVt1; WBJZV: YhLPb: goto ZB1px; opxsD: $json = (array) $json; goto rDd0R; BTLoC: $full_tables = array_unique($full_tables); goto B64SS; Pc37Y: $add_columns = []; goto znPMx; w4qdZ: $data = ["\146\x69\x65\x6c\x64\x73" => $fields, "\143\162\145\141\x74\x65\137\164\141\142\154\x65\163" => $create_tables, "\x63\x6f\x75\156\164\137\164\x62\x6c" => count($create_tables), "\x61\144\144\137\143\157\154\165\155\156\163\x5f\164\157\137\x74\x61\142\x6c\145" => $add_columns, "\x63\x6f\x75\x6e\164\137\143\x6f\154" => count($add_columns), "\145\x64\151\164\x5f\143\157\154\x75\x6d\156\163" => $edit_columns, "\x63\x6f\165\156\164\137\155\157\144" => count($edit_columns), "\141\144\144\137\164\142\154" => $this->encryption->encrypt(json_encode($script_create_table)), "\x61\x64\x64\x5f\143\x6f\154" => $this->encryption->encrypt(json_encode($script_create_column)), "\x6d\x6f\144\x5f\143\157\x6c" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto T2E1h; pJxet: $this->db->db_debug = FALSE; goto gyVs9; pIpxI: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto BTLoC; ekdcL: $script_edit_column = []; goto UX6Vk; znPMx: $script_create_column = []; goto PZGSF; RrRtF: $json = file_get_contents("\56\x2f\141\x73\x73\x65\x74\x73\57\x61\x70\160\x2f\x64\142\57\x64\141\x74\141\142\x61\x73\145\56\x6a\163\157\x6e"); goto NVdl8; QJQ7R: foreach ($tabless as $table) { goto tU60F; S_Wgf: cWA02: goto ddVhL; eoZLd: if (!($i < $c)) { goto Zg0iH; } goto XJ_1S; wcPc1: goto HpL9U; goto xLbMc; fWWC7: $retval[$i]->default = $query[$i]->column_default; goto uYBDX; XJ_1S: $retval[$i] = new stdClass(); goto VFH0h; J2ebR: $retval[$i]->collation = $query[$i]->collation_name; goto tfEBM; N1ZkV: $i = 0; goto wqdho; wqdho: $c = count($query); goto Z1iiG; tU60F: $sql = "\123\105\114\105\103\x54\x20\x60\143\x6f\154\165\x6d\x6e\137\156\x61\155\145\140\x2c\x20\x60\143\157\x6c\x75\155\x6e\x5f\x74\x79\160\x65\x60\54\40\x60\143\x6f\x6c\x6c\x61\x74\x69\157\156\x5f\x6e\x61\155\145\x60\54\x20\140\x64\141\164\141\137\164\x79\160\145\140\54\40\x60\143\150\x61\x72\141\143\164\x65\x72\137\x6d\x61\x78\x69\x6d\165\155\x5f\154\x65\156\x67\x74\x68\140\x2c\x20\140\156\165\155\145\x72\x69\x63\x5f\x70\x72\145\143\x69\163\151\x6f\156\140\54" . "\x20\140\143\157\154\x75\x6d\x6e\137\x64\x65\x66\x61\165\x6c\164\140\54\40\x60\143\x6f\x6c\x75\155\x6e\137\153\145\171\140\x2c\40\x60\x63\157\154\x75\x6d\x6e\137\x63\157\x6d\x6d\145\156\164\x60\x2c\x20\x60\145\170\164\162\141\140\x2c\x20\x60\151\x73\x5f\x6e\165\154\x6c\x61\142\x6c\145\140\15\xa\11\x9\11\106\x52\x4f\x4d\40\x60\x69\x6e\x66\157\162\x6d\x61\x74\151\x6f\x6e\x5f\x73\x63\x68\145\x6d\141\140\56\x60\143\x6f\x6c\x75\155\x6e\x73\x60\x20\127\110\105\x52\105\x20\164\x61\142\x6c\x65\x5f\163\x63\150\145\x6d\x61\40\x3d\40\x22" . $this->db->database . "\42\x20\x41\x4e\104\x20\164\141\142\x6c\x65\137\156\x61\155\145\x20\x3d\40\42" . $table . "\42"; goto Nmbl5; C1h43: $retval[$i]->extra = $query[$i]->extra; goto zlqgL; kZjjS: $retval[$i]->col_type = $query[$i]->column_type; goto BIl2U; XUWiC: $fields = FALSE; goto HaIkl; ddVhL: $i++; goto wcPc1; HaIkl: cxb7G: goto iM36o; BIl2U: $retval[$i]->type = $query[$i]->data_type; goto J2ebR; Nmbl5: if (!(($query = $this->db->query($sql)) === FALSE)) { goto cxb7G; } goto XUWiC; tfEBM: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto fWWC7; SKRr6: $retval = array(); goto N1ZkV; kWR1Y: $retval[$i]->primary = $query[$i]->column_key; goto S_Wgf; jg4cL: Da4dw: goto ptDJI; Z1iiG: HpL9U: goto eoZLd; uYBDX: $retval[$i]->comment = $query[$i]->column_comment; goto C1h43; xLbMc: Zg0iH: goto mO8j3; zlqgL: $retval[$i]->nullable = $query[$i]->is_nullable; goto kWR1Y; mO8j3: $fields[$table] = (object) ["\164\141\142\154\x65\137\156\x61\155\x65" => $table, "\143\157\x6c\x75\155\x6e\163" => $retval]; goto jg4cL; iM36o: $query = $query->result_object(); goto SKRr6; VFH0h: $retval[$i]->name = $query[$i]->column_name; goto kZjjS; ptDJI: } goto jMwRn; NVdl8: $json = json_decode($json); goto opxsD; PZGSF: $edit_columns = []; goto ekdcL; T2E1h: $this->output_json($data); goto nBlGJ; ZB1px: $this->db->db_debug = $db_debug; goto w4qdZ; Gku3V: $db_debug = $this->db->db_debug; goto pJxet; jMwRn: km1Zc: goto RrRtF; LHVt1: $fields = []; goto QJQ7R; Y4o4I: $create_tables = []; goto EDyVJ; UX6Vk: foreach ($full_tables as $table) { goto qRPny; HgUOn: if (!(count($add_column) > 0)) { goto PTHfb; } goto nzwac; oBR3J: $script .= $pri . "\51\x20\x45\116\x47\x49\116\105\x3d\111\x6e\156\x6f\x44\102\40\104\105\106\101\x55\114\x54\x20\103\110\101\x52\123\105\x54\75\x75\164\146\70\x6d\142\64\x3b"; goto pwBvh; lifs6: PTHfb: goto ZBTIm; whwXw: $modif_column = []; goto rIQNe; ZBTIm: if (!(count($modif_column) > 0)) { goto P48Ls; } goto SJPfM; gmOwF: foreach ($json[$table]->columns as $column) { goto IeWyi; jl1cA: mEr8t: goto FMvVn; zkwS8: $nullable = $column->nullable == "\x4e\x4f" ? "\x20\116\x4f\124\x20\x4e\x55\x4c\114" : ''; goto Cmv1l; aaf4s: EkMH6: goto Tub1n; Fec6F: goto caxNP; goto O4AD2; O4AD2: pQv3o: goto MlB2d; FMvVn: $length = ''; goto ssyef; MoDD7: bRXju: goto zkwS8; dh8Zn: caxNP: goto MoDD7; jAB3N: $extra = $column->extra == '' ? '' : "\x20" . strtoupper($column->extra); goto E86Au; hnnhr: if ($column->type == "\x69\x6e\x74") { goto pQv3o; } goto Xba6K; L0fjY: $script .= "\x60" . $column->name . "\140\x20" . $column->type . $length . $nullable . $default . $extra . $comment . "\x2c\40"; goto pzxoE; kjH5I: Czn0W: goto hnnhr; E86Au: $comment = $column->comment == '' ? '' : "\40\x43\117\115\x4d\105\116\124\40\47" . $column->comment . "\47"; goto L0fjY; pzxoE: $pri .= $column->primary != '' ? "\x50\122\x49\x4d\x41\x52\x59\40\113\105\131\40\x28\140" . $column->name . "\x60\51" : ''; goto aaf4s; aIELU: goto bRXju; goto jl1cA; IeWyi: if ($column->max_length == null) { goto mEr8t; } goto RF5Kc; ssyef: goto bRXju; goto kjH5I; MlB2d: $length = "\x28" . ($column->max_length + 1) . "\51"; goto dh8Zn; Ow40Y: $length = ''; goto aIELU; RF5Kc: if ($column->type != "\154\x6f\156\147\x74\145\x78\164" && $column->type != "\155\x65\144\151\x75\155\164\x65\x78\x74" && $column->type != "\164\145\170\164") { goto Czn0W; } goto Ow40Y; Xba6K: $length = "\50" . $column->max_length . "\x29"; goto Fec6F; Cmv1l: $default = $column->default == null ? '' : "\x20\x44\x45\106\x41\x55\114\x54\40" . $column->default; goto jAB3N; Tub1n: } goto Y915Y; nzwac: $script_create_column[$table] = "\101\x4c\124\105\122\40\x54\x41\102\114\x45\x20\140" . $table . "\140\40" . implode("\x2c\40", $add_column) . "\73"; goto lifs6; L0ONl: goto IR5GL; goto AzWRj; SJPfM: $script_edit_column[$table] = "\101\x4c\124\x45\x52\x20\124\101\x42\114\105\40\x60" . $table . "\x60\x20" . implode("\54\x20", $modif_column) . "\x3b"; goto h1KNa; unWdM: $add_column = []; goto whwXw; rpSS6: kSPLZ: goto L0ONl; AzWRj: KqY3K: goto jof10; h1KNa: P48Ls: goto rpSS6; Y915Y: R_drK: goto oBR3J; zXN0y: IR5GL: goto agwzx; rIQNe: foreach ($json[$table]->columns as $jtbl) { goto QjPc1; Ds3QE: if ($jtbl->max_length == null) { goto OQcoc; } goto eiPsK; D0B1u: wBe71: goto c3RDr; cfrsG: $add_columns[$table][] = $jtbl; goto Ds3QE; pLvEJ: if ($jtbl->type == "\151\x6e\164") { goto MtFSF; } goto W0Hk_; WMO2W: NSgi7: goto fLtUi; fLtUi: wmd5V: goto o8U7y; XCGL2: $length = ''; goto Vxgw9; W0Hk_: $length = "\50" . $jtbl->max_length . "\x29"; goto Iz23R; baZpP: MtFSF: goto n9lP5; Ji29L: goto wmd5V; goto z4R2x; h0zAt: dD5qf: goto pLvEJ; QjPc1: if ($this->db->field_exists($jtbl->name, $table)) { goto wBe71; } goto cfrsG; z4R2x: OQcoc: goto XCGL2; eiPsK: if ($jtbl->type != "\154\x6f\156\x67\164\x65\x78\x74" && $jtbl->type != "\x6d\x65\144\x69\x75\155\164\x65\170\x74" && $jtbl->type != "\x74\145\x78\x74") { goto dD5qf; } goto R5cPx; Sggb7: Zk_fK: goto Omzjm; eJH2A: $comment = $jtbl->comment == '' ? '' : "\40\103\117\115\115\105\x4e\x54\x20\x27" . $jtbl->comment . "\x27"; goto tGOr4; o8U7y: $nullable = $jtbl->nullable == "\116\117" ? "\x20\x4e\x4f\124\40\x4e\125\x4c\114" : ''; goto SgG9a; R5cPx: $length = ''; goto Ji29L; Vxgw9: goto wmd5V; goto h0zAt; Iz23R: goto NSgi7; goto baZpP; SgG9a: $default = $jtbl->default == null ? '' : "\x20\104\105\106\x41\125\x4c\x54\40" . $jtbl->default; goto H2F6F; c3RDr: foreach ($fields[$table]->columns as $ftbl) { goto ypl6a; wDiqW: ngt9K: goto b6wgX; w9MEc: if (!($jtbl->nullable != $ftbl->nullable)) { goto Ixn_x; } goto npbUC; M7C4P: goto dxxTW; goto B0EKG; PLAem: $ftbl->extra = strtoupper($ftbl->extra); goto pU5Mv; pviB0: if (strtolower($jtbl->primary) == "\x75\156\151") { goto Bl_WV; } goto M7C4P; ZkjZ3: $jtbl->extra = str_replace("\50\51", '', $jtbl->extra); goto KPI3V; mwn6_: iiHDY: goto r0AMN; qbLh3: QT6K5: goto w9MEc; ypl6a: if (!($jtbl->name == $ftbl->name)) { goto ngt9K; } goto lKS8C; pU5Mv: DlblJ: goto tsmMk; fIgMg: $jtbl->default = str_replace("\50\51", '', $jtbl->default); goto rI2QC; r0AMN: if (!($jtbl->default != $ftbl->default)) { goto icPFJ; } goto qIQpP; cTG6q: pGedj: goto yGLQU; tsmMk: if (!($jtbl->extra != $ftbl->extra)) { goto nlz3t; } goto MfLr_; KPI3V: $jtbl->extra = strtoupper($jtbl->extra); goto cTG6q; asUXl: $ftbl->extra = str_replace("\x28\x29", '', $ftbl->extra); goto PLAem; FR9yS: if (strtolower($jtbl->primary) == "\160\x72\151") { goto yH7G5; } goto pviB0; jUqC4: $edit_columns[$table][$jtbl->name]["\143\x6f\x6c\x5f\164\x79\160\145"] = $jtbl->col_type; goto qbLh3; LJVcI: nlz3t: goto ENoYb; MfLr_: $edit_columns[$table][$jtbl->name]["\145\170\x74\x72\x61"] = $jtbl->extra; goto LJVcI; npbUC: $edit_columns[$table][$jtbl->name]["\x6e\165\x6c\x6c\141\x62\154\145"] = $jtbl->nullable; goto tezMr; q_u3q: array_push($modif_column, "\115\117\x44\x49\x46\131\x20\140" . $jtbl->name . "\140\40" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto izqZe; XEMfy: $ftbl->default = strtoupper($ftbl->default); goto mwn6_; b6wgX: ue6eg: goto IZB0B; EGPA9: Qc8Fh: goto lIKkI; dNetI: $comment = $jtbl->comment == '' ? '' : "\x20\103\117\x4d\x4d\105\116\x54\x20\x27" . $jtbl->comment . "\x27"; goto q_u3q; U9mak: if (!($jtbl->default != null)) { goto WOlSa; } goto fIgMg; lQQgD: $edit_columns[$table][$jtbl->name]["\143\x6f\x6d\155\x65\156\164"] = $jtbl->comment; goto wThLx; EKK9h: array_push($modif_column, "\x41\104\x44\40\x50\122\111\115\101\x52\x59\40\x4b\x45\x59\40\x28\140" . $jtbl->name . "\x60\x29"); goto MKqfr; XwICv: $edit_columns[$table][$jtbl->name]["\160\x72\x69\155\141\162\x79"] = $jtbl->primary; goto FR9yS; rI2QC: $jtbl->default = strtoupper($jtbl->default); goto tSTzJ; tSTzJ: WOlSa: goto QR1gD; izqZe: VGeeP: goto wDiqW; LLo8H: array_push($modif_column, "\101\104\104\x20\125\116\x49\121\x55\105\x20\x4b\x45\x59\40\x60" . $jtbl->name . "\140\x20\x28\x60" . $jtbl->name . "\x60\51"); goto XGT0Q; XGT0Q: dxxTW: goto EGPA9; B0EKG: yH7G5: goto EKK9h; Ys1GH: Bl_WV: goto LLo8H; tezMr: Ixn_x: goto U9mak; Lzza0: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto dNetI; yGLQU: if (!($ftbl->extra != null)) { goto DlblJ; } goto asUXl; MKqfr: goto dxxTW; goto Ys1GH; ENoYb: if (!($jtbl->comment != $ftbl->comment)) { goto afKSS; } goto lQQgD; uq0cU: if (!($jtbl->primary != $ftbl->primary)) { goto Qc8Fh; } goto XwICv; hy6_j: icPFJ: goto vf7LO; YTkjA: $ftbl->default = str_replace("\50\x29", '', $ftbl->default); goto XEMfy; IvZAY: $nullable = $jtbl->nullable == "\116\x4f" ? "\x20\116\x4f\x54\40\x4e\125\x4c\x4c" : ''; goto vso3K; qIQpP: $edit_columns[$table][$jtbl->name]["\x64\145\146\141\x75\154\164"] = $jtbl->default; goto hy6_j; QR1gD: if (!($ftbl->default != null)) { goto iiHDY; } goto YTkjA; vso3K: $default = $jtbl->default == null ? '' : "\x20\104\x45\106\x41\x55\x4c\124\x20" . $jtbl->default; goto Lzza0; lKS8C: if (!($jtbl->col_type != $ftbl->col_type)) { goto QT6K5; } goto jUqC4; wThLx: afKSS: goto uq0cU; vf7LO: if (!($jtbl->extra != null)) { goto pGedj; } goto ZkjZ3; lIKkI: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto VGeeP; } goto IvZAY; IZB0B: } goto Sggb7; H2F6F: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto CQgZ4; Omzjm: IMfl4: goto JRzZ6; jrWeN: LQwjS: goto eJH2A; CQgZ4: if (!(strtoupper($extra) == "\x20\101\125\x54\x4f\x5f\111\x4e\x43\x52\105\115\105\116\124")) { goto LQwjS; } goto kUhkz; n9lP5: $length = "\x28" . ($jtbl->max_length + 1) . "\x29"; goto WMO2W; kUhkz: $extra .= "\x20\120\122\111\x4d\101\x52\x59\x20\x4b\x45\131"; goto jrWeN; tGOr4: array_push($add_column, "\x41\104\104\40\140" . $jtbl->name . "\x60\40" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto D0B1u; JRzZ6: } goto g1YrE; pwBvh: $script_create_table[$table] = $script; goto zXN0y; g1YrE: hiJOn: goto HgUOn; qRPny: if (!$this->db->table_exists($table)) { goto KqY3K; } goto dSyXX; BHVoq: $pri = ''; goto gmOwF; jof10: $create_tables[] = $json[$table]; goto TRzdT; agwzx: QVSHJ: goto a8qyT; dSyXX: if (!isset($json[$table])) { goto kSPLZ; } goto unWdM; TRzdT: $script = "\103\122\105\101\x54\x45\40\x54\101\102\114\105\x20\140" . $table . "\x60\x20\x28"; goto BHVoq; a8qyT: } goto WBJZV; rDd0R: $tbl_seharusnya = array_keys($json); goto zf_Ys; nBlGJ: } public function createTable() { goto WN7Q2; D4SE2: $this->output_json($data); goto ebjdZ; lIvXO: $scripts = json_decode($this->encryption->decrypt($scripts)); goto JFZ19; Wh5sn: sleep(1); goto lIvXO; JH0LC: foreach ($scripts as $script) { $queries .= $script; Q1nc5: } goto O1d5O; tmsuM: $data["\x73\x75\x63\143\145\163\163"] = $this->runQuery($queries); goto Fgeld; Fgeld: $data["\155\145\163\x73\141\x67\x65"] = "\x55\160\144\x61\164\x65\x20\153\x6f\154\x6f\x6d"; goto D4SE2; WN7Q2: $scripts = $this->input->post("\x64\141\x74\141", true); goto Ecx8O; Ecx8O: str_replace("\x25\62\x42", "\x2b", $scripts); goto Wh5sn; JFZ19: $queries = ''; goto JH0LC; O1d5O: VUoTT: goto tmsuM; ebjdZ: } public function createColumn() { goto jw1ks; caeGT: IOVUK: goto U2C8t; jw1ks: $scripts = $this->input->post("\x64\141\x74\x61", true); goto UuZuS; TqU41: i_Rmu: goto Uthvo; Ptjbe: $scripts = json_decode($this->encryption->decrypt($scripts)); goto MGmbY; uhK9d: $this->output_json($data); goto Pg6No; UuZuS: str_replace("\x25\x32\x42", "\x2b", $scripts); goto YmLx_; Uthvo: if (!(strpos("\140\165\x69\144\x60", $queries) !== false)) { goto IOVUK; } goto xAvCv; sqEky: foreach ($scripts as $script) { $queries .= $script; wQE0t: } goto TqU41; YmLx_: sleep(1); goto Ptjbe; oNS3h: $data["\x6d\x65\163\163\141\147\145"] = "\115\x6f\x64\x69\x66\x79\x20\x6b\x6f\x6c\157\x6d"; goto uhK9d; MGmbY: $queries = ''; goto sqEky; U2C8t: $data["\163\x75\x63\x63\145\x73\x73"] = $this->runQuery($queries); goto oNS3h; xAvCv: $this->updateUID(); goto caeGT; Pg6No: } public function editColumn() { goto QM9Ok; vQXuO: $queries = ''; goto UkjTt; UkjTt: foreach ($scripts as $script) { $queries .= $script; Nmg5Y: } goto E3oJ6; W3Qlu: sleep(1); goto xrdc8; JFtlt: $this->output_json($data); goto LrL0W; QM9Ok: $scripts = $this->input->post("\x64\x61\x74\x61", true); goto om01Q; hzFSt: $data["\163\165\143\x63\145\163\163"] = $this->runQuery($queries); goto u5cc9; E3oJ6: kZzyE: goto hzFSt; u5cc9: $data["\x6d\145\163\163\141\x67\145"] = "\125\160\144\x61\x74\x65\40\163\145\x6c\145\x73\141\x69"; goto JFtlt; xrdc8: $scripts = json_decode($this->encryption->decrypt($scripts)); goto vQXuO; om01Q: str_replace("\x25\x32\102", "\53", $scripts); goto W3Qlu; LrL0W: } function runQuery($script) { goto R0Wp0; uYfoT: $hostuser = $this->db->username; goto uXLUm; uXLUm: $hostpass = $this->db->password; goto AWCo_; E48oQ: return true; goto FbKq9; kN6Qm: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto s6kug; sXii9: $mysqli->close(); goto E48oQ; ZMcJA: return mysqli_connect_errno(); goto zEraU; zEraU: KILA1: goto sbu8U; AWCo_: $database = $this->db->database; goto kN6Qm; sbu8U: $mysqli->multi_query($script); goto sXii9; R0Wp0: $hostname = $this->db->hostname; goto uYfoT; s6kug: if (!mysqli_connect_errno()) { goto KILA1; } goto ZMcJA; FbKq9: } function updateUID() { goto HJDAa; tU51R: $input = array(); goto WusqI; HJDAa: $this->load->library("\x55\x75\151\144", "\165\165\x69\x64"); goto sQNtx; SdIe9: bpUt7: goto SnH03; WusqI: foreach ($siswas as $siswa) { $input[] = array("\x69\x64\137\163\x69\x73\x77\141" => $siswa->id_siswa, "\x75\151\x64" => $this->uuid->v4()); rpbpR: } goto SdIe9; sQNtx: $siswas = $this->db->get("\155\141\x73\x74\145\162\137\163\151\x73\x77\141")->result(); goto tU51R; SnH03: return $this->db->update_batch("\155\x61\163\164\145\x72\137\x73\x69\x73\167\x61", $input, "\151\144\137\x73\151\163\x77\141"); goto saGW6; saGW6: } function make_base() { } }
