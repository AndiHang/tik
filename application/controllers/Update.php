<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\x42\101\x53\x45\x50\x41\124\x48") or exit("\x4e\157\40\144\151\x72\145\143\x74\x20\163\143\162\151\160\164\40\141\x63\x63\145\163\x73\x20\x61\154\154\x6f\167\145\x64"); class Update extends CI_Controller { function __construct() { goto cjvc4; vQGcp: $this->load->dbforge(); goto uWDgH; cjvc4: parent::__construct(); goto BEFPG; BkCu7: $this->load->library("\x65\156\x63\x72\171\x70\x74\x69\157\x6e"); goto AJ_x3; BEFPG: include APPPATH . "\143\x6f\156\x66\151\147\57\x64\141\x74\141\142\x61\x73\145\x2e\x70\150\x70"; goto vQGcp; uWDgH: $this->load->database(); goto BkCu7; AJ_x3: } public function output_json($data, $encode = true) { goto a8YNB; a8YNB: if (!$encode) { goto gkvHR; } goto ozQoI; ozQoI: $data = json_encode($data); goto QuIAx; Fv8rX: $this->output->set_content_type("\141\x70\160\154\x69\x63\x61\164\x69\x6f\x6e\57\x6a\163\x6f\x6e")->set_output($data); goto Lmwoe; QuIAx: gkvHR: goto Fv8rX; Lmwoe: } public function index() { goto J4yyZ; BTjnq: $json = json_decode($json); goto xuExg; cRUlB: $data["\152\x73\x6f\156"] = $json; goto eJRks; I8Ict: $this->load->view("\151\156\x73\164\141\x6c\154\x2f\165\160\144\141\164\x65"); goto jeNy7; J4yyZ: $json = file_get_contents("\56\x2f\141\163\x73\x65\164\x73\x2f\141\160\160\x2f\144\x62\57\144\141\164\141\142\x61\x73\x65\56\152\163\x6f\x6e"); goto BTjnq; jeNy7: $this->load->view("\x69\156\163\164\x61\154\x6c\x2f\x66\157\157\x74\145\162"); goto FDGfg; eJRks: $this->load->view("\x69\156\163\164\141\x6c\x6c\x2f\150\145\x61\144\145\162", $data); goto I8Ict; xuExg: $json = (array) $json; goto cRUlB; FDGfg: } function object_to_array($data) { goto zYPFT; SpJvS: return $result; goto Gu6NS; EkYiy: IPy0x: goto SpJvS; Gu6NS: jHPmL: goto rWF3s; OIbkf: $result = []; goto HmnHw; HmnHw: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; xeO51: } goto EkYiy; zYPFT: if (!(is_array($data) || is_object($data))) { goto jHPmL; } goto OIbkf; rWF3s: return $data; goto tZM8L; tZM8L: } public function checkDatabase() { goto bJHVp; zmoKm: JE_6J: goto Z1t9G; t6VdK: foreach ($full_tables as $table) { goto WoEV8; XwEn6: pj0kX: goto H1mUi; H1mUi: xK3Pc: goto USiuy; USiuy: i3yTg: goto cpnWn; OjmmQ: $create_tables[$table] = $json[$table]; goto guOTs; guOTs: goto xK3Pc; goto kqxIi; kDAcJ: YDdZD: goto XwEn6; WoEV8: if ($this->db->table_exists($table)) { goto gzcuz; } goto OjmmQ; EO1qD: if (!isset($json[$table])) { goto pj0kX; } goto WHUa_; WHUa_: foreach ($json[$table] as $jtbl) { goto YgpNf; Rxq94: jUJD3: goto D5IMI; hnSS8: goto IZxq4; goto NLlhp; D5IMI: IZxq4: goto WwyLR; AP4Qt: $add_columns[$table][] = $jtbl; goto hnSS8; ZDqE6: foreach ($fields[$table] as $ftbl) { goto LKIl3; vCai2: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto RsYDc; } goto lK7IR; il20B: CUM4i: goto u5lFz; lK7IR: $edit_columns[$table][] = $jtbl; goto PNzKE; LKIl3: if (!($jtbl->name == $ftbl->name)) { goto CUM4i; } goto vCai2; u5lFz: nBrVX: goto VnlPl; PNzKE: RsYDc: goto il20B; VnlPl: } goto Rxq94; YgpNf: if ($this->db->field_exists($jtbl->name, $table)) { goto wod5F; } goto AP4Qt; NLlhp: wod5F: goto ZDqE6; WwyLR: yCyBm: goto taHQo; taHQo: } goto kDAcJ; kqxIi: gzcuz: goto EO1qD; cpnWn: } goto zmoKm; rgSmy: $full_tables = array_merge($tbl_baru, $tbl_ada); goto rm0Kg; ov3rp: $currentDb = []; goto NbG2Q; NbG2Q: foreach ($tabless as $table) { goto zdeZc; jofRP: goto C_vwj; goto BsQ8a; YTJSm: ZvnQo: goto lyRbG; ZSBlB: goto WfFJn; goto Rok3i; Od3A9: $datafld[$i]->extra = $query[$i]->extra; goto jofRP; WNt3Y: $i++; goto ZSBlB; r1Wat: $currentDb = FALSE; goto avzBN; ffEPd: $currentDb[$table] = $retval; goto DzrNi; GIxm0: NSCpN: goto WNt3Y; BsQ8a: VJ8zU: goto a2Hd6; bHwNC: $query = $query->result_object(); goto eAeso; yE0Si: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto fjNq1; } goto HojQj; M9nR_: $i = 0; goto cdJJs; eAeso: $retval = array(); goto M9nR_; uX5JB: C_vwj: goto YTJSm; blkKW: WfFJn: goto RA_x0; RA_x0: if (!($i < $c)) { goto WjkyO; } goto yE0Si; VkO3_: $sql = "\123\x45\x4c\x45\103\124\x20\x60\143\157\154\x75\155\x6e\137\x6e\141\x6d\x65\x60\x2c\40\x60\x6e\x75\155\x65\x72\151\x63\137\x70\x72\x65\143\151\x73\x69\x6f\x6e\140\54\40\140\145\x78\164\162\141\x60\54\x20\140\151\x73\137\156\x75\x6c\154\141\x62\x6c\x65\140" . "\40\x46\x52\x4f\x4d\40\140\x69\x6e\x66\157\x72\155\141\x74\x69\157\156\x5f\163\x63\x68\x65\x6d\141\x60\x2e\x60\143\157\154\165\155\156\163\x60\40\x57\110\105\122\105\40\x74\x61\142\154\145\x5f\163\x63\150\x65\x6d\x61\x20\x3d\40\42" . $this->db->database . "\42\x20\x41\x4e\x44\x20\164\x61\x62\x6c\x65\137\x6e\141\155\x65\40\75\x20\42" . $table . "\x22"; goto b9D46; cdJJs: $c = count($query); goto blkKW; Rok3i: WjkyO: goto ffEPd; Zs6dN: $retval[$i] = new stdClass(); goto Qdypx; FN79A: if ($query[$i]->extra == "\x61\165\164\157\x5f\x69\x6e\x63\x72\x65\155\145\x6e\164") { goto VJ8zU; } goto Od3A9; Qdypx: $retval[$i]->name = $query[$i]->column_name; goto qqVL5; b9D46: if (!(($query = $this->db->query($sql)) === FALSE)) { goto jiozI; } goto r1Wat; lyRbG: fjNq1: goto Zs6dN; HojQj: if (!($query[$i]->extra != '')) { goto ZvnQo; } goto FN79A; qqVL5: $retval[$i]->extra = $query[$i]->extra; goto GIxm0; DzrNi: $fields[$table] = $datafld; goto Nu7JN; a2Hd6: $datafld[$i]->auto_increment = true; goto uX5JB; avzBN: jiozI: goto bHwNC; zdeZc: $datafld = $this->db->field_data($table); goto VkO3_; Nu7JN: V2hW3: goto D8Eki; D8Eki: } goto DHSqa; MqrAy: $create_tables = []; goto P2qbv; Z1t9G: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto rVWXl; e2r0T: $edit_columns = []; goto t6VdK; rVWXl: $data = ["\144\142" => $fields, "\x63\162\145\x61\x74\145" => $create_tables, "\155\x6f\x64\151\146\171" => $edit_columns, "\141\144\144" => $add_columns, "\x63\157\165\156\164\x73" => $counts, "\x6a\x73\157\x6e" => $json, "\x63\x75\162\162\x65\156\x74" => $currentDb]; goto ZVsw1; FyCED: $json = (array) $json; goto kTm8Q; ZVsw1: $this->output_json($data); goto g6WJe; kTm8Q: $tbl_baru = array_keys($json); goto zXckZ; qSry_: $fields = []; goto ov3rp; baSy_: $json = json_decode($json); goto FyCED; P2qbv: $add_columns = []; goto e2r0T; bJHVp: $db_debug = $this->db->db_debug; goto DtGl6; zXckZ: $tbl_ada = array_keys($fields); goto rgSmy; DtGl6: $this->db->db_debug = FALSE; goto PXohP; DHSqa: FmugX: goto byuiC; PXohP: $tabless = $this->db->list_tables(); goto qSry_; rm0Kg: $full_tables = array_unique($full_tables); goto jrqyN; byuiC: $json = file_get_contents("\56\x2f\141\x73\163\145\164\163\57\141\160\160\57\144\142\57\x64\x61\x74\141\x62\141\163\x65\x2e\x6a\x73\157\156"); goto baSy_; jrqyN: sort($full_tables); goto MqrAy; g6WJe: } public function updateDatabase() { goto Z38Rt; HqGJL: foreach ($full_tables as $table) { goto EiAH3; XGzI0: if (!isset($json[$table])) { goto p2qnv; } goto NFKMU; NFKMU: foreach ($json[$table] as $jtbl) { goto Eafmk; KhDEY: vvi5J: goto EPf3C; cKUVe: $field = array($jtbl->name => array("\x74\x79\160\x65" => $jtbl->type, "\143\x6f\x6e\163\x74\x72\141\151\156\x74" => $jtbl->max_length, "\144\145\146\x61\165\154\164" => $jtbl->default)); goto BgEpw; Eafmk: if ($this->db->field_exists($jtbl->name, $table)) { goto vvi5J; } goto ZXZiS; BgEpw: $this->dbforge->add_column($table, $field); goto KjBsX; EPf3C: foreach ($fields[$table] as $ftbl) { goto Ys3jv; R5Y1l: $field = array($jtbl->name => array("\164\171\160\x65" => $jtbl->type, "\143\x6f\x6e\163\164\x72\141\151\156\x74" => $jtbl->max_length, "\x6e\x75\154\x6c" => false, "\141\x75\x74\x6f\137\x69\156\143\162\x65\155\145\x6e\164" => true)); goto PZqRE; vCWQi: goto qPSDh; goto QabE3; cSfDa: qPSDh: goto BwMDJ; KBdMg: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto JcTfs; } goto yZXzJ; Ys3jv: if (!($jtbl->name == $ftbl->name)) { goto r1Vbr; } goto KBdMg; iFbFj: if ($jtbl->default == "\103\125\x52\x52\105\116\x54\x5f\124\x49\x4d\105\123\124\101\115\120") { goto jAM2f; } goto pujpx; K7uVT: $field = array($jtbl->name . "\x20\x64\x61\164\x65\x74\x69\x6d\145\40\x64\145\146\141\x75\x6c\164\40\x63\x75\162\x72\x65\156\x74\137\164\151\x6d\x65\163\164\141\155\x70" . $onUpdate); goto BiNE2; pujpx: $field = array($jtbl->name => array("\x74\x79\160\x65" => $jtbl->type, "\143\x6f\156\x73\164\x72\x61\151\x6e\164" => $jtbl->max_length, "\144\x65\146\x61\x75\x6c\x74" => $jtbl->default)); goto A43am; BDlZP: LlCTc: goto Lc0Bt; yZXzJ: if ($jtbl->primary_key == 0) { goto Hq51V; } goto JYsCv; NUGqg: jAM2f: goto FTGgs; SDZV9: $this->dbforge->modify_column($table, $field); goto cSfDa; BiNE2: LbL9n: goto SDZV9; VqX6B: UIoX9: goto R5Y1l; PZqRE: F6fOg: goto v_rN1; c9pSd: goto F6fOg; goto VqX6B; A43am: goto LbL9n; goto NUGqg; QabE3: Hq51V: goto iFbFj; C6okZ: $field = array($jtbl->name => array("\164\x79\160\x65" => $jtbl->type, "\x63\x6f\156\163\164\x72\141\151\x6e\x74" => $jtbl->max_length, "\156\x75\154\154" => false)); goto c9pSd; DFsWv: r1Vbr: goto BDlZP; RvUPW: $this->dbforge->modify_column($table, $field); goto vCWQi; v_rN1: $this->dbforge->add_key($jtbl->name, true); goto RvUPW; BwMDJ: JcTfs: goto DFsWv; FTGgs: $onUpdate = isset($jtbl->extra) ? "\x20" . strtolower($jtbl->extra) : ''; goto K7uVT; JYsCv: if ($jtbl->auto_increment == true) { goto UIoX9; } goto C6okZ; Lc0Bt: } goto fmLBU; ZXZiS: if ($jtbl->primary_key == 0) { goto PBTXo; } goto TJbon; ovxIE: goto Grdfo; goto KhDEY; ysge_: Kfkek: goto LQgNw; TJbon: $field = array($jtbl->name => array("\164\171\x70\145" => $jtbl->type, "\x63\157\156\x73\164\162\141\x69\x6e\x74" => $jtbl->max_length, "\156\165\x6c\154" => false)); goto emgLH; YXXw2: $this->dbforge->add_column($table, $field); goto l6WkL; U3Z_9: Grdfo: goto ysge_; fmLBU: vtWdo: goto U3Z_9; l6WkL: goto yscFU; goto fQn1z; KjBsX: yscFU: goto ovxIE; emgLH: $this->dbforge->add_key($jtbl->name, true); goto YXXw2; fQn1z: PBTXo: goto cKUVe; LQgNw: } goto awI_i; T1vNc: fSSWf: goto XGzI0; Qjoqd: OZW4f: goto Ior1g; awI_i: j8LpU: goto ZE6CP; ZE6CP: p2qnv: goto M0UHT; v4QX1: goto O0WbC; goto T1vNc; KgjeW: wNQZ8: goto v4QX1; Ior1g: $this->dbforge->create_table($table, TRUE); goto EQwaE; osRIZ: if (!isset($json[$table])) { goto wNQZ8; } goto X7Tpk; EQwaE: $this->db->query("\101\x4c\124\x45\x52\x20\x54\x41\x42\x4c\x45\x20\x20\x60" . $table . "\x60\x20\x45\x4e\107\x49\x4e\x45\x20\75\x20\111\156\x6e\157\104\102"); goto KgjeW; EiAH3: if ($this->db->table_exists($table)) { goto fSSWf; } goto osRIZ; X7Tpk: foreach ($json[$table] as $tbl => $jtbl) { goto Rput_; jWH0S: if (!($jtbl->primary_key == 1)) { goto SCec2; } goto NWM8P; emLhB: $this->dbforge->add_field($field); goto jWH0S; Rput_: $field = [$jtbl->name => ["\164\171\x70\145" => $jtbl->type, "\143\x6f\x6e\x73\164\162\x61\x69\x6e\164" => $jtbl->max_length, "\156\x75\154\x6c" => $jtbl->primary_key == 0]]; goto emLhB; QuNIE: SCec2: goto HRuha; HRuha: AaO3_: goto u7zHz; NWM8P: $this->dbforge->add_key($jtbl->name, true); goto QuNIE; u7zHz: } goto Qjoqd; P0Pil: a_rsi: goto KVxqY; M0UHT: O0WbC: goto P0Pil; KVxqY: } goto ECwFO; Zfe_l: $tbl_baru = array_keys($json); goto zvi28; ECwFO: dJbBu: goto umUm6; umUm6: echo true; goto JqsS2; jb45B: IeFNg: goto yP3vI; HGVWQ: sort($full_tables); goto HqGJL; Qj_vm: $json = (array) $json; goto Zfe_l; zvi28: $tbl_ada = array_keys($fields); goto cAgnH; iTYz1: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); YCq9S: } goto jb45B; j5hIa: $json = json_decode($json); goto Qj_vm; yP3vI: $json = file_get_contents("\x2e\57\141\x73\x73\145\x74\163\x2f\141\x70\x70\57\144\x62\x2f\x64\141\x74\x61\142\x61\163\145\56\152\163\x6f\156"); goto j5hIa; zHTWk: $fields = []; goto iTYz1; r8v9I: $full_tables = array_unique($full_tables); goto HGVWQ; Z38Rt: $tabless = $this->db->list_tables(); goto zHTWk; cAgnH: $full_tables = array_merge($tbl_baru, $tbl_ada); goto r8v9I; JqsS2: } public function checkDb() { goto ruxZt; n7Y40: $this->db->db_debug = $db_debug; goto GDEAx; Xkfd8: $add_columns = []; goto s1EWG; J4oOU: $tbl_ada = array_keys($fields); goto Irp2P; LIPoz: $json = json_decode($json); goto ANdWw; mut5R: $json = file_get_contents("\56\x2f\x61\x73\x73\x65\x74\163\x2f\x61\x70\160\x2f\x64\x62\x2f\x64\141\164\x61\142\141\163\x65\56\x6a\163\157\x6e"); goto LIPoz; aDnWw: $full_tables = array_unique($full_tables); goto S1ncs; nGgiT: $fields = []; goto GjtgM; Irp2P: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto aDnWw; XL0GD: foreach ($full_tables as $table) { goto oALaA; SXe2f: $script .= $pri . "\x29\x20\x45\116\107\x49\x4e\x45\75\111\156\x6e\157\104\102\x20\104\105\106\101\125\x4c\124\40\103\x48\101\x52\x53\105\124\75\165\x74\146\x38\155\x62\x34\73"; goto ACYQd; WRguM: if (!(count($modif_column) > 0)) { goto YJaKF; } goto Epaft; cVBHy: $script_create_column[$table] = "\101\114\124\105\122\x20\x54\x41\x42\114\x45\x20\140" . $table . "\x60\40" . implode("\54\x20", $add_column) . "\x3b"; goto kwV4Y; gvv2Q: foreach ($json[$table]->columns as $column) { goto Qpxb_; z8O7t: goto HyIr1; goto iSQuV; OEg77: if ($column->type == "\151\x6e\x74") { goto PquZc; } goto q28mj; fkV3c: HyIr1: goto ua9TB; gYkzj: $length = "\50" . ($column->max_length + 1) . "\x29"; goto xb6Vd; uZLi9: WiHnG: goto SCMc_; N0Ung: if ($column->type != "\x6c\157\156\147\164\145\170\x74" && $column->type != "\155\145\x64\x69\165\155\x74\x65\x78\x74" && $column->type != "\164\x65\x78\164") { goto S3WsM; } goto eA8XE; Qpxb_: if ($column->max_length == null) { goto S1tqq; } goto N0Ung; uKkHQ: goto HyIr1; goto gOEr3; ltrhZ: goto TTeXd; goto BX3vb; FhgDU: $length = ''; goto z8O7t; VKPkK: $default = $column->default == null ? '' : "\x20\x44\x45\x46\101\x55\x4c\124\40" . $column->default; goto R31wa; R31wa: $extra = $column->extra == '' ? '' : "\40" . strtoupper($column->extra); goto Jk_a3; BX3vb: PquZc: goto gYkzj; Cv58H: $pri .= $column->primary != '' ? "\x50\x52\x49\115\x41\122\131\x20\x4b\x45\131\x20\50\140" . $column->name . "\140\x29" : ''; goto uZLi9; eA8XE: $length = ''; goto uKkHQ; Jk_a3: $comment = $column->comment == '' ? '' : "\x20\x43\x4f\x4d\115\105\116\x54\x20\47" . $column->comment . "\x27"; goto w32DM; iSQuV: S3WsM: goto OEg77; ua9TB: $nullable = $column->nullable == "\116\x4f" ? "\x20\116\117\x54\x20\116\x55\114\x4c" : ''; goto VKPkK; gOEr3: S1tqq: goto FhgDU; w32DM: $script .= "\x60" . $column->name . "\140\40" . $column->type . $length . $nullable . $default . $extra . $comment . "\x2c\40"; goto Cv58H; q28mj: $length = "\x28" . $column->max_length . "\51"; goto ltrhZ; xb6Vd: TTeXd: goto fkV3c; SCMc_: } goto F3F5L; dq8SQ: $script = "\x43\x52\x45\x41\x54\x45\40\124\101\x42\x4c\105\x20\140" . $table . "\x60\x20\x28"; goto yzG7X; yzG7X: $pri = ''; goto gvv2Q; gnkSA: $create_tables[] = $json[$table]; goto dq8SQ; rw5qL: bu5N3: goto lRRKm; Jt3F1: A44tv: goto tGiFG; ACYQd: $script_create_table[$table] = $script; goto gcd39; zMgme: foreach ($json[$table]->columns as $jtbl) { goto KHVOB; BaHGV: foreach ($fields[$table]->columns as $ftbl) { goto FlEsu; MX5is: $edit_columns[$table][$jtbl->name]["\156\x75\x6c\x6c\141\142\x6c\x65"] = $jtbl->nullable; goto SOxeW; SY_PV: array_push($modif_column, "\x4d\117\104\x49\x46\131\x20\140" . $jtbl->name . "\x60\x20" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto jLtCg; hEJ_I: $nullable = $jtbl->nullable == "\116\x4f" ? "\40\x4e\x4f\x54\40\116\x55\114\114" : ''; goto GZ_HL; q4G94: b3hvF: goto Yqu_T; ut0cN: iYAJS: goto Z3MEt; Isko8: $edit_columns[$table][$jtbl->name]["\x64\x65\x66\141\x75\x6c\x74"] = $jtbl->default; goto Ugi7Y; vhXzd: d4s00: goto fjFHV; ZNcTs: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto c0XK5; } goto hEJ_I; GX_Z2: if (!($jtbl->default != null)) { goto Yga3h; } goto VWQ9c; NRysv: goto rGHee; goto ut0cN; k48Ru: $ftbl->extra = str_replace("\50\51", '', $ftbl->extra); goto q9Cwn; dQxK5: IqpiP: goto Lu7e9; SOxeW: zvhUe: goto GX_Z2; q9Cwn: $ftbl->extra = strtoupper($ftbl->extra); goto xr7_0; Obaf_: if (!($jtbl->default != $ftbl->default)) { goto wBkzf; } goto Isko8; Okfoc: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto ZbR3D; tU2to: array_push($modif_column, "\101\x44\x44\x20\x50\x52\111\x4d\x41\122\131\40\113\x45\131\x20\50\140" . $jtbl->name . "\140\x29"); goto NRysv; XqFhz: if (!($jtbl->nullable != $ftbl->nullable)) { goto zvhUe; } goto MX5is; Xb6k2: if (!($ftbl->default != null)) { goto iKp8h; } goto vi9RP; VWQ9c: $jtbl->default = str_replace("\50\51", '', $jtbl->default); goto aezPX; qxCmb: $jtbl->extra = strtoupper($jtbl->extra); goto uagMh; gpnoq: if (!($jtbl->extra != $ftbl->extra)) { goto d4s00; } goto I96yP; fjFHV: if (!($jtbl->comment != $ftbl->comment)) { goto b3hvF; } goto vUfkr; fotYi: Yga3h: goto Xb6k2; sKf3i: if (strtolower($jtbl->primary) == "\165\x6e\x69") { goto iYAJS; } goto Ma_Fw; aezPX: $jtbl->default = strtoupper($jtbl->default); goto fotYi; I96yP: $edit_columns[$table][$jtbl->name]["\145\x78\x74\x72\x61"] = $jtbl->extra; goto vhXzd; EieRy: iKp8h: goto Obaf_; YhlsB: H_V2U: goto tU2to; Ma_Fw: goto rGHee; goto YhlsB; GZ_HL: $default = $jtbl->default == null ? '' : "\40\x44\105\106\x41\125\114\x54\x20" . $jtbl->default; goto Okfoc; FlEsu: if (!($jtbl->name == $ftbl->name)) { goto IqpiP; } goto tE1m1; vi9RP: $ftbl->default = str_replace("\x28\51", '', $ftbl->default); goto ZF5DV; MzU1z: rGHee: goto NGis8; Z3MEt: array_push($modif_column, "\x41\x44\x44\x20\x55\x4e\x49\x51\x55\105\40\113\x45\131\40\x60" . $jtbl->name . "\140\40\x28\x60" . $jtbl->name . "\x60\x29"); goto MzU1z; qGrFz: $jtbl->extra = str_replace("\x28\x29", '', $jtbl->extra); goto qxCmb; KFmeb: $edit_columns[$table][$jtbl->name]["\x70\x72\x69\x6d\141\162\171"] = $jtbl->primary; goto mvFgh; Ugi7Y: wBkzf: goto cjRhE; ZbR3D: $comment = $jtbl->comment == '' ? '' : "\x20\103\x4f\115\x4d\x45\x4e\x54\40\x27" . $jtbl->comment . "\x27"; goto SY_PV; mvFgh: if (strtolower($jtbl->primary) == "\x70\x72\151") { goto H_V2U; } goto sKf3i; jLtCg: c0XK5: goto dQxK5; vUfkr: $edit_columns[$table][$jtbl->name]["\x63\157\155\x6d\x65\156\164"] = $jtbl->comment; goto q4G94; Lu7e9: O3Hk4: goto m1zlK; tE1m1: if (!($jtbl->col_type != $ftbl->col_type)) { goto VtHmQ; } goto S2ZKK; xr7_0: DhSGp: goto gpnoq; uagMh: FZqVC: goto m5YRf; NGis8: np1ft: goto ZNcTs; cjRhE: if (!($jtbl->extra != null)) { goto FZqVC; } goto qGrFz; ZF5DV: $ftbl->default = strtoupper($ftbl->default); goto EieRy; Yqu_T: if (!($jtbl->primary != $ftbl->primary)) { goto np1ft; } goto KFmeb; m5YRf: if (!($ftbl->extra != null)) { goto DhSGp; } goto k48Ru; S2ZKK: $edit_columns[$table][$jtbl->name]["\x63\157\154\x5f\x74\171\x70\145"] = $jtbl->col_type; goto nrBDi; nrBDi: VtHmQ: goto XqFhz; m1zlK: } goto ioLKW; HpHGR: LCHt2: goto WJUTs; N0rvL: $length = "\x28" . $jtbl->max_length . "\51"; goto UFl9S; BJBlJ: jSgkN: goto kDO9V; deJ_C: cbiyD: goto Wfms0; UFl9S: goto g9SQW; goto Nf9ik; wth_R: if (!(strtoupper($extra) == "\40\x41\x55\124\x4f\x5f\111\116\x43\x52\105\x4d\105\x4e\124")) { goto bnbNy; } goto Bv0Aj; Nf9ik: daoMA: goto J9vRf; Wfms0: $length = ''; goto nyhtl; U0Gm4: array_push($add_column, "\x41\104\x44\40\140" . $jtbl->name . "\x60\40" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto xDjRg; X6OVz: goto jSgkN; goto deJ_C; Bv0Aj: $extra .= "\40\x50\x52\111\x4d\x41\122\x59\40\113\105\x59"; goto n1i50; kDO9V: $nullable = $jtbl->nullable == "\116\117" ? "\40\x4e\117\x54\40\116\x55\x4c\114" : ''; goto RI8uN; fh7On: g9SQW: goto BJBlJ; aadM4: if ($jtbl->max_length == null) { goto cbiyD; } goto jtDhW; nyhtl: goto jSgkN; goto HpHGR; WJUTs: if ($jtbl->type == "\151\156\164") { goto daoMA; } goto N0rvL; C3hZy: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto wth_R; xDjRg: vBEuO: goto BaHGV; n1i50: bnbNy: goto Hpvy7; nfOug: fA6gB: goto PG5oE; RI8uN: $default = $jtbl->default == null ? '' : "\x20\104\x45\x46\101\x55\114\124\x20" . $jtbl->default; goto C3hZy; KHVOB: if ($this->db->field_exists($jtbl->name, $table)) { goto vBEuO; } goto kw6IN; kw6IN: $add_columns[$table][] = $jtbl; goto aadM4; J9vRf: $length = "\x28" . ($jtbl->max_length + 1) . "\51"; goto fh7On; Hpvy7: $comment = $jtbl->comment == '' ? '' : "\x20\103\117\x4d\115\105\x4e\x54\x20\47" . $jtbl->comment . "\47"; goto U0Gm4; PEFrR: $length = ''; goto X6OVz; ioLKW: SFgF8: goto nfOug; jtDhW: if ($jtbl->type != "\x6c\157\156\x67\164\x65\x78\x74" && $jtbl->type != "\x6d\x65\144\x69\165\155\x74\x65\170\x74" && $jtbl->type != "\x74\x65\170\x74") { goto LCHt2; } goto PEFrR; PG5oE: } goto ul2CA; Ztnq6: YJaKF: goto rw5qL; gcd39: Iewe3: goto Jt3F1; fpxQj: $add_column = []; goto oQmdH; ul2CA: usWKO: goto ZP2jV; Epaft: $script_edit_column[$table] = "\x41\114\x54\105\122\40\124\x41\102\114\105\40\x60" . $table . "\x60\x20" . implode("\x2c\x20", $modif_column) . "\73"; goto Ztnq6; lRRKm: goto Iewe3; goto oZUAo; ZP2jV: if (!(count($add_column) > 0)) { goto zI3hD; } goto cVBHy; oZUAo: mCyxv: goto gnkSA; F3F5L: QxC06: goto SXe2f; oQmdH: $modif_column = []; goto zMgme; ysr1T: if (!isset($json[$table])) { goto bu5N3; } goto fpxQj; oALaA: if (!$this->db->table_exists($table)) { goto mCyxv; } goto ysr1T; kwV4Y: zI3hD: goto WRguM; tGiFG: } goto WMKJW; WMKJW: gWWeW: goto n7Y40; D4PUW: $edit_columns = []; goto hyBK_; ANdWw: $json = (array) $json; goto h5GtY; GjtgM: foreach ($tabless as $table) { goto LRK5C; aUGU6: if (!(($query = $this->db->query($sql)) === FALSE)) { goto Uc7My; } goto W1JZo; W1JZo: $fields = FALSE; goto o6x0s; aqLFo: FSqVM: goto a22R1; LRK5C: $sql = "\x53\x45\114\x45\103\x54\40\x60\x63\x6f\154\165\155\x6e\x5f\x6e\x61\155\145\x60\54\x20\x60\x63\x6f\154\165\155\x6e\137\x74\171\x70\145\140\x2c\40\140\x63\157\154\154\141\x74\151\x6f\156\137\x6e\x61\x6d\145\x60\x2c\x20\x60\144\141\164\x61\137\x74\x79\160\145\140\x2c\40\x60\x63\x68\141\x72\141\x63\x74\x65\x72\137\x6d\141\x78\x69\x6d\x75\155\x5f\x6c\145\156\x67\164\x68\x60\x2c\x20\x60\x6e\x75\x6d\145\162\151\143\x5f\x70\x72\x65\x63\x69\163\x69\x6f\x6e\x60\x2c" . "\x20\140\x63\157\x6c\165\x6d\156\x5f\144\145\146\x61\x75\x6c\x74\x60\54\x20\x60\x63\x6f\x6c\x75\x6d\156\x5f\x6b\x65\171\x60\x2c\x20\140\x63\x6f\154\x75\155\156\137\143\x6f\x6d\155\x65\x6e\164\140\x2c\40\x60\x65\170\164\x72\x61\x60\x2c\x20\x60\x69\x73\137\156\x75\154\x6c\x61\142\154\145\x60\15\12\x9\x9\x9\106\x52\x4f\115\x20\x60\151\156\146\x6f\x72\x6d\x61\x74\151\157\156\x5f\x73\143\x68\x65\155\141\140\x2e\140\143\x6f\154\x75\155\x6e\x73\x60\40\127\x48\x45\122\x45\40\164\141\x62\x6c\145\x5f\x73\x63\150\x65\x6d\141\40\75\x20\42" . $this->db->database . "\x22\x20\101\x4e\104\x20\164\x61\142\x6c\x65\x5f\156\141\155\x65\40\75\x20\x22" . $table . "\42"; goto aUGU6; G2aZe: $retval[$i]->primary = $query[$i]->column_key; goto WVnVT; o6x0s: Uc7My: goto ZhG_F; vxkDT: $retval[$i]->nullable = $query[$i]->is_nullable; goto G2aZe; gPzcA: $retval = array(); goto w5Xlf; mrK7A: $retval[$i]->default = $query[$i]->column_default; goto gHDps; ZtWSE: $retval[$i]->col_type = $query[$i]->column_type; goto hZdlB; WVnVT: dlj6A: goto MZ96J; ZhG_F: $query = $query->result_object(); goto gPzcA; ypuIP: S8gav: goto lVJCt; iOZ1U: if (!($i < $c)) { goto S8gav; } goto pxQFC; hZdlB: $retval[$i]->type = $query[$i]->data_type; goto N9y3S; pxQFC: $retval[$i] = new stdClass(); goto XW0kw; iiGH9: goto Z3ust; goto ypuIP; MZ96J: $i++; goto iiGH9; lVJCt: $fields[$table] = (object) ["\x74\141\142\x6c\x65\x5f\x6e\x61\x6d\145" => $table, "\143\157\154\165\x6d\x6e\x73" => $retval]; goto aqLFo; XW0kw: $retval[$i]->name = $query[$i]->column_name; goto ZtWSE; k2hpS: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto mrK7A; N9y3S: $retval[$i]->collation = $query[$i]->collation_name; goto k2hpS; w5Xlf: $i = 0; goto TNnpc; gHDps: $retval[$i]->comment = $query[$i]->column_comment; goto HVtfI; HVtfI: $retval[$i]->extra = $query[$i]->extra; goto vxkDT; TNnpc: $c = count($query); goto r2vL2; r2vL2: Z3ust: goto iOZ1U; a22R1: } goto jzqhU; lpoR0: $tabless = $this->db->list_tables(); goto nGgiT; ttAwK: $script_create_table = []; goto Xkfd8; h5GtY: $tbl_seharusnya = array_keys($json); goto J4oOU; HfRkl: $this->db->db_debug = FALSE; goto lpoR0; jzqhU: PrpID: goto mut5R; Bmzp_: $create_tables = []; goto ttAwK; HYM4p: $this->output_json($data); goto Fuib7; GDEAx: $data = ["\146\x69\145\154\x64\163" => $fields, "\x63\x72\145\141\x74\x65\x5f\x74\141\142\154\145\x73" => $create_tables, "\x63\x6f\x75\156\164\137\x74\x62\x6c" => count($create_tables), "\141\x64\x64\137\x63\157\x6c\165\155\x6e\x73\137\164\157\137\164\x61\x62\154\145" => $add_columns, "\143\157\165\156\x74\137\x63\x6f\x6c" => count($add_columns), "\x65\x64\x69\x74\x5f\x63\x6f\x6c\x75\x6d\x6e\x73" => $edit_columns, "\143\157\165\156\164\x5f\155\157\x64" => count($edit_columns), "\x61\x64\144\137\164\142\154" => $this->encryption->encrypt(json_encode($script_create_table)), "\141\144\144\137\143\157\154" => $this->encryption->encrypt(json_encode($script_create_column)), "\155\157\144\137\143\157\x6c" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto HYM4p; S1ncs: sort($full_tables); goto Bmzp_; hyBK_: $script_edit_column = []; goto XL0GD; ruxZt: $db_debug = $this->db->db_debug; goto HfRkl; s1EWG: $script_create_column = []; goto D4PUW; Fuib7: } public function createTable() { goto UiF03; CYL6P: EekfB: goto MhmQD; hTfkw: $data["\155\145\x73\x73\x61\x67\x65"] = "\x55\160\144\x61\x74\145\x20\x6b\x6f\x6c\157\x6d"; goto OUU8p; UiF03: $scripts = $this->input->post("\x64\141\164\x61", true); goto P_8G4; rmK9f: sleep(1); goto Zrnsm; MhmQD: $data["\163\x75\x63\143\145\x73\163"] = $this->runQuery($queries); goto hTfkw; OUU8p: $this->output_json($data); goto QDvRN; kh_Ow: foreach ($scripts as $script) { $queries .= $script; uoVAq: } goto CYL6P; Zrnsm: $scripts = json_decode($this->encryption->decrypt($scripts)); goto yjE0S; yjE0S: $queries = ''; goto kh_Ow; P_8G4: str_replace("\45\x32\102", "\x2b", $scripts); goto rmK9f; QDvRN: } public function createColumn() { goto KNSKW; BIDsg: $data["\x73\x75\x63\143\x65\163\x73"] = $this->runQuery($queries); goto AYIya; or2Kg: foreach ($scripts as $script) { $queries .= $script; LnNQ1: } goto RGVom; KNSKW: $scripts = $this->input->post("\x64\x61\x74\141", true); goto Hq2qS; uX7QK: $this->updateUID(); goto ifNqL; mnOch: $queries = ''; goto or2Kg; RGVom: QzOaC: goto Xp3DR; Hq2qS: str_replace("\x25\62\102", "\53", $scripts); goto NiwOz; ifNqL: D9RkZ: goto BIDsg; I8hLn: $this->output_json($data); goto de3HJ; AYIya: $data["\155\145\x73\163\x61\x67\145"] = "\115\x6f\x64\x69\x66\171\40\153\157\154\x6f\x6d"; goto I8hLn; Xp3DR: if (!(strpos("\x60\x75\x69\144\x60", $queries) !== false)) { goto D9RkZ; } goto uX7QK; wxuNr: $scripts = json_decode($this->encryption->decrypt($scripts)); goto mnOch; NiwOz: sleep(1); goto wxuNr; de3HJ: } public function editColumn() { goto HEI6v; HEI6v: $scripts = $this->input->post("\144\x61\x74\141", true); goto GZFpx; GZFpx: str_replace("\45\62\x42", "\x2b", $scripts); goto zOOh1; bCNAf: $this->output_json($data); goto ze_CX; anTMM: rW8jd: goto qxWRY; a1jCU: $queries = ''; goto U4b2n; zOOh1: sleep(1); goto CD94N; UqtV2: $data["\155\x65\x73\163\x61\x67\x65"] = "\x55\160\x64\141\x74\x65\x20\163\145\x6c\145\x73\141\151"; goto bCNAf; CD94N: $scripts = json_decode($this->encryption->decrypt($scripts)); goto a1jCU; U4b2n: foreach ($scripts as $script) { $queries .= $script; Rdn3t: } goto anTMM; qxWRY: $data["\x73\x75\x63\x63\145\x73\163"] = $this->runQuery($queries); goto UqtV2; ze_CX: } function runQuery($script) { goto uiJ4v; ey3PD: $hostuser = $this->db->username; goto NDUUr; NDUUr: $hostpass = $this->db->password; goto xdl6y; DCJH1: $mysqli->close(); goto kqARb; Fbgt2: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto PLw1B; kqARb: return true; goto d_SRf; tVn5m: return mysqli_connect_errno(); goto y73kd; PLw1B: if (!mysqli_connect_errno()) { goto R_gus; } goto tVn5m; Uj1wl: $mysqli->multi_query($script); goto DCJH1; uiJ4v: $hostname = $this->db->hostname; goto ey3PD; y73kd: R_gus: goto Uj1wl; xdl6y: $database = $this->db->database; goto Fbgt2; d_SRf: } function updateUID() { goto iNfft; iNfft: $this->load->library("\125\165\151\x64", "\165\x75\151\x64"); goto uPkOm; MOVil: return $this->db->update_batch("\155\x61\x73\x74\145\x72\x5f\x73\151\x73\x77\141", $input, "\x69\144\137\163\x69\163\x77\x61"); goto kZ45t; n51SD: foreach ($siswas as $siswa) { $input[] = array("\151\144\x5f\x73\x69\x73\x77\141" => $siswa->id_siswa, "\165\x69\x64" => $this->uuid->v4()); w3Y5f: } goto c_tCZ; IYnjA: $input = array(); goto n51SD; uPkOm: $siswas = $this->db->get("\155\x61\163\x74\145\162\x5f\163\151\163\167\141")->result(); goto IYnjA; c_tCZ: n4Ey6: goto MOVil; kZ45t: } function make_base() { } }
