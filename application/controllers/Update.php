<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\x41\123\x45\x50\101\x54\x48") or exit("\x4e\157\x20\x64\151\x72\x65\x63\164\40\x73\143\x72\x69\x70\164\x20\141\x63\143\145\163\x73\40\x61\154\154\157\167\x65\144"); class Update extends CI_Controller { function __construct() { goto ueUoa; mEQUt: $this->load->library("\x65\156\x63\x72\171\160\164\x69\x6f\156"); goto rtMN2; WzG9P: include APPPATH . "\x63\157\156\146\x69\147\x2f\x64\x61\164\141\142\141\x73\x65\x2e\160\x68\160"; goto asluL; ueUoa: parent::__construct(); goto WzG9P; asluL: $this->load->dbforge(); goto R95pE; R95pE: $this->load->database(); goto mEQUt; rtMN2: } public function output_json($data, $encode = true) { goto OVwzG; PNelh: vYDtz: goto JNTl_; JNTl_: $this->output->set_content_type("\x61\x70\160\x6c\x69\143\x61\164\x69\x6f\156\x2f\x6a\x73\x6f\x6e")->set_output($data); goto W5POH; sky3a: $data = json_encode($data); goto PNelh; OVwzG: if (!$encode) { goto vYDtz; } goto sky3a; W5POH: } public function index() { goto gPIdK; YuB9r: $data["\152\x73\157\156"] = $json; goto f4ef8; ezcnv: $json = json_decode($json); goto Bm302; zag2z: $this->load->view("\x69\156\163\164\x61\154\x6c\57\x75\160\x64\x61\x74\x65"); goto vzsjc; vzsjc: $this->load->view("\151\x6e\163\x74\x61\154\154\x2f\146\157\x6f\164\145\162"); goto XMwfZ; gPIdK: $json = file_get_contents("\x2e\57\141\163\x73\x65\164\x73\x2f\141\x70\x70\x2f\144\142\57\x64\141\164\x61\x62\x61\163\x65\x2e\x6a\163\x6f\x6e"); goto ezcnv; f4ef8: $this->load->view("\151\156\163\x74\141\x6c\x6c\x2f\150\145\x61\x64\x65\162", $data); goto zag2z; Bm302: $json = (array) $json; goto YuB9r; XMwfZ: } function object_to_array($data) { goto dYhjb; pvyMP: pUnhz: goto MiStQ; MiStQ: return $data; goto Z3Xbc; yy0AP: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; QTDSn: } goto BrBIl; DwT5h: return $result; goto pvyMP; dYhjb: if (!(is_array($data) || is_object($data))) { goto pUnhz; } goto w_SJx; BrBIl: mG_wF: goto DwT5h; w_SJx: $result = []; goto yy0AP; Z3Xbc: } public function checkDatabase() { goto Zz9Ye; g72hB: $add_columns = []; goto YsCZO; VLM2m: $full_tables = array_merge($tbl_baru, $tbl_ada); goto uRIY3; T2wpY: $create_tables = []; goto g72hB; BqQhI: mTKxi: goto gVq5P; szJ2y: foreach ($full_tables as $table) { goto cZ2ZS; QX7oi: if (!isset($json[$table])) { goto zCoRA; } goto mWXm8; UYNJ5: YYq8F: goto QX7oi; d_vwl: $create_tables[$table] = $json[$table]; goto YgBZu; YgBZu: goto asLm9; goto UYNJ5; NWAM2: LSSPC: goto acTfP; cZ2ZS: if ($this->db->table_exists($table)) { goto YYq8F; } goto d_vwl; oSSVS: xFJ7z: goto SPoJC; mWXm8: foreach ($json[$table] as $jtbl) { goto hupAk; YQXUO: jw44G: goto kLwsU; ARarT: OtC2y: goto ZOy1e; MY5QX: $add_columns[$table][] = $jtbl; goto rNm2Y; hupAk: if ($this->db->field_exists($jtbl->name, $table)) { goto F0te7; } goto MY5QX; YCvSf: foreach ($fields[$table] as $ftbl) { goto MtrJd; HbFiQ: KbSfd: goto lFQ6e; kfqBA: MLjuI: goto czxjw; DfMHp: $edit_columns[$table][] = $jtbl; goto kfqBA; czxjw: B5ysh: goto HbFiQ; TlaT5: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto MLjuI; } goto DfMHp; MtrJd: if (!($jtbl->name == $ftbl->name)) { goto B5ysh; } goto TlaT5; lFQ6e: } goto YQXUO; tOftJ: F0te7: goto YCvSf; rNm2Y: goto oNjtH; goto tOftJ; kLwsU: oNjtH: goto ARarT; ZOy1e: } goto NWAM2; acTfP: zCoRA: goto RHGE7; RHGE7: asLm9: goto oSSVS; SPoJC: } goto yXhOR; kd4Oi: $currentDb = []; goto vfIbx; OgE5s: $tabless = $this->db->list_tables(); goto UtCP5; yXhOR: hPn5t: goto ruqXI; fTe0R: $json = json_decode($json); goto CoP5R; WaKWE: $tbl_ada = array_keys($fields); goto VLM2m; riUSA: $this->output_json($data); goto ZP72l; tnCx2: sort($full_tables); goto T2wpY; Zz9Ye: $db_debug = $this->db->db_debug; goto L4f37; GX631: $tbl_baru = array_keys($json); goto WaKWE; ruqXI: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto pVx6X; gVq5P: $json = file_get_contents("\56\x2f\141\x73\x73\145\x74\x73\x2f\x61\160\160\57\x64\142\57\144\141\x74\141\x62\x61\163\x65\56\152\x73\157\156"); goto fTe0R; vfIbx: foreach ($tabless as $table) { goto TgzgZ; Nhi8q: $retval[$i] = new stdClass(); goto WI3hl; P6xWP: V97xU: goto iBgh1; ztJFn: $currentDb[$table] = $retval; goto kZ7px; LXyD9: $sql = "\123\x45\114\105\x43\x54\40\x60\143\157\154\x75\x6d\156\x5f\156\141\155\x65\140\54\40\140\x6e\x75\x6d\145\162\151\143\x5f\x70\162\145\143\x69\163\x69\x6f\x6e\140\x2c\40\140\145\x78\164\162\x61\x60\x2c\40\140\x69\x73\x5f\156\165\x6c\154\x61\x62\154\x65\140" . "\x20\106\x52\x4f\115\x20\x60\151\156\x66\x6f\x72\x6d\x61\x74\x69\x6f\x6e\137\163\143\150\145\155\141\x60\x2e\x60\x63\x6f\x6c\x75\155\156\163\x60\40\x57\x48\105\122\105\x20\164\141\142\x6c\x65\137\x73\143\150\145\x6d\141\40\75\40\x22" . $this->db->database . "\42\40\101\116\104\40\x74\141\142\x6c\145\137\x6e\141\155\x65\x20\75\40\42" . $table . "\x22"; goto vm7bC; oz9uF: $datafld[$i]->extra = $query[$i]->extra; goto p2z3B; zE9G_: cgxjw: goto sZAoL; iBgh1: $query = $query->result_object(); goto JlbJ8; Z9XHr: X2JkW: goto wXlT6; mB0CL: eENId: goto pW32g; YnuUJ: $datafld[$i]->auto_increment = true; goto zE9G_; tcKLs: Z1MNM: goto YnuUJ; hCxJ1: if (!($query[$i]->extra != '')) { goto CLwLq; } goto uuz2G; sZAoL: CLwLq: goto C9fh2; LTxRb: $c = count($query); goto UUGhB; byChs: goto Dp4PZ; goto I3TpU; C9fh2: fNrkl: goto Nhi8q; JlbJ8: $retval = array(); goto G0sDh; p2z3B: goto cgxjw; goto tcKLs; TgzgZ: $datafld = $this->db->field_data($table); goto LXyD9; jTEES: $currentDb = FALSE; goto P6xWP; G0sDh: $i = 0; goto LTxRb; hJNKt: $retval[$i]->extra = $query[$i]->extra; goto mB0CL; m0tKS: if (!($i < $c)) { goto wGe6B; } goto WQiuX; WI3hl: $retval[$i]->name = $query[$i]->column_name; goto hJNKt; kZ7px: $fields[$table] = $datafld; goto Z9XHr; UUGhB: Dp4PZ: goto m0tKS; WQiuX: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto fNrkl; } goto hCxJ1; uuz2G: if ($query[$i]->extra == "\x61\165\164\157\137\x69\x6e\x63\162\x65\155\145\156\164") { goto Z1MNM; } goto oz9uF; I3TpU: wGe6B: goto ztJFn; vm7bC: if (!(($query = $this->db->query($sql)) === FALSE)) { goto V97xU; } goto jTEES; pW32g: $i++; goto byChs; wXlT6: } goto BqQhI; YsCZO: $edit_columns = []; goto szJ2y; uRIY3: $full_tables = array_unique($full_tables); goto tnCx2; L4f37: $this->db->db_debug = FALSE; goto OgE5s; pVx6X: $data = ["\144\142" => $fields, "\143\162\x65\141\164\x65" => $create_tables, "\155\157\x64\151\146\x79" => $edit_columns, "\x61\144\144" => $add_columns, "\x63\x6f\165\x6e\x74\163" => $counts, "\152\x73\x6f\x6e" => $json, "\x63\165\162\x72\145\x6e\x74" => $currentDb]; goto riUSA; UtCP5: $fields = []; goto kd4Oi; CoP5R: $json = (array) $json; goto GX631; ZP72l: } public function updateDatabase() { goto X0ANO; Ehz7b: $full_tables = array_merge($tbl_baru, $tbl_ada); goto GJ5yA; LRZl0: $tbl_ada = array_keys($fields); goto Ehz7b; agOYv: foreach ($full_tables as $table) { goto LkAXL; ju2v2: HNI0Q: goto H1or4; z64zF: $this->db->query("\101\x4c\124\x45\122\40\x54\x41\102\114\105\40\x20\x60" . $table . "\x60\x20\x45\x4e\107\111\x4e\x45\40\75\x20\x49\156\156\157\x44\102"); goto ju2v2; LkAXL: if ($this->db->table_exists($table)) { goto UFETZ; } goto vk248; mqOgt: foreach ($json[$table] as $tbl => $jtbl) { goto yTeqw; HEJBj: $this->dbforge->add_field($field); goto nT8bL; nT8bL: if (!($jtbl->primary_key == 1)) { goto xZhaO; } goto poUzD; KEcir: xZhaO: goto IsrCc; yTeqw: $field = [$jtbl->name => ["\164\171\160\x65" => $jtbl->type, "\x63\x6f\156\x73\x74\162\x61\x69\156\x74" => $jtbl->max_length, "\156\x75\154\154" => $jtbl->primary_key == 0]]; goto HEJBj; IsrCc: aH3gj: goto x39wX; poUzD: $this->dbforge->add_key($jtbl->name, true); goto KEcir; x39wX: } goto OZHxc; OZHxc: uRIj3: goto XQvb2; vk248: if (!isset($json[$table])) { goto HNI0Q; } goto mqOgt; kcjeb: LyFby: goto nZmg1; nZmg1: mKtWJ: goto HEmiq; RDZZG: TJ9kT: goto kcjeb; hN2Vr: UFETZ: goto HekRb; H1or4: goto LyFby; goto hN2Vr; pbro9: foreach ($json[$table] as $jtbl) { goto MOJSr; nuN1H: $this->dbforge->add_column($table, $field); goto Upmp6; iNsiM: $field = array($jtbl->name => array("\164\171\160\x65" => $jtbl->type, "\143\157\156\x73\x74\162\x61\151\156\164" => $jtbl->max_length, "\156\165\154\x6c" => false)); goto nF5Cz; zhSes: ZvsPo: goto V0tdt; q0q3g: X4RrT: goto C3t7g; vVzk8: B5Wrc: goto MVSjP; nF5Cz: $this->dbforge->add_key($jtbl->name, true); goto nuN1H; V0tdt: $field = array($jtbl->name => array("\x74\x79\160\145" => $jtbl->type, "\143\157\156\163\x74\162\x61\151\x6e\164" => $jtbl->max_length, "\144\145\x66\141\165\x6c\x74" => $jtbl->default)); goto uVfZP; UHqAX: foreach ($fields[$table] as $ftbl) { goto SI1q8; VhJ8X: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto PEsgp; } goto UG1k9; PKlDD: U3GOL: goto mqoIX; TY4j3: $onUpdate = isset($jtbl->extra) ? "\x20" . strtolower($jtbl->extra) : ''; goto csWBV; vyPqO: kqFyH: goto TY4j3; oVBNp: $this->dbforge->add_key($jtbl->name, true); goto eXit8; BC6wR: XdDcu: goto x3XIR; FnxBo: $field = array($jtbl->name => array("\x74\x79\160\x65" => $jtbl->type, "\x63\x6f\x6e\163\164\162\x61\x69\x6e\x74" => $jtbl->max_length, "\x6e\165\154\154" => false)); goto P77w5; UG1k9: if ($jtbl->primary_key == 0) { goto EUhVQ; } goto Ya3qM; nY3ju: $field = array($jtbl->name => array("\164\x79\x70\x65" => $jtbl->type, "\x63\157\x6e\x73\x74\x72\141\x69\156\164" => $jtbl->max_length, "\144\145\x66\x61\x75\x6c\164" => $jtbl->default)); goto tEJfv; tEJfv: goto a_1fc; goto vyPqO; Ya3qM: if ($jtbl->auto_increment == true) { goto BKcNY; } goto FnxBo; dXW1n: if ($jtbl->default == "\103\x55\122\122\105\x4e\124\x5f\124\111\x4d\105\123\x54\101\x4d\x50") { goto kqFyH; } goto nY3ju; v4qUO: BKcNY: goto Wv_10; P77w5: goto BCPqP; goto v4qUO; uMGKB: goto U3GOL; goto bwp_7; Wv_10: $field = array($jtbl->name => array("\164\171\160\x65" => $jtbl->type, "\143\x6f\156\163\x74\162\141\151\156\x74" => $jtbl->max_length, "\156\x75\154\x6c" => false, "\141\165\164\x6f\137\x69\156\x63\162\x65\155\145\x6e\x74" => true)); goto bEfJi; mqoIX: PEsgp: goto BC6wR; DI0eh: $this->dbforge->modify_column($table, $field); goto PKlDD; csWBV: $field = array($jtbl->name . "\40\144\141\x74\x65\x74\151\155\x65\x20\144\x65\146\141\165\x6c\x74\40\143\165\x72\x72\x65\156\164\137\x74\x69\155\x65\163\x74\141\x6d\x70" . $onUpdate); goto io1mN; x3XIR: oI7LN: goto N2c0I; io1mN: a_1fc: goto DI0eh; eXit8: $this->dbforge->modify_column($table, $field); goto uMGKB; bwp_7: EUhVQ: goto dXW1n; SI1q8: if (!($jtbl->name == $ftbl->name)) { goto XdDcu; } goto VhJ8X; bEfJi: BCPqP: goto oVBNp; N2c0I: } goto mPqxG; C3t7g: goto SNnSr; goto lnjCi; lnjCi: kWB6i: goto UHqAX; mbTMZ: SNnSr: goto vVzk8; mPqxG: HAZP8: goto mbTMZ; MOJSr: if ($this->db->field_exists($jtbl->name, $table)) { goto kWB6i; } goto KwFzB; KwFzB: if ($jtbl->primary_key == 0) { goto ZvsPo; } goto iNsiM; uVfZP: $this->dbforge->add_column($table, $field); goto q0q3g; Upmp6: goto X4RrT; goto zhSes; MVSjP: } goto OG6jN; HekRb: if (!isset($json[$table])) { goto TJ9kT; } goto pbro9; OG6jN: FfSq4: goto RDZZG; XQvb2: $this->dbforge->create_table($table, TRUE); goto z64zF; HEmiq: } goto PuO36; za3Gt: $fields = []; goto Ori0e; leoox: $json = json_decode($json); goto AIdZh; GJ5yA: $full_tables = array_unique($full_tables); goto IC25f; PuO36: fjdkj: goto jAPq9; AIdZh: $json = (array) $json; goto unc00; jAPq9: echo true; goto CIJHe; pSb5l: YEXIi: goto NLKpT; IC25f: sort($full_tables); goto agOYv; X0ANO: $tabless = $this->db->list_tables(); goto za3Gt; Ori0e: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); T5q3j: } goto pSb5l; NLKpT: $json = file_get_contents("\x2e\x2f\x61\163\163\x65\x74\163\57\x61\x70\160\57\x64\x62\57\x64\141\x74\141\x62\x61\163\145\56\152\x73\157\156"); goto leoox; unc00: $tbl_baru = array_keys($json); goto LRZl0; CIJHe: } public function checkDb() { goto IWrjl; HsYZn: $json = file_get_contents("\x2e\x2f\x61\x73\x73\x65\164\163\57\x61\160\160\x2f\x64\x62\57\144\x61\x74\x61\x62\141\x73\145\x2e\152\163\x6f\x6e"); goto Ngw44; o0VRO: $add_columns = []; goto n0Q0f; rMcAF: $script_create_table = []; goto o0VRO; A4sP2: $this->output_json($data); goto bdROT; TMlOm: $fields = []; goto aEg50; jDP6s: $create_tables = []; goto rMcAF; DFrm7: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto Yks1P; wLb3u: $script_edit_column = []; goto EycP0; ytpXd: $this->db->db_debug = FALSE; goto ROTS6; aEg50: foreach ($tabless as $table) { goto JCD2F; WCEfe: $retval[$i]->primary = $query[$i]->column_key; goto mbAw_; PzIW0: if (!(($query = $this->db->query($sql)) === FALSE)) { goto UmgoB; } goto WmOIX; e4Qlw: waNLo: goto TK2Xt; WmOIX: $fields = FALSE; goto U9utG; EK97a: $fields[$table] = (object) ["\164\x61\x62\x6c\x65\x5f\156\x61\155\x65" => $table, "\143\157\x6c\165\x6d\x6e\163" => $retval]; goto e4Qlw; JCD2F: $sql = "\123\x45\x4c\x45\x43\x54\x20\x60\143\157\154\165\x6d\156\137\156\141\155\x65\x60\x2c\40\140\x63\157\x6c\165\x6d\x6e\137\164\x79\x70\145\x60\54\x20\x60\143\157\x6c\154\141\164\x69\157\x6e\x5f\x6e\141\155\x65\x60\54\40\140\x64\x61\164\141\x5f\164\171\x70\x65\140\x2c\40\x60\x63\150\x61\162\141\143\x74\x65\162\x5f\x6d\x61\x78\151\155\x75\155\137\154\x65\156\147\164\150\140\54\40\x60\x6e\165\x6d\x65\162\151\x63\137\160\x72\145\143\151\x73\151\157\x6e\x60\54" . "\x20\x60\x63\157\x6c\x75\155\156\137\x64\145\x66\141\165\154\164\x60\x2c\40\x60\x63\x6f\x6c\165\155\x6e\x5f\153\x65\x79\x60\x2c\40\140\x63\157\x6c\165\155\156\x5f\x63\157\x6d\155\145\156\x74\140\54\40\140\145\170\x74\162\141\x60\54\40\x60\x69\x73\x5f\156\x75\154\154\141\x62\154\x65\140\xd\xa\x9\11\x9\106\x52\117\x4d\x20\140\x69\x6e\146\157\x72\x6d\x61\164\151\157\x6e\137\x73\x63\x68\x65\x6d\x61\140\x2e\140\143\157\x6c\165\x6d\156\x73\140\x20\x57\110\105\122\x45\x20\x74\x61\x62\154\x65\x5f\x73\143\150\x65\155\x61\x20\75\x20\x22" . $this->db->database . "\42\40\101\116\104\x20\164\x61\142\154\x65\137\156\x61\155\145\40\x3d\x20\x22" . $table . "\42"; goto PzIW0; McFTO: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto uftD6; zrOW4: $i++; goto zxd54; Deo9Q: $c = count($query); goto zuSxs; VufUT: GOjW0: goto EK97a; nDVCu: $retval = array(); goto RFmoP; mbAw_: eDIv0: goto zrOW4; NZLUT: $retval[$i]->collation = $query[$i]->collation_name; goto McFTO; yYU5p: $retval[$i]->comment = $query[$i]->column_comment; goto e_uPy; dXJZM: $retval[$i]->nullable = $query[$i]->is_nullable; goto WCEfe; uftD6: $retval[$i]->default = $query[$i]->column_default; goto yYU5p; RFmoP: $i = 0; goto Deo9Q; zxd54: goto Lsi8m; goto VufUT; zuSxs: Lsi8m: goto yyw1O; dXl12: $retval[$i]->name = $query[$i]->column_name; goto XWBAI; hQYKW: $query = $query->result_object(); goto nDVCu; XWBAI: $retval[$i]->col_type = $query[$i]->column_type; goto GdTlR; e_uPy: $retval[$i]->extra = $query[$i]->extra; goto dXJZM; GHk6d: $retval[$i] = new stdClass(); goto dXl12; GdTlR: $retval[$i]->type = $query[$i]->data_type; goto NZLUT; yyw1O: if (!($i < $c)) { goto GOjW0; } goto GHk6d; U9utG: UmgoB: goto hQYKW; TK2Xt: } goto h0MTZ; md8SK: $tbl_ada = array_keys($fields); goto DFrm7; ROTS6: $tabless = $this->db->list_tables(); goto TMlOm; RY4MU: $json = (array) $json; goto Ha_Fd; XmA2W: cJ8YE: goto JiTeK; Ngw44: $json = json_decode($json); goto RY4MU; oZKvw: $data = ["\146\151\x65\x6c\144\x73" => $fields, "\x63\x72\145\141\x74\145\x5f\x74\x61\x62\x6c\x65\x73" => $create_tables, "\143\x6f\165\x6e\164\137\x74\x62\x6c" => count($create_tables), "\x61\144\144\137\143\157\x6c\x75\x6d\156\x73\137\164\x6f\x5f\x74\x61\142\154\145" => $add_columns, "\143\x6f\x75\156\x74\137\x63\x6f\154" => count($add_columns), "\x65\144\151\164\137\x63\157\154\165\x6d\x6e\x73" => $edit_columns, "\143\x6f\x75\156\164\137\155\157\144" => count($edit_columns), "\x61\144\144\137\x74\142\x6c" => $this->encryption->encrypt(json_encode($script_create_table)), "\141\144\144\x5f\x63\157\154" => $this->encryption->encrypt(json_encode($script_create_column)), "\155\157\x64\x5f\x63\157\154" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto A4sP2; cUYDs: sort($full_tables); goto jDP6s; Yks1P: $full_tables = array_unique($full_tables); goto cUYDs; JiTeK: $this->db->db_debug = $db_debug; goto oZKvw; EycP0: foreach ($full_tables as $table) { goto pKQmg; hXNbu: if (!(count($modif_column) > 0)) { goto M0uZM; } goto c1WYD; c1WYD: $script_edit_column[$table] = "\101\114\x54\105\x52\x20\x54\101\102\x4c\x45\x20\140" . $table . "\140\40" . implode("\x2c\40", $modif_column) . "\73"; goto N3NPD; nkTcx: sNQUP: goto ZFiI2; w7UzI: $script_create_table[$table] = $script; goto YefNC; TIHeL: foreach ($json[$table]->columns as $jtbl) { goto IOXm2; Gd1EB: E81Tk: goto t3Bx6; bpaaM: $add_columns[$table][] = $jtbl; goto TgzEW; t3Bx6: $length = "\50" . ($jtbl->max_length + 1) . "\51"; goto DWyDQ; cQBkN: goto HEhWw; goto Gd1EB; fIcwe: foreach ($fields[$table]->columns as $ftbl) { goto sOnMy; sMl1U: if (!($jtbl->nullable != $ftbl->nullable)) { goto YpDJF; } goto SkryV; jYjKW: if (!($jtbl->default != null)) { goto CzSZj; } goto Bn9uo; Bn9uo: $jtbl->default = str_replace("\x28\51", '', $jtbl->default); goto adE0i; l_awJ: MjKQA: goto liO_5; Uu7h1: $ftbl->extra = strtoupper($ftbl->extra); goto l_awJ; WSsm3: $jtbl->extra = str_replace("\50\x29", '', $jtbl->extra); goto jfVpW; jfVpW: $jtbl->extra = strtoupper($jtbl->extra); goto vMzs9; kNX3y: kCH39: goto sMl1U; MSQ9w: $ftbl->extra = str_replace("\50\x29", '', $ftbl->extra); goto Uu7h1; hRoRP: YpDJF: goto jYjKW; WbXWY: $default = $jtbl->default == null ? '' : "\40\104\x45\106\101\125\114\124\40" . $jtbl->default; goto Y9LgL; EhoJF: if (!($ftbl->extra != null)) { goto MjKQA; } goto MSQ9w; liO_5: if (!($jtbl->extra != $ftbl->extra)) { goto DKmRb; } goto Voc2N; wMxYn: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto zZj1o; } goto Gv_9n; SkryV: $edit_columns[$table][$jtbl->name]["\x6e\x75\x6c\154\141\142\154\145"] = $jtbl->nullable; goto hRoRP; Kb7hj: if (!($jtbl->col_type != $ftbl->col_type)) { goto kCH39; } goto t8OF6; Y9LgL: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto ZV4SN; PPSrr: $edit_columns[$table][$jtbl->name]["\160\x72\151\x6d\141\162\171"] = $jtbl->primary; goto ljiB0; BYg3T: if (!($jtbl->default != $ftbl->default)) { goto h08at; } goto E4Izu; OfSja: fYM54: goto cASGB; adE0i: $jtbl->default = strtoupper($jtbl->default); goto ZUxdY; Voc2N: $edit_columns[$table][$jtbl->name]["\145\170\x74\162\x61"] = $jtbl->extra; goto TCfIU; E4Izu: $edit_columns[$table][$jtbl->name]["\144\145\146\141\x75\x6c\164"] = $jtbl->default; goto jZtyL; vMzs9: i8pN0: goto EhoJF; Kd8aC: zZj1o: goto AS3E2; TCfIU: DKmRb: goto NYaJ7; t8OF6: $edit_columns[$table][$jtbl->name]["\x63\x6f\x6c\137\x74\x79\160\145"] = $jtbl->col_type; goto kNX3y; ggihR: if (strtolower($jtbl->primary) == "\165\x6e\x69") { goto Upqk9; } goto CmI0V; uVFMB: $ftbl->default = strtoupper($ftbl->default); goto gDizK; sOnMy: if (!($jtbl->name == $ftbl->name)) { goto ev13v; } goto Kb7hj; CZf13: if (!($ftbl->default != null)) { goto gykrq; } goto jNU6U; CG7zk: bvCef: goto Aj8A3; cASGB: if (!($jtbl->primary != $ftbl->primary)) { goto VxZ96; } goto PPSrr; ViTx3: array_push($modif_column, "\x4d\x4f\104\x49\x46\131\40\x60" . $jtbl->name . "\x60\x20" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto Kd8aC; Aj8A3: VxZ96: goto wMxYn; Gv_9n: $nullable = $jtbl->nullable == "\x4e\117" ? "\x20\116\x4f\124\40\116\x55\x4c\114" : ''; goto WbXWY; AS3E2: ev13v: goto dRAQW; OUZ50: array_push($modif_column, "\x41\x44\104\40\120\122\111\x4d\101\x52\x59\40\x4b\105\131\x20\x28\140" . $jtbl->name . "\140\x29"); goto w3dgV; ZUxdY: CzSZj: goto CZf13; uXBpk: $edit_columns[$table][$jtbl->name]["\143\157\155\x6d\x65\x6e\x74"] = $jtbl->comment; goto OfSja; NYaJ7: if (!($jtbl->comment != $ftbl->comment)) { goto fYM54; } goto uXBpk; w3dgV: goto bvCef; goto X3pxe; hjOpQ: array_push($modif_column, "\101\x44\x44\x20\125\116\111\121\x55\105\x20\113\x45\x59\x20\140" . $jtbl->name . "\x60\40\50\140" . $jtbl->name . "\140\51"); goto CG7zk; gDizK: gykrq: goto BYg3T; IrU7h: o3PrV: goto OUZ50; ljiB0: if (strtolower($jtbl->primary) == "\x70\x72\x69") { goto o3PrV; } goto ggihR; CmI0V: goto bvCef; goto IrU7h; X3pxe: Upqk9: goto hjOpQ; jNU6U: $ftbl->default = str_replace("\x28\51", '', $ftbl->default); goto uVFMB; i6U6g: if (!($jtbl->extra != null)) { goto i8pN0; } goto WSsm3; jZtyL: h08at: goto i6U6g; dRAQW: qFTZ1: goto o2O6b; ZV4SN: $comment = $jtbl->comment == '' ? '' : "\40\x43\117\115\115\105\116\x54\40\x27" . $jtbl->comment . "\47"; goto ViTx3; o2O6b: } goto EAlK5; edYxw: $extra .= "\40\x50\122\x49\x4d\x41\x52\x59\x20\113\105\x59"; goto oz1DS; uNkrH: $default = $jtbl->default == null ? '' : "\40\104\105\x46\x41\125\114\124\40" . $jtbl->default; goto BlWPh; JZ5VT: array_push($add_column, "\x41\x44\x44\x20\140" . $jtbl->name . "\x60\40" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto FoQVO; LaUcv: $length = ''; goto MprmD; IOXm2: if ($this->db->field_exists($jtbl->name, $table)) { goto tsTm2; } goto bpaaM; lvzcH: TbXP3: goto Ds9zN; lvygc: qM5qJ: goto j1Cbx; FoQVO: tsTm2: goto fIcwe; L09bg: $nullable = $jtbl->nullable == "\x4e\117" ? "\x20\x4e\117\124\x20\116\125\114\114" : ''; goto uNkrH; EEYTx: goto vMkDd; goto HDQB4; MIdag: $comment = $jtbl->comment == '' ? '' : "\40\x43\117\x4d\x4d\x45\116\124\x20\x27" . $jtbl->comment . "\x27"; goto JZ5VT; qXzWq: $length = "\50" . $jtbl->max_length . "\x29"; goto cQBkN; M6xbX: if ($jtbl->type == "\x69\156\164") { goto E81Tk; } goto qXzWq; MprmD: goto vMkDd; goto lvzcH; HDQB4: NIeJ0: goto M6xbX; DWyDQ: HEhWw: goto cVAVL; oz1DS: lSewc: goto MIdag; cVAVL: vMkDd: goto L09bg; TgzEW: if ($jtbl->max_length == null) { goto TbXP3; } goto OxRjA; Ds9zN: $length = ''; goto EEYTx; EAlK5: QqCUO: goto lvygc; OxRjA: if ($jtbl->type != "\x6c\157\156\x67\x74\x65\170\x74" && $jtbl->type != "\155\145\144\151\165\x6d\164\x65\170\164" && $jtbl->type != "\x74\145\170\x74") { goto NIeJ0; } goto LaUcv; mE32f: if (!(strtoupper($extra) == "\40\x41\125\124\x4f\x5f\111\116\103\122\x45\x4d\105\116\124")) { goto lSewc; } goto edYxw; BlWPh: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto mE32f; j1Cbx: } goto LP0Me; TZGUA: $modif_column = []; goto TIHeL; YefNC: V33A0: goto IwFcS; Ro9qF: $pri = ''; goto bPWgO; bPWgO: foreach ($json[$table]->columns as $column) { goto yIC_V; qlvnY: goto veWvA; goto ZY3zF; vq391: $default = $column->default == null ? '' : "\40\104\105\x46\101\125\114\124\x20" . $column->default; goto j6gGz; dOpHy: if ($column->type == "\151\156\164") { goto yxsqh; } goto ACi2Y; Em2oa: $length = ''; goto grn9k; ACi2Y: $length = "\x28" . $column->max_length . "\51"; goto PVAyL; KTelq: $comment = $column->comment == '' ? '' : "\40\x43\x4f\x4d\115\x45\116\x54\40\x27" . $column->comment . "\47"; goto iO0Ns; XocCx: $length = "\x28" . ($column->max_length + 1) . "\x29"; goto UmQL0; PVAyL: goto BJMcv; goto zqHN6; UmQL0: BJMcv: goto VVAR9; yIC_V: if ($column->max_length == null) { goto qRI6V; } goto R4CxV; I3ap_: $nullable = $column->nullable == "\116\x4f" ? "\x20\x4e\117\124\40\116\125\x4c\x4c" : ''; goto vq391; R4CxV: if ($column->type != "\x6c\x6f\x6e\147\x74\145\x78\164" && $column->type != "\155\145\x64\x69\165\155\x74\145\x78\x74" && $column->type != "\164\145\170\x74") { goto wK_t4; } goto Em2oa; UFJoY: $pri .= $column->primary != '' ? "\120\122\x49\x4d\x41\122\x59\40\x4b\x45\x59\x20\x28\x60" . $column->name . "\140\51" : ''; goto xwIre; Dc6i2: qRI6V: goto jzOKk; iO0Ns: $script .= "\x60" . $column->name . "\x60\x20" . $column->type . $length . $nullable . $default . $extra . $comment . "\x2c\40"; goto UFJoY; grn9k: goto veWvA; goto Dc6i2; ZY3zF: wK_t4: goto dOpHy; jzOKk: $length = ''; goto qlvnY; VVAR9: veWvA: goto I3ap_; xwIre: ri7DY: goto ZHvvK; j6gGz: $extra = $column->extra == '' ? '' : "\40" . strtoupper($column->extra); goto KTelq; zqHN6: yxsqh: goto XocCx; ZHvvK: } goto nkTcx; O472G: $script_create_column[$table] = "\101\x4c\x54\x45\x52\x20\124\x41\x42\114\105\x20\140" . $table . "\x60\40" . implode("\54\40", $add_column) . "\73"; goto NQfjX; xxLnW: $script = "\x43\x52\105\x41\124\x45\x20\124\101\102\x4c\105\40\140" . $table . "\140\x20\50"; goto Ro9qF; ejC5v: if (!isset($json[$table])) { goto a3lox; } goto OyWbg; sEcih: a3lox: goto YjTBI; OyWbg: $add_column = []; goto TZGUA; WOy4J: if (!(count($add_column) > 0)) { goto gZZN1; } goto O472G; ZFiI2: $script .= $pri . "\x29\x20\105\x4e\107\x49\116\x45\x3d\111\x6e\x6e\157\x44\x42\40\x44\x45\x46\101\125\x4c\124\40\103\x48\101\x52\123\x45\124\75\x75\164\x66\x38\155\x62\64\x3b"; goto w7UzI; N3NPD: M0uZM: goto sEcih; IwFcS: MHO1M: goto xQM_x; NoPNH: g17op: goto I61C1; LP0Me: WvJtV: goto WOy4J; I61C1: $create_tables[] = $json[$table]; goto xxLnW; pKQmg: if (!$this->db->table_exists($table)) { goto g17op; } goto ejC5v; NQfjX: gZZN1: goto hXNbu; YjTBI: goto V33A0; goto NoPNH; xQM_x: } goto XmA2W; n0Q0f: $script_create_column = []; goto WviQq; h0MTZ: EFBuF: goto HsYZn; WviQq: $edit_columns = []; goto wLb3u; Ha_Fd: $tbl_seharusnya = array_keys($json); goto md8SK; IWrjl: $db_debug = $this->db->db_debug; goto ytpXd; bdROT: } public function createTable() { goto RN9PE; EXkN0: $queries = ''; goto IpXsm; YaS4m: str_replace("\x25\x32\x42", "\x2b", $scripts); goto Hx_tA; RN9PE: $scripts = $this->input->post("\144\x61\x74\141", true); goto YaS4m; IpXsm: foreach ($scripts as $script) { $queries .= $script; Tl9pj: } goto BRX0O; jkXyA: $this->output_json($data); goto hwoxn; h83X6: $data["\155\145\163\163\141\147\145"] = "\x55\x70\144\141\x74\145\x20\153\157\x6c\157\x6d"; goto jkXyA; ssZr3: $data["\x73\x75\143\x63\x65\163\163"] = $this->runQuery($queries); goto h83X6; Hx_tA: sleep(1); goto NVY5A; NVY5A: $scripts = json_decode($this->encryption->decrypt($scripts)); goto EXkN0; BRX0O: XEXAL: goto ssZr3; hwoxn: } public function createColumn() { goto EZDaL; lLWqo: if (!(strpos("\x60\165\x69\x64\140", $queries) !== false)) { goto JZmFC; } goto s9EMI; d6IbX: $scripts = json_decode($this->encryption->decrypt($scripts)); goto WYXn_; Bf3jt: sleep(1); goto d6IbX; X8y7_: $data["\155\145\163\163\x61\147\145"] = "\x4d\x6f\144\151\146\x79\40\x6b\157\x6c\x6f\x6d"; goto nMmul; WYXn_: $queries = ''; goto otyAy; GtzmU: $data["\x73\165\143\143\145\x73\163"] = $this->runQuery($queries); goto X8y7_; nMmul: $this->output_json($data); goto L5xOb; EZDaL: $scripts = $this->input->post("\144\x61\x74\x61", true); goto qw7aK; qw7aK: str_replace("\45\62\102", "\53", $scripts); goto Bf3jt; o4T7B: pwn30: goto lLWqo; HaRwG: JZmFC: goto GtzmU; s9EMI: $this->updateUID(); goto HaRwG; otyAy: foreach ($scripts as $script) { $queries .= $script; TseF0: } goto o4T7B; L5xOb: } public function editColumn() { goto Q17uT; Auv8r: foreach ($scripts as $script) { $queries .= $script; pxf13: } goto dhp1H; ix2YQ: $queries = ''; goto Auv8r; Tt4ig: $data["\x6d\145\x73\163\141\147\145"] = "\x55\160\144\x61\x74\x65\x20\x73\145\154\145\163\141\x69"; goto JZcos; dhp1H: j3iBg: goto aSjwb; CUJsE: str_replace("\45\x32\x42", "\x2b", $scripts); goto JlJO1; JlJO1: sleep(1); goto ihtyg; Q17uT: $scripts = $this->input->post("\x64\x61\x74\x61", true); goto CUJsE; JZcos: $this->output_json($data); goto YdsP1; aSjwb: $data["\163\165\143\143\x65\163\x73"] = $this->runQuery($queries); goto Tt4ig; ihtyg: $scripts = json_decode($this->encryption->decrypt($scripts)); goto ix2YQ; YdsP1: } function runQuery($script) { goto Sz2ml; VVVZU: $database = $this->db->database; goto sdMru; s0f3u: $hostuser = $this->db->username; goto cSORo; KZxz_: $mysqli->close(); goto oL34U; oL34U: return true; goto eZsCq; cSORo: $hostpass = $this->db->password; goto VVVZU; sdMru: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto GIJTa; GIJTa: if (!mysqli_connect_errno()) { goto e7Y37; } goto Mkgln; Mkgln: return mysqli_connect_errno(); goto wKeZy; wKeZy: e7Y37: goto qJMG0; Sz2ml: $hostname = $this->db->hostname; goto s0f3u; qJMG0: $mysqli->multi_query($script); goto KZxz_; eZsCq: } function updateUID() { goto R3tqs; Ry4mq: $input = array(); goto UGYM9; NuiQi: $siswas = $this->db->get("\155\141\x73\164\x65\162\137\x73\151\x73\x77\141")->result(); goto Ry4mq; VwPaO: fiH7J: goto lfHw5; R3tqs: $this->load->library("\125\x75\x69\x64", "\165\165\151\144"); goto NuiQi; UGYM9: foreach ($siswas as $siswa) { $input[] = array("\151\x64\x5f\163\151\x73\167\x61" => $siswa->id_siswa, "\x75\151\x64" => $this->uuid->v4()); jQLEm: } goto VwPaO; lfHw5: return $this->db->update_batch("\x6d\141\x73\x74\x65\x72\137\x73\151\x73\x77\141", $input, "\151\144\x5f\163\x69\x73\x77\141"); goto wZIbv; wZIbv: } function make_base() { } }
