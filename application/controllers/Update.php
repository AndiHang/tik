<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\x42\101\x53\x45\120\101\x54\110") or exit("\116\157\x20\x64\x69\x72\145\x63\164\x20\x73\143\162\x69\x70\164\x20\141\x63\x63\145\163\163\40\141\x6c\x6c\157\x77\x65\x64"); class Update extends CI_Controller { function __construct() { goto JhGvR; suSw7: $this->load->database(); goto Y8HcK; Y8HcK: $this->load->library("\145\x6e\x63\x72\x79\160\x74\x69\x6f\156"); goto ms3MA; TOU0S: include APPPATH . "\143\157\156\x66\151\147\x2f\x64\x61\164\x61\x62\141\x73\x65\x2e\160\150\x70"; goto Tedou; JhGvR: parent::__construct(); goto TOU0S; Tedou: $this->load->dbforge(); goto suSw7; ms3MA: } public function output_json($data, $encode = true) { goto GqWxi; NyuAc: $this->output->set_content_type("\x61\160\160\154\151\x63\x61\164\x69\157\x6e\57\152\163\x6f\156")->set_output($data); goto TfiJJ; GqWxi: if (!$encode) { goto z7bv_; } goto msHck; jy1i0: z7bv_: goto NyuAc; msHck: $data = json_encode($data); goto jy1i0; TfiJJ: } public function index() { goto We_hF; eC024: $json = (array) $json; goto uivBW; uivBW: $data["\152\x73\157\156"] = $json; goto kFjBR; Dn73b: $json = json_decode($json); goto eC024; kFjBR: $this->load->view("\151\156\x73\x74\x61\154\154\x2f\150\x65\141\x64\145\162", $data); goto rJVkE; rJVkE: $this->load->view("\151\156\x73\164\x61\x6c\154\57\165\x70\x64\x61\x74\x65"); goto JgPgD; JgPgD: $this->load->view("\151\156\x73\164\141\x6c\154\x2f\x66\x6f\157\164\x65\x72"); goto ZJ4hb; We_hF: $json = file_get_contents("\x2e\x2f\x61\x73\x73\x65\x74\163\57\x61\160\x70\x2f\144\x62\57\144\x61\x74\141\142\x61\x73\x65\56\152\163\x6f\x6e"); goto Dn73b; ZJ4hb: } function object_to_array($data) { goto w7CSx; fdZ0G: $result = []; goto HPFSB; w7CSx: if (!(is_array($data) || is_object($data))) { goto BkvFP; } goto fdZ0G; nT5ms: return $result; goto IB0vq; mXQwM: qzTJu: goto nT5ms; zNCVM: return $data; goto zvd2G; IB0vq: BkvFP: goto zNCVM; HPFSB: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; OgSAq: } goto mXQwM; zvd2G: } public function checkDatabase() { goto RdTpJ; ZVNRE: $create_tables = []; goto Hk83I; ivdRh: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto rkarf; d2wZa: $tabless = $this->db->list_tables(); goto rFEQ7; nYzAN: foreach ($tabless as $table) { goto vxsJ4; EYw5B: goto xYmAJ; goto Jm3jg; OyNQM: if (!($query[$i]->extra != '')) { goto Ogg03; } goto SYDVP; L3fID: $datafld[$i]->extra = $query[$i]->extra; goto EYw5B; HWz4Q: $query = $query->result_object(); goto rNfIB; m18OA: $fields[$table] = $datafld; goto TxBIt; w5shs: h5gGo: goto QZFpe; QZFpe: $i++; goto Nj9_G; hmcjQ: $retval[$i] = new stdClass(); goto E884_; Jm3jg: Tp4fP: goto kd9Sn; rNfIB: $retval = array(); goto l4mKe; Nj9_G: goto A75Ue; goto i9DZt; BrkhR: TkKHn: goto hmcjQ; XGQwM: $retval[$i]->extra = $query[$i]->extra; goto w5shs; UEXU1: $sql = "\123\105\114\105\103\x54\40\x60\143\157\154\x75\155\x6e\x5f\156\141\x6d\x65\140\54\x20\x60\156\x75\x6d\145\162\151\143\137\160\x72\145\x63\x69\163\151\x6f\156\140\x2c\x20\140\x65\170\x74\162\x61\x60\x2c\40\x60\x69\163\137\156\165\154\x6c\x61\x62\154\145\x60" . "\x20\106\x52\117\115\x20\140\x69\156\x66\x6f\x72\155\141\164\x69\157\156\137\163\143\150\145\155\141\x60\x2e\140\x63\x6f\x6c\165\x6d\x6e\x73\x60\x20\127\110\x45\122\105\40\x74\x61\142\154\x65\137\x73\143\150\145\155\141\x20\75\x20\x22" . $this->db->database . "\x22\40\x41\x4e\x44\x20\164\x61\x62\x6c\x65\x5f\156\x61\155\145\x20\x3d\40\x22" . $table . "\x22"; goto OeV8P; ReroY: $currentDb = FALSE; goto D5qLt; TxBIt: HmAZl: goto wtSbG; l4mKe: $i = 0; goto HMTN_; sZrcd: xYmAJ: goto xebDo; remNm: $currentDb[$table] = $retval; goto m18OA; kd9Sn: $datafld[$i]->auto_increment = true; goto sZrcd; xebDo: Ogg03: goto BrkhR; eMgjF: if (!($i < $c)) { goto jtSsy; } goto gez2t; SYDVP: if ($query[$i]->extra == "\x61\x75\x74\157\x5f\151\x6e\x63\x72\145\155\x65\x6e\x74") { goto Tp4fP; } goto L3fID; i9DZt: jtSsy: goto remNm; V2ZWy: A75Ue: goto eMgjF; OeV8P: if (!(($query = $this->db->query($sql)) === FALSE)) { goto smHjL; } goto ReroY; gez2t: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto TkKHn; } goto OyNQM; E884_: $retval[$i]->name = $query[$i]->column_name; goto XGQwM; HMTN_: $c = count($query); goto V2ZWy; D5qLt: smHjL: goto HWz4Q; vxsJ4: $datafld = $this->db->field_data($table); goto UEXU1; wtSbG: } goto pQPE7; Hk83I: $add_columns = []; goto tMEvz; Y1MYV: $json = file_get_contents("\56\57\x61\163\x73\x65\x74\x73\x2f\141\x70\160\x2f\144\x62\x2f\x64\141\164\x61\142\x61\163\x65\x2e\152\163\x6f\156"); goto ExPNs; PF7rR: $currentDb = []; goto nYzAN; TgU0j: foreach ($full_tables as $table) { goto oFubj; SmgHQ: fr10l: goto KYy2i; GBk4W: B5DqE: goto XhBZ9; KYy2i: XCtTI: goto SZv11; kfya1: if (!isset($json[$table])) { goto XCtTI; } goto Tz_gO; pDOUp: bnqnr: goto kfya1; SZv11: oYzqn: goto GBk4W; t3BqM: goto oYzqn; goto pDOUp; oFubj: if ($this->db->table_exists($table)) { goto bnqnr; } goto kGbh6; kGbh6: $create_tables[$table] = $json[$table]; goto t3BqM; Tz_gO: foreach ($json[$table] as $jtbl) { goto xs3LJ; HG29A: $add_columns[$table][] = $jtbl; goto wNePS; N4Frz: foreach ($fields[$table] as $ftbl) { goto S2jj9; LxaDu: $edit_columns[$table][] = $jtbl; goto ASTbu; ASTbu: ZKRoA: goto FDiqe; FDiqe: Yrtiv: goto GpkSS; Y7hjU: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto ZKRoA; } goto LxaDu; S2jj9: if (!($jtbl->name == $ftbl->name)) { goto Yrtiv; } goto Y7hjU; GpkSS: cqnTh: goto UX1gK; UX1gK: } goto cCpLw; wNePS: goto Z6GzG; goto H0k_L; cCpLw: d9yPK: goto cRT6v; xs3LJ: if ($this->db->field_exists($jtbl->name, $table)) { goto ryX2W; } goto HG29A; H0k_L: ryX2W: goto N4Frz; cRT6v: Z6GzG: goto IQ3jG; IQ3jG: HVGjE: goto h7_gx; h7_gx: } goto SmgHQ; XhBZ9: } goto s_JfM; EoWyi: sort($full_tables); goto ZVNRE; pQPE7: eHGAA: goto Y1MYV; rFEQ7: $fields = []; goto PF7rR; qnOFA: $this->output_json($data); goto NrQVA; Co2EQ: $tbl_ada = array_keys($fields); goto lmzbt; s_JfM: G1naI: goto ivdRh; TiQuv: $json = (array) $json; goto wuEl5; lmzbt: $full_tables = array_merge($tbl_baru, $tbl_ada); goto Zwq6b; tMEvz: $edit_columns = []; goto TgU0j; Zwq6b: $full_tables = array_unique($full_tables); goto EoWyi; rkarf: $data = ["\x64\142" => $fields, "\x63\x72\x65\141\164\x65" => $create_tables, "\155\x6f\144\x69\x66\171" => $edit_columns, "\x61\x64\144" => $add_columns, "\x63\x6f\x75\x6e\164\163" => $counts, "\152\x73\157\x6e" => $json, "\x63\165\x72\162\145\x6e\164" => $currentDb]; goto qnOFA; RdTpJ: $db_debug = $this->db->db_debug; goto JGU7B; ExPNs: $json = json_decode($json); goto TiQuv; wuEl5: $tbl_baru = array_keys($json); goto Co2EQ; JGU7B: $this->db->db_debug = FALSE; goto d2wZa; NrQVA: } public function updateDatabase() { goto SiQZm; t2QsL: r49Zc: goto JrJwR; Ls5dM: $tbl_ada = array_keys($fields); goto e0jEH; Ow5hy: sort($full_tables); goto WLFZz; rLsyX: $json = file_get_contents("\56\x2f\x61\x73\163\145\164\x73\x2f\141\x70\x70\x2f\144\x62\x2f\x64\141\x74\141\142\141\x73\145\x2e\152\163\x6f\156"); goto qatvU; qatvU: $json = json_decode($json); goto oCyhI; ljci4: $full_tables = array_unique($full_tables); goto Ow5hy; JrJwR: echo true; goto QRqZb; GuINH: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); hzMkX: } goto rhoZW; oCyhI: $json = (array) $json; goto EC6Pc; rhoZW: n5DYt: goto rLsyX; e0jEH: $full_tables = array_merge($tbl_baru, $tbl_ada); goto ljci4; EC6Pc: $tbl_baru = array_keys($json); goto Ls5dM; WLFZz: foreach ($full_tables as $table) { goto FNXvZ; tq6yi: $this->db->query("\x41\x4c\124\105\122\40\x54\101\x42\x4c\105\x20\x20\x60" . $table . "\140\x20\105\116\107\x49\x4e\x45\40\x3d\40\111\156\156\x6f\x44\x42"); goto pfhd3; AAUJo: goto fXS5A; goto fe0fp; h1ngk: qCayT: goto I6VsI; Fz3cS: fBswC: goto Y7bfb; uU2_w: if (!isset($json[$table])) { goto fBswC; } goto xl7w1; VY9lk: $this->dbforge->create_table($table, TRUE); goto tq6yi; eS4gU: if (!isset($json[$table])) { goto oatwj; } goto EjDQC; EjDQC: foreach ($json[$table] as $tbl => $jtbl) { goto Yh_zF; vsE_w: wYyaW: goto OjS0L; nEXOI: $this->dbforge->add_field($field); goto TR5wH; TR5wH: if (!($jtbl->primary_key == 1)) { goto wYyaW; } goto EALns; EALns: $this->dbforge->add_key($jtbl->name, true); goto vsE_w; Yh_zF: $field = [$jtbl->name => ["\164\171\160\145" => $jtbl->type, "\143\x6f\156\163\x74\x72\141\x69\156\164" => $jtbl->max_length, "\156\x75\154\x6c" => $jtbl->primary_key == 0]]; goto nEXOI; OjS0L: e6QF3: goto Y436b; Y436b: } goto O1V1a; FNXvZ: if ($this->db->table_exists($table)) { goto oU_Qz; } goto eS4gU; pfhd3: oatwj: goto AAUJo; Dxi3E: fusw1: goto Fz3cS; fe0fp: oU_Qz: goto uU2_w; Y7bfb: fXS5A: goto h1ngk; xl7w1: foreach ($json[$table] as $jtbl) { goto UNAmX; TYZ2q: haG00: goto jnj_D; RA0iU: goto LIrl7; goto aLZjY; NVvSW: $this->dbforge->add_column($table, $field); goto RA0iU; DezfV: $this->dbforge->add_column($table, $field); goto anqcl; AKB4X: $field = array($jtbl->name => array("\164\x79\160\x65" => $jtbl->type, "\143\157\x6e\163\164\x72\x61\x69\x6e\164" => $jtbl->max_length, "\x6e\165\154\154" => false)); goto oeJTW; FYHJ1: if ($jtbl->primary_key == 0) { goto EFb1Z; } goto AKB4X; AImVO: S_y0p: goto jwpeU; aLZjY: EFb1Z: goto o3OVD; oeJTW: $this->dbforge->add_key($jtbl->name, true); goto NVvSW; anqcl: LIrl7: goto Zgkkr; Zgkkr: goto haG00; goto AImVO; jnj_D: sjMiu: goto ilGdc; jwpeU: foreach ($fields[$table] as $ftbl) { goto YU2PJ; J7TwO: kHghS: goto WJEIb; cVd01: $field = array($jtbl->name => array("\x74\171\160\x65" => $jtbl->type, "\143\157\x6e\163\x74\x72\141\151\x6e\164" => $jtbl->max_length, "\x6e\165\x6c\x6c" => false, "\x61\165\164\x6f\x5f\x69\x6e\x63\x72\x65\x6d\x65\156\x74" => true)); goto qEFgz; gUCRG: $this->dbforge->add_key($jtbl->name, true); goto Xz44x; Xz44x: $this->dbforge->modify_column($table, $field); goto rIo3A; YU2PJ: if (!($jtbl->name == $ftbl->name)) { goto JDcCZ; } goto sfV8_; xCEzj: GL4dK: goto cVd01; Qi0VK: v4tzO: goto j02ZR; poHav: $field = array($jtbl->name => array("\x74\x79\160\145" => $jtbl->type, "\x63\x6f\x6e\x73\164\x72\x61\151\156\164" => $jtbl->max_length, "\x6e\x75\x6c\154" => false)); goto Qu8HU; dAPN9: if ($jtbl->primary_key == 0) { goto kHghS; } goto uJA7b; H3nfN: JDcCZ: goto Qi0VK; Qu8HU: goto lL29S; goto xCEzj; i77sN: RFaQw: goto H3nfN; kn2wh: $field = array($jtbl->name => array("\x74\x79\160\145" => $jtbl->type, "\143\x6f\x6e\163\164\162\141\151\156\x74" => $jtbl->max_length, "\144\145\146\141\x75\x6c\164" => $jtbl->default)); goto zpxi8; E8miK: $onUpdate = isset($jtbl->extra) ? "\x20" . strtolower($jtbl->extra) : ''; goto IY9Yk; rIo3A: goto rxAwa; goto J7TwO; uJA7b: if ($jtbl->auto_increment == true) { goto GL4dK; } goto poHav; zpxi8: goto HuKsm; goto f8cQF; sfV8_: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto RFaQw; } goto dAPN9; ygASr: $this->dbforge->modify_column($table, $field); goto ZaZ0T; trKyO: HuKsm: goto ygASr; f8cQF: jRvaB: goto E8miK; IY9Yk: $field = array($jtbl->name . "\40\144\x61\x74\x65\164\x69\155\145\40\144\145\x66\141\165\x6c\164\40\143\x75\x72\x72\145\x6e\x74\137\164\x69\x6d\x65\163\x74\141\x6d\x70" . $onUpdate); goto trKyO; qEFgz: lL29S: goto gUCRG; ZaZ0T: rxAwa: goto i77sN; WJEIb: if ($jtbl->default == "\103\125\122\x52\x45\x4e\124\x5f\x54\111\x4d\105\x53\x54\101\115\120") { goto jRvaB; } goto kn2wh; j02ZR: } goto EuVAQ; o3OVD: $field = array($jtbl->name => array("\164\x79\160\145" => $jtbl->type, "\x63\x6f\156\163\164\162\x61\151\156\164" => $jtbl->max_length, "\x64\x65\x66\141\165\x6c\x74" => $jtbl->default)); goto DezfV; EuVAQ: uxzSW: goto TYZ2q; UNAmX: if ($this->db->field_exists($jtbl->name, $table)) { goto S_y0p; } goto FYHJ1; ilGdc: } goto Dxi3E; O1V1a: qd77o: goto VY9lk; I6VsI: } goto t2QsL; N2z2V: $fields = []; goto GuINH; SiQZm: $tabless = $this->db->list_tables(); goto N2z2V; QRqZb: } public function checkDb() { goto NVHXC; EuRGf: $edit_columns = []; goto GyyH2; YTSKm: foreach ($tabless as $table) { goto OeWRZ; OeWRZ: $sql = "\x53\x45\114\105\103\x54\x20\140\143\157\x6c\165\155\x6e\137\x6e\x61\x6d\145\x60\x2c\40\x60\x63\x6f\x6c\165\x6d\156\137\x74\x79\160\x65\140\x2c\x20\140\x63\157\154\x6c\x61\x74\151\x6f\x6e\137\156\141\x6d\x65\140\x2c\40\140\x64\x61\x74\x61\137\x74\171\x70\145\x60\x2c\40\x60\143\x68\141\162\141\x63\164\x65\162\x5f\155\x61\x78\151\155\165\155\137\x6c\145\x6e\x67\x74\x68\x60\x2c\40\x60\156\165\155\x65\x72\151\143\137\160\x72\145\143\151\163\x69\157\156\x60\x2c" . "\40\140\x63\157\x6c\165\155\156\137\144\145\x66\141\165\x6c\x74\140\x2c\40\x60\x63\x6f\x6c\165\155\x6e\x5f\153\x65\171\x60\x2c\x20\x60\143\x6f\154\x75\155\x6e\x5f\x63\x6f\155\x6d\145\156\164\x60\x2c\x20\140\145\x78\164\162\x61\140\x2c\x20\x60\x69\163\137\156\x75\x6c\x6c\x61\142\154\145\x60\15\xa\11\x9\x9\106\122\x4f\x4d\x20\x60\x69\156\146\157\x72\x6d\x61\x74\x69\157\156\137\x73\143\x68\145\x6d\x61\140\56\140\x63\x6f\154\x75\x6d\x6e\x73\x60\40\x57\x48\105\122\x45\40\164\x61\142\154\x65\137\163\143\x68\145\155\x61\40\75\x20\42" . $this->db->database . "\x22\x20\101\x4e\104\40\x74\141\x62\154\x65\137\156\x61\x6d\145\x20\x3d\x20\x22" . $table . "\x22"; goto ta2GI; nqUXZ: goto Q8ntw; goto PZaU2; PZaU2: VsrZ9: goto gv3pX; J9Pv_: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto HOolR; jKoP1: $i = 0; goto J975k; MAnEX: if (!($i < $c)) { goto VsrZ9; } goto HackE; FhoMg: JjIF6: goto giXzZ; p1cJR: $retval[$i]->collation = $query[$i]->collation_name; goto J9Pv_; GdGan: $retval[$i]->extra = $query[$i]->extra; goto s8x5l; HackE: $retval[$i] = new stdClass(); goto B8laW; HOolR: $retval[$i]->default = $query[$i]->column_default; goto eUxrU; ycxaA: Grzb8: goto wsk7o; J975k: $c = count($query); goto eoj3J; B8laW: $retval[$i]->name = $query[$i]->column_name; goto R2lvs; s8x5l: $retval[$i]->nullable = $query[$i]->is_nullable; goto Wa8dQ; ta2GI: if (!(($query = $this->db->query($sql)) === FALSE)) { goto JjIF6; } goto X7jbZ; Wa8dQ: $retval[$i]->primary = $query[$i]->column_key; goto ycxaA; p_Dd2: oUBkQ: goto F_YfS; eGIwz: $retval = array(); goto jKoP1; eoj3J: Q8ntw: goto MAnEX; X7jbZ: $fields = FALSE; goto FhoMg; gv3pX: $fields[$table] = (object) ["\164\141\142\x6c\x65\137\156\x61\x6d\145" => $table, "\143\x6f\x6c\165\x6d\156\163" => $retval]; goto p_Dd2; R2lvs: $retval[$i]->col_type = $query[$i]->column_type; goto NtTKe; wsk7o: $i++; goto nqUXZ; giXzZ: $query = $query->result_object(); goto eGIwz; NtTKe: $retval[$i]->type = $query[$i]->data_type; goto p1cJR; eUxrU: $retval[$i]->comment = $query[$i]->column_comment; goto GdGan; F_YfS: } goto jLjnW; qY4jy: $json = (array) $json; goto j2cNt; fADsI: $script_create_table = []; goto lDgTh; YVLI4: sort($full_tables); goto Vdgv5; idzGG: $this->db->db_debug = $db_debug; goto P2TyH; lDgTh: $add_columns = []; goto Gb9g6; fDpbL: $tabless = $this->db->list_tables(); goto zqqUp; iug60: $this->db->db_debug = FALSE; goto fDpbL; nAXSO: $tbl_ada = array_keys($fields); goto aSeK2; P2TyH: $data = ["\146\x69\145\x6c\x64\163" => $fields, "\x63\162\x65\141\x74\x65\137\164\141\142\x6c\x65\x73" => $create_tables, "\x63\157\165\x6e\164\x5f\x74\x62\x6c" => count($create_tables), "\x61\x64\144\137\143\157\x6c\165\x6d\x6e\163\x5f\164\157\x5f\x74\x61\x62\x6c\145" => $add_columns, "\143\157\165\x6e\x74\137\x63\x6f\154" => count($add_columns), "\x65\x64\x69\x74\x5f\143\157\x6c\165\155\156\x73" => $edit_columns, "\143\157\x75\156\164\x5f\155\x6f\144" => count($edit_columns), "\x61\x64\144\x5f\164\142\x6c" => $this->encryption->encrypt(json_encode($script_create_table)), "\x61\144\144\x5f\x63\157\x6c" => $this->encryption->encrypt(json_encode($script_create_column)), "\155\x6f\144\x5f\x63\157\154" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto xGxBC; Vdgv5: $create_tables = []; goto fADsI; x51lC: $json = file_get_contents("\56\57\x61\x73\x73\145\x74\163\x2f\141\x70\x70\57\x64\x62\57\x64\x61\164\141\142\x61\163\x65\56\152\163\x6f\156"); goto EwPXJ; aSeK2: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto Jzh9E; xGxBC: $this->output_json($data); goto z99CI; EwPXJ: $json = json_decode($json); goto qY4jy; XhH4G: foreach ($full_tables as $table) { goto qMzX0; TyEjE: V5LB4: goto LL6Dk; XOcsM: $pri = ''; goto D0tbj; E_rgU: YvVw1: goto KGFYR; DnHup: tkM1j: goto TyEjE; RClhN: if (!(count($modif_column) > 0)) { goto tkM1j; } goto Q10vS; dEdmq: if (!(count($add_column) > 0)) { goto Eg281; } goto WdwAP; VIxuL: if (!isset($json[$table])) { goto V5LB4; } goto btcSm; eM0dK: $script .= $pri . "\51\x20\105\116\107\111\x4e\105\75\x49\x6e\x6e\157\104\102\40\104\105\106\101\125\114\x54\40\x43\x48\101\122\x53\105\124\x3d\x75\164\x66\x38\155\x62\x34\73"; goto GSPQf; AfH9g: VDXRB: goto E_rgU; WdwAP: $script_create_column[$table] = "\x41\114\x54\x45\122\40\124\101\x42\x4c\105\40\x60" . $table . "\140\40" . implode("\x2c\x20", $add_column) . "\x3b"; goto xzaNy; s125V: $create_tables[] = $json[$table]; goto XCWSt; GSPQf: $script_create_table[$table] = $script; goto AfH9g; qMzX0: if (!$this->db->table_exists($table)) { goto vtzSP; } goto VIxuL; LL6Dk: goto VDXRB; goto Q_0ZV; Q10vS: $script_edit_column[$table] = "\101\114\124\x45\122\40\x54\101\x42\114\105\40\140" . $table . "\x60\40" . implode("\x2c\x20", $modif_column) . "\x3b"; goto DnHup; ud162: foreach ($json[$table]->columns as $jtbl) { goto QTFQG; YWewS: $nullable = $jtbl->nullable == "\116\117" ? "\40\x4e\x4f\124\x20\x4e\125\114\x4c" : ''; goto j8nfq; a3Q8Z: $length = ''; goto DzSK0; DzSK0: goto JVQc7; goto LMjb8; mjFvp: $length = "\x28" . ($jtbl->max_length + 1) . "\x29"; goto myctx; aBb80: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto aXUmm; rFci2: $comment = $jtbl->comment == '' ? '' : "\x20\x43\117\115\x4d\x45\116\x54\x20\x27" . $jtbl->comment . "\x27"; goto DTgSF; j8nfq: $default = $jtbl->default == null ? '' : "\x20\104\x45\x46\101\125\114\x54\x20" . $jtbl->default; goto aBb80; wP9Fv: goto uPfRK; goto vhXF6; E9ynV: foreach ($fields[$table]->columns as $ftbl) { goto BIRwi; qXdxT: $edit_columns[$table][$jtbl->name]["\143\x6f\154\137\164\171\x70\x65"] = $jtbl->col_type; goto JIVpe; fsjRq: if (strtolower($jtbl->primary) == "\x70\x72\151") { goto ChWq7; } goto m05Qd; QogcW: $edit_columns[$table][$jtbl->name]["\144\x65\146\x61\165\x6c\x74"] = $jtbl->default; goto ZzRAE; Lj1LZ: ChWq7: goto mppZV; FGes1: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto BLoz2; UfxdB: oSFvn: goto N87zZ; lVZxw: if (!($jtbl->col_type != $ftbl->col_type)) { goto FStlg; } goto qXdxT; Csa88: YwxH3: goto rjZxn; N87zZ: if (!($jtbl->comment != $ftbl->comment)) { goto KQKsF; } goto MAjFR; llP3Z: goto nZe5H; goto Lj1LZ; YLUXD: mq_oi: goto HFXZp; JNl9R: if (!($jtbl->primary != $ftbl->primary)) { goto mq_oi; } goto WpQ0x; mppZV: array_push($modif_column, "\101\104\104\40\120\x52\111\115\x41\122\x59\40\113\x45\x59\40\x28\x60" . $jtbl->name . "\x60\x29"); goto Q43Wq; ODF2c: $nullable = $jtbl->nullable == "\x4e\117" ? "\x20\x4e\x4f\x54\x20\x4e\125\x4c\x4c" : ''; goto TS0RN; IOWDN: $ftbl->default = str_replace("\x28\51", '', $ftbl->default); goto wTvH0; wTvH0: $ftbl->default = strtoupper($ftbl->default); goto p7Eqm; BLoz2: $comment = $jtbl->comment == '' ? '' : "\x20\103\x4f\115\x4d\105\116\x54\x20\47" . $jtbl->comment . "\47"; goto Ng6uh; J21hY: $jtbl->extra = str_replace("\x28\x29", '', $jtbl->extra); goto Qre5M; MAjFR: $edit_columns[$table][$jtbl->name]["\x63\x6f\x6d\x6d\145\156\164"] = $jtbl->comment; goto Z4Bsw; m05Qd: if (strtolower($jtbl->primary) == "\x75\x6e\151") { goto YwxH3; } goto llP3Z; wtFS1: $jtbl->default = str_replace("\x28\x29", '', $jtbl->default); goto j6GWt; uoeq0: $ftbl->extra = strtoupper($ftbl->extra); goto hkx8g; hkx8g: WeCIi: goto lgjc8; TS0RN: $default = $jtbl->default == null ? '' : "\40\x44\105\x46\x41\125\x4c\x54\x20" . $jtbl->default; goto FGes1; WksHN: $ftbl->extra = str_replace("\50\51", '', $ftbl->extra); goto uoeq0; rjZxn: array_push($modif_column, "\x41\x44\104\40\x55\116\111\121\x55\105\x20\113\x45\131\40\140" . $jtbl->name . "\140\x20\50\140" . $jtbl->name . "\x60\51"); goto t7gzZ; JIVpe: FStlg: goto uzXRd; lP80R: if (!($jtbl->default != $ftbl->default)) { goto mT4Rq; } goto QogcW; j6GWt: $jtbl->default = strtoupper($jtbl->default); goto J9FM3; uzXRd: if (!($jtbl->nullable != $ftbl->nullable)) { goto ZnRJM; } goto gC0IM; y6aJW: if (!($jtbl->extra != null)) { goto mLVS7; } goto J21hY; Ng6uh: array_push($modif_column, "\x4d\x4f\104\111\106\x59\x20\x60" . $jtbl->name . "\140\40" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto tRuI1; lGji3: if (!($ftbl->default != null)) { goto bOxqw; } goto IOWDN; CpW0Z: mLVS7: goto BJTAp; Qre5M: $jtbl->extra = strtoupper($jtbl->extra); goto CpW0Z; BIRwi: if (!($jtbl->name == $ftbl->name)) { goto vzXT0; } goto lVZxw; HFXZp: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto cuGAw; } goto ODF2c; p7Eqm: bOxqw: goto lP80R; lgjc8: if (!($jtbl->extra != $ftbl->extra)) { goto oSFvn; } goto eKmNC; a91Nj: vzXT0: goto j6MD2; tRuI1: cuGAw: goto a91Nj; fPKE0: ZnRJM: goto Wmcn9; Wmcn9: if (!($jtbl->default != null)) { goto Bksnu; } goto wtFS1; gC0IM: $edit_columns[$table][$jtbl->name]["\x6e\165\x6c\x6c\141\142\x6c\145"] = $jtbl->nullable; goto fPKE0; ZzRAE: mT4Rq: goto y6aJW; Z4Bsw: KQKsF: goto JNl9R; WpQ0x: $edit_columns[$table][$jtbl->name]["\160\162\151\x6d\x61\x72\171"] = $jtbl->primary; goto fsjRq; t7gzZ: nZe5H: goto YLUXD; j6MD2: aEyup: goto dbd5L; BJTAp: if (!($ftbl->extra != null)) { goto WeCIi; } goto WksHN; Q43Wq: goto nZe5H; goto Csa88; J9FM3: Bksnu: goto lGji3; eKmNC: $edit_columns[$table][$jtbl->name]["\145\170\164\x72\141"] = $jtbl->extra; goto UfxdB; dbd5L: } goto ILC1c; QsMXG: $length = ''; goto RXjFv; E1AQQ: GOGVc: goto a3Q8Z; yMAnF: if ($jtbl->type == "\151\156\x74") { goto ZUnFz; } goto dyf0J; MACw2: $extra .= "\x20\120\x52\x49\x4d\x41\x52\x59\x20\113\105\131"; goto l6HZz; Ai2Zm: QrbRs: goto E9ynV; Euy_Z: G1UqX: goto CDHBC; RXjFv: goto JVQc7; goto E1AQQ; o8asx: $add_columns[$table][] = $jtbl; goto jIjUb; vhXF6: ZUnFz: goto mjFvp; QTFQG: if ($this->db->field_exists($jtbl->name, $table)) { goto QrbRs; } goto o8asx; dyf0J: $length = "\x28" . $jtbl->max_length . "\51"; goto wP9Fv; LMjb8: wb39o: goto yMAnF; sx9tx: JVQc7: goto YWewS; aXUmm: if (!(strtoupper($extra) == "\40\x41\125\124\117\x5f\111\116\103\122\105\x4d\x45\x4e\124")) { goto jB0ub; } goto MACw2; myctx: uPfRK: goto sx9tx; l6HZz: jB0ub: goto rFci2; jIjUb: if ($jtbl->max_length == null) { goto GOGVc; } goto vev0Q; ILC1c: DM5uE: goto Euy_Z; DTgSF: array_push($add_column, "\x41\x44\104\40\140" . $jtbl->name . "\140\x20" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto Ai2Zm; vev0Q: if ($jtbl->type != "\154\x6f\x6e\x67\164\x65\x78\164" && $jtbl->type != "\x6d\x65\x64\x69\165\155\164\x65\170\164" && $jtbl->type != "\x74\x65\x78\x74") { goto wb39o; } goto QsMXG; CDHBC: } goto oJ528; xCRel: WUUpR: goto eM0dK; oJ528: eSr5k: goto dEdmq; gShFM: $modif_column = []; goto ud162; Q_0ZV: vtzSP: goto s125V; btcSm: $add_column = []; goto gShFM; D0tbj: foreach ($json[$table]->columns as $column) { goto gnah9; Ytxd1: Cx_bs: goto wnrLF; Mz4zw: $nullable = $column->nullable == "\x4e\x4f" ? "\40\x4e\x4f\124\40\x4e\125\x4c\x4c" : ''; goto gc8yf; gnah9: if ($column->max_length == null) { goto Cx_bs; } goto qZ3WH; MRyAN: $length = ''; goto aC8Q_; QtccK: $comment = $column->comment == '' ? '' : "\x20\x43\117\115\x4d\x45\x4e\x54\40\47" . $column->comment . "\x27"; goto VMMfy; PFKDy: goto b2NBP; goto PqHin; PqHin: exIoZ: goto io1pd; VMMfy: $script .= "\x60" . $column->name . "\140\40" . $column->type . $length . $nullable . $default . $extra . $comment . "\x2c\40"; goto CXO9y; SLl7o: goto SJHPw; goto rUCLa; qZ3WH: if ($column->type != "\154\157\x6e\147\164\145\170\x74" && $column->type != "\x6d\x65\x64\x69\165\x6d\164\145\170\x74" && $column->type != "\164\145\x78\164") { goto DD3Sm; } goto MRyAN; L3dG0: $length = "\x28" . $column->max_length . "\x29"; goto PFKDy; uOrS5: $extra = $column->extra == '' ? '' : "\40" . strtoupper($column->extra); goto QtccK; A4Nfk: SJHPw: goto Mz4zw; CXO9y: $pri .= $column->primary != '' ? "\120\122\111\x4d\101\122\x59\40\113\x45\131\x20\50\140" . $column->name . "\x60\51" : ''; goto AJ_F4; io1pd: $length = "\x28" . ($column->max_length + 1) . "\x29"; goto j0CYo; gc8yf: $default = $column->default == null ? '' : "\40\104\105\106\x41\x55\114\124\40" . $column->default; goto uOrS5; j0CYo: b2NBP: goto A4Nfk; AJ_F4: qfOeC: goto zoPGf; uOvfq: if ($column->type == "\x69\156\x74") { goto exIoZ; } goto L3dG0; aC8Q_: goto SJHPw; goto Ytxd1; rUCLa: DD3Sm: goto uOvfq; wnrLF: $length = ''; goto SLl7o; zoPGf: } goto xCRel; XCWSt: $script = "\x43\122\x45\101\x54\105\x20\x54\101\x42\114\x45\40\x60" . $table . "\140\40\50"; goto XOcsM; xzaNy: Eg281: goto RClhN; KGFYR: } goto TUCpy; NVHXC: $db_debug = $this->db->db_debug; goto iug60; jLjnW: vOdjP: goto x51lC; j2cNt: $tbl_seharusnya = array_keys($json); goto nAXSO; Jzh9E: $full_tables = array_unique($full_tables); goto YVLI4; TUCpy: S6VA9: goto idzGG; zqqUp: $fields = []; goto YTSKm; Gb9g6: $script_create_column = []; goto EuRGf; GyyH2: $script_edit_column = []; goto XhH4G; z99CI: } public function createTable() { goto Ikw41; A1C0j: foreach ($scripts as $script) { $queries .= $script; MQS3s: } goto XqFmc; XqFmc: pOf1T: goto qa8VR; pc6Or: str_replace("\45\x32\x42", "\x2b", $scripts); goto T8J0S; qa8VR: $data["\163\x75\x63\143\x65\163\x73"] = $this->runQuery($queries); goto k8EfO; k8EfO: $data["\155\145\x73\163\141\147\145"] = "\125\160\x64\141\x74\x65\x20\153\x6f\x6c\157\x6d"; goto TPY3K; TPY3K: $this->output_json($data); goto lxPqL; jsheu: $queries = ''; goto A1C0j; v4ImR: $scripts = json_decode($this->encryption->decrypt($scripts)); goto jsheu; T8J0S: sleep(1); goto v4ImR; Ikw41: $scripts = $this->input->post("\144\x61\x74\141", true); goto pc6Or; lxPqL: } public function createColumn() { goto gZsEw; RIzXq: N_pHC: goto iyoRK; gZsEw: $scripts = $this->input->post("\x64\141\164\x61", true); goto QK21s; xI3Aa: $this->output_json($data); goto z7YHP; pn1S0: sleep(1); goto o_NnL; iUw5j: $data["\163\165\x63\x63\145\x73\163"] = $this->runQuery($queries); goto LFfvI; QK21s: str_replace("\x25\x32\x42", "\53", $scripts); goto pn1S0; FCVVv: foreach ($scripts as $script) { $queries .= $script; rUq_k: } goto RIzXq; o_NnL: $scripts = json_decode($this->encryption->decrypt($scripts)); goto J06no; J06no: $queries = ''; goto FCVVv; iyoRK: if (!(strpos("\x60\x75\x69\144\140", $queries) !== false)) { goto rU3Wg; } goto L8thB; L8thB: $this->updateUID(); goto GlXSq; LFfvI: $data["\155\x65\x73\x73\x61\147\x65"] = "\x4d\x6f\x64\x69\x66\x79\x20\153\x6f\154\x6f\155"; goto xI3Aa; GlXSq: rU3Wg: goto iUw5j; z7YHP: } public function editColumn() { goto VCiYF; VCiYF: $scripts = $this->input->post("\144\141\164\141", true); goto Epy2j; Epy2j: str_replace("\45\x32\x42", "\53", $scripts); goto K35YF; u6XTA: $scripts = json_decode($this->encryption->decrypt($scripts)); goto iLmO7; WHb9b: oVdra: goto snTCo; CUSyJ: foreach ($scripts as $script) { $queries .= $script; P7piL: } goto WHb9b; iLmO7: $queries = ''; goto CUSyJ; K35YF: sleep(1); goto u6XTA; pPxA6: $this->output_json($data); goto vy_Q9; snTCo: $data["\163\165\143\x63\x65\163\x73"] = $this->runQuery($queries); goto N3Y1J; N3Y1J: $data["\x6d\145\163\x73\x61\147\145"] = "\x55\x70\x64\141\164\145\x20\163\145\154\145\x73\141\151"; goto pPxA6; vy_Q9: } function runQuery($script) { goto boq5E; n_P0j: return true; goto e1zWU; boq5E: $hostname = $this->db->hostname; goto X7n6f; KxiR9: $hostpass = $this->db->password; goto gybuI; B8Zvh: if (!mysqli_connect_errno()) { goto wbSsd; } goto xhnJM; nLZ9H: $mysqli->close(); goto n_P0j; gybuI: $database = $this->db->database; goto KiBER; X7n6f: $hostuser = $this->db->username; goto KxiR9; KiBER: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto B8Zvh; GWpyb: $mysqli->multi_query($script); goto nLZ9H; KU1y0: wbSsd: goto GWpyb; xhnJM: return mysqli_connect_errno(); goto KU1y0; e1zWU: } function updateUID() { goto Lrf1J; Lrf1J: $this->load->library("\125\x75\x69\144", "\165\x75\151\x64"); goto Ey6hZ; Pi8Zw: return $this->db->update_batch("\155\x61\163\x74\145\x72\x5f\163\151\163\x77\x61", $input, "\151\x64\x5f\163\x69\163\167\x61"); goto iUPHz; vCTpq: foreach ($siswas as $siswa) { $input[] = array("\151\x64\137\x73\x69\163\x77\x61" => $siswa->id_siswa, "\165\151\144" => $this->uuid->v4()); dvy_4: } goto E_jyy; vhjSB: $input = array(); goto vCTpq; E_jyy: PlVji: goto Pi8Zw; Ey6hZ: $siswas = $this->db->get("\x6d\141\x73\x74\145\x72\x5f\163\x69\163\167\141")->result(); goto vhjSB; iUPHz: } function make_base() { } }
