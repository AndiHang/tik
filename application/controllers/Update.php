<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\x42\101\123\x45\120\x41\124\110") or exit("\116\157\x20\x64\x69\162\145\x63\x74\40\x73\143\x72\151\x70\x74\x20\141\143\x63\145\163\x73\40\x61\x6c\154\157\x77\145\144"); class Update extends CI_Controller { function __construct() { goto i8DHU; i8DHU: parent::__construct(); goto THvBL; FTboq: $this->load->database(); goto FLieG; THvBL: include APPPATH . "\x63\x6f\156\x66\x69\x67\x2f\x64\141\164\x61\x62\x61\163\x65\x2e\x70\150\160"; goto oZ34a; oZ34a: $this->load->dbforge(); goto FTboq; FLieG: $this->load->library("\145\x6e\x63\162\171\160\164\151\x6f\156"); goto zDZKs; zDZKs: } public function output_json($data, $encode = true) { goto zRqNF; MeJwd: s60zP: goto X0MRe; X0MRe: $this->output->set_content_type("\141\x70\x70\154\151\x63\141\164\151\157\156\x2f\152\x73\157\156")->set_output($data); goto wPJAL; zRqNF: if (!$encode) { goto s60zP; } goto mSydj; mSydj: $data = json_encode($data); goto MeJwd; wPJAL: } public function index() { goto ON5id; nyjPf: $json = json_decode($json); goto X7REg; EW1CM: $data["\x6a\x73\157\156"] = $json; goto lJYwx; c2Ea4: $this->load->view("\x69\156\163\164\x61\154\x6c\x2f\x75\x70\x64\x61\x74\145"); goto sQSdA; X7REg: $json = (array) $json; goto EW1CM; lJYwx: $this->load->view("\x69\x6e\x73\x74\x61\154\154\57\150\x65\x61\x64\145\x72", $data); goto c2Ea4; ON5id: $json = file_get_contents("\56\57\141\x73\163\145\x74\x73\57\141\x70\x70\57\144\142\57\x64\141\x74\141\x62\x61\163\x65\x2e\152\x73\x6f\x6e"); goto nyjPf; sQSdA: $this->load->view("\151\156\163\x74\x61\x6c\x6c\57\146\157\x6f\x74\x65\162"); goto e52ej; e52ej: } function object_to_array($data) { goto VhJx9; NicWZ: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; DrzzC: } goto lGLsS; lGLsS: G_UYZ: goto YBsa4; GMJrd: $result = []; goto NicWZ; VSaaj: aODeD: goto s9cE4; VhJx9: if (!(is_array($data) || is_object($data))) { goto aODeD; } goto GMJrd; s9cE4: return $data; goto ZZVp6; YBsa4: return $result; goto VSaaj; ZZVp6: } public function checkDatabase() { goto jbemB; E5Mmo: foreach ($tabless as $table) { goto cIViS; PmriN: $sql = "\123\105\x4c\x45\103\124\40\140\143\x6f\154\x75\155\156\137\156\141\x6d\145\x60\x2c\40\x60\156\165\155\x65\x72\x69\143\x5f\160\x72\x65\x63\x69\163\151\x6f\x6e\140\54\x20\x60\x65\170\x74\162\141\x60\54\40\140\x69\163\137\x6e\165\x6c\154\x61\x62\x6c\x65\140" . "\x20\x46\122\x4f\x4d\40\x60\151\x6e\x66\x6f\162\155\x61\x74\151\157\x6e\x5f\x73\143\150\x65\155\x61\x60\x2e\140\143\x6f\154\x75\x6d\x6e\x73\140\40\127\110\x45\122\105\40\x74\x61\142\154\145\137\163\x63\150\x65\155\x61\40\75\x20\42" . $this->db->database . "\x22\x20\101\x4e\104\x20\x74\x61\142\x6c\x65\x5f\156\141\x6d\x65\40\75\x20\42" . $table . "\x22"; goto BvMhg; LPaEQ: sAVfI: goto HqwGg; CWuOa: gje9V: goto BdQrF; qyW7f: $retval[$i] = new stdClass(); goto i2ud3; plk5h: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto AcM7M; } goto a13aQ; SlJfg: $c = count($query); goto tX3aB; SamRH: $datafld[$i]->extra = $query[$i]->extra; goto iAQud; HqwGg: t3PwN: goto yuyIG; ZzE3f: goto P75eA; goto CWuOa; BvMhg: if (!(($query = $this->db->query($sql)) === FALSE)) { goto ZN348; } goto T88TG; q0s1p: if (!($i < $c)) { goto gje9V; } goto plk5h; i2ud3: $retval[$i]->name = $query[$i]->column_name; goto ZtW6x; jEBCh: $fields[$table] = $datafld; goto rWJro; rWJro: Kxqdj: goto XmETK; OsSXc: $query = $query->result_object(); goto pXFn_; NLV5G: ZN348: goto OsSXc; tX3aB: P75eA: goto q0s1p; xNt4V: $i = 0; goto SlJfg; BdQrF: $currentDb[$table] = $retval; goto jEBCh; yuyIG: AcM7M: goto qyW7f; LA1PB: $i++; goto ZzE3f; T88TG: $currentDb = FALSE; goto NLV5G; a13aQ: if (!($query[$i]->extra != '')) { goto t3PwN; } goto Pyc6W; Pyc6W: if ($query[$i]->extra == "\141\165\164\157\x5f\151\x6e\143\162\145\155\145\156\x74") { goto bdZnD; } goto SamRH; qv8WE: H0auv: goto LA1PB; iAQud: goto sAVfI; goto g2vM8; hGAmY: $datafld[$i]->auto_increment = true; goto LPaEQ; ZtW6x: $retval[$i]->extra = $query[$i]->extra; goto qv8WE; pXFn_: $retval = array(); goto xNt4V; cIViS: $datafld = $this->db->field_data($table); goto PmriN; g2vM8: bdZnD: goto hGAmY; XmETK: } goto eEDuj; IdemQ: foreach ($full_tables as $table) { goto QKGWJ; u2FJ2: FMK0L: goto vFOqc; KLXKv: foreach ($json[$table] as $jtbl) { goto yUHEF; QrokD: oYFDS: goto aiw0h; qjGHC: BLTyD: goto AGVk1; wwIFU: $add_columns[$table][] = $jtbl; goto BlhIr; BlhIr: goto PF0D0; goto qjGHC; aiw0h: PF0D0: goto GJIXS; GJIXS: mMSMO: goto HV403; AGVk1: foreach ($fields[$table] as $ftbl) { goto Vfg2L; Vfg2L: if (!($jtbl->name == $ftbl->name)) { goto Sq0C7; } goto dzYi6; LCDr3: $edit_columns[$table][] = $jtbl; goto lx2Sc; CTbIF: kBA1w: goto fu0L3; KRziq: Sq0C7: goto CTbIF; lx2Sc: ZQqO2: goto KRziq; dzYi6: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto ZQqO2; } goto LCDr3; fu0L3: } goto QrokD; yUHEF: if ($this->db->field_exists($jtbl->name, $table)) { goto BLTyD; } goto wwIFU; HV403: } goto u2FJ2; jXTHP: goto c1555; goto ABtoY; M9hWH: c1555: goto KZfD6; KZfD6: kVWQ7: goto Au3G2; vFOqc: dO7Ay: goto M9hWH; QKGWJ: if ($this->db->table_exists($table)) { goto k327j; } goto M4h7e; ABtoY: k327j: goto A9RxS; A9RxS: if (!isset($json[$table])) { goto dO7Ay; } goto KLXKv; M4h7e: $create_tables[$table] = $json[$table]; goto jXTHP; Au3G2: } goto ussVB; iXUis: sort($full_tables); goto wvqQz; eEDuj: utnYe: goto eTXKM; NPIGf: $json = (array) $json; goto KFkNn; Brx15: $add_columns = []; goto J7Kq6; eTXKM: $json = file_get_contents("\56\x2f\141\163\163\145\x74\x73\x2f\141\x70\x70\57\x64\x62\57\144\141\164\141\142\141\x73\x65\56\x6a\x73\157\156"); goto Bq2Vh; KFkNn: $tbl_baru = array_keys($json); goto zfhLc; sSha1: $data = ["\x64\x62" => $fields, "\x63\x72\145\x61\x74\x65" => $create_tables, "\x6d\157\144\151\x66\171" => $edit_columns, "\141\144\144" => $add_columns, "\143\x6f\x75\156\164\163" => $counts, "\x6a\x73\157\156" => $json, "\143\165\162\x72\x65\x6e\164" => $currentDb]; goto iS65t; jbemB: $db_debug = $this->db->db_debug; goto x4Kiu; Bq2Vh: $json = json_decode($json); goto NPIGf; EqVhF: $currentDb = []; goto E5Mmo; zfhLc: $tbl_ada = array_keys($fields); goto dmFyR; x4Kiu: $this->db->db_debug = FALSE; goto VuESP; hhTJ2: $full_tables = array_unique($full_tables); goto iXUis; VuESP: $tabless = $this->db->list_tables(); goto NTac9; iS65t: $this->output_json($data); goto OYV16; NTac9: $fields = []; goto EqVhF; ImJ1N: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto sSha1; J7Kq6: $edit_columns = []; goto IdemQ; ussVB: zO9O5: goto ImJ1N; wvqQz: $create_tables = []; goto Brx15; dmFyR: $full_tables = array_merge($tbl_baru, $tbl_ada); goto hhTJ2; OYV16: } public function updateDatabase() { goto aF_OD; CnsGU: FrQ9a: goto ERBI4; Svb2W: $fields = []; goto ttaXA; MyPFE: echo true; goto rCSsU; j2OcL: $json = json_decode($json); goto epIB9; V024K: sort($full_tables); goto NSWZX; epIB9: $json = (array) $json; goto DjJ43; ERBI4: $json = file_get_contents("\x2e\57\141\x73\163\145\164\163\57\141\x70\160\57\x64\x62\57\x64\141\x74\141\142\x61\x73\x65\x2e\x6a\163\x6f\156"); goto j2OcL; ttaXA: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); auemS: } goto CnsGU; B8E_S: $full_tables = array_unique($full_tables); goto V024K; Or52e: $tbl_ada = array_keys($fields); goto gUJnq; gUJnq: $full_tables = array_merge($tbl_baru, $tbl_ada); goto B8E_S; NSWZX: foreach ($full_tables as $table) { goto I2bQ_; srqz1: foreach ($json[$table] as $jtbl) { goto o4VDa; TEC7W: bXalw: goto ejK3b; o4VDa: if ($this->db->field_exists($jtbl->name, $table)) { goto m9JXM; } goto lpXiC; mJIfb: foreach ($fields[$table] as $ftbl) { goto hZCr8; Uvqiw: VsYOx: goto A5phn; VnZ73: if ($jtbl->primary_key == 0) { goto Z0gWF; } goto HhMh0; MB6A1: $this->dbforge->modify_column($table, $field); goto Kkiiw; uNZ0t: P5fXN: goto Uvqiw; HhMh0: if ($jtbl->auto_increment == true) { goto T62fG; } goto RDKgE; ezUjj: T62fG: goto KV2AX; EeYsI: $this->dbforge->add_key($jtbl->name, true); goto MB6A1; tDy2r: AQje7: goto mQJsy; tiwA2: Y8dux: goto CQasC; Gkdph: goto Y8dux; goto wV3fF; mQJsy: mqwCy: goto uNZ0t; RDKgE: $field = array($jtbl->name => array("\164\x79\160\145" => $jtbl->type, "\x63\157\156\163\x74\x72\x61\151\x6e\x74" => $jtbl->max_length, "\x6e\x75\154\154" => false)); goto A6hp6; A0Qd3: $onUpdate = isset($jtbl->extra) ? "\40" . strtolower($jtbl->extra) : ''; goto Vunt6; wV3fF: jjGhE: goto A0Qd3; A6hp6: goto aOLV6; goto ezUjj; RuhIJ: $field = array($jtbl->name => array("\x74\x79\160\x65" => $jtbl->type, "\x63\157\x6e\x73\164\162\x61\x69\x6e\x74" => $jtbl->max_length, "\x64\145\x66\141\x75\x6c\164" => $jtbl->default)); goto Gkdph; Vunt6: $field = array($jtbl->name . "\40\x64\x61\164\145\164\x69\155\x65\x20\144\145\x66\141\165\x6c\x74\40\x63\165\x72\162\x65\x6e\x74\137\164\151\x6d\x65\x73\x74\141\x6d\160" . $onUpdate); goto tiwA2; hZCr8: if (!($jtbl->name == $ftbl->name)) { goto P5fXN; } goto xz2ne; Kkiiw: goto AQje7; goto guTWM; xz2ne: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto mqwCy; } goto VnZ73; guTWM: Z0gWF: goto VUmox; CQasC: $this->dbforge->modify_column($table, $field); goto tDy2r; KV2AX: $field = array($jtbl->name => array("\x74\171\x70\145" => $jtbl->type, "\x63\157\x6e\x73\164\162\x61\x69\156\x74" => $jtbl->max_length, "\x6e\165\154\x6c" => false, "\x61\x75\164\x6f\x5f\x69\x6e\x63\x72\145\155\145\156\x74" => true)); goto bRDIQ; VUmox: if ($jtbl->default == "\x43\125\122\122\105\116\x54\137\x54\111\x4d\105\123\x54\x41\x4d\x50") { goto jjGhE; } goto RuhIJ; bRDIQ: aOLV6: goto EeYsI; A5phn: } goto eNeRr; SgzJ1: goto nczbT; goto TEC7W; Ihkgf: $this->dbforge->add_column($table, $field); goto SgzJ1; SaV7F: K608l: goto ev1yr; ejK3b: $field = array($jtbl->name => array("\x74\x79\x70\145" => $jtbl->type, "\x63\157\x6e\163\164\162\x61\151\x6e\164" => $jtbl->max_length, "\x64\145\x66\x61\x75\x6c\x74" => $jtbl->default)); goto TOKuM; GNrv2: Hi34f: goto SaV7F; s028N: $this->dbforge->add_key($jtbl->name, true); goto Ihkgf; TOKuM: $this->dbforge->add_column($table, $field); goto krFrY; JmLTd: goto Hi34f; goto HYNMY; uobGv: $field = array($jtbl->name => array("\x74\171\160\x65" => $jtbl->type, "\143\157\156\163\x74\x72\x61\x69\x6e\x74" => $jtbl->max_length, "\156\165\154\154" => false)); goto s028N; eNeRr: Vh7li: goto GNrv2; lpXiC: if ($jtbl->primary_key == 0) { goto bXalw; } goto uobGv; HYNMY: m9JXM: goto mJIfb; krFrY: nczbT: goto JmLTd; ev1yr: } goto P5dvE; FH_4u: sxp5c: goto Fc0jk; t8z2B: $this->db->query("\101\114\x54\x45\122\x20\124\x41\102\114\x45\x20\x20\x60" . $table . "\140\x20\x45\116\x47\x49\116\x45\40\75\x20\x49\x6e\x6e\x6f\x44\x42"); goto x8hvH; dC9JN: if (!isset($json[$table])) { goto wNVJ3; } goto r_IQn; x_J40: J_g05: goto XmiP7; Fc0jk: Cyc42: goto zxVjI; dECvn: EdMUO: goto FH_4u; XmiP7: $this->dbforge->create_table($table, TRUE); goto t8z2B; vNmO8: goto sxp5c; goto yjBKn; yjBKn: uGibr: goto Q8zL0; P5dvE: PyF91: goto dECvn; I2bQ_: if ($this->db->table_exists($table)) { goto uGibr; } goto dC9JN; x8hvH: wNVJ3: goto vNmO8; Q8zL0: if (!isset($json[$table])) { goto EdMUO; } goto srqz1; r_IQn: foreach ($json[$table] as $tbl => $jtbl) { goto j0_9W; ud03A: WKc3b: goto UGJ8m; UGJ8m: n7NpM: goto DVNVW; b3reJ: $this->dbforge->add_field($field); goto RNgdV; j0_9W: $field = [$jtbl->name => ["\x74\171\x70\145" => $jtbl->type, "\x63\x6f\x6e\x73\164\x72\x61\151\156\164" => $jtbl->max_length, "\156\165\x6c\154" => $jtbl->primary_key == 0]]; goto b3reJ; c8YdI: $this->dbforge->add_key($jtbl->name, true); goto ud03A; RNgdV: if (!($jtbl->primary_key == 1)) { goto WKc3b; } goto c8YdI; DVNVW: } goto x_J40; zxVjI: } goto jREW_; DjJ43: $tbl_baru = array_keys($json); goto Or52e; jREW_: wEku3: goto MyPFE; aF_OD: $tabless = $this->db->list_tables(); goto Svb2W; rCSsU: } public function checkDb() { goto eWfon; aSo7m: $full_tables = array_unique($full_tables); goto xOvqr; G1bv3: foreach ($tabless as $table) { goto yULdL; Nd_zq: $retval[$i]->col_type = $query[$i]->column_type; goto J8njX; y4tLp: $retval[$i]->collation = $query[$i]->collation_name; goto aGKam; BHX7V: $retval[$i]->nullable = $query[$i]->is_nullable; goto Z2VMd; WtBB2: $retval = array(); goto vFHe_; gXbO6: $fields[$table] = (object) ["\x74\141\x62\x6c\145\x5f\156\141\155\145" => $table, "\143\x6f\154\165\x6d\156\x73" => $retval]; goto pRfGM; Qxvy0: $retval[$i]->name = $query[$i]->column_name; goto Nd_zq; C3xWQ: $retval[$i]->comment = $query[$i]->column_comment; goto pue9E; pue9E: $retval[$i]->extra = $query[$i]->extra; goto BHX7V; cUiNS: cHUHt: goto SaaXN; iS2Gl: $query = $query->result_object(); goto WtBB2; SaaXN: $i++; goto Gs6qV; aNxcJ: c3c2e: goto m9cyS; Gs6qV: goto c3c2e; goto V2Fk5; m9cyS: if (!($i < $c)) { goto d4HuS; } goto q0RQd; dSz5g: $c = count($query); goto aNxcJ; V2Fk5: d4HuS: goto gXbO6; q0RQd: $retval[$i] = new stdClass(); goto Qxvy0; pRfGM: ShbVV: goto JuWR7; J8njX: $retval[$i]->type = $query[$i]->data_type; goto y4tLp; yULdL: $sql = "\123\105\114\x45\103\x54\x20\140\x63\x6f\x6c\165\155\x6e\137\156\141\155\x65\140\x2c\40\x60\143\x6f\154\x75\x6d\x6e\x5f\164\171\x70\x65\140\x2c\x20\x60\143\x6f\154\154\141\x74\151\157\x6e\137\156\x61\155\145\x60\54\40\140\x64\x61\164\x61\137\164\x79\x70\145\x60\x2c\40\x60\x63\150\141\x72\x61\x63\164\145\162\x5f\155\x61\170\151\155\165\155\137\x6c\145\156\147\x74\x68\x60\54\x20\x60\156\165\x6d\145\162\151\x63\137\x70\162\x65\143\x69\163\151\x6f\x6e\140\x2c" . "\40\x60\x63\x6f\x6c\165\155\156\137\144\145\146\141\x75\x6c\x74\140\x2c\40\x60\x63\157\x6c\165\155\156\137\153\x65\171\x60\x2c\40\140\143\157\154\x75\155\156\x5f\x63\157\155\x6d\145\156\x74\x60\x2c\x20\x60\145\170\x74\x72\141\x60\x2c\x20\x60\x69\x73\137\156\165\154\154\x61\142\154\x65\x60\xd\xa\11\x9\x9\x46\122\117\x4d\40\140\151\156\x66\157\x72\155\141\x74\x69\157\x6e\137\163\143\150\x65\155\x61\x60\56\x60\x63\157\x6c\x75\155\156\x73\x60\x20\x57\x48\105\122\x45\x20\x74\141\142\154\x65\137\x73\x63\x68\x65\155\x61\x20\75\x20\x22" . $this->db->database . "\42\40\101\116\x44\40\x74\x61\x62\154\x65\137\156\x61\155\x65\40\x3d\40\x22" . $table . "\42"; goto RCUmN; ANx9Z: $retval[$i]->default = $query[$i]->column_default; goto C3xWQ; AQbhV: sArOl: goto iS2Gl; RCUmN: if (!(($query = $this->db->query($sql)) === FALSE)) { goto sArOl; } goto ygn5T; Z2VMd: $retval[$i]->primary = $query[$i]->column_key; goto cUiNS; ygn5T: $fields = FALSE; goto AQbhV; aGKam: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto ANx9Z; vFHe_: $i = 0; goto dSz5g; JuWR7: } goto gnThL; lbykD: $json = json_decode($json); goto oRtIj; db5fy: $script_create_column = []; goto QT3df; xOvqr: sort($full_tables); goto Dyuuu; P2cwE: $add_columns = []; goto db5fy; UYe1v: $fields = []; goto G1bv3; UhBVm: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto aSo7m; SjtrB: $this->output_json($data); goto NnMfq; eWfon: $db_debug = $this->db->db_debug; goto ypShY; Glq3a: BDw1L: goto E8udP; E8udP: $this->db->db_debug = $db_debug; goto AUm2m; AUm2m: $data = ["\x66\151\145\x6c\144\x73" => $fields, "\x63\162\x65\x61\164\145\137\164\x61\x62\154\x65\x73" => $create_tables, "\x63\157\x75\x6e\164\137\x74\142\x6c" => count($create_tables), "\x61\x64\144\137\x63\x6f\154\x75\155\156\163\x5f\x74\157\x5f\x74\141\142\x6c\145" => $add_columns, "\x63\157\165\156\x74\137\143\157\x6c" => count($add_columns), "\x65\144\x69\164\137\143\x6f\154\x75\155\156\x73" => $edit_columns, "\x63\x6f\x75\x6e\164\137\x6d\157\144" => count($edit_columns), "\141\144\x64\137\164\x62\154" => $this->encryption->encrypt(json_encode($script_create_table)), "\141\x64\144\x5f\x63\x6f\154" => $this->encryption->encrypt(json_encode($script_create_column)), "\x6d\157\x64\137\143\x6f\x6c" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto SjtrB; ypShY: $this->db->db_debug = FALSE; goto cmZn8; cmZn8: $tabless = $this->db->list_tables(); goto UYe1v; pWhDl: $tbl_seharusnya = array_keys($json); goto cWK_1; cWK_1: $tbl_ada = array_keys($fields); goto UhBVm; Dyuuu: $create_tables = []; goto eInTf; QT3df: $edit_columns = []; goto EJaza; eInTf: $script_create_table = []; goto P2cwE; EJaza: $script_edit_column = []; goto yzyfb; K5_Jg: $json = file_get_contents("\x2e\57\x61\163\163\x65\x74\x73\57\x61\160\160\57\144\x62\57\144\x61\164\x61\x62\141\x73\x65\56\x6a\163\157\x6e"); goto lbykD; oRtIj: $json = (array) $json; goto pWhDl; gnThL: Bn5u7: goto K5_Jg; yzyfb: foreach ($full_tables as $table) { goto BeHrj; YGm6h: goto dx2xW; goto ZGisv; Yr6EB: if (!isset($json[$table])) { goto dTf81; } goto QBgx3; MkOb3: $modif_column = []; goto ZAPwY; WukSm: $script .= $pri . "\51\x20\105\x4e\x47\111\116\x45\75\111\x6e\156\157\x44\102\40\x44\x45\x46\x41\x55\114\124\x20\103\x48\101\122\x53\x45\x54\x3d\165\164\146\x38\155\x62\64\x3b"; goto L8WAW; ZGisv: NzYMQ: goto BxCWa; hfjD6: kmD01: goto f4C6f; f4C6f: if (!(count($modif_column) > 0)) { goto D7DQM; } goto omV12; wx0vy: D7DQM: goto sbgFO; J4E1g: JWiLo: goto Lht2W; XKSmw: if (!(count($add_column) > 0)) { goto kmD01; } goto VCK0f; omV12: $script_edit_column[$table] = "\101\114\x54\105\122\40\124\101\x42\x4c\105\x20\x60" . $table . "\x60\x20" . implode("\54\40", $modif_column) . "\x3b"; goto wx0vy; BxCWa: $create_tables[] = $json[$table]; goto WdvXD; lmtvn: dzn_8: goto WukSm; WdvXD: $script = "\103\122\x45\x41\124\x45\x20\x54\x41\102\114\105\40\x60" . $table . "\140\x20\50"; goto dq3zt; L8WAW: $script_create_table[$table] = $script; goto H7L0e; sbgFO: dTf81: goto YGm6h; H7L0e: dx2xW: goto J4E1g; yFySs: FoNkJ: goto XKSmw; BeHrj: if (!$this->db->table_exists($table)) { goto NzYMQ; } goto Yr6EB; QBgx3: $add_column = []; goto MkOb3; VCK0f: $script_create_column[$table] = "\x41\114\124\105\122\x20\x54\x41\102\114\105\40\x60" . $table . "\x60\x20" . implode("\54\40", $add_column) . "\x3b"; goto hfjD6; ZAPwY: foreach ($json[$table]->columns as $jtbl) { goto x1GmW; a869_: $extra .= "\40\120\122\x49\115\101\x52\x59\x20\x4b\x45\x59"; goto NmKz3; cW_xm: $default = $jtbl->default == null ? '' : "\x20\x44\x45\x46\101\125\x4c\124\40" . $jtbl->default; goto GIj9f; PhVgZ: $length = "\50" . ($jtbl->max_length + 1) . "\51"; goto cakx9; SyU3s: if ($jtbl->type == "\x69\x6e\x74") { goto XS156; } goto cuFw_; NihZp: $nullable = $jtbl->nullable == "\116\117" ? "\40\x4e\117\124\x20\116\x55\x4c\x4c" : ''; goto cW_xm; cuFw_: $length = "\50" . $jtbl->max_length . "\51"; goto twiIF; x1GmW: if ($this->db->field_exists($jtbl->name, $table)) { goto bbDSf; } goto RI3rx; Q8DxF: $length = ''; goto gbZ18; twiIF: goto WGvV8; goto G4Jjo; otpDO: goto I6ils; goto SxLlQ; gbZ18: goto I6ils; goto yQWVI; RI3rx: $add_columns[$table][] = $jtbl; goto VMdXW; pQxNv: bbDSf: goto lIDb5; gn9_C: xySsR: goto P9z5a; SxLlQ: CzJ5L: goto SyU3s; lIDb5: foreach ($fields[$table]->columns as $ftbl) { goto K2PcS; QMBQH: gcIz1: goto Ubvdk; qpPyZ: je673: goto xgeKS; TXzkP: array_push($modif_column, "\101\104\x44\40\125\x4e\111\x51\125\105\x20\113\105\x59\x20\140" . $jtbl->name . "\140\40\50\140" . $jtbl->name . "\x60\x29"); goto W6w6H; sKbzT: uL7PS: goto Rdy15; o4eoK: $nullable = $jtbl->nullable == "\116\117" ? "\40\x4e\x4f\124\40\116\x55\114\114" : ''; goto FvTQy; sYJ3B: if (strtolower($jtbl->primary) == "\165\156\x69") { goto gBozd; } goto k22Jr; Cowma: zG_1t: goto ZWCWh; lMd7_: if (!($jtbl->default != null)) { goto aKi6x; } goto YBw0x; EfCKO: if (!($ftbl->extra != null)) { goto gcIz1; } goto wVBu2; xgeKS: if (!($jtbl->default != $ftbl->default)) { goto vi2V7; } goto w8RkV; k22Jr: goto Bl0Is; goto VO41n; dMh43: array_push($modif_column, "\101\104\104\x20\120\122\111\115\x41\x52\x59\x20\113\x45\131\40\x28\140" . $jtbl->name . "\x60\x29"); goto yWH93; WILT3: $jtbl->extra = strtoupper($jtbl->extra); goto StcsV; AtinN: $edit_columns[$table][$jtbl->name]["\160\162\151\x6d\x61\x72\171"] = $jtbl->primary; goto sjNg3; W6w6H: Bl0Is: goto DE6i3; sjNg3: if (strtolower($jtbl->primary) == "\x70\162\x69") { goto X8dnb; } goto sYJ3B; DE6i3: VGp3Q: goto DrKpe; YBw0x: $jtbl->default = str_replace("\x28\x29", '', $jtbl->default); goto kJW2b; rjfY0: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto Ut1EU; kJW2b: $jtbl->default = strtoupper($jtbl->default); goto sCXYW; H6mVD: gBozd: goto TXzkP; SHMyc: $ftbl->extra = strtoupper($ftbl->extra); goto QMBQH; mJcCD: $ftbl->default = strtoupper($ftbl->default); goto qpPyZ; FvTQy: $default = $jtbl->default == null ? '' : "\40\104\105\x46\x41\125\x4c\124\x20" . $jtbl->default; goto rjfY0; sCXYW: aKi6x: goto C08LH; StcsV: MoGb2: goto EfCKO; Ut1EU: $comment = $jtbl->comment == '' ? '' : "\x20\103\x4f\115\115\105\x4e\x54\x20\47" . $jtbl->comment . "\47"; goto im9U8; Ubvdk: if (!($jtbl->extra != $ftbl->extra)) { goto m0lf5; } goto cMylL; UFhrq: $edit_columns[$table][$jtbl->name]["\143\157\154\x5f\x74\171\x70\x65"] = $jtbl->col_type; goto l7E5J; Vkn0V: if (!($jtbl->primary != $ftbl->primary)) { goto VGp3Q; } goto AtinN; E4mRp: vi2V7: goto Z5PRu; l7E5J: m5t4o: goto VH3ai; x2nnX: MU0Ga: goto Vkn0V; vUJqA: $ftbl->default = str_replace("\50\51", '', $ftbl->default); goto mJcCD; RujOR: if (!($jtbl->col_type != $ftbl->col_type)) { goto m5t4o; } goto UFhrq; o4QMX: $edit_columns[$table][$jtbl->name]["\143\157\x6d\x6d\x65\x6e\164"] = $jtbl->comment; goto x2nnX; Z5PRu: if (!($jtbl->extra != null)) { goto MoGb2; } goto E0_FB; at72a: $edit_columns[$table][$jtbl->name]["\x6e\165\154\154\x61\142\154\x65"] = $jtbl->nullable; goto JGjlb; w8RkV: $edit_columns[$table][$jtbl->name]["\144\x65\x66\141\x75\x6c\x74"] = $jtbl->default; goto E4mRp; K2PcS: if (!($jtbl->name == $ftbl->name)) { goto fWlu2; } goto RujOR; wgTVT: if (!($jtbl->comment != $ftbl->comment)) { goto MU0Ga; } goto o4QMX; JGjlb: THGsS: goto lMd7_; DrKpe: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto uL7PS; } goto o4eoK; yWH93: goto Bl0Is; goto H6mVD; cMylL: $edit_columns[$table][$jtbl->name]["\x65\x78\164\x72\141"] = $jtbl->extra; goto vc7DW; E0_FB: $jtbl->extra = str_replace("\50\x29", '', $jtbl->extra); goto WILT3; Rdy15: fWlu2: goto Cowma; VO41n: X8dnb: goto dMh43; C08LH: if (!($ftbl->default != null)) { goto je673; } goto vUJqA; im9U8: array_push($modif_column, "\x4d\x4f\x44\111\x46\131\x20\x60" . $jtbl->name . "\x60\40" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto sKbzT; vc7DW: m0lf5: goto wgTVT; wVBu2: $ftbl->extra = str_replace("\50\51", '', $ftbl->extra); goto SHMyc; VH3ai: if (!($jtbl->nullable != $ftbl->nullable)) { goto THGsS; } goto at72a; ZWCWh: } goto ejhuj; NmKz3: j_tyg: goto YUSA_; YgfI_: if (!(strtoupper($extra) == "\x20\x41\125\x54\117\137\x49\x4e\103\x52\105\x4d\x45\x4e\x54")) { goto j_tyg; } goto a869_; EBEjt: array_push($add_column, "\101\104\104\x20\140" . $jtbl->name . "\x60\x20" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto pQxNv; yQWVI: KcSFO: goto KMLUp; GIj9f: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto YgfI_; KMLUp: $length = ''; goto otpDO; cakx9: WGvV8: goto qv6lY; ejhuj: nKNET: goto gn9_C; tnWMh: if ($jtbl->type != "\x6c\157\156\x67\x74\145\170\164" && $jtbl->type != "\x6d\145\x64\x69\x75\x6d\x74\145\170\164" && $jtbl->type != "\164\145\170\164") { goto CzJ5L; } goto Q8DxF; YUSA_: $comment = $jtbl->comment == '' ? '' : "\40\x43\x4f\115\x4d\x45\116\124\x20\47" . $jtbl->comment . "\47"; goto EBEjt; G4Jjo: XS156: goto PhVgZ; qv6lY: I6ils: goto NihZp; VMdXW: if ($jtbl->max_length == null) { goto KcSFO; } goto tnWMh; P9z5a: } goto yFySs; wTZDN: foreach ($json[$table]->columns as $column) { goto M2NW7; dgCFm: $default = $column->default == null ? '' : "\40\104\105\x46\x41\x55\114\124\x20" . $column->default; goto Uf2Ej; M2NW7: if ($column->max_length == null) { goto HcM8j; } goto sE9MN; oKDrI: $pri .= $column->primary != '' ? "\x50\122\x49\115\101\x52\131\x20\x4b\x45\x59\40\50\140" . $column->name . "\140\51" : ''; goto Ce8Ws; RLwtB: $length = "\x28" . ($column->max_length + 1) . "\x29"; goto fhwvD; Jiqk9: goto QdbZE; goto BAVNa; rWTzL: Gc13p: goto ybf_j; XT3IX: $script .= "\x60" . $column->name . "\x60\x20" . $column->type . $length . $nullable . $default . $extra . $comment . "\54\40"; goto oKDrI; r1BE1: QdbZE: goto YLSvC; CMV0O: goto ztiV7; goto AfqIX; dUzOa: $length = "\x28" . $column->max_length . "\x29"; goto CMV0O; fhwvD: ztiV7: goto r1BE1; ybf_j: if ($column->type == "\x69\x6e\164") { goto xcUHb; } goto dUzOa; pU_dL: $length = ''; goto Ew5wD; BAVNa: HcM8j: goto pU_dL; Ce8Ws: zObDE: goto tDSpq; YLSvC: $nullable = $column->nullable == "\116\117" ? "\x20\x4e\x4f\x54\x20\116\x55\114\x4c" : ''; goto dgCFm; Uf2Ej: $extra = $column->extra == '' ? '' : "\x20" . strtoupper($column->extra); goto RPKY3; Ew5wD: goto QdbZE; goto rWTzL; AfqIX: xcUHb: goto RLwtB; RPKY3: $comment = $column->comment == '' ? '' : "\x20\103\117\115\x4d\105\116\124\40\47" . $column->comment . "\47"; goto XT3IX; Tw6sI: $length = ''; goto Jiqk9; sE9MN: if ($column->type != "\154\157\156\x67\x74\145\170\x74" && $column->type != "\x6d\x65\144\x69\165\x6d\x74\x65\170\164" && $column->type != "\x74\145\170\164") { goto Gc13p; } goto Tw6sI; tDSpq: } goto lmtvn; dq3zt: $pri = ''; goto wTZDN; Lht2W: } goto Glq3a; NnMfq: } public function createTable() { goto maFkU; fUEfF: $data["\155\x65\163\163\141\x67\145"] = "\x55\160\x64\x61\x74\145\x20\x6b\157\x6c\157\155"; goto TYf8X; TYf8X: $this->output_json($data); goto OuURg; nj4SH: $scripts = json_decode($this->encryption->decrypt($scripts)); goto LTqdc; fxg1b: str_replace("\x25\62\102", "\x2b", $scripts); goto wgawz; wgawz: sleep(1); goto nj4SH; cC6GJ: foreach ($scripts as $script) { $queries .= $script; tligw: } goto eb1i4; ke5Os: $data["\x73\x75\143\143\145\x73\x73"] = $this->runQuery($queries); goto fUEfF; eb1i4: VHVZG: goto ke5Os; maFkU: $scripts = $this->input->post("\x64\141\x74\x61", true); goto fxg1b; LTqdc: $queries = ''; goto cC6GJ; OuURg: } public function createColumn() { goto T0eFC; G3U_o: $scripts = json_decode($this->encryption->decrypt($scripts)); goto bMIEl; T0eFC: $scripts = $this->input->post("\144\141\x74\141", true); goto Hm_O9; as25K: tKjpW: goto DG7x6; PIdUK: $data["\x73\x75\143\x63\x65\x73\163"] = $this->runQuery($queries); goto f_N91; dAsoS: $this->updateUID(); goto j62B9; bMIEl: $queries = ''; goto AS6Cn; Hm_O9: str_replace("\45\62\x42", "\53", $scripts); goto Z8VLt; f_N91: $data["\155\145\x73\163\x61\147\145"] = "\115\157\144\151\146\171\40\x6b\x6f\154\x6f\x6d"; goto Ecnmi; AS6Cn: foreach ($scripts as $script) { $queries .= $script; OlCmt: } goto as25K; Z8VLt: sleep(1); goto G3U_o; DG7x6: if (!(strpos("\x60\165\151\x64\x60", $queries) !== false)) { goto qV78b; } goto dAsoS; Ecnmi: $this->output_json($data); goto uP47r; j62B9: qV78b: goto PIdUK; uP47r: } public function editColumn() { goto sxJPy; HW3In: $data["\155\145\163\x73\141\x67\145"] = "\x55\x70\x64\x61\x74\x65\x20\x73\x65\x6c\145\163\141\x69"; goto mGe9p; vjp0a: str_replace("\x25\62\x42", "\x2b", $scripts); goto ElMaQ; vAcXv: foreach ($scripts as $script) { $queries .= $script; VHBcX: } goto joiDl; sxJPy: $scripts = $this->input->post("\144\141\164\141", true); goto vjp0a; mGe9p: $this->output_json($data); goto bfld1; II7_f: $scripts = json_decode($this->encryption->decrypt($scripts)); goto LpoJH; ElMaQ: sleep(1); goto II7_f; joiDl: cYrCK: goto BqP09; BqP09: $data["\163\x75\143\143\x65\x73\x73"] = $this->runQuery($queries); goto HW3In; LpoJH: $queries = ''; goto vAcXv; bfld1: } function runQuery($script) { goto ImxHF; DnOVi: $mysqli->close(); goto Mdcsc; ImxHF: $hostname = $this->db->hostname; goto P6VrL; EAGN1: $mysqli->multi_query($script); goto DnOVi; ZKTa3: Fc7En: goto EAGN1; asq55: return mysqli_connect_errno(); goto ZKTa3; Mdcsc: return true; goto FocyG; P6VrL: $hostuser = $this->db->username; goto UPOT0; f0Q5Y: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto Lv7Fl; UPOT0: $hostpass = $this->db->password; goto JDf83; Lv7Fl: if (!mysqli_connect_errno()) { goto Fc7En; } goto asq55; JDf83: $database = $this->db->database; goto f0Q5Y; FocyG: } function updateUID() { goto KPOmH; fHAdr: return $this->db->update_batch("\155\x61\163\164\x65\162\x5f\x73\151\163\x77\141", $input, "\x69\x64\x5f\x73\151\163\167\x61"); goto KXi5k; VCrR9: fq4fz: goto fHAdr; eGZe7: $input = array(); goto DKm5g; KPOmH: $this->load->library("\x55\165\151\144", "\165\x75\x69\x64"); goto ULvTZ; ULvTZ: $siswas = $this->db->get("\x6d\141\x73\164\x65\x72\x5f\x73\151\163\x77\141")->result(); goto eGZe7; DKm5g: foreach ($siswas as $siswa) { $input[] = array("\151\144\137\163\x69\x73\167\x61" => $siswa->id_siswa, "\x75\x69\x64" => $this->uuid->v4()); QYjfS: } goto VCrR9; KXi5k: } function make_base() { } }
