<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\x42\x41\x53\105\x50\x41\124\110") or exit("\x4e\157\x20\144\151\162\x65\143\x74\40\x73\143\162\151\x70\164\40\141\x63\x63\145\x73\x73\x20\141\x6c\x6c\x6f\167\x65\144"); class Update extends CI_Controller { function __construct() { goto SmRAS; iwUgH: include APPPATH . "\143\157\156\x66\x69\x67\57\144\141\x74\x61\x62\x61\163\x65\56\160\x68\160"; goto FecJg; FecJg: $this->load->dbforge(); goto Ej1xj; A6auW: $this->load->library("\x65\156\x63\x72\171\160\164\x69\x6f\x6e"); goto hwc6l; Ej1xj: $this->load->database(); goto A6auW; SmRAS: parent::__construct(); goto iwUgH; hwc6l: } public function output_json($data, $encode = true) { goto qjOWR; Rnclw: c5ynb: goto zQqbL; qjOWR: if (!$encode) { goto c5ynb; } goto T93aj; T93aj: $data = json_encode($data); goto Rnclw; zQqbL: $this->output->set_content_type("\141\x70\x70\x6c\151\x63\x61\x74\x69\157\156\57\152\163\157\x6e")->set_output($data); goto WnIFh; WnIFh: } public function index() { goto kTSNx; UBFYt: $this->load->view("\x69\156\163\164\141\154\154\57\x75\x70\144\141\x74\145"); goto X70mh; rh7Yk: $this->load->view("\151\x6e\x73\x74\x61\154\154\57\150\145\x61\144\145\x72", $data); goto UBFYt; Q4O8L: $data["\152\163\157\156"] = $json; goto rh7Yk; Ay1Fk: $json = (array) $json; goto Q4O8L; X70mh: $this->load->view("\x69\x6e\163\164\x61\154\154\57\x66\x6f\157\164\145\162"); goto v6Gbp; Bb5_v: $json = json_decode($json); goto Ay1Fk; kTSNx: $json = file_get_contents("\56\57\x61\163\163\x65\164\x73\57\141\x70\160\57\144\x62\57\x64\x61\164\x61\x62\x61\163\145\x2e\152\x73\x6f\156"); goto Bb5_v; v6Gbp: } function object_to_array($data) { goto CpI40; CpI40: if (!(is_array($data) || is_object($data))) { goto mBHOh; } goto GppSd; jc_yB: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; TPAWu: } goto VnK4l; PrutY: mBHOh: goto y08_u; THxns: return $result; goto PrutY; GppSd: $result = []; goto jc_yB; y08_u: return $data; goto jXaSv; VnK4l: TQxmt: goto THxns; jXaSv: } public function checkDatabase() { goto mLSz4; bDZt7: $this->output_json($data); goto kfvZo; oTzfH: foreach ($full_tables as $table) { goto JPVkS; OsNcB: if (!isset($json[$table])) { goto aWbc8; } goto ZDqlT; BbO_9: goto ff1qN; goto yE17J; yE17J: vliTc: goto OsNcB; xz9hQ: $create_tables[$table] = $json[$table]; goto BbO_9; JPVkS: if ($this->db->table_exists($table)) { goto vliTc; } goto xz9hQ; DCzYy: ff1qN: goto Oz_mK; wzCcz: aWbc8: goto DCzYy; ZDqlT: foreach ($json[$table] as $jtbl) { goto GNNn4; Gk3aC: y9XtP: goto JNbYS; yTVbl: $add_columns[$table][] = $jtbl; goto gFoBN; GNNn4: if ($this->db->field_exists($jtbl->name, $table)) { goto in02J; } goto yTVbl; QLUXa: IMDu9: goto Gk3aC; JNbYS: njwyd: goto QFdM5; yyH6M: in02J: goto uvtU4; uvtU4: foreach ($fields[$table] as $ftbl) { goto wTHa7; sE1mO: yx_kz: goto mU4eN; jDHtw: bn2bp: goto sE1mO; wTHa7: if (!($jtbl->name == $ftbl->name)) { goto bn2bp; } goto M4uPM; rlSvJ: qiyVd: goto jDHtw; M4uPM: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto qiyVd; } goto phBnX; phBnX: $edit_columns[$table][] = $jtbl; goto rlSvJ; mU4eN: } goto QLUXa; gFoBN: goto y9XtP; goto yyH6M; QFdM5: } goto AQWrs; Oz_mK: B9Biq: goto zL6QT; AQWrs: rKunq: goto wzCcz; zL6QT: } goto OWQpk; uCDO2: $data = ["\x64\142" => $fields, "\x63\x72\x65\x61\x74\x65" => $create_tables, "\x6d\157\144\x69\146\x79" => $edit_columns, "\141\x64\x64" => $add_columns, "\x63\157\165\156\x74\x73" => $counts, "\152\163\157\x6e" => $json, "\x63\x75\162\x72\145\x6e\164" => $currentDb]; goto bDZt7; OWQpk: tvS2W: goto uI8mK; PsPKR: $full_tables = array_unique($full_tables); goto rubJ4; z1xAY: $this->db->db_debug = FALSE; goto UXnnp; TtcK7: oQTR4: goto QUlZV; OtnH3: $full_tables = array_merge($tbl_baru, $tbl_ada); goto PsPKR; jUejx: foreach ($tabless as $table) { goto j0ImB; g2osd: $datafld[$i]->auto_increment = true; goto HYl69; BcCDG: N6MNb: goto G1B2x; Xtm3v: XtmYi: goto Jz3Ae; gVKvJ: $i = 0; goto nJ7ia; nJ7ia: $c = count($query); goto R2vd3; fBPAi: $i++; goto Oxukq; EUpy5: $fields[$table] = $datafld; goto KENCh; HYl69: zOOd3: goto Xtm3v; G1B2x: $currentDb[$table] = $retval; goto EUpy5; Gaq2V: $query = $query->result_object(); goto o_0vM; o_0vM: $retval = array(); goto gVKvJ; C7Mit: esny0: goto Gaq2V; j0ImB: $datafld = $this->db->field_data($table); goto SqIso; SqIso: $sql = "\x53\105\x4c\x45\103\124\40\140\x63\x6f\154\x75\155\156\137\x6e\x61\x6d\145\140\54\40\x60\156\165\x6d\x65\x72\x69\143\137\x70\x72\145\143\151\x73\x69\x6f\156\140\54\x20\x60\145\170\164\162\x61\140\x2c\x20\140\x69\x73\x5f\156\x75\154\154\x61\142\x6c\145\x60" . "\40\x46\122\117\115\x20\x60\151\156\146\x6f\162\155\x61\164\x69\157\156\x5f\163\x63\150\x65\x6d\x61\x60\x2e\140\143\157\154\x75\x6d\156\163\x60\40\127\x48\x45\x52\x45\40\164\141\142\154\x65\x5f\163\143\150\145\x6d\141\x20\x3d\x20\x22" . $this->db->database . "\42\40\x41\116\x44\40\x74\x61\142\154\x65\x5f\x6e\141\155\145\x20\75\40\x22" . $table . "\42"; goto oMZA6; mtcRU: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto fIAcP; } goto bkD0r; NdK9J: $currentDb = FALSE; goto C7Mit; Oxukq: goto s2YAW; goto BcCDG; Jz3Ae: fIAcP: goto vTTQK; EOOrC: goto zOOd3; goto AB5N7; RF883: lsbyr: goto fBPAi; AMs4p: $retval[$i]->name = $query[$i]->column_name; goto cMFOy; cMFOy: $retval[$i]->extra = $query[$i]->extra; goto RF883; z8ciK: if ($query[$i]->extra == "\141\165\x74\157\x5f\151\156\x63\x72\145\x6d\x65\x6e\164") { goto JYoSO; } goto ElBDL; KENCh: IOtqw: goto J7hjY; bkD0r: if (!($query[$i]->extra != '')) { goto XtmYi; } goto z8ciK; R2vd3: s2YAW: goto M5xwB; oMZA6: if (!(($query = $this->db->query($sql)) === FALSE)) { goto esny0; } goto NdK9J; ElBDL: $datafld[$i]->extra = $query[$i]->extra; goto EOOrC; AB5N7: JYoSO: goto g2osd; M5xwB: if (!($i < $c)) { goto N6MNb; } goto mtcRU; vTTQK: $retval[$i] = new stdClass(); goto AMs4p; J7hjY: } goto TtcK7; m_BSe: $create_tables = []; goto j7Ue4; e8rkK: $json = json_decode($json); goto isLl3; isLl3: $json = (array) $json; goto K_bpH; mLSz4: $db_debug = $this->db->db_debug; goto z1xAY; rZ8jw: $currentDb = []; goto jUejx; nfs_g: $tbl_ada = array_keys($fields); goto OtnH3; UXnnp: $tabless = $this->db->list_tables(); goto Kou1W; uI8mK: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto uCDO2; Kou1W: $fields = []; goto rZ8jw; j7Ue4: $add_columns = []; goto LVb3z; rubJ4: sort($full_tables); goto m_BSe; K_bpH: $tbl_baru = array_keys($json); goto nfs_g; LVb3z: $edit_columns = []; goto oTzfH; QUlZV: $json = file_get_contents("\x2e\57\141\163\163\x65\x74\163\x2f\x61\160\x70\57\144\142\x2f\x64\x61\x74\x61\142\x61\x73\x65\56\152\163\x6f\x6e"); goto e8rkK; kfvZo: } public function updateDatabase() { goto fI0ud; OYfge: ZOG3v: goto BV5Ch; N3GkC: foreach ($full_tables as $table) { goto Cjhkj; cfzXh: SIVnS: goto WoV2W; s8CUh: mbo1G: goto h4n_j; ExmXD: $this->db->query("\x41\114\x54\105\122\x20\124\x41\x42\114\x45\40\x20\x60" . $table . "\140\40\105\x4e\107\111\x4e\105\40\75\x20\x49\x6e\156\157\x44\x42"); goto leqNX; leqNX: ZHN_w: goto lR1cH; c3htq: bT6gE: goto orw6m; XW4Ie: foreach ($json[$table] as $jtbl) { goto eKGFt; owFNt: if ($jtbl->primary_key == 0) { goto Xp4tQ; } goto RANav; QBZ2O: yUQ8L: goto Pdb_W; L3xWt: $field = array($jtbl->name => array("\164\171\x70\145" => $jtbl->type, "\143\x6f\x6e\163\164\162\x61\x69\156\x74" => $jtbl->max_length, "\x64\145\146\x61\x75\154\164" => $jtbl->default)); goto XM9LO; eKGFt: if ($this->db->field_exists($jtbl->name, $table)) { goto khfqj; } goto owFNt; eQ0Hz: jXXGe: goto QBZ2O; YCNI_: $this->dbforge->add_column($table, $field); goto zdpFf; gSVJo: khfqj: goto UWafk; XM9LO: $this->dbforge->add_column($table, $field); goto K2w_z; RANav: $field = array($jtbl->name => array("\164\x79\160\145" => $jtbl->type, "\143\157\x6e\163\164\x72\141\151\x6e\x74" => $jtbl->max_length, "\156\165\154\154" => false)); goto o9JPv; g0jJt: goto yUQ8L; goto gSVJo; UWafk: foreach ($fields[$table] as $ftbl) { goto YZmft; JTRDE: ISqFu: goto V9UWt; UwP8h: goto glmGy; goto SmddD; extEd: ikSIC: goto C31OW; V9UWt: o8J4_: goto Ve1j9; Ve1j9: xUQ_O: goto wK0vC; XN_zP: $this->dbforge->modify_column($table, $field); goto UwP8h; EGz1D: $field = array($jtbl->name => array("\x74\x79\x70\x65" => $jtbl->type, "\143\x6f\156\163\x74\x72\141\151\x6e\164" => $jtbl->max_length, "\156\165\154\x6c" => false)); goto OkS59; SmddD: ydIyJ: goto y3YDh; x1Sfc: ONl6j: goto fy7x4; hoVEX: $field = array($jtbl->name => array("\164\171\160\x65" => $jtbl->type, "\x63\157\x6e\163\x74\162\141\x69\156\x74" => $jtbl->max_length, "\144\145\x66\141\x75\154\x74" => $jtbl->default)); goto Buq1_; OkS59: goto ikSIC; goto x1Sfc; Txdop: $field = array($jtbl->name . "\40\x64\141\x74\145\x74\x69\x6d\x65\x20\144\145\146\x61\165\154\164\40\143\165\x72\162\x65\156\x74\137\x74\151\x6d\x65\x73\164\141\155\160" . $onUpdate); goto op8L5; KnnAw: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto ISqFu; } goto TeGyw; Buq1_: goto o96Jj; goto oB6EZ; TeGyw: if ($jtbl->primary_key == 0) { goto ydIyJ; } goto X96j5; fy7x4: $field = array($jtbl->name => array("\164\171\160\x65" => $jtbl->type, "\x63\x6f\x6e\x73\164\x72\x61\x69\156\164" => $jtbl->max_length, "\156\165\154\154" => false, "\x61\165\164\157\x5f\151\156\x63\162\145\155\x65\156\164" => true)); goto extEd; BXqEZ: $onUpdate = isset($jtbl->extra) ? "\x20" . strtolower($jtbl->extra) : ''; goto Txdop; X96j5: if ($jtbl->auto_increment == true) { goto ONl6j; } goto EGz1D; bCcmO: $this->dbforge->modify_column($table, $field); goto x1yZ3; op8L5: o96Jj: goto bCcmO; C31OW: $this->dbforge->add_key($jtbl->name, true); goto XN_zP; y3YDh: if ($jtbl->default == "\x43\125\122\122\x45\x4e\x54\137\124\111\x4d\105\x53\124\x41\115\120") { goto hJ402; } goto hoVEX; x1yZ3: glmGy: goto JTRDE; oB6EZ: hJ402: goto BXqEZ; YZmft: if (!($jtbl->name == $ftbl->name)) { goto o8J4_; } goto KnnAw; wK0vC: } goto eQ0Hz; K2w_z: WNO_Q: goto g0jJt; Fqfjb: Xp4tQ: goto L3xWt; zdpFf: goto WNO_Q; goto Fqfjb; Pdb_W: NoZzh: goto OTQNW; o9JPv: $this->dbforge->add_key($jtbl->name, true); goto YCNI_; OTQNW: } goto s8CUh; WoV2W: $this->dbforge->create_table($table, TRUE); goto ExmXD; JKNdj: if (!isset($json[$table])) { goto ZHN_w; } goto G5tQv; Cjhkj: if ($this->db->table_exists($table)) { goto lUGXe; } goto JKNdj; lR1cH: goto bT6gE; goto dHWoe; G5tQv: foreach ($json[$table] as $tbl => $jtbl) { goto xQaV0; hDp10: uSUdB: goto sOkx5; lVhdZ: OGNge: goto hDp10; aI0X2: $this->dbforge->add_key($jtbl->name, true); goto lVhdZ; L_xT6: if (!($jtbl->primary_key == 1)) { goto OGNge; } goto aI0X2; xQaV0: $field = [$jtbl->name => ["\x74\x79\160\145" => $jtbl->type, "\x63\157\156\x73\x74\162\141\151\x6e\x74" => $jtbl->max_length, "\156\x75\x6c\154" => $jtbl->primary_key == 0]]; goto BpxBZ; BpxBZ: $this->dbforge->add_field($field); goto L_xT6; sOkx5: } goto cfzXh; orw6m: uo5LY: goto QVd8N; dHWoe: lUGXe: goto tzmYR; tzmYR: if (!isset($json[$table])) { goto LYf9s; } goto XW4Ie; h4n_j: LYf9s: goto c3htq; QVd8N: } goto MyXO_; AD0Rq: $fields = []; goto Iwv1Y; fI0ud: $tabless = $this->db->list_tables(); goto AD0Rq; a630d: sort($full_tables); goto N3GkC; O94TL: echo true; goto aj6Yl; T8YtF: $full_tables = array_merge($tbl_baru, $tbl_ada); goto IpzsB; BV5Ch: $json = file_get_contents("\56\57\141\x73\x73\145\164\x73\57\x61\160\x70\x2f\144\x62\57\144\141\164\x61\x62\x61\163\145\x2e\152\163\x6f\156"); goto r5YQC; IpzsB: $full_tables = array_unique($full_tables); goto a630d; r5YQC: $json = json_decode($json); goto LGyks; Zvl3m: $tbl_baru = array_keys($json); goto DY4w1; MyXO_: qddX9: goto O94TL; LGyks: $json = (array) $json; goto Zvl3m; Iwv1Y: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); TFZKi: } goto OYfge; DY4w1: $tbl_ada = array_keys($fields); goto T8YtF; aj6Yl: } public function checkDb() { goto eoX1k; jF9sn: $this->db->db_debug = $db_debug; goto q3MBe; JiH32: $create_tables = []; goto SSARz; cgngh: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto EaC2q; e99I4: $json = json_decode($json); goto xDbpg; HoTfW: sort($full_tables); goto JiH32; Ato9I: foreach ($tabless as $table) { goto bS8Kh; Tkb1A: a9OGk: goto ENmAN; M7wHd: EECC0: goto JQ4gY; ENmAN: $query = $query->result_object(); goto uLlgk; Lo5pj: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto ZFkET; bS8Kh: $sql = "\123\x45\114\105\x43\x54\x20\x60\143\157\154\x75\155\x6e\x5f\156\141\x6d\x65\140\x2c\x20\140\x63\x6f\x6c\x75\x6d\x6e\137\x74\x79\x70\145\140\x2c\x20\140\143\x6f\x6c\154\x61\x74\151\x6f\156\137\x6e\141\x6d\145\x60\x2c\40\x60\144\141\164\x61\137\164\171\x70\145\x60\54\x20\x60\x63\x68\x61\x72\141\143\164\x65\x72\137\155\141\170\x69\155\x75\155\137\x6c\145\156\147\x74\x68\140\x2c\40\x60\x6e\165\155\145\x72\x69\x63\137\160\162\x65\143\x69\x73\x69\x6f\156\x60\54" . "\x20\x60\x63\157\154\165\155\156\137\144\145\x66\x61\x75\154\164\140\54\x20\140\x63\157\x6c\165\155\x6e\137\x6b\x65\171\140\54\x20\x60\143\157\x6c\165\x6d\156\137\x63\157\155\155\145\x6e\164\x60\x2c\40\140\x65\170\164\x72\x61\x60\x2c\x20\140\151\x73\x5f\x6e\x75\154\x6c\141\142\x6c\145\140\15\12\11\11\11\x46\x52\x4f\x4d\x20\140\151\156\x66\x6f\162\x6d\141\164\x69\157\156\137\163\x63\150\x65\x6d\x61\x60\x2e\140\x63\x6f\154\x75\x6d\156\x73\x60\40\127\110\x45\122\105\x20\x74\x61\x62\x6c\x65\x5f\163\143\150\x65\x6d\141\x20\75\40\42" . $this->db->database . "\x22\x20\x41\116\x44\40\x74\x61\142\x6c\145\137\x6e\141\155\145\x20\75\x20\42" . $table . "\42"; goto xHEHl; WGpAP: $retval[$i]->comment = $query[$i]->column_comment; goto kweEs; kweEs: $retval[$i]->extra = $query[$i]->extra; goto BstdB; s1lmf: goto SrmiW; goto M7wHd; JotsH: $i++; goto s1lmf; jMe2l: $retval[$i]->name = $query[$i]->column_name; goto LWeXl; ZxYD2: if (!($i < $c)) { goto EECC0; } goto zxoT2; zxoT2: $retval[$i] = new stdClass(); goto jMe2l; P1mHW: $retval[$i]->collation = $query[$i]->collation_name; goto Lo5pj; ZFkET: $retval[$i]->default = $query[$i]->column_default; goto WGpAP; uLlgk: $retval = array(); goto jFJzz; USDyF: SrmiW: goto ZxYD2; jFJzz: $i = 0; goto SiuAH; GAwL3: Fwjkm: goto DtqlQ; SYvGy: $fields = FALSE; goto Tkb1A; mtedK: $retval[$i]->primary = $query[$i]->column_key; goto QwjNa; BstdB: $retval[$i]->nullable = $query[$i]->is_nullable; goto mtedK; SiuAH: $c = count($query); goto USDyF; GKE_P: $retval[$i]->type = $query[$i]->data_type; goto P1mHW; JQ4gY: $fields[$table] = (object) ["\164\141\x62\154\x65\x5f\x6e\141\155\x65" => $table, "\x63\157\154\165\155\156\x73" => $retval]; goto GAwL3; LWeXl: $retval[$i]->col_type = $query[$i]->column_type; goto GKE_P; QwjNa: w7EZ6: goto JotsH; xHEHl: if (!(($query = $this->db->query($sql)) === FALSE)) { goto a9OGk; } goto SYvGy; DtqlQ: } goto biixY; q3MBe: $data = ["\x66\151\x65\x6c\144\x73" => $fields, "\143\162\x65\x61\x74\x65\x5f\164\x61\142\154\145\x73" => $create_tables, "\143\x6f\165\x6e\x74\x5f\x74\x62\154" => count($create_tables), "\x61\144\144\x5f\143\157\154\x75\155\x6e\x73\x5f\x74\x6f\x5f\164\x61\x62\154\145" => $add_columns, "\143\x6f\x75\156\x74\x5f\x63\x6f\x6c" => count($add_columns), "\x65\144\151\x74\137\x63\157\x6c\x75\x6d\156\163" => $edit_columns, "\143\x6f\165\x6e\164\x5f\x6d\x6f\x64" => count($edit_columns), "\141\x64\144\137\164\142\154" => $this->encryption->encrypt(json_encode($script_create_table)), "\x61\144\144\x5f\x63\x6f\154" => $this->encryption->encrypt(json_encode($script_create_column)), "\x6d\157\x64\x5f\x63\x6f\154" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto bISTs; DbNOj: $json = file_get_contents("\56\x2f\x61\163\x73\145\x74\x73\x2f\141\x70\x70\57\x64\x62\57\144\141\x74\141\x62\141\163\x65\x2e\x6a\163\x6f\156"); goto e99I4; fYdC5: $tbl_ada = array_keys($fields); goto cgngh; bISTs: $this->output_json($data); goto vGdV6; xDbpg: $json = (array) $json; goto OVdOy; OVdOy: $tbl_seharusnya = array_keys($json); goto fYdC5; MJrTT: $script_edit_column = []; goto QnNNF; RtbtO: $tabless = $this->db->list_tables(); goto XvYbs; XvYbs: $fields = []; goto Ato9I; biixY: g4wwz: goto DbNOj; TxlzC: $script_create_column = []; goto ywtkP; ywtkP: $edit_columns = []; goto MJrTT; eoX1k: $db_debug = $this->db->db_debug; goto PoAMd; EaC2q: $full_tables = array_unique($full_tables); goto HoTfW; G9Da0: T3rH1: goto jF9sn; Car5i: $add_columns = []; goto TxlzC; QnNNF: foreach ($full_tables as $table) { goto AB3M_; nr83Q: okqd3: goto FKJNy; wSpUU: Vtmzm: goto ZgykY; Y9qU3: Hzqa1: goto j6Yj6; behwM: $script_create_column[$table] = "\101\114\124\105\122\x20\124\x41\102\114\105\40\x60" . $table . "\140\40" . implode("\x2c\x20", $add_column) . "\x3b"; goto nr83Q; bcshc: if (!isset($json[$table])) { goto Vtmzm; } goto iKilJ; iKilJ: $add_column = []; goto FO3ZV; HAnQL: $script_edit_column[$table] = "\101\114\124\105\x52\40\x54\101\x42\114\x45\x20\140" . $table . "\x60\40" . implode("\x2c\x20", $modif_column) . "\73"; goto R1JYC; nNa6_: ttebC: goto nW8dj; FO3ZV: $modif_column = []; goto mbp01; nW8dj: $script .= $pri . "\x29\x20\105\116\107\111\x4e\105\75\111\156\156\157\x44\x42\x20\x44\105\x46\x41\x55\x4c\124\x20\103\110\x41\x52\x53\x45\x54\75\x75\164\x66\70\155\142\x34\73"; goto PRnVy; BKzkp: foreach ($json[$table]->columns as $column) { goto kyDa6; W0VJv: rzRgu: goto RehHh; rDjFE: $nullable = $column->nullable == "\116\x4f" ? "\x20\116\117\124\40\x4e\125\x4c\114" : ''; goto UB0ib; kyDa6: if ($column->max_length == null) { goto ga0LZ; } goto Ib962; KjY2z: goto FKTBw; goto yoGOE; BYDV4: $comment = $column->comment == '' ? '' : "\x20\x43\117\x4d\115\105\116\x54\40\47" . $column->comment . "\x27"; goto eVrTB; NhBJU: FKTBw: goto YpgkJ; uQ85J: if ($column->type == "\151\156\x74") { goto gj1LU; } goto jpItH; x6gJ2: bDdv7: goto uQ85J; yoGOE: gj1LU: goto BwxVV; m_vfC: $pri .= $column->primary != '' ? "\x50\122\111\115\101\122\x59\x20\113\105\131\x20\50\140" . $column->name . "\140\x29" : ''; goto W0VJv; wygEK: $extra = $column->extra == '' ? '' : "\x20" . strtoupper($column->extra); goto BYDV4; UB0ib: $default = $column->default == null ? '' : "\x20\x44\x45\x46\101\125\x4c\124\40" . $column->default; goto wygEK; p3Vj4: ga0LZ: goto LI2hm; LI2hm: $length = ''; goto a7HYS; YpgkJ: cR7lR: goto rDjFE; jpItH: $length = "\x28" . $column->max_length . "\x29"; goto KjY2z; eVrTB: $script .= "\x60" . $column->name . "\x60\x20" . $column->type . $length . $nullable . $default . $extra . $comment . "\x2c\40"; goto m_vfC; pJ4W5: goto cR7lR; goto p3Vj4; Ib962: if ($column->type != "\x6c\157\156\x67\x74\x65\170\x74" && $column->type != "\155\x65\144\x69\x75\155\164\145\170\164" && $column->type != "\x74\145\x78\164") { goto bDdv7; } goto knb1d; knb1d: $length = ''; goto pJ4W5; BwxVV: $length = "\50" . ($column->max_length + 1) . "\51"; goto NhBJU; a7HYS: goto cR7lR; goto x6gJ2; RehHh: } goto nNa6_; Hszpr: Atsma: goto RNXE4; AB3M_: if (!$this->db->table_exists($table)) { goto m9B01; } goto bcshc; j6Yj6: if (!(count($add_column) > 0)) { goto okqd3; } goto behwM; RNXE4: t0B7N: goto IK3H7; mbp01: foreach ($json[$table]->columns as $jtbl) { goto U9d4D; wq2wF: goto Q9gPt; goto yJZu_; JlwUY: array_push($add_column, "\x41\104\104\x20\x60" . $jtbl->name . "\x60\x20" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto nw2Bx; JuMPE: goto AGtBW; goto HEN2G; xgYwl: $length = ''; goto Rc56Q; KpMnA: if (!(strtoupper($extra) == "\40\x41\125\x54\x4f\137\x49\116\x43\122\105\115\105\116\124")) { goto RY2kX; } goto AdeVX; C1aGn: Lgore: goto TXas8; HulDc: $length = ''; goto wq2wF; UApd_: if ($jtbl->max_length == null) { goto NcvMH; } goto UBzvc; T1YfL: foreach ($fields[$table]->columns as $ftbl) { goto zjddM; E9Tpt: fNQ1M: goto lHBcx; zjddM: if (!($jtbl->name == $ftbl->name)) { goto SgkL4; } goto rZjMf; h3vIL: SVjyW: goto t0xaO; TYG68: J7TRb: goto mnIo3; VRhfO: goto zho1F; goto h3vIL; BQmJv: $jtbl->extra = str_replace("\x28\x29", '', $jtbl->extra); goto p3HF9; SqEZZ: array_push($modif_column, "\115\x4f\104\111\x46\x59\x20\x60" . $jtbl->name . "\x60\x20" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto jFC3i; Pta9f: $ftbl->default = str_replace("\x28\51", '', $ftbl->default); goto wkuM7; WJFw0: $edit_columns[$table][$jtbl->name]["\156\x75\x6c\x6c\141\142\154\x65"] = $jtbl->nullable; goto H8Z58; QZ2Lo: PzqVp: goto FB_xz; Tj8_m: $jtbl->default = strtoupper($jtbl->default); goto xfje2; XTom5: zho1F: goto Wcjtf; rZjMf: if (!($jtbl->col_type != $ftbl->col_type)) { goto XUn8J; } goto PlHKV; jFC3i: Am_3W: goto kVEF0; zoQW6: if (strtolower($jtbl->primary) == "\x70\x72\x69") { goto e0Gqz; } goto KGqxx; npwN3: XUn8J: goto CvDYR; p3HF9: $jtbl->extra = strtoupper($jtbl->extra); goto E9Tpt; rfAEP: $edit_columns[$table][$jtbl->name]["\x65\170\164\162\x61"] = $jtbl->extra; goto AAMbO; EiJVG: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto Am_3W; } goto M0ecA; oJhk3: $edit_columns[$table][$jtbl->name]["\143\157\x6d\x6d\x65\156\x74"] = $jtbl->comment; goto dbaBB; fEqyW: if (!($ftbl->default != null)) { goto J7TRb; } goto Pta9f; JckDb: $ftbl->extra = str_replace("\50\x29", '', $ftbl->extra); goto SOcR0; v3Rpc: wFO46: goto qSXMu; WDwPd: e0Gqz: goto dgBlf; dgBlf: array_push($modif_column, "\x41\x44\x44\40\120\122\111\x4d\101\x52\131\40\x4b\x45\131\40\x28\140" . $jtbl->name . "\140\51"); goto VRhfO; TEIFv: $comment = $jtbl->comment == '' ? '' : "\x20\x43\x4f\115\x4d\105\116\x54\x20\x27" . $jtbl->comment . "\47"; goto SqEZZ; KYytH: if (!($jtbl->default != null)) { goto Z9oCM; } goto GPi6W; qSXMu: if (!($jtbl->extra != null)) { goto fNQ1M; } goto BQmJv; SOcR0: $ftbl->extra = strtoupper($ftbl->extra); goto afsfY; xfje2: Z9oCM: goto fEqyW; kVEF0: SgkL4: goto QZ2Lo; t0xaO: array_push($modif_column, "\x41\104\x44\40\x55\116\x49\x51\125\x45\40\113\105\131\40\140" . $jtbl->name . "\140\x20\50\140" . $jtbl->name . "\140\51"); goto XTom5; mnIo3: if (!($jtbl->default != $ftbl->default)) { goto wFO46; } goto zplR7; GPi6W: $jtbl->default = str_replace("\x28\51", '', $jtbl->default); goto Tj8_m; AAMbO: HGWPv: goto ZayDW; oeL5_: $default = $jtbl->default == null ? '' : "\x20\104\105\x46\101\x55\114\124\40" . $jtbl->default; goto xYDNd; PlHKV: $edit_columns[$table][$jtbl->name]["\143\x6f\x6c\137\164\x79\x70\x65"] = $jtbl->col_type; goto npwN3; Wcjtf: o_pTE: goto EiJVG; H8Z58: batBk: goto KYytH; ZayDW: if (!($jtbl->comment != $ftbl->comment)) { goto wi0No; } goto oJhk3; J9kYv: goto zho1F; goto WDwPd; OPkyR: if (!($jtbl->primary != $ftbl->primary)) { goto o_pTE; } goto PzaXg; dbaBB: wi0No: goto OPkyR; M0ecA: $nullable = $jtbl->nullable == "\x4e\x4f" ? "\40\x4e\x4f\x54\x20\x4e\x55\x4c\x4c" : ''; goto oeL5_; afsfY: k39hn: goto p9_a7; KGqxx: if (strtolower($jtbl->primary) == "\x75\x6e\x69") { goto SVjyW; } goto J9kYv; wkuM7: $ftbl->default = strtoupper($ftbl->default); goto TYG68; PzaXg: $edit_columns[$table][$jtbl->name]["\x70\x72\x69\155\141\162\x79"] = $jtbl->primary; goto zoQW6; CvDYR: if (!($jtbl->nullable != $ftbl->nullable)) { goto batBk; } goto WJFw0; lHBcx: if (!($ftbl->extra != null)) { goto k39hn; } goto JckDb; p9_a7: if (!($jtbl->extra != $ftbl->extra)) { goto HGWPv; } goto rfAEP; zplR7: $edit_columns[$table][$jtbl->name]["\x64\145\x66\x61\165\x6c\164"] = $jtbl->default; goto v3Rpc; xYDNd: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto TEIFv; FB_xz: } goto C1aGn; TXas8: nN6jc: goto e2e81; UBzvc: if ($jtbl->type != "\x6c\x6f\156\147\x74\x65\x78\164" && $jtbl->type != "\x6d\145\x64\151\165\x6d\164\x65\170\x74" && $jtbl->type != "\x74\x65\170\164") { goto O2H1D; } goto HulDc; HEN2G: n1F2G: goto n8eZk; FqfnS: $comment = $jtbl->comment == '' ? '' : "\x20\x43\117\x4d\115\105\116\124\40\x27" . $jtbl->comment . "\47"; goto JlwUY; wDRNY: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto KpMnA; U9d4D: if ($this->db->field_exists($jtbl->name, $table)) { goto KzPAG; } goto P3Rtg; AdeVX: $extra .= "\x20\x50\x52\x49\x4d\x41\122\131\x20\x4b\105\131"; goto hpUzK; acgPR: $length = "\x28" . $jtbl->max_length . "\51"; goto JuMPE; P3Rtg: $add_columns[$table][] = $jtbl; goto UApd_; bF2vM: $default = $jtbl->default == null ? '' : "\x20\104\105\x46\101\x55\114\x54\x20" . $jtbl->default; goto wDRNY; FU8kf: O2H1D: goto QZP6e; Rc56Q: goto Q9gPt; goto FU8kf; n8eZk: $length = "\x28" . ($jtbl->max_length + 1) . "\51"; goto FxnrL; hpUzK: RY2kX: goto FqfnS; UyLg0: $nullable = $jtbl->nullable == "\x4e\117" ? "\x20\116\117\124\x20\x4e\125\114\x4c" : ''; goto bF2vM; uTOtP: Q9gPt: goto UyLg0; QZP6e: if ($jtbl->type == "\x69\156\164") { goto n1F2G; } goto acgPR; FxnrL: AGtBW: goto uTOtP; yJZu_: NcvMH: goto xgYwl; nw2Bx: KzPAG: goto T1YfL; e2e81: } goto Y9qU3; g5U8F: $pri = ''; goto BKzkp; PRnVy: $script_create_table[$table] = $script; goto Hszpr; BPMZI: m9B01: goto w7rnL; R1JYC: iePDq: goto wSpUU; FKJNy: if (!(count($modif_column) > 0)) { goto iePDq; } goto HAnQL; w7rnL: $create_tables[] = $json[$table]; goto CkV5h; ZgykY: goto Atsma; goto BPMZI; CkV5h: $script = "\x43\x52\105\x41\x54\105\x20\x54\x41\x42\x4c\105\40\x60" . $table . "\140\x20\50"; goto g5U8F; IK3H7: } goto G9Da0; PoAMd: $this->db->db_debug = FALSE; goto RtbtO; SSARz: $script_create_table = []; goto Car5i; vGdV6: } public function createTable() { goto LL16b; GsqK0: foreach ($scripts as $script) { $queries .= $script; WMhvT: } goto BrdHD; bOThy: $queries = ''; goto GsqK0; Bqy8f: sleep(1); goto lPmBi; LL16b: $scripts = $this->input->post("\144\141\x74\x61", true); goto Drs4x; Drs4x: str_replace("\x25\62\102", "\x2b", $scripts); goto Bqy8f; QnbbJ: $this->output_json($data); goto J9iBt; gToFm: $data["\x6d\145\163\x73\x61\x67\145"] = "\125\x70\x64\x61\164\145\40\153\x6f\154\x6f\155"; goto QnbbJ; v5TRJ: $data["\163\x75\x63\143\x65\163\163"] = $this->runQuery($queries); goto gToFm; BrdHD: D_En4: goto v5TRJ; lPmBi: $scripts = json_decode($this->encryption->decrypt($scripts)); goto bOThy; J9iBt: } public function createColumn() { goto W1O1c; KzEJH: $queries = ''; goto riGGl; cg11g: if (!(strpos("\x60\x75\x69\144\x60", $queries) !== false)) { goto wBUng; } goto COGz9; lq5Q4: aIwHO: goto cg11g; UPfE5: sleep(1); goto p3E05; W1O1c: $scripts = $this->input->post("\144\141\164\x61", true); goto LPMxk; p3E05: $scripts = json_decode($this->encryption->decrypt($scripts)); goto KzEJH; v1uwF: wBUng: goto bB1o6; c9_DX: $data["\155\x65\x73\163\x61\147\145"] = "\x4d\x6f\x64\x69\x66\x79\x20\x6b\157\x6c\x6f\155"; goto dtlfs; bB1o6: $data["\x73\x75\x63\x63\145\x73\x73"] = $this->runQuery($queries); goto c9_DX; COGz9: $this->updateUID(); goto v1uwF; dtlfs: $this->output_json($data); goto Y8Eyr; LPMxk: str_replace("\x25\x32\102", "\53", $scripts); goto UPfE5; riGGl: foreach ($scripts as $script) { $queries .= $script; cuzkx: } goto lq5Q4; Y8Eyr: } public function editColumn() { goto yBNh1; dt3Cv: str_replace("\45\x32\x42", "\x2b", $scripts); goto pX4_D; pX4_D: sleep(1); goto x84ds; ieSTB: B9E0x: goto Exicw; f8Asl: $queries = ''; goto GFDxG; KstkY: $this->output_json($data); goto Atdda; x84ds: $scripts = json_decode($this->encryption->decrypt($scripts)); goto f8Asl; GFDxG: foreach ($scripts as $script) { $queries .= $script; x4kaN: } goto ieSTB; yBNh1: $scripts = $this->input->post("\x64\x61\x74\141", true); goto dt3Cv; Exicw: $data["\163\165\143\143\145\x73\x73"] = $this->runQuery($queries); goto eW_Lr; eW_Lr: $data["\155\x65\163\163\x61\147\145"] = "\x55\x70\x64\141\164\145\x20\163\x65\154\x65\163\141\151"; goto KstkY; Atdda: } function runQuery($script) { goto iCFR3; E3gd3: return true; goto M1vZA; Zd3VN: $mysqli->close(); goto E3gd3; Zoiuv: $hostpass = $this->db->password; goto qO10P; b3BJz: $mysqli->multi_query($script); goto Zd3VN; rqCSZ: $hostuser = $this->db->username; goto Zoiuv; BRNQY: MnmeJ: goto b3BJz; qO10P: $database = $this->db->database; goto jT7zb; yuLwH: if (!mysqli_connect_errno()) { goto MnmeJ; } goto sRo58; jT7zb: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto yuLwH; sRo58: return mysqli_connect_errno(); goto BRNQY; iCFR3: $hostname = $this->db->hostname; goto rqCSZ; M1vZA: } function updateUID() { goto Fqe_P; XzX8n: uMhIo: goto sEukq; sEukq: return $this->db->update_batch("\x6d\x61\163\x74\145\x72\x5f\163\x69\x73\167\141", $input, "\151\144\137\x73\x69\x73\x77\141"); goto BKTt3; vBDXQ: foreach ($siswas as $siswa) { $input[] = array("\x69\144\x5f\163\151\x73\167\x61" => $siswa->id_siswa, "\x75\151\x64" => $this->uuid->v4()); HPezF: } goto XzX8n; WncJb: $siswas = $this->db->get("\x6d\141\x73\x74\x65\162\137\x73\x69\x73\167\141")->result(); goto U3Ve7; U3Ve7: $input = array(); goto vBDXQ; Fqe_P: $this->load->library("\125\x75\x69\144", "\165\165\x69\144"); goto WncJb; BKTt3: } function make_base() { } }
