<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\x42\x41\x53\x45\120\101\x54\110") or exit("\116\157\40\144\151\162\145\x63\164\40\x73\x63\x72\151\160\164\40\x61\143\x63\x65\163\x73\x20\x61\154\154\157\167\145\144"); class Update extends CI_Controller { function __construct() { goto Fchdv; Fchdv: parent::__construct(); goto sxAxy; UHlRU: $this->load->library("\145\156\x63\x72\x79\x70\x74\x69\x6f\156"); goto se8vP; bI6Qr: $this->load->database(); goto UHlRU; sxAxy: include APPPATH . "\x63\157\156\146\x69\x67\57\x64\x61\x74\141\x62\141\163\145\56\160\x68\160"; goto B5dyJ; B5dyJ: $this->load->dbforge(); goto bI6Qr; se8vP: } public function output_json($data, $encode = true) { goto BD1A9; ftcL7: $this->output->set_content_type("\x61\160\x70\x6c\x69\x63\141\x74\151\157\156\x2f\x6a\163\x6f\156")->set_output($data); goto PRncF; LxcUX: $data = json_encode($data); goto BpLH6; BD1A9: if (!$encode) { goto M_ViR; } goto LxcUX; BpLH6: M_ViR: goto ftcL7; PRncF: } public function index() { goto UafwD; RyHe6: $data["\152\163\x6f\x6e"] = $json; goto D8d3a; D8d3a: $this->load->view("\151\x6e\x73\x74\141\x6c\154\57\x68\x65\x61\x64\x65\x72", $data); goto QtPj9; YEcaI: $this->load->view("\151\x6e\163\x74\x61\154\154\x2f\146\x6f\x6f\164\x65\x72"); goto ronBS; uMPQ9: $json = json_decode($json); goto LxP2x; LxP2x: $json = (array) $json; goto RyHe6; UafwD: $json = file_get_contents("\56\57\x61\x73\163\x65\x74\x73\57\x61\160\x70\x2f\x64\142\57\144\x61\164\141\142\x61\x73\145\56\152\x73\x6f\156"); goto uMPQ9; QtPj9: $this->load->view("\151\156\x73\x74\141\154\154\x2f\165\x70\x64\141\x74\x65"); goto YEcaI; ronBS: } function object_to_array($data) { goto HmvHb; F7CEQ: fe9Cg: goto RAXo5; HmvHb: if (!(is_array($data) || is_object($data))) { goto NZ3DN; } goto Mxcnu; RAXo5: return $result; goto Y6nre; zP190: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; CJLb8: } goto F7CEQ; RIMuC: return $data; goto W0Uqr; Y6nre: NZ3DN: goto RIMuC; Mxcnu: $result = []; goto zP190; W0Uqr: } public function checkDatabase() { goto gUU0x; JJ9lU: $currentDb = []; goto wJ8p6; CZv0z: $tbl_baru = array_keys($json); goto FcLwn; qFLJy: $json = (array) $json; goto CZv0z; Z8erC: $fields = []; goto JJ9lU; aQ9i9: $this->output_json($data); goto Fss2V; Ncw__: sort($full_tables); goto vd4Fr; pLjJJ: $json = json_decode($json); goto qFLJy; hIGvz: $add_columns = []; goto JV4Hq; zH0J1: foreach ($full_tables as $table) { goto v2OSr; XrVFC: ZrdtX: goto xfWjm; RppmE: IPJoA: goto k7E9r; MTw2L: foreach ($json[$table] as $jtbl) { goto AWuFD; FTcIE: foreach ($fields[$table] as $ftbl) { goto iCqZj; eKULy: $edit_columns[$table][] = $jtbl; goto impIl; Q_fAm: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto thZf6; } goto eKULy; impIl: thZf6: goto UdCft; UdCft: bhQc0: goto Q0rF6; iCqZj: if (!($jtbl->name == $ftbl->name)) { goto bhQc0; } goto Q_fAm; Q0rF6: bPUrh: goto wf1gr; wf1gr: } goto EocGS; mpTNu: goto U4kbR; goto jDwTw; AWuFD: if ($this->db->field_exists($jtbl->name, $table)) { goto vaIWj; } goto HX3Ju; EocGS: CUv5U: goto EfxcB; jDwTw: vaIWj: goto FTcIE; HX3Ju: $add_columns[$table][] = $jtbl; goto mpTNu; B7i6c: FLcmN: goto aeMo1; EfxcB: U4kbR: goto B7i6c; aeMo1: } goto F17vK; YFSp0: OrS4h: goto Y5ARW; F17vK: aaAHT: goto XrVFC; k7E9r: if (!isset($json[$table])) { goto ZrdtX; } goto MTw2L; VSUwh: goto skYuO; goto RppmE; xfWjm: skYuO: goto YFSp0; VuKT2: $create_tables[$table] = $json[$table]; goto VSUwh; v2OSr: if ($this->db->table_exists($table)) { goto IPJoA; } goto VuKT2; Y5ARW: } goto pjyZx; GJLsI: $data = ["\144\142" => $fields, "\x63\x72\x65\x61\x74\145" => $create_tables, "\155\x6f\144\151\146\171" => $edit_columns, "\x61\144\x64" => $add_columns, "\143\x6f\x75\x6e\164\163" => $counts, "\152\163\157\x6e" => $json, "\x63\x75\x72\x72\x65\x6e\x74" => $currentDb]; goto aQ9i9; tO2Zh: $this->db->db_debug = FALSE; goto KsnlI; ewPgo: M0PsB: goto n2rcJ; JV4Hq: $edit_columns = []; goto zH0J1; oT_zQ: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto GJLsI; KsnlI: $tabless = $this->db->list_tables(); goto Z8erC; FcLwn: $tbl_ada = array_keys($fields); goto Lm8VD; Lm8VD: $full_tables = array_merge($tbl_baru, $tbl_ada); goto l4Lyj; vd4Fr: $create_tables = []; goto hIGvz; wJ8p6: foreach ($tabless as $table) { goto wl9Ef; udKZA: gZfQd: goto ZlTPZ; eWZ7M: $retval[$i] = new stdClass(); goto k2htN; TrtL0: if (!(($query = $this->db->query($sql)) === FALSE)) { goto nVapb; } goto JFz8j; wbs4e: $retval[$i]->extra = $query[$i]->extra; goto gk3vC; jqeo6: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto ggQMh; } goto sATcd; eyYvi: eOpvA: goto qupGS; jfutl: tTnNs: goto Ymklv; Jooxn: $datafld[$i]->extra = $query[$i]->extra; goto k2weq; KGlCj: OWpxC: goto KRySR; k2weq: goto OWpxC; goto jfutl; ZlTPZ: if (!($i < $c)) { goto eOpvA; } goto jqeo6; zVqDl: goto gZfQd; goto eyYvi; Dt1dI: $query = $query->result_object(); goto h0T03; gk3vC: KS5yD: goto FPND3; wl9Ef: $datafld = $this->db->field_data($table); goto qOzRB; FPND3: $i++; goto zVqDl; h0T03: $retval = array(); goto UZCzq; k2htN: $retval[$i]->name = $query[$i]->column_name; goto wbs4e; KRySR: XDBsR: goto wG8hR; InLbo: nVapb: goto Dt1dI; TbdRG: Uc5IU: goto MZq0D; UZCzq: $i = 0; goto virrX; virrX: $c = count($query); goto udKZA; pB52N: $fields[$table] = $datafld; goto TbdRG; sATcd: if (!($query[$i]->extra != '')) { goto XDBsR; } goto WMFKa; Ymklv: $datafld[$i]->auto_increment = true; goto KGlCj; qupGS: $currentDb[$table] = $retval; goto pB52N; JFz8j: $currentDb = FALSE; goto InLbo; wG8hR: ggQMh: goto eWZ7M; WMFKa: if ($query[$i]->extra == "\141\x75\x74\157\137\x69\x6e\143\x72\145\155\145\156\x74") { goto tTnNs; } goto Jooxn; qOzRB: $sql = "\x53\x45\114\105\x43\x54\x20\x60\143\x6f\154\x75\155\x6e\x5f\156\x61\x6d\145\140\x2c\x20\x60\x6e\x75\155\x65\x72\x69\143\x5f\x70\162\x65\143\151\x73\151\x6f\x6e\140\x2c\x20\140\x65\x78\164\x72\x61\x60\54\x20\140\151\163\x5f\x6e\165\154\154\141\x62\x6c\x65\x60" . "\x20\106\x52\x4f\x4d\x20\140\151\x6e\x66\x6f\x72\x6d\x61\164\x69\x6f\156\137\163\143\150\x65\x6d\x61\140\x2e\x60\x63\x6f\154\165\x6d\x6e\x73\x60\x20\x57\x48\105\x52\x45\x20\164\x61\142\154\145\137\x73\x63\x68\x65\155\141\x20\x3d\40\42" . $this->db->database . "\42\x20\x41\116\x44\40\164\x61\142\x6c\145\x5f\x6e\141\155\145\x20\75\x20\42" . $table . "\42"; goto TrtL0; MZq0D: } goto ewPgo; n2rcJ: $json = file_get_contents("\56\x2f\x61\x73\x73\145\x74\x73\57\x61\x70\160\x2f\144\142\57\144\141\164\x61\142\x61\163\145\x2e\152\x73\x6f\x6e"); goto pLjJJ; gUU0x: $db_debug = $this->db->db_debug; goto tO2Zh; pjyZx: dDTNh: goto oT_zQ; l4Lyj: $full_tables = array_unique($full_tables); goto Ncw__; Fss2V: } public function updateDatabase() { goto rZ8_Y; yGbFV: $tbl_baru = array_keys($json); goto IBXvH; iS80f: $full_tables = array_unique($full_tables); goto ox0T_; tMVX_: $full_tables = array_merge($tbl_baru, $tbl_ada); goto iS80f; uOvf5: $json = file_get_contents("\56\x2f\141\163\163\145\164\163\57\x61\x70\x70\57\144\x62\57\x64\x61\164\x61\142\x61\x73\145\56\x6a\163\157\x6e"); goto ji0re; lfMeY: echo true; goto LgFtY; rZ8_Y: $tabless = $this->db->list_tables(); goto UvF7l; lTwwi: R2hYk: goto uOvf5; ji0re: $json = json_decode($json); goto g8MKY; GAnYD: foreach ($full_tables as $table) { goto Zrgh5; Z8tqz: mi0BK: goto uZoBE; H7D3F: zLHrg: goto lOCGo; uZoBE: goto zLHrg; goto BioZH; Zrgh5: if ($this->db->table_exists($table)) { goto hfafP; } goto XZmnE; JhtAG: if (!isset($json[$table])) { goto tFuW6; } goto MG5H_; PdgjP: tFuW6: goto H7D3F; XZmnE: if (!isset($json[$table])) { goto mi0BK; } goto OFceV; xB_MH: IY1fF: goto q72vY; q72vY: $this->dbforge->create_table($table, TRUE); goto SJrMS; SJrMS: $this->db->query("\101\114\124\105\x52\40\124\x41\x42\x4c\105\40\x20\140" . $table . "\140\x20\105\x4e\x47\x49\x4e\x45\40\x3d\x20\111\156\156\x6f\104\102"); goto Z8tqz; lOCGo: KgI3K: goto MvcoS; OFceV: foreach ($json[$table] as $tbl => $jtbl) { goto Oybbl; drXN_: $this->dbforge->add_key($jtbl->name, true); goto X2CbR; X2CbR: IKwaP: goto O2Ftu; Oybbl: $field = [$jtbl->name => ["\x74\x79\x70\145" => $jtbl->type, "\143\157\156\x73\164\x72\x61\151\x6e\x74" => $jtbl->max_length, "\x6e\165\154\x6c" => $jtbl->primary_key == 0]]; goto iiimG; iiimG: $this->dbforge->add_field($field); goto wq7Zt; wq7Zt: if (!($jtbl->primary_key == 1)) { goto IKwaP; } goto drXN_; O2Ftu: TFA5a: goto F_AmP; F_AmP: } goto xB_MH; qbbDt: StQm5: goto PdgjP; BioZH: hfafP: goto JhtAG; MG5H_: foreach ($json[$table] as $jtbl) { goto KS1EW; h3O27: goto MlWY6; goto DVS0W; Ysbqh: MlWY6: goto Zkp43; DVS0W: xhAIn: goto Jl9J9; KvAoC: foreach ($fields[$table] as $ftbl) { goto RqNBH; rbF2N: $this->dbforge->modify_column($table, $field); goto QQtku; C_EJh: $field = array($jtbl->name => array("\164\x79\x70\x65" => $jtbl->type, "\143\x6f\156\163\164\162\141\x69\x6e\x74" => $jtbl->max_length, "\x64\145\146\x61\x75\x6c\164" => $jtbl->default)); goto N1w5q; aI7qB: if ($jtbl->primary_key == 0) { goto azRWr; } goto r9omC; c2U7V: L7wj7: goto X38Ag; QG8WM: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto RQQh2; } goto aI7qB; makfl: azRWr: goto wn0eG; NN6ga: $onUpdate = isset($jtbl->extra) ? "\40" . strtolower($jtbl->extra) : ''; goto FYZ3w; uhdHZ: RQQh2: goto IHw8l; CxOCe: $this->dbforge->modify_column($table, $field); goto k9X3L; N1w5q: goto ipMdn; goto P3hSc; k9X3L: goto wNuKh; goto makfl; kIkyg: $field = array($jtbl->name => array("\x74\x79\x70\145" => $jtbl->type, "\143\157\x6e\x73\x74\x72\x61\151\156\164" => $jtbl->max_length, "\x6e\165\154\154" => false)); goto JOMoY; wn0eG: if ($jtbl->default == "\103\x55\x52\x52\x45\x4e\124\x5f\124\x49\x4d\x45\x53\x54\x41\x4d\x50") { goto AVySi; } goto C_EJh; FYZ3w: $field = array($jtbl->name . "\x20\144\x61\164\145\x74\151\x6d\145\40\144\x65\x66\141\x75\x6c\164\x20\143\165\162\162\x65\156\x74\x5f\164\x69\155\145\163\164\x61\x6d\160" . $onUpdate); goto ne1x_; JOMoY: goto L7wj7; goto R_SRn; ne1x_: ipMdn: goto rbF2N; IHw8l: pj20a: goto PDXAk; RqNBH: if (!($jtbl->name == $ftbl->name)) { goto pj20a; } goto QG8WM; r9omC: if ($jtbl->auto_increment == true) { goto eQ4Ov; } goto kIkyg; P3hSc: AVySi: goto NN6ga; tUF8b: $field = array($jtbl->name => array("\x74\x79\160\x65" => $jtbl->type, "\143\157\156\x73\164\162\141\151\156\x74" => $jtbl->max_length, "\x6e\165\154\x6c" => false, "\141\x75\x74\157\x5f\151\156\143\162\145\155\145\156\x74" => true)); goto c2U7V; R_SRn: eQ4Ov: goto tUF8b; X38Ag: $this->dbforge->add_key($jtbl->name, true); goto CxOCe; PDXAk: hKa7S: goto ppF0U; QQtku: wNuKh: goto uhdHZ; ppF0U: } goto ECRrY; sS2kv: pHthd: goto sSHtF; yhxAK: $this->dbforge->add_column($table, $field); goto Ysbqh; tRSxm: if ($jtbl->primary_key == 0) { goto xhAIn; } goto BUm18; VoBWq: $this->dbforge->add_key($jtbl->name, true); goto osOWj; osOWj: $this->dbforge->add_column($table, $field); goto h3O27; BUm18: $field = array($jtbl->name => array("\x74\171\160\145" => $jtbl->type, "\143\x6f\x6e\x73\x74\162\141\x69\156\x74" => $jtbl->max_length, "\x6e\165\154\x6c" => false)); goto VoBWq; KS1EW: if ($this->db->field_exists($jtbl->name, $table)) { goto JsXak; } goto tRSxm; TOfTd: HVESk: goto sS2kv; ECRrY: cu5ks: goto TOfTd; Zkp43: goto HVESk; goto cMIf9; Jl9J9: $field = array($jtbl->name => array("\164\x79\160\x65" => $jtbl->type, "\143\157\x6e\163\x74\162\141\151\x6e\x74" => $jtbl->max_length, "\x64\x65\146\141\165\154\164" => $jtbl->default)); goto yhxAK; cMIf9: JsXak: goto KvAoC; sSHtF: } goto qbbDt; MvcoS: } goto iqTz1; ox0T_: sort($full_tables); goto GAnYD; CEtdn: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); D_8hv: } goto lTwwi; iqTz1: U8z41: goto lfMeY; g8MKY: $json = (array) $json; goto yGbFV; UvF7l: $fields = []; goto CEtdn; IBXvH: $tbl_ada = array_keys($fields); goto tMVX_; LgFtY: } public function checkDb() { goto Q0te0; c61oA: $add_columns = []; goto uGWIR; qD5X3: $fields = []; goto MCHow; WQMg7: DVPRj: goto VqOEr; isPiw: $tbl_ada = array_keys($fields); goto Gc2Op; pq9ww: $this->db->db_debug = FALSE; goto S62iY; JhRIM: $json = (array) $json; goto uJdIT; zDLrh: $this->output_json($data); goto Ge_Dj; MCHow: foreach ($tabless as $table) { goto GoiYY; hwnFk: w9i_t: goto RL8T3; c0jCO: $retval[$i]->nullable = $query[$i]->is_nullable; goto QOt_r; XSj2b: $fields[$table] = (object) ["\164\141\x62\x6c\x65\x5f\x6e\141\x6d\x65" => $table, "\x63\x6f\154\165\155\x6e\163" => $retval]; goto t6nTp; Chiob: Etzsb: goto xss3r; k0VF4: $retval[$i]->default = $query[$i]->column_default; goto ybQVc; Dm4Rv: if (!(($query = $this->db->query($sql)) === FALSE)) { goto Etzsb; } goto BLqv1; t6nTp: mYI00: goto Qz85D; ybQVc: $retval[$i]->comment = $query[$i]->column_comment; goto RU1w9; QOt_r: $retval[$i]->primary = $query[$i]->column_key; goto DzJRO; BLqv1: $fields = FALSE; goto Chiob; VBesb: $retval[$i]->collation = $query[$i]->collation_name; goto pwfkO; vLGIG: $retval[$i]->col_type = $query[$i]->column_type; goto dmwqB; pwfkO: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto k0VF4; RL8T3: if (!($i < $c)) { goto BIram; } goto pl43D; rmouk: $i++; goto baYJF; RZUKX: $retval[$i]->name = $query[$i]->column_name; goto vLGIG; stWXE: $c = count($query); goto hwnFk; pl43D: $retval[$i] = new stdClass(); goto RZUKX; DzJRO: URoag: goto rmouk; HYDrn: BIram: goto XSj2b; xsJLF: $retval = array(); goto VYSBu; GoiYY: $sql = "\123\105\x4c\x45\x43\x54\x20\x60\143\157\x6c\x75\x6d\156\x5f\156\x61\155\x65\x60\x2c\x20\140\x63\x6f\154\x75\155\x6e\137\164\x79\x70\145\140\54\x20\x60\x63\x6f\x6c\154\x61\x74\x69\157\156\137\x6e\x61\155\x65\140\54\40\140\x64\141\164\x61\x5f\x74\171\x70\x65\x60\x2c\x20\140\143\150\141\x72\141\x63\164\x65\x72\137\155\x61\x78\151\x6d\165\155\137\154\145\x6e\147\164\x68\140\x2c\40\140\x6e\165\x6d\145\162\x69\143\x5f\x70\162\145\143\x69\163\x69\x6f\156\140\54" . "\40\x60\x63\157\154\165\155\156\x5f\144\x65\x66\141\165\154\x74\x60\54\x20\140\x63\157\x6c\165\x6d\x6e\137\x6b\145\x79\140\x2c\x20\x60\x63\157\x6c\165\155\x6e\x5f\143\157\x6d\155\145\156\x74\140\x2c\x20\140\145\x78\164\x72\141\140\54\40\x60\x69\163\137\x6e\x75\x6c\x6c\x61\x62\x6c\145\140\xd\12\x9\x9\x9\x46\122\117\x4d\40\x60\x69\156\146\x6f\162\155\x61\x74\x69\157\x6e\x5f\163\143\x68\x65\155\141\x60\x2e\140\x63\x6f\x6c\165\x6d\156\163\x60\x20\127\x48\x45\x52\x45\x20\164\x61\x62\154\x65\x5f\x73\x63\150\x65\x6d\141\40\75\x20\x22" . $this->db->database . "\42\40\x41\116\104\x20\164\x61\x62\154\145\137\156\x61\155\x65\x20\75\x20\x22" . $table . "\42"; goto Dm4Rv; VYSBu: $i = 0; goto stWXE; dmwqB: $retval[$i]->type = $query[$i]->data_type; goto VBesb; xss3r: $query = $query->result_object(); goto xsJLF; baYJF: goto w9i_t; goto HYDrn; RU1w9: $retval[$i]->extra = $query[$i]->extra; goto c0jCO; Qz85D: } goto J4oV2; VqOEr: $this->db->db_debug = $db_debug; goto JOKgc; uJdIT: $tbl_seharusnya = array_keys($json); goto isPiw; eCGtF: sort($full_tables); goto AILT2; zUwuo: $full_tables = array_unique($full_tables); goto eCGtF; AILT2: $create_tables = []; goto r3IMb; z5U_9: $script_edit_column = []; goto xxTG4; nadF1: $edit_columns = []; goto z5U_9; HJu1A: $json = file_get_contents("\56\57\141\163\163\145\x74\x73\57\141\x70\x70\57\x64\142\x2f\x64\x61\x74\x61\x62\141\x73\145\56\x6a\163\157\156"); goto cVLvR; cVLvR: $json = json_decode($json); goto JhRIM; Q0te0: $db_debug = $this->db->db_debug; goto pq9ww; Gc2Op: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto zUwuo; J4oV2: l_iHo: goto HJu1A; S62iY: $tabless = $this->db->list_tables(); goto qD5X3; xxTG4: foreach ($full_tables as $table) { goto yqK4a; yqK4a: if (!$this->db->table_exists($table)) { goto xy5jx; } goto xsuX1; GoEU7: vKo7w: goto i_4E1; l71zf: foreach ($json[$table]->columns as $column) { goto xis_u; u5Hha: $pri .= $column->primary != '' ? "\120\x52\111\115\101\x52\131\x20\113\x45\131\40\x28\x60" . $column->name . "\x60\x29" : ''; goto LCPyR; zKVNk: goto BP9Wl; goto wWylx; nVLnS: $extra = $column->extra == '' ? '' : "\x20" . strtoupper($column->extra); goto agyMe; iANkB: FGeV1: goto wtdtl; oE3bp: $length = "\x28" . ($column->max_length + 1) . "\x29"; goto iANkB; jQshM: pW4p_: goto Aw1L9; v84NI: $length = ''; goto zKVNk; wtdtl: BP9Wl: goto cnvTO; K4Tht: $script .= "\140" . $column->name . "\x60\40" . $column->type . $length . $nullable . $default . $extra . $comment . "\x2c\40"; goto u5Hha; rEmGP: goto FGeV1; goto YN_Um; LCPyR: sMBuB: goto N8BT2; KDwdI: $length = "\50" . $column->max_length . "\x29"; goto rEmGP; jVobd: $length = ''; goto NZ_WL; NZ_WL: goto BP9Wl; goto jQshM; Aw1L9: if ($column->type == "\x69\156\164") { goto tSAeE; } goto KDwdI; iicBr: if ($column->type != "\x6c\x6f\x6e\147\x74\x65\x78\164" && $column->type != "\155\145\144\x69\x75\155\164\145\170\164" && $column->type != "\164\x65\170\164") { goto pW4p_; } goto v84NI; agyMe: $comment = $column->comment == '' ? '' : "\x20\x43\117\x4d\x4d\105\x4e\x54\x20\x27" . $column->comment . "\47"; goto K4Tht; cnvTO: $nullable = $column->nullable == "\116\117" ? "\x20\x4e\117\x54\x20\x4e\125\x4c\x4c" : ''; goto uWihM; xis_u: if ($column->max_length == null) { goto EUPj4; } goto iicBr; YN_Um: tSAeE: goto oE3bp; wWylx: EUPj4: goto jVobd; uWihM: $default = $column->default == null ? '' : "\40\x44\105\106\x41\x55\x4c\x54\x20" . $column->default; goto nVLnS; N8BT2: } goto EM2xP; YuXXz: $script_create_column[$table] = "\x41\114\124\105\x52\x20\124\101\102\114\105\40\x60" . $table . "\x60\40" . implode("\54\40", $add_column) . "\x3b"; goto JYzvs; ciQ_r: xy5jx: goto hCISu; EM2xP: WwwnG: goto XijEH; ti_Dj: $pri = ''; goto l71zf; WOAtf: foreach ($json[$table]->columns as $jtbl) { goto e0U_s; H2CAN: P1jhp: goto IZ4H1; Rm_4g: $length = ''; goto AWosB; yvQkG: $length = "\x28" . $jtbl->max_length . "\51"; goto rjo6A; N_rgF: jTTOG: goto KEv78; Bsx6T: $comment = $jtbl->comment == '' ? '' : "\x20\x43\117\x4d\x4d\105\x4e\x54\x20\x27" . $jtbl->comment . "\47"; goto Lw4Ch; Lw4Ch: array_push($add_column, "\101\104\104\40\140" . $jtbl->name . "\x60\40" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto a_JVm; qyuNs: $add_columns[$table][] = $jtbl; goto nWZw5; AWosB: goto zQ1BM; goto rPuQC; GSgaS: $default = $jtbl->default == null ? '' : "\x20\x44\105\x46\x41\125\114\x54\40" . $jtbl->default; goto tZ0gf; nWZw5: if ($jtbl->max_length == null) { goto g36y8; } goto SrUcR; rZkv2: qJDai: goto Bsx6T; SrUcR: if ($jtbl->type != "\154\157\x6e\147\164\145\170\x74" && $jtbl->type != "\x6d\x65\x64\x69\165\155\x74\145\170\x74" && $jtbl->type != "\164\x65\x78\x74") { goto M4Hcu; } goto FhO_U; e0U_s: if ($this->db->field_exists($jtbl->name, $table)) { goto ZdWj_; } goto qyuNs; rPuQC: M4Hcu: goto ppCp2; fnKl2: Om9OO: goto AUNUX; XGYKk: $nullable = $jtbl->nullable == "\x4e\x4f" ? "\x20\116\117\124\40\x4e\x55\x4c\x4c" : ''; goto GSgaS; rjo6A: goto Om9OO; goto N_rgF; KEv78: $length = "\x28" . ($jtbl->max_length + 1) . "\x29"; goto fnKl2; ppCp2: if ($jtbl->type == "\x69\x6e\x74") { goto jTTOG; } goto yvQkG; rUbxs: kzDdp: goto H2CAN; tZ0gf: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto XZGEu; FhO_U: $length = ''; goto t5eY3; rHB56: foreach ($fields[$table]->columns as $ftbl) { goto botMN; yaFyq: F7s7f: goto pQ3J2; O5L6E: if (!($ftbl->extra != null)) { goto Pn7_8; } goto yomPB; iRNes: if (!($jtbl->default != $ftbl->default)) { goto xt22G; } goto L9RUv; ew8Hx: $nullable = $jtbl->nullable == "\116\117" ? "\40\x4e\x4f\124\x20\116\x55\x4c\114" : ''; goto m4A_y; yrxvc: $edit_columns[$table][$jtbl->name]["\160\x72\151\x6d\141\x72\x79"] = $jtbl->primary; goto UT48o; iD9e3: if (!($jtbl->comment != $ftbl->comment)) { goto UAVr4; } goto Sa4c0; V260q: UAVr4: goto CoOcG; PLSPd: Pn7_8: goto BiGRe; CoOcG: if (!($jtbl->primary != $ftbl->primary)) { goto ySkbl; } goto yrxvc; uf8g9: if (!($jtbl->nullable != $ftbl->nullable)) { goto gOZMq; } goto dLLbT; pKteu: goto F7s7f; goto VyFP_; yomPB: $ftbl->extra = str_replace("\50\x29", '', $ftbl->extra); goto qUK44; x98EL: syJt0: goto Mvb3C; D1f4T: if (!($jtbl->default != null)) { goto yrU0C; } goto QCrNH; QCrNH: $jtbl->default = str_replace("\50\x29", '', $jtbl->default); goto GGoC_; pyVU_: if (!($ftbl->default != null)) { goto QYX75; } goto QJeUN; obLiI: MdxMA: goto LFm7R; QiqPN: array_push($modif_column, "\115\x4f\104\x49\106\x59\40\x60" . $jtbl->name . "\x60\40" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto x98EL; CZJrQ: if (!($jtbl->col_type != $ftbl->col_type)) { goto pYO8G; } goto ZmHjw; Sa4c0: $edit_columns[$table][$jtbl->name]["\143\x6f\x6d\155\145\156\164"] = $jtbl->comment; goto V260q; v2L8R: $jtbl->extra = str_replace("\x28\x29", '', $jtbl->extra); goto gASa1; botMN: if (!($jtbl->name == $ftbl->name)) { goto XaiM7; } goto CZJrQ; pQ3J2: ySkbl: goto iltEE; KqVQz: if (strtolower($jtbl->primary) == "\165\156\x69") { goto aqJC3; } goto nbegA; kYP2d: yrU0C: goto pyVU_; RgtNy: ouebk: goto iD9e3; IO5Wt: $edit_columns[$table][$jtbl->name]["\x65\x78\x74\162\x61"] = $jtbl->extra; goto RgtNy; iltEE: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto syJt0; } goto ew8Hx; jXncg: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto NLQ7c; pfxcH: if (!($jtbl->extra != null)) { goto kORZP; } goto v2L8R; CkHd2: kORZP: goto O5L6E; nqIZq: gOZMq: goto D1f4T; hf85l: xt22G: goto pfxcH; Mvb3C: XaiM7: goto obLiI; NLQ7c: $comment = $jtbl->comment == '' ? '' : "\x20\x43\117\x4d\x4d\105\116\x54\x20\47" . $jtbl->comment . "\x27"; goto QiqPN; BiGRe: if (!($jtbl->extra != $ftbl->extra)) { goto ouebk; } goto IO5Wt; liCbC: array_push($modif_column, "\101\104\104\40\125\x4e\x49\x51\x55\105\x20\x4b\x45\131\x20\x60" . $jtbl->name . "\140\40\50\140" . $jtbl->name . "\140\51"); goto yaFyq; qiO7Y: QYX75: goto iRNes; VyFP_: aqJC3: goto liCbC; YBMYS: array_push($modif_column, "\x41\x44\x44\x20\120\122\111\x4d\x41\122\131\x20\x4b\x45\x59\x20\50\x60" . $jtbl->name . "\x60\x29"); goto pKteu; L9RUv: $edit_columns[$table][$jtbl->name]["\144\x65\146\x61\x75\x6c\x74"] = $jtbl->default; goto hf85l; iljJD: pYO8G: goto uf8g9; CE3AP: $ftbl->default = strtoupper($ftbl->default); goto qiO7Y; HnxxW: Zo0QS: goto YBMYS; QJeUN: $ftbl->default = str_replace("\x28\51", '', $ftbl->default); goto CE3AP; nbegA: goto F7s7f; goto HnxxW; m4A_y: $default = $jtbl->default == null ? '' : "\40\104\105\106\101\125\x4c\x54\x20" . $jtbl->default; goto jXncg; dLLbT: $edit_columns[$table][$jtbl->name]["\156\x75\x6c\154\x61\x62\x6c\145"] = $jtbl->nullable; goto nqIZq; gASa1: $jtbl->extra = strtoupper($jtbl->extra); goto CkHd2; ZmHjw: $edit_columns[$table][$jtbl->name]["\143\x6f\x6c\137\x74\171\160\145"] = $jtbl->col_type; goto iljJD; qUK44: $ftbl->extra = strtoupper($ftbl->extra); goto PLSPd; UT48o: if (strtolower($jtbl->primary) == "\x70\162\151") { goto Zo0QS; } goto KqVQz; GGoC_: $jtbl->default = strtoupper($jtbl->default); goto kYP2d; LFm7R: } goto rUbxs; o9JkA: g36y8: goto Rm_4g; NeIiu: $extra .= "\40\120\122\x49\115\101\122\131\x20\113\x45\131"; goto rZkv2; a_JVm: ZdWj_: goto rHB56; AUNUX: zQ1BM: goto XGYKk; XZGEu: if (!(strtoupper($extra) == "\40\x41\x55\x54\x4f\137\111\x4e\x43\x52\105\115\105\x4e\x54")) { goto qJDai; } goto NeIiu; t5eY3: goto zQ1BM; goto o9JkA; IZ4H1: } goto ugrdI; hDNXw: if (!(count($add_column) > 0)) { goto x88Bx; } goto YuXXz; zpcWB: $add_column = []; goto DwUPM; d0_VP: rpYaj: goto GoEU7; h4PWV: goto rpYaj; goto ciQ_r; DHExZ: Isb3L: goto h4PWV; b44g0: if (!(count($modif_column) > 0)) { goto INnQw; } goto r_sCB; r_sCB: $script_edit_column[$table] = "\x41\114\x54\x45\x52\40\x54\x41\x42\x4c\x45\x20\140" . $table . "\140\x20" . implode("\x2c\x20", $modif_column) . "\x3b"; goto YSUOh; JYzvs: x88Bx: goto b44g0; ugrdI: Td4H2: goto hDNXw; WjXzn: $script = "\103\x52\x45\x41\x54\x45\x20\124\101\x42\114\x45\x20\x60" . $table . "\x60\x20\x28"; goto ti_Dj; DwUPM: $modif_column = []; goto WOAtf; sV2TE: $script_create_table[$table] = $script; goto d0_VP; hCISu: $create_tables[] = $json[$table]; goto WjXzn; XijEH: $script .= $pri . "\51\x20\105\x4e\107\111\x4e\x45\75\111\156\x6e\x6f\104\102\x20\104\x45\106\x41\x55\x4c\x54\40\x43\x48\x41\x52\123\x45\124\75\x75\164\146\x38\155\x62\64\73"; goto sV2TE; xsuX1: if (!isset($json[$table])) { goto Isb3L; } goto zpcWB; YSUOh: INnQw: goto DHExZ; i_4E1: } goto WQMg7; uGWIR: $script_create_column = []; goto nadF1; r3IMb: $script_create_table = []; goto c61oA; JOKgc: $data = ["\x66\x69\x65\154\144\x73" => $fields, "\143\162\x65\141\x74\145\137\x74\141\x62\154\145\x73" => $create_tables, "\143\x6f\165\156\x74\137\164\x62\x6c" => count($create_tables), "\x61\144\x64\x5f\x63\x6f\154\165\x6d\x6e\x73\137\164\x6f\137\x74\141\142\x6c\145" => $add_columns, "\143\x6f\165\156\164\x5f\143\x6f\x6c" => count($add_columns), "\145\x64\151\x74\137\x63\157\x6c\165\155\156\x73" => $edit_columns, "\x63\157\x75\156\x74\x5f\x6d\157\x64" => count($edit_columns), "\x61\x64\144\137\164\x62\x6c" => $this->encryption->encrypt(json_encode($script_create_table)), "\x61\144\144\x5f\x63\157\154" => $this->encryption->encrypt(json_encode($script_create_column)), "\x6d\157\x64\x5f\x63\x6f\154" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto zDLrh; Ge_Dj: } public function createTable() { goto UmBDZ; EhtsC: str_replace("\x25\62\102", "\53", $scripts); goto rMC80; PNT2x: $data["\155\x65\x73\163\x61\147\145"] = "\x55\160\144\x61\164\145\40\x6b\157\x6c\157\x6d"; goto mJeZ9; BGb57: $scripts = json_decode($this->encryption->decrypt($scripts)); goto QEqJF; rMC80: sleep(1); goto BGb57; z1njh: sBEkW: goto yOqSd; QEqJF: $queries = ''; goto Wxrkm; UmBDZ: $scripts = $this->input->post("\144\x61\x74\141", true); goto EhtsC; Wxrkm: foreach ($scripts as $script) { $queries .= $script; XlU28: } goto z1njh; yOqSd: $data["\x73\165\x63\143\x65\x73\163"] = $this->runQuery($queries); goto PNT2x; mJeZ9: $this->output_json($data); goto EQ6Tn; EQ6Tn: } public function createColumn() { goto lWlxx; P_VKg: foreach ($scripts as $script) { $queries .= $script; f0jlX: } goto xHFxF; DXqJr: sleep(1); goto fxGnP; qm3RY: $this->updateUID(); goto QBGDi; R9mJI: $queries = ''; goto P_VKg; gMIxW: $data["\155\145\x73\163\x61\147\145"] = "\x4d\x6f\144\151\146\x79\x20\x6b\157\154\x6f\x6d"; goto MqIyp; fxGnP: $scripts = json_decode($this->encryption->decrypt($scripts)); goto R9mJI; MqIyp: $this->output_json($data); goto CHjoJ; lQp3R: str_replace("\45\62\x42", "\53", $scripts); goto DXqJr; QBGDi: rnf0N: goto G8IOH; ihIvD: if (!(strpos("\140\x75\151\x64\x60", $queries) !== false)) { goto rnf0N; } goto qm3RY; lWlxx: $scripts = $this->input->post("\x64\x61\164\141", true); goto lQp3R; G8IOH: $data["\163\x75\143\x63\x65\163\x73"] = $this->runQuery($queries); goto gMIxW; xHFxF: hr2vF: goto ihIvD; CHjoJ: } public function editColumn() { goto uNHSe; ahD9P: str_replace("\x25\62\102", "\53", $scripts); goto QEgVN; NZ61g: $queries = ''; goto KaOCG; KaOCG: foreach ($scripts as $script) { $queries .= $script; Yn5XN: } goto BxhYg; E6h2E: $this->output_json($data); goto EY8F0; uNHSe: $scripts = $this->input->post("\144\x61\x74\x61", true); goto ahD9P; WMLHV: $data["\163\165\143\143\x65\x73\163"] = $this->runQuery($queries); goto fFRzE; BxhYg: Fkqu1: goto WMLHV; UWw1m: $scripts = json_decode($this->encryption->decrypt($scripts)); goto NZ61g; fFRzE: $data["\x6d\x65\163\163\141\x67\145"] = "\x55\160\x64\x61\x74\145\x20\163\x65\154\145\163\x61\151"; goto E6h2E; QEgVN: sleep(1); goto UWw1m; EY8F0: } function runQuery($script) { goto HrVlj; rNCnE: $mysqli->multi_query($script); goto pfrJu; FQK_5: $hostpass = $this->db->password; goto LDOph; rz39w: lKO5X: goto rNCnE; HrVlj: $hostname = $this->db->hostname; goto jacP2; Gwewk: return true; goto IGuYa; N5ZJa: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto P29TI; pfrJu: $mysqli->close(); goto Gwewk; LDOph: $database = $this->db->database; goto N5ZJa; jacP2: $hostuser = $this->db->username; goto FQK_5; P29TI: if (!mysqli_connect_errno()) { goto lKO5X; } goto N0LR6; N0LR6: return mysqli_connect_errno(); goto rz39w; IGuYa: } function updateUID() { goto gRLRF; Tw1uX: A0zvb: goto NTi7A; qhwwW: foreach ($siswas as $siswa) { $input[] = array("\x69\144\137\163\x69\x73\x77\141" => $siswa->id_siswa, "\x75\151\144" => $this->uuid->v4()); dBpEk: } goto Tw1uX; AaV0p: $siswas = $this->db->get("\155\141\163\x74\x65\x72\137\x73\151\x73\167\x61")->result(); goto DRa_R; DRa_R: $input = array(); goto qhwwW; gRLRF: $this->load->library("\125\x75\151\x64", "\x75\x75\x69\x64"); goto AaV0p; NTi7A: return $this->db->update_batch("\155\x61\x73\164\x65\162\x5f\163\151\x73\x77\x61", $input, "\x69\144\137\x73\151\163\x77\141"); goto ArFE_; ArFE_: } function make_base() { } }
