<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\x42\x41\x53\105\120\101\124\110") or exit("\116\x6f\x20\x64\151\x72\x65\143\164\x20\163\x63\x72\x69\x70\164\x20\141\143\143\x65\163\163\x20\141\x6c\154\157\167\145\x64"); class Update extends CI_Controller { function __construct() { goto O5HhA; BJ1wz: $this->load->library("\x65\x6e\x63\162\171\160\164\151\x6f\156"); goto ttRdE; y7AGF: $this->load->dbforge(); goto mnVQI; O5HhA: parent::__construct(); goto WhWiF; WhWiF: include APPPATH . "\143\x6f\x6e\x66\151\x67\57\x64\x61\x74\x61\142\x61\163\x65\x2e\160\x68\160"; goto y7AGF; mnVQI: $this->load->database(); goto BJ1wz; ttRdE: } public function output_json($data, $encode = true) { goto xzQ1J; h5F0J: zMdfJ: goto NiD9K; NiD9K: $this->output->set_content_type("\141\160\x70\154\x69\143\141\x74\x69\x6f\156\57\x6a\163\x6f\x6e")->set_output($data); goto oPQ7K; xzQ1J: if (!$encode) { goto zMdfJ; } goto IDbHx; IDbHx: $data = json_encode($data); goto h5F0J; oPQ7K: } public function index() { goto ByNFK; ByNFK: $json = file_get_contents("\56\57\x61\163\163\x65\x74\163\x2f\x61\160\160\x2f\144\x62\57\x64\x61\x74\x61\142\x61\163\x65\x2e\x6a\163\157\x6e"); goto OBXw3; cq2N5: $this->load->view("\151\x6e\163\x74\x61\154\154\57\x75\160\x64\141\164\x65"); goto hBo0v; hBo0v: $this->load->view("\x69\x6e\x73\x74\141\x6c\x6c\57\146\x6f\157\164\x65\x72"); goto H2bxr; LrNMk: $data["\152\x73\x6f\x6e"] = $json; goto rWxUz; rWxUz: $this->load->view("\x69\x6e\x73\164\x61\x6c\154\57\150\145\x61\144\145\x72", $data); goto cq2N5; OBXw3: $json = json_decode($json); goto wWmdE; wWmdE: $json = (array) $json; goto LrNMk; H2bxr: } function object_to_array($data) { goto OGBgC; m5WAm: Cgeoj: goto Dzg0V; Dzg0V: return $result; goto TInRL; H48nZ: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; PyT7X: } goto m5WAm; E2Ow3: $result = []; goto H48nZ; OGBgC: if (!(is_array($data) || is_object($data))) { goto rCPdT; } goto E2Ow3; TInRL: rCPdT: goto JaICE; JaICE: return $data; goto yAW_K; yAW_K: } public function checkDatabase() { goto a3iSn; aP110: $json = json_decode($json); goto MAcl4; zFY3k: $tbl_baru = array_keys($json); goto FBjf7; GOQoa: $edit_columns = []; goto wFfye; dHAja: $full_tables = array_merge($tbl_baru, $tbl_ada); goto EBFuT; a3iSn: $db_debug = $this->db->db_debug; goto NLrnT; dnU8r: foreach ($tabless as $table) { goto jxyLh; GTFno: if (!($query[$i]->extra != '')) { goto aRerC; } goto KsyXr; afoc7: F75km: goto tTY3j; x2CrB: RYdAs: goto GTYFq; mojEf: $retval[$i]->extra = $query[$i]->extra; goto x2CrB; jYcTr: tpt5G: goto s668i; jxyLh: $datafld = $this->db->field_data($table); goto WpiOf; TaMwe: goto ZCooh; goto afoc7; XYdo6: if (!(($query = $this->db->query($sql)) === FALSE)) { goto tpt5G; } goto skgzK; gA9NB: YFLQq: goto MkN1f; MkN1f: aRerC: goto hy_BB; KHjme: $retval[$i]->name = $query[$i]->column_name; goto mojEf; WpiOf: $sql = "\123\105\x4c\x45\103\x54\x20\140\x63\157\154\165\x6d\156\x5f\156\141\x6d\x65\140\x2c\40\x60\x6e\x75\155\x65\162\151\143\137\160\162\145\x63\151\x73\151\x6f\x6e\x60\x2c\40\140\145\x78\164\x72\141\x60\x2c\x20\x60\x69\163\137\156\x75\x6c\x6c\141\142\x6c\x65\x60" . "\x20\x46\122\x4f\x4d\40\140\151\156\146\157\162\x6d\141\164\151\157\156\137\x73\143\150\145\155\x61\140\56\x60\x63\x6f\x6c\x75\155\156\163\140\40\x57\110\105\x52\x45\x20\164\x61\x62\154\x65\137\x73\x63\x68\x65\x6d\141\40\x3d\40\x22" . $this->db->database . "\x22\40\x41\x4e\104\40\x74\x61\142\154\x65\137\156\141\155\x65\x20\x3d\x20\x22" . $table . "\x22"; goto XYdo6; V6sK0: $datafld[$i]->auto_increment = true; goto gA9NB; g1pcf: $retval = array(); goto C73LS; GTYFq: $i++; goto TaMwe; hy_BB: jupJ5: goto NpjhT; skgzK: $currentDb = FALSE; goto jYcTr; HOFmG: ZCooh: goto IDZFe; s668i: $query = $query->result_object(); goto g1pcf; EYIz_: $datafld[$i]->extra = $query[$i]->extra; goto KGZZs; iLMaP: Oy3Jm: goto nsW4w; tTY3j: $currentDb[$table] = $retval; goto Z43Zz; eEFYU: qp2bu: goto V6sK0; Z43Zz: $fields[$table] = $datafld; goto iLMaP; gFSNn: $c = count($query); goto HOFmG; KsyXr: if ($query[$i]->extra == "\141\165\x74\157\x5f\x69\156\143\x72\x65\155\145\156\164") { goto qp2bu; } goto EYIz_; WwDSG: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto jupJ5; } goto GTFno; IDZFe: if (!($i < $c)) { goto F75km; } goto WwDSG; C73LS: $i = 0; goto gFSNn; NpjhT: $retval[$i] = new stdClass(); goto KHjme; KGZZs: goto YFLQq; goto eEFYU; nsW4w: } goto Ew9XL; SdesN: $json = file_get_contents("\x2e\x2f\141\x73\x73\145\x74\x73\57\141\x70\160\x2f\x64\142\x2f\x64\141\164\141\142\141\163\x65\x2e\152\163\157\x6e"); goto aP110; p1ajx: $create_tables = []; goto pZ5C_; aPx7A: $tabless = $this->db->list_tables(); goto aGp4x; zOofp: g4g3l: goto BTnq_; pZ5C_: $add_columns = []; goto GOQoa; VRypQ: $this->output_json($data); goto GOdBt; P1tP4: $data = ["\144\x62" => $fields, "\143\x72\x65\x61\164\x65" => $create_tables, "\x6d\157\x64\x69\146\171" => $edit_columns, "\x61\144\x64" => $add_columns, "\x63\157\x75\156\x74\163" => $counts, "\x6a\x73\157\156" => $json, "\143\165\162\162\x65\x6e\x74" => $currentDb]; goto VRypQ; aGp4x: $fields = []; goto Ka0RY; wFfye: foreach ($full_tables as $table) { goto jfUzG; jfUzG: if ($this->db->table_exists($table)) { goto A6gfE; } goto pywe3; FHnIF: HEBFJ: goto hd0cb; Dr1mJ: iBOwb: goto bEBGV; bEBGV: y4D_s: goto Cr4Ni; pywe3: $create_tables[$table] = $json[$table]; goto HIeuq; QXUU2: A6gfE: goto NHq_c; HIeuq: goto x1Psq; goto QXUU2; u2gvY: foreach ($json[$table] as $jtbl) { goto CNB67; LB5es: IVa8N: goto IIUCp; nMafM: $add_columns[$table][] = $jtbl; goto XP7Yk; IIUCp: foreach ($fields[$table] as $ftbl) { goto IiqsX; IMeZv: $edit_columns[$table][] = $jtbl; goto vOvDY; KkUUx: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto e65BU; } goto IMeZv; IiqsX: if (!($jtbl->name == $ftbl->name)) { goto RHSow; } goto KkUUx; AAT01: RHSow: goto Oznji; Oznji: GFadN: goto zwqG9; vOvDY: e65BU: goto AAT01; zwqG9: } goto HfNYg; Dlq0E: UaaGl: goto G0Y1U; CNB67: if ($this->db->field_exists($jtbl->name, $table)) { goto IVa8N; } goto nMafM; HfNYg: qTVAE: goto Dlq0E; G0Y1U: RYBgo: goto m0p_i; XP7Yk: goto UaaGl; goto LB5es; m0p_i: } goto Dr1mJ; NHq_c: if (!isset($json[$table])) { goto y4D_s; } goto u2gvY; Cr4Ni: x1Psq: goto FHnIF; hd0cb: } goto zOofp; gBCqS: sort($full_tables); goto p1ajx; Ew9XL: gkppI: goto SdesN; MAcl4: $json = (array) $json; goto zFY3k; EBFuT: $full_tables = array_unique($full_tables); goto gBCqS; Ka0RY: $currentDb = []; goto dnU8r; BTnq_: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto P1tP4; FBjf7: $tbl_ada = array_keys($fields); goto dHAja; NLrnT: $this->db->db_debug = FALSE; goto aPx7A; GOdBt: } public function updateDatabase() { goto mZ27w; HlU6N: zvYiY: goto Q0q1r; OKQCa: $json = file_get_contents("\x2e\x2f\x61\x73\x73\x65\164\163\x2f\141\x70\160\57\x64\142\x2f\144\141\164\141\x62\x61\163\145\56\152\163\157\x6e"); goto K1fxp; am_UI: $full_tables = array_merge($tbl_baru, $tbl_ada); goto wYY5b; cDjVt: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); ArZV3: } goto bKN9a; wYY5b: $full_tables = array_unique($full_tables); goto qk_Tz; qk_Tz: sort($full_tables); goto be52x; jmyM3: $json = (array) $json; goto mci43; K1fxp: $json = json_decode($json); goto jmyM3; be52x: foreach ($full_tables as $table) { goto cHiCf; UCKUV: foreach ($json[$table] as $tbl => $jtbl) { goto vinrz; f8QpC: v6FeW: goto uBkZn; DsHh_: $this->dbforge->add_key($jtbl->name, true); goto OmkXe; jovVz: $this->dbforge->add_field($field); goto NfeYM; vinrz: $field = [$jtbl->name => ["\164\171\x70\x65" => $jtbl->type, "\x63\157\x6e\x73\x74\162\x61\151\156\164" => $jtbl->max_length, "\156\x75\154\x6c" => $jtbl->primary_key == 0]]; goto jovVz; OmkXe: KvlFl: goto f8QpC; NfeYM: if (!($jtbl->primary_key == 1)) { goto KvlFl; } goto DsHh_; uBkZn: } goto tapMx; f5ZNL: foreach ($json[$table] as $jtbl) { goto FRTtp; bnHfH: MSBIf: goto G5AJH; rN1h_: $this->dbforge->add_column($table, $field); goto SI9UQ; OAWhb: $this->dbforge->add_column($table, $field); goto WyAyw; S1T9D: j1zu6: goto x2WWd; Mk79d: $field = array($jtbl->name => array("\x74\x79\x70\x65" => $jtbl->type, "\143\x6f\x6e\163\164\162\x61\151\x6e\x74" => $jtbl->max_length, "\x6e\165\x6c\154" => false)); goto BA0kg; fSboE: naLyt: goto doZQL; x2WWd: $field = array($jtbl->name => array("\x74\171\160\x65" => $jtbl->type, "\x63\157\156\163\x74\162\141\151\156\x74" => $jtbl->max_length, "\x64\x65\x66\141\165\154\164" => $jtbl->default)); goto rN1h_; G5AJH: Cee1Y: goto e3vxH; EdZvA: vTQlW: goto bnHfH; WyAyw: goto IbGsi; goto S1T9D; FRTtp: if ($this->db->field_exists($jtbl->name, $table)) { goto naLyt; } goto lvOAD; doZQL: foreach ($fields[$table] as $ftbl) { goto vfiue; O0vZv: if ($jtbl->primary_key == 0) { goto DI2M1; } goto TAWOn; cgpaQ: if ($jtbl->default == "\x43\x55\x52\122\105\116\124\x5f\x54\x49\115\x45\123\x54\101\115\120") { goto woWI5; } goto OqWM5; JQc4o: J622j: goto znoIb; I6eHL: $field = array($jtbl->name . "\40\144\x61\x74\x65\x74\x69\155\x65\40\x64\x65\x66\x61\165\154\164\40\143\165\x72\162\x65\156\x74\137\164\151\x6d\x65\163\164\141\155\160" . $onUpdate); goto I6s1E; qiVVL: Q67xk: goto cect9; cect9: A25hM: goto JQc4o; PdcRN: $this->dbforge->modify_column($table, $field); goto wZaGt; Ismp3: DI2M1: goto cgpaQ; wZaGt: P_GKs: goto qiVVL; vsvvn: woWI5: goto lzfY0; mIMth: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto Q67xk; } goto O0vZv; hhXlq: goto ub5TL; goto UuFyK; lzfY0: $onUpdate = isset($jtbl->extra) ? "\x20" . strtolower($jtbl->extra) : ''; goto I6eHL; OqWM5: $field = array($jtbl->name => array("\x74\171\160\x65" => $jtbl->type, "\x63\157\x6e\x73\x74\162\x61\151\156\x74" => $jtbl->max_length, "\x64\x65\146\141\x75\x6c\164" => $jtbl->default)); goto qXjJm; HTpgh: $this->dbforge->modify_column($table, $field); goto DxF8H; vfiue: if (!($jtbl->name == $ftbl->name)) { goto A25hM; } goto mIMth; YW3vy: $this->dbforge->add_key($jtbl->name, true); goto HTpgh; DxF8H: goto P_GKs; goto Ismp3; qXjJm: goto Lb58L; goto vsvvn; Nppui: ub5TL: goto YW3vy; TAWOn: if ($jtbl->auto_increment == true) { goto uWeGh; } goto iwo3w; iwo3w: $field = array($jtbl->name => array("\x74\171\160\x65" => $jtbl->type, "\143\157\x6e\x73\x74\x72\x61\151\x6e\x74" => $jtbl->max_length, "\156\165\x6c\154" => false)); goto hhXlq; UuFyK: uWeGh: goto cETHs; I6s1E: Lb58L: goto PdcRN; cETHs: $field = array($jtbl->name => array("\x74\171\x70\x65" => $jtbl->type, "\x63\157\x6e\x73\x74\162\x61\151\156\x74" => $jtbl->max_length, "\156\165\x6c\x6c" => false, "\141\x75\x74\x6f\137\151\156\143\x72\x65\155\x65\156\x74" => true)); goto Nppui; znoIb: } goto EdZvA; lvOAD: if ($jtbl->primary_key == 0) { goto j1zu6; } goto Mk79d; SI9UQ: IbGsi: goto fzLBF; fzLBF: goto MSBIf; goto fSboE; BA0kg: $this->dbforge->add_key($jtbl->name, true); goto OAWhb; e3vxH: } goto jqBld; ThY0x: YV6eC: goto mRMp0; mRMp0: YTsR2: goto cWTHN; uVQCU: if (!isset($json[$table])) { goto zkgb_; } goto f5ZNL; pqkGs: zI2CN: goto uVQCU; cHiCf: if ($this->db->table_exists($table)) { goto zI2CN; } goto yZgXM; yZgXM: if (!isset($json[$table])) { goto WctZs; } goto UCKUV; gEMhg: goto YV6eC; goto pqkGs; cHEU5: zkgb_: goto ThY0x; WhHmI: WctZs: goto gEMhg; tapMx: OkAiR: goto g4mSb; jqBld: j8JG5: goto cHEU5; FHZWv: $this->db->query("\x41\x4c\x54\105\122\40\124\x41\102\114\x45\40\40\140" . $table . "\x60\x20\x45\116\107\x49\x4e\x45\x20\x3d\40\111\156\x6e\x6f\104\102"); goto WhHmI; g4mSb: $this->dbforge->create_table($table, TRUE); goto FHZWv; cWTHN: } goto HlU6N; mci43: $tbl_baru = array_keys($json); goto AKGfm; AKGfm: $tbl_ada = array_keys($fields); goto am_UI; bKN9a: SusdM: goto OKQCa; c9sUD: $fields = []; goto cDjVt; Q0q1r: echo true; goto VQgCP; mZ27w: $tabless = $this->db->list_tables(); goto c9sUD; VQgCP: } public function checkDb() { goto asm_L; v_bBA: v1wRc: goto WWfsp; asm_L: $db_debug = $this->db->db_debug; goto RXjoO; pxpor: sort($full_tables); goto ZZy3q; TA7HY: $json = (array) $json; goto DtDd2; Eed4U: $edit_columns = []; goto JERMG; vZjs3: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto Ih212; pF1R_: $add_columns = []; goto WoRM0; DtDd2: $tbl_seharusnya = array_keys($json); goto NLKO4; ZZy3q: $create_tables = []; goto zgyYH; Ih212: $full_tables = array_unique($full_tables); goto pxpor; DDakQ: $tabless = $this->db->list_tables(); goto a7uZ9; RXjoO: $this->db->db_debug = FALSE; goto DDakQ; J7a_E: $data = ["\x66\151\145\154\144\163" => $fields, "\143\x72\145\141\x74\x65\x5f\164\141\x62\x6c\145\x73" => $create_tables, "\143\x6f\165\156\x74\x5f\164\x62\x6c" => count($create_tables), "\x61\144\144\x5f\143\x6f\154\165\x6d\156\x73\137\x74\x6f\x5f\x74\141\x62\x6c\x65" => $add_columns, "\143\157\165\x6e\x74\137\x63\157\x6c" => count($add_columns), "\x65\144\151\164\x5f\x63\x6f\154\x75\x6d\156\x73" => $edit_columns, "\x63\157\165\x6e\164\x5f\x6d\x6f\144" => count($edit_columns), "\x61\144\x64\x5f\164\x62\154" => $this->encryption->encrypt(json_encode($script_create_table)), "\x61\144\144\137\143\x6f\154" => $this->encryption->encrypt(json_encode($script_create_column)), "\155\x6f\144\x5f\143\157\x6c" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto X_hFF; WoRM0: $script_create_column = []; goto Eed4U; JERMG: $script_edit_column = []; goto S061_; T5SDd: $json = json_decode($json); goto TA7HY; H7s_4: $this->db->db_debug = $db_debug; goto J7a_E; X_hFF: $this->output_json($data); goto sjp3x; S061_: foreach ($full_tables as $table) { goto wjZ32; i7ZBv: $script_edit_column[$table] = "\x41\114\x54\105\x52\x20\x54\101\x42\x4c\105\40\140" . $table . "\140\x20" . implode("\54\x20", $modif_column) . "\73"; goto kgDwo; wjZ32: if (!$this->db->table_exists($table)) { goto WUS3Z; } goto b_cgH; Jb3Ut: $script_create_column[$table] = "\x41\x4c\124\x45\x52\x20\x54\101\102\114\105\x20\x60" . $table . "\x60\x20" . implode("\54\40", $add_column) . "\x3b"; goto xgTLc; gB_y4: if (!(count($add_column) > 0)) { goto tsx_F; } goto Jb3Ut; Hg_dP: $script_create_table[$table] = $script; goto erOzT; VH9I0: foreach ($json[$table]->columns as $jtbl) { goto Ol4st; TajNw: if ($jtbl->max_length == null) { goto MsgWd; } goto OV0RU; HpB23: CNNAi: goto YBDuu; OV0RU: if ($jtbl->type != "\154\157\156\x67\164\145\x78\x74" && $jtbl->type != "\x6d\145\x64\x69\x75\155\x74\x65\170\164" && $jtbl->type != "\x74\x65\x78\164") { goto i21FQ; } goto IpHzb; H20PE: h_QmX: goto h_BaI; IpHzb: $length = ''; goto Q7kLK; Ol4st: if ($this->db->field_exists($jtbl->name, $table)) { goto wyPTr; } goto GT50C; FfJwb: lHO4p: goto H20PE; NyFYX: array_push($add_column, "\x41\x44\104\x20\x60" . $jtbl->name . "\x60\x20" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto K7yhm; GT50C: $add_columns[$table][] = $jtbl; goto TajNw; RA9Zd: if ($jtbl->type == "\x69\x6e\164") { goto qXzIx; } goto q8wqt; SNP9f: if (!(strtoupper($extra) == "\x20\x41\125\x54\117\x5f\x49\x4e\x43\x52\105\115\x45\116\x54")) { goto kZuq3; } goto mgzCo; Q7kLK: goto h_QmX; goto LdCUr; tutYt: goto h_QmX; goto c6JrR; HpLLO: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto SNP9f; mgzCo: $extra .= "\40\120\122\111\115\101\x52\131\x20\113\x45\131"; goto yCcL0; LdCUr: MsgWd: goto scVJf; scVJf: $length = ''; goto tutYt; pW6tg: goto lHO4p; goto ocSv_; ocSv_: qXzIx: goto zFMEO; zFMEO: $length = "\x28" . ($jtbl->max_length + 1) . "\51"; goto FfJwb; yli5o: $default = $jtbl->default == null ? '' : "\x20\104\105\106\101\x55\x4c\x54\x20" . $jtbl->default; goto HpLLO; q8wqt: $length = "\x28" . $jtbl->max_length . "\51"; goto pW6tg; UD6zB: $comment = $jtbl->comment == '' ? '' : "\40\x43\x4f\x4d\115\x45\x4e\x54\x20\47" . $jtbl->comment . "\47"; goto NyFYX; YBDuu: lulkk: goto y9VoR; K7yhm: wyPTr: goto PnlZg; h_BaI: $nullable = $jtbl->nullable == "\116\117" ? "\40\116\117\124\40\x4e\x55\114\x4c" : ''; goto yli5o; yCcL0: kZuq3: goto UD6zB; c6JrR: i21FQ: goto RA9Zd; PnlZg: foreach ($fields[$table]->columns as $ftbl) { goto Ryp19; Jmod6: fio2U: goto Rkro_; dS9zc: zTLlo: goto PMXJm; iZxUQ: $ftbl->default = strtoupper($ftbl->default); goto nUrxU; FnbAF: I_7xq: goto KbUl1; g7ZtJ: $jtbl->extra = str_replace("\x28\x29", '', $jtbl->extra); goto LD_MP; eyK5b: cIDEO: goto FKz1_; kbTPN: $ftbl->extra = strtoupper($ftbl->extra); goto IvI1K; rLdvx: $edit_columns[$table][$jtbl->name]["\x63\x6f\x6d\x6d\145\156\164"] = $jtbl->comment; goto jsm6m; jUoUG: goto nyzsa; goto eyK5b; PMXJm: if (!($jtbl->comment != $ftbl->comment)) { goto ZX2FX; } goto rLdvx; pccvP: if (!($jtbl->nullable != $ftbl->nullable)) { goto OuFjc; } goto aalYt; TmY3K: UG4xI: goto RXuG2; BS9iU: E0WHD: goto Drw1Z; oxydc: Mq3Dh: goto MR0CY; lR28j: $ftbl->default = str_replace("\50\x29", '', $ftbl->default); goto iZxUQ; KpBWl: $edit_columns[$table][$jtbl->name]["\x65\x78\164\x72\x61"] = $jtbl->extra; goto dS9zc; O3XVq: vpTlW: goto U4Ara; UKIaB: $comment = $jtbl->comment == '' ? '' : "\40\103\117\115\x4d\x45\116\124\40\47" . $jtbl->comment . "\x27"; goto ywm2Y; xR9I7: $default = $jtbl->default == null ? '' : "\x20\x44\105\x46\101\x55\114\124\40" . $jtbl->default; goto rRwZX; jsm6m: ZX2FX: goto MASfu; FKz1_: array_push($modif_column, "\x41\104\x44\x20\125\x4e\111\x51\125\105\40\113\x45\131\40\x60" . $jtbl->name . "\140\40\x28\x60" . $jtbl->name . "\140\x29"); goto TTHDG; LS3ug: $edit_columns[$table][$jtbl->name]["\x63\157\154\x5f\x74\x79\x70\x65"] = $jtbl->col_type; goto OmIPS; QFShy: $jtbl->default = str_replace("\x28\x29", '', $jtbl->default); goto gfLtZ; A1iFo: OuFjc: goto mJRZX; rRwZX: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto UKIaB; nUrxU: PtQXP: goto QDy7F; mJRZX: if (!($jtbl->default != null)) { goto UG4xI; } goto QFShy; MR0CY: if (!($jtbl->extra != null)) { goto E0WHD; } goto g7ZtJ; Drw1Z: if (!($ftbl->extra != null)) { goto Cqlbh; } goto usx3j; Ryp19: if (!($jtbl->name == $ftbl->name)) { goto tg63l; } goto N7QlA; usx3j: $ftbl->extra = str_replace("\x28\x29", '', $ftbl->extra); goto kbTPN; Rkro_: tg63l: goto FnbAF; Zt6l4: $edit_columns[$table][$jtbl->name]["\x70\162\x69\155\x61\162\x79"] = $jtbl->primary; goto KYAav; TTHDG: nyzsa: goto d5ghw; IvI1K: Cqlbh: goto bw0gS; MASfu: if (!($jtbl->primary != $ftbl->primary)) { goto wsS4x; } goto Zt6l4; N7QlA: if (!($jtbl->col_type != $ftbl->col_type)) { goto W3RPJ; } goto LS3ug; LD_MP: $jtbl->extra = strtoupper($jtbl->extra); goto BS9iU; KYAav: if (strtolower($jtbl->primary) == "\x70\x72\x69") { goto vpTlW; } goto nd3mJ; U4Ara: array_push($modif_column, "\101\104\104\x20\120\122\x49\115\x41\122\131\40\113\105\x59\x20\50\140" . $jtbl->name . "\140\x29"); goto jUoUG; ywm2Y: array_push($modif_column, "\x4d\117\x44\111\x46\x59\40\x60" . $jtbl->name . "\x60\x20" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto Jmod6; aalYt: $edit_columns[$table][$jtbl->name]["\156\x75\154\x6c\x61\142\x6c\x65"] = $jtbl->nullable; goto A1iFo; RXuG2: if (!($ftbl->default != null)) { goto PtQXP; } goto lR28j; ojhHm: $edit_columns[$table][$jtbl->name]["\x64\145\x66\x61\x75\154\164"] = $jtbl->default; goto oxydc; bw0gS: if (!($jtbl->extra != $ftbl->extra)) { goto zTLlo; } goto KpBWl; OmIPS: W3RPJ: goto pccvP; gfLtZ: $jtbl->default = strtoupper($jtbl->default); goto TmY3K; nd3mJ: if (strtolower($jtbl->primary) == "\165\x6e\151") { goto cIDEO; } goto KtysM; YxpoO: $nullable = $jtbl->nullable == "\x4e\117" ? "\40\116\117\124\x20\116\x55\114\x4c" : ''; goto xR9I7; pJMM7: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto fio2U; } goto YxpoO; KtysM: goto nyzsa; goto O3XVq; QDy7F: if (!($jtbl->default != $ftbl->default)) { goto Mq3Dh; } goto ojhHm; d5ghw: wsS4x: goto pJMM7; KbUl1: } goto HpB23; y9VoR: } goto n3bNZ; FrdiZ: $create_tables[] = $json[$table]; goto k1100; ssFLA: $add_column = []; goto BWdfW; b_cgH: if (!isset($json[$table])) { goto pCiF2; } goto ssFLA; D1sgT: ZqHwv: goto OgZTt; mJsUu: $pri = ''; goto GFrw3; i6pE4: if (!(count($modif_column) > 0)) { goto d_CvV; } goto i7ZBv; zX3bA: goto zTOw1; goto adWdQ; erOzT: zTOw1: goto WR4Ca; GFrw3: foreach ($json[$table]->columns as $column) { goto Is9Mz; Jgs5U: $length = ''; goto MT0NL; uAy2D: goto uHEJj; goto Eug4c; xw1az: Qumj_: goto dBxH6; Eug4c: J94fp: goto J0L_4; NmXLf: $default = $column->default == null ? '' : "\x20\x44\x45\106\x41\125\x4c\x54\40" . $column->default; goto jbXkl; D_ffY: if ($column->type != "\154\x6f\156\x67\x74\x65\170\x74" && $column->type != "\x6d\145\x64\151\x75\x6d\164\145\170\x74" && $column->type != "\x74\x65\x78\164") { goto nWe7e; } goto WBrGC; Xj2f7: F22W4: goto fJ1Im; ocAnZ: if ($column->type == "\151\156\x74") { goto J94fp; } goto attdc; dBxH6: $nullable = $column->nullable == "\x4e\117" ? "\x20\116\117\x54\40\116\x55\x4c\x4c" : ''; goto NmXLf; Is9Mz: if ($column->max_length == null) { goto DRAcI; } goto D_ffY; wyUJr: $pri .= $column->primary != '' ? "\120\122\111\115\x41\x52\x59\x20\x4b\105\x59\40\50\x60" . $column->name . "\x60\51" : ''; goto Xj2f7; Fa1Rp: $script .= "\x60" . $column->name . "\140\40" . $column->type . $length . $nullable . $default . $extra . $comment . "\54\40"; goto wyUJr; aYgav: DRAcI: goto Jgs5U; MT0NL: goto Qumj_; goto Yb1mt; nVpL6: uHEJj: goto xw1az; J0L_4: $length = "\50" . ($column->max_length + 1) . "\x29"; goto nVpL6; Yb1mt: nWe7e: goto ocAnZ; DBI_i: $comment = $column->comment == '' ? '' : "\40\x43\x4f\x4d\115\105\116\124\x20\x27" . $column->comment . "\47"; goto Fa1Rp; WBrGC: $length = ''; goto GCUQH; GCUQH: goto Qumj_; goto aYgav; jbXkl: $extra = $column->extra == '' ? '' : "\40" . strtoupper($column->extra); goto DBI_i; attdc: $length = "\x28" . $column->max_length . "\x29"; goto uAy2D; fJ1Im: } goto D1sgT; adWdQ: WUS3Z: goto FrdiZ; BWdfW: $modif_column = []; goto VH9I0; WR4Ca: CaObK: goto QG7fz; kgDwo: d_CvV: goto UBZpw; OgZTt: $script .= $pri . "\x29\40\x45\x4e\x47\111\116\x45\75\x49\x6e\156\157\x44\x42\40\x44\105\x46\x41\x55\114\x54\40\x43\110\x41\x52\x53\105\124\x3d\x75\164\x66\x38\x6d\x62\x34\x3b"; goto Hg_dP; xgTLc: tsx_F: goto i6pE4; n3bNZ: El_y0: goto gB_y4; k1100: $script = "\103\122\105\x41\124\105\x20\124\x41\102\x4c\x45\x20\x60" . $table . "\x60\x20\50"; goto mJsUu; UBZpw: pCiF2: goto zX3bA; QG7fz: } goto tnMXt; tnMXt: RG3kq: goto H7s_4; lVHvS: foreach ($tabless as $table) { goto gb30f; NdDu1: goto PsBO_; goto W6c_r; J8jRa: $retval[$i]->col_type = $query[$i]->column_type; goto RwonI; RwonI: $retval[$i]->type = $query[$i]->data_type; goto LEjSm; llsTX: if (!($i < $c)) { goto QekOC; } goto GAHHM; BievL: $retval[$i]->name = $query[$i]->column_name; goto J8jRa; GAHHM: $retval[$i] = new stdClass(); goto BievL; gb30f: $sql = "\123\x45\114\x45\103\124\x20\x60\x63\157\x6c\165\x6d\x6e\137\156\141\x6d\x65\x60\54\x20\140\143\157\x6c\x75\155\156\x5f\x74\171\x70\x65\140\54\40\140\x63\x6f\x6c\x6c\x61\x74\151\157\156\137\156\141\155\x65\140\54\x20\140\144\141\164\x61\x5f\164\171\x70\145\x60\54\x20\140\x63\x68\141\162\141\x63\x74\x65\x72\x5f\155\x61\170\x69\x6d\165\155\137\154\x65\x6e\147\164\150\x60\x2c\40\x60\156\x75\155\145\x72\151\143\x5f\160\x72\x65\x63\151\163\x69\x6f\x6e\140\x2c" . "\x20\x60\x63\x6f\x6c\165\x6d\x6e\x5f\144\x65\x66\x61\165\x6c\x74\x60\54\x20\x60\x63\157\154\165\x6d\x6e\x5f\153\x65\x79\140\54\x20\140\x63\x6f\x6c\165\x6d\156\x5f\143\157\x6d\x6d\x65\x6e\164\140\x2c\x20\x60\x65\170\x74\162\x61\140\x2c\x20\x60\x69\163\x5f\x6e\165\x6c\x6c\141\142\154\x65\x60\15\12\11\x9\11\106\122\117\115\40\140\151\156\146\157\162\155\141\164\x69\157\156\137\163\x63\x68\145\x6d\141\140\56\140\x63\157\x6c\165\x6d\156\x73\x60\x20\x57\x48\x45\122\105\40\x74\x61\x62\x6c\145\x5f\163\143\150\x65\x6d\x61\40\x3d\x20\x22" . $this->db->database . "\42\x20\101\x4e\104\x20\x74\x61\x62\154\x65\x5f\156\x61\x6d\x65\40\x3d\40\x22" . $table . "\x22"; goto fKMaU; NaN7m: fMocd: goto XpJiO; JRLIO: $retval[$i]->primary = $query[$i]->column_key; goto Sahbu; FaTln: $retval[$i]->extra = $query[$i]->extra; goto YWxCc; a3ujp: $fields[$table] = (object) ["\x74\x61\142\x6c\x65\x5f\x6e\x61\155\145" => $table, "\143\157\154\165\155\156\x73" => $retval]; goto Zxnzd; XpJiO: $query = $query->result_object(); goto LK9yn; LEjSm: $retval[$i]->collation = $query[$i]->collation_name; goto uIis2; Sahbu: Cgz8A: goto K0FQN; YWxCc: $retval[$i]->nullable = $query[$i]->is_nullable; goto JRLIO; fKMaU: if (!(($query = $this->db->query($sql)) === FALSE)) { goto fMocd; } goto nLlWn; uIis2: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto slbuj; LK9yn: $retval = array(); goto HYRnI; BzMyV: $c = count($query); goto crHkB; slbuj: $retval[$i]->default = $query[$i]->column_default; goto PFDFG; K0FQN: $i++; goto NdDu1; crHkB: PsBO_: goto llsTX; PFDFG: $retval[$i]->comment = $query[$i]->column_comment; goto FaTln; HYRnI: $i = 0; goto BzMyV; W6c_r: QekOC: goto a3ujp; nLlWn: $fields = FALSE; goto NaN7m; Zxnzd: R24R_: goto fba78; fba78: } goto v_bBA; a7uZ9: $fields = []; goto lVHvS; WWfsp: $json = file_get_contents("\56\x2f\x61\163\163\145\164\163\x2f\x61\160\x70\x2f\144\142\57\144\x61\164\141\142\141\163\x65\56\x6a\x73\x6f\x6e"); goto T5SDd; NLKO4: $tbl_ada = array_keys($fields); goto vZjs3; zgyYH: $script_create_table = []; goto pF1R_; sjp3x: } public function createTable() { goto GIOD_; Z4HGK: EPE9I: goto Ktlu0; iJnwf: foreach ($scripts as $script) { $queries .= $script; eOKVy: } goto Z4HGK; Y5imS: sleep(1); goto THaTQ; aIDDw: $queries = ''; goto iJnwf; THaTQ: $scripts = json_decode($this->encryption->decrypt($scripts)); goto aIDDw; NmDD7: $data["\x6d\145\x73\x73\x61\x67\x65"] = "\125\160\144\141\164\x65\40\x6b\x6f\x6c\x6f\x6d"; goto RJguX; GIOD_: $scripts = $this->input->post("\x64\x61\164\141", true); goto eyFdT; Ktlu0: $data["\163\165\x63\x63\145\163\x73"] = $this->runQuery($queries); goto NmDD7; eyFdT: str_replace("\x25\62\102", "\x2b", $scripts); goto Y5imS; RJguX: $this->output_json($data); goto UQwrh; UQwrh: } public function createColumn() { goto Ptxh_; mi7lm: $data["\163\x75\x63\x63\145\163\x73"] = $this->runQuery($queries); goto zYZYe; UNC54: QgHX6: goto mi7lm; UMkq5: foreach ($scripts as $script) { $queries .= $script; HElkg: } goto N63U5; N63U5: Wms6v: goto RcDU3; eFd6L: $this->updateUID(); goto UNC54; KlVJa: str_replace("\45\62\102", "\x2b", $scripts); goto EpnP_; FreAz: $this->output_json($data); goto lir17; NXaAh: $queries = ''; goto UMkq5; EpnP_: sleep(1); goto O3ARH; O3ARH: $scripts = json_decode($this->encryption->decrypt($scripts)); goto NXaAh; RcDU3: if (!(strpos("\x60\x75\x69\x64\x60", $queries) !== false)) { goto QgHX6; } goto eFd6L; zYZYe: $data["\155\x65\x73\x73\x61\x67\145"] = "\x4d\x6f\144\x69\x66\171\x20\x6b\x6f\154\157\x6d"; goto FreAz; Ptxh_: $scripts = $this->input->post("\x64\x61\x74\141", true); goto KlVJa; lir17: } public function editColumn() { goto zLbp6; b9RMx: C4MXE: goto ntHSi; SA9Ho: str_replace("\x25\x32\102", "\53", $scripts); goto H3j9T; zLbp6: $scripts = $this->input->post("\x64\141\x74\141", true); goto SA9Ho; H3j9T: sleep(1); goto c8Xut; SPTQC: foreach ($scripts as $script) { $queries .= $script; E81_h: } goto b9RMx; rMab0: $this->output_json($data); goto qwXBZ; c8Xut: $scripts = json_decode($this->encryption->decrypt($scripts)); goto qXT0X; ntHSi: $data["\163\165\x63\x63\145\163\x73"] = $this->runQuery($queries); goto lVBMC; qXT0X: $queries = ''; goto SPTQC; lVBMC: $data["\x6d\x65\x73\x73\x61\147\145"] = "\125\160\x64\141\164\145\x20\x73\145\154\x65\x73\x61\x69"; goto rMab0; qwXBZ: } function runQuery($script) { goto Axr0Y; BGKoc: I9Bb8: goto GvkPN; GvkPN: $mysqli->multi_query($script); goto VeDRK; aAU8R: return true; goto rt6QR; GOY_Z: $hostpass = $this->db->password; goto kTB1W; VeDRK: $mysqli->close(); goto aAU8R; PUIUI: if (!mysqli_connect_errno()) { goto I9Bb8; } goto BU95J; BU95J: return mysqli_connect_errno(); goto BGKoc; rC9Rp: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto PUIUI; kTB1W: $database = $this->db->database; goto rC9Rp; Axr0Y: $hostname = $this->db->hostname; goto l2w71; l2w71: $hostuser = $this->db->username; goto GOY_Z; rt6QR: } function updateUID() { goto foTO_; hN1nc: foreach ($siswas as $siswa) { $input[] = array("\151\x64\137\x73\151\x73\167\141" => $siswa->id_siswa, "\x75\151\144" => $this->uuid->v4()); OxVHg: } goto JuiHG; G7nNG: return $this->db->update_batch("\x6d\141\x73\x74\145\162\x5f\163\151\163\x77\141", $input, "\151\x64\137\x73\x69\163\167\x61"); goto yJD5u; foTO_: $this->load->library("\125\165\x69\x64", "\x75\165\x69\144"); goto DR8Me; b8xoT: $input = array(); goto hN1nc; DR8Me: $siswas = $this->db->get("\x6d\141\163\164\x65\x72\x5f\x73\x69\x73\x77\141")->result(); goto b8xoT; JuiHG: tz_Jd: goto G7nNG; yJD5u: } function make_base() { } }
