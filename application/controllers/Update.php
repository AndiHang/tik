<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\101\x53\105\120\101\x54\110") or exit("\x4e\157\x20\x64\151\162\x65\x63\164\x20\x73\x63\162\x69\160\x74\40\x61\143\x63\x65\x73\163\40\141\154\154\x6f\x77\145\144"); class Update extends CI_Controller { function __construct() { goto AkrTE; qz61U: $this->load->database(); goto RZ1c9; RZ1c9: $this->load->library("\145\x6e\x63\x72\x79\x70\164\151\157\156"); goto GmtF0; pqEm7: $this->load->dbforge(); goto qz61U; AkrTE: parent::__construct(); goto lmAtk; lmAtk: include APPPATH . "\143\x6f\156\146\151\x67\x2f\x64\141\x74\x61\x62\x61\x73\145\56\x70\150\160"; goto pqEm7; GmtF0: } public function output_json($data, $encode = true) { goto cvwy_; E6lC5: fgGBS: goto P1VCv; Difgs: $data = json_encode($data); goto E6lC5; cvwy_: if (!$encode) { goto fgGBS; } goto Difgs; P1VCv: $this->output->set_content_type("\141\x70\x70\x6c\151\143\x61\x74\x69\157\x6e\57\x6a\163\157\x6e")->set_output($data); goto aueMm; aueMm: } public function index() { goto U0Kfx; KY1i_: $data["\152\163\157\x6e"] = $json; goto BS5uQ; U0Kfx: $json = file_get_contents("\56\x2f\141\163\x73\x65\164\163\57\x61\x70\160\x2f\144\x62\x2f\x64\141\164\x61\x62\141\163\145\56\152\x73\x6f\156"); goto xlbzN; maO0_: $this->load->view("\x69\x6e\x73\x74\x61\154\x6c\x2f\x75\160\144\x61\164\145"); goto jNJ3Q; xlbzN: $json = json_decode($json); goto VXRxQ; VXRxQ: $json = (array) $json; goto KY1i_; jNJ3Q: $this->load->view("\151\156\x73\x74\x61\154\x6c\x2f\146\x6f\157\164\x65\x72"); goto e0pzl; BS5uQ: $this->load->view("\x69\156\163\164\141\x6c\154\57\150\x65\x61\144\x65\x72", $data); goto maO0_; e0pzl: } function object_to_array($data) { goto D9OED; ec4Mo: Aj91A: goto la4AT; orvz6: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; myWBv: } goto YsO3I; la4AT: return $data; goto tUJNs; QSJz2: return $result; goto ec4Mo; YsO3I: W9phe: goto QSJz2; D9OED: if (!(is_array($data) || is_object($data))) { goto Aj91A; } goto iQ6dM; iQ6dM: $result = []; goto orvz6; tUJNs: } public function checkDatabase() { goto ZD6aq; op1L_: $edit_columns = []; goto GNxJN; iWuLo: $this->db->db_debug = FALSE; goto aQkXY; mqAcv: $add_columns = []; goto op1L_; ZD6aq: $db_debug = $this->db->db_debug; goto iWuLo; QeSzY: $full_tables = array_unique($full_tables); goto m7YVE; PTVRU: $tbl_ada = array_keys($fields); goto MlqEk; u4L3G: $fields = []; goto gHRBC; GBF2w: $data = ["\x64\142" => $fields, "\x63\162\x65\141\x74\145" => $create_tables, "\155\x6f\x64\151\x66\171" => $edit_columns, "\141\x64\144" => $add_columns, "\x63\x6f\x75\156\x74\163" => $counts, "\152\163\157\x6e" => $json, "\x63\165\x72\x72\x65\x6e\164" => $currentDb]; goto cRIwc; MlqEk: $full_tables = array_merge($tbl_baru, $tbl_ada); goto QeSzY; MB7L1: fNFnm: goto AZNRe; GNxJN: foreach ($full_tables as $table) { goto iUOK1; dayvo: Xr93w: goto X0GZF; ThAPt: $create_tables[$table] = $json[$table]; goto G4v2i; X0GZF: if (!isset($json[$table])) { goto YccPb; } goto EbLJQ; KYyAT: eMyOF: goto fOslW; iUOK1: if ($this->db->table_exists($table)) { goto Xr93w; } goto ThAPt; EbLJQ: foreach ($json[$table] as $jtbl) { goto DbUe0; uGH8y: OMUOW: goto J57Ez; WdYPk: $add_columns[$table][] = $jtbl; goto JLl8c; DfeQP: jwn8s: goto uGH8y; DbUe0: if ($this->db->field_exists($jtbl->name, $table)) { goto RZw35; } goto WdYPk; EAvul: ogitf: goto DfeQP; zgiva: RZw35: goto j2NuK; j2NuK: foreach ($fields[$table] as $ftbl) { goto EjV_T; D4nrV: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto Q4cc9; } goto UiWTx; Lovcv: T8V9x: goto CFkpq; UiWTx: $edit_columns[$table][] = $jtbl; goto THhrj; EjV_T: if (!($jtbl->name == $ftbl->name)) { goto T8V9x; } goto D4nrV; THhrj: Q4cc9: goto Lovcv; CFkpq: uaGu3: goto H8IFV; H8IFV: } goto EAvul; JLl8c: goto jwn8s; goto zgiva; J57Ez: } goto jZE51; CTP_k: PvQBX: goto KYyAT; G4v2i: goto PvQBX; goto dayvo; kUUFQ: YccPb: goto CTP_k; jZE51: nOz2x: goto kUUFQ; fOslW: } goto n1VZD; m7YVE: sort($full_tables); goto Fpfy2; n1VZD: ysC_U: goto g20jD; ekuhY: $tbl_baru = array_keys($json); goto PTVRU; cm4DJ: $json = json_decode($json); goto J9QpT; aQkXY: $tabless = $this->db->list_tables(); goto u4L3G; gHRBC: $currentDb = []; goto XlV5T; J9QpT: $json = (array) $json; goto ekuhY; Fpfy2: $create_tables = []; goto mqAcv; g20jD: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto GBF2w; AZNRe: $json = file_get_contents("\x2e\x2f\141\163\163\x65\164\x73\x2f\141\x70\x70\57\x64\x62\x2f\144\141\x74\x61\x62\x61\163\x65\56\x6a\163\157\156"); goto cm4DJ; XlV5T: foreach ($tabless as $table) { goto xI470; jIr4K: I6yCK: goto RiCBg; ghi2B: if ($query[$i]->extra == "\141\x75\164\157\137\x69\156\143\x72\145\x6d\x65\x6e\164") { goto HNdWN; } goto gKeQW; a3AJ5: yGFvL: goto udI0H; gKeQW: $datafld[$i]->extra = $query[$i]->extra; goto SVF9I; xcC1Z: $sql = "\x53\105\114\105\x43\x54\x20\x60\143\x6f\x6c\x75\155\x6e\x5f\x6e\x61\155\145\x60\54\x20\x60\156\165\155\145\162\151\x63\x5f\160\x72\145\x63\151\x73\x69\157\156\140\x2c\40\140\145\x78\x74\162\x61\140\x2c\40\140\151\x73\x5f\x6e\x75\154\x6c\x61\x62\154\x65\140" . "\x20\x46\x52\x4f\x4d\40\140\x69\x6e\146\x6f\x72\155\x61\x74\x69\157\156\137\163\x63\x68\x65\x6d\141\140\56\x60\143\x6f\154\165\x6d\156\163\140\x20\x57\x48\105\122\105\40\164\141\x62\x6c\x65\x5f\x73\x63\150\145\155\141\x20\x3d\x20\x22" . $this->db->database . "\42\x20\101\116\x44\40\164\x61\142\154\x65\137\156\x61\x6d\145\40\x3d\x20\42" . $table . "\42"; goto VEGZK; Ngwjd: T8Y4A: goto VXg4T; aBE27: lUNZM: goto X6mj3; p9qAO: Jj1HX: goto a3AJ5; vlazk: $retval = array(); goto kGknu; RWgYm: $currentDb = FALSE; goto jIr4K; kDAQN: if (!($query[$i]->extra != '')) { goto yGFvL; } goto ghi2B; QQKSM: srWXy: goto HD0C_; gVFj0: HNdWN: goto w6jfH; WM_EL: nwvET: goto XykhH; xI470: $datafld = $this->db->field_data($table); goto xcC1Z; RiCBg: $query = $query->result_object(); goto vlazk; q3eFp: $retval[$i]->extra = $query[$i]->extra; goto Ngwjd; kGknu: $i = 0; goto Qx8lK; X6mj3: if (!($i < $c)) { goto nwvET; } goto BEJIf; XykhH: $currentDb[$table] = $retval; goto dKlpG; BEJIf: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto TE1kx; } goto kDAQN; w6jfH: $datafld[$i]->auto_increment = true; goto p9qAO; em4zi: $retval[$i] = new stdClass(); goto wqU38; VEGZK: if (!(($query = $this->db->query($sql)) === FALSE)) { goto I6yCK; } goto RWgYm; wqU38: $retval[$i]->name = $query[$i]->column_name; goto q3eFp; udI0H: TE1kx: goto em4zi; SVF9I: goto Jj1HX; goto gVFj0; Qx8lK: $c = count($query); goto aBE27; rC8_F: goto lUNZM; goto WM_EL; dKlpG: $fields[$table] = $datafld; goto QQKSM; VXg4T: $i++; goto rC8_F; HD0C_: } goto MB7L1; cRIwc: $this->output_json($data); goto tALsv; tALsv: } public function updateDatabase() { goto i0PFB; ve17v: foreach ($full_tables as $table) { goto JkMbU; DIesN: f4hC4: goto zBW5a; GNdNz: $this->db->query("\101\x4c\x54\x45\122\40\124\x41\102\x4c\105\x20\40\x60" . $table . "\x60\40\x45\116\107\111\x4e\x45\x20\75\40\111\x6e\156\x6f\x44\x42"); goto ttPpu; ttPpu: UYE52: goto qrRe8; P5fhY: V23HO: goto DIesN; vgf8K: nOPj_: goto a0_Ec; t5d7T: XVemq: goto eD46a; qhlK7: Vlu_s: goto q69Nt; Z0UZk: if (!isset($json[$table])) { goto UYE52; } goto auHsH; auHsH: foreach ($json[$table] as $tbl => $jtbl) { goto oEYcj; XcF8n: if (!($jtbl->primary_key == 1)) { goto avXwW; } goto Zel8j; p3ErI: $this->dbforge->add_field($field); goto XcF8n; n8s0O: avXwW: goto zhZVi; zhZVi: G1hGl: goto ng_xj; oEYcj: $field = [$jtbl->name => ["\164\x79\x70\x65" => $jtbl->type, "\143\x6f\156\163\x74\162\141\151\x6e\164" => $jtbl->max_length, "\156\x75\154\154" => $jtbl->primary_key == 0]]; goto p3ErI; Zel8j: $this->dbforge->add_key($jtbl->name, true); goto n8s0O; ng_xj: } goto t5d7T; zBW5a: jcCIj: goto qhlK7; JkMbU: if ($this->db->table_exists($table)) { goto nOPj_; } goto Z0UZk; eD46a: $this->dbforge->create_table($table, TRUE); goto GNdNz; qrRe8: goto jcCIj; goto vgf8K; PhzOq: foreach ($json[$table] as $jtbl) { goto EltyR; EltyR: if ($this->db->field_exists($jtbl->name, $table)) { goto zGo4A; } goto FsYf_; pFXUH: S8Qqx: goto aWXaD; pDUOL: foreach ($fields[$table] as $ftbl) { goto k6jDE; FWK7F: $field = array($jtbl->name => array("\164\171\160\x65" => $jtbl->type, "\143\157\x6e\163\x74\x72\x61\151\156\164" => $jtbl->max_length, "\x64\145\x66\141\x75\x6c\164" => $jtbl->default)); goto kH3yt; d0tMt: x5TPK: goto sjVIK; k6jDE: if (!($jtbl->name == $ftbl->name)) { goto E7yA7; } goto Vnm3Z; LTLIr: FM73h: goto tnbCz; Lv0T8: goto FM73h; goto uIyGr; wktO1: $this->dbforge->modify_column($table, $field); goto Lv0T8; Kb8M2: $field = array($jtbl->name => array("\164\x79\160\145" => $jtbl->type, "\x63\x6f\156\163\164\x72\x61\151\x6e\x74" => $jtbl->max_length, "\156\x75\154\x6c" => false)); goto vM92E; qR0Ce: muAHy: goto Rt0N_; fPIc4: $field = array($jtbl->name . "\x20\144\141\x74\145\x74\x69\155\145\x20\144\x65\x66\x61\x75\x6c\x74\40\x63\x75\162\162\145\156\x74\x5f\164\x69\x6d\145\163\x74\141\155\160" . $onUpdate); goto FAWfw; vM92E: goto x5TPK; goto VXP1M; y0vT_: if ($jtbl->default == "\x43\125\x52\x52\x45\116\124\137\124\x49\x4d\x45\123\124\x41\115\x50") { goto pDXMo; } goto FWK7F; mXE2F: if ($jtbl->auto_increment == true) { goto J_KNm; } goto Kb8M2; sjVIK: $this->dbforge->add_key($jtbl->name, true); goto wktO1; sjIJS: $field = array($jtbl->name => array("\x74\x79\x70\145" => $jtbl->type, "\143\157\x6e\x73\164\162\141\151\x6e\x74" => $jtbl->max_length, "\156\165\x6c\154" => false, "\x61\165\x74\157\137\x69\156\143\x72\145\x6d\145\156\x74" => true)); goto d0tMt; FAWfw: adX01: goto e4Aie; rAI4h: pDXMo: goto pHHP1; qNAWZ: E7yA7: goto qR0Ce; uIyGr: iw3gi: goto y0vT_; kH3yt: goto adX01; goto rAI4h; e4Aie: $this->dbforge->modify_column($table, $field); goto LTLIr; SHKTV: if ($jtbl->primary_key == 0) { goto iw3gi; } goto mXE2F; pHHP1: $onUpdate = isset($jtbl->extra) ? "\x20" . strtolower($jtbl->extra) : ''; goto fPIc4; Vnm3Z: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto ZJj7J; } goto SHKTV; tnbCz: ZJj7J: goto qNAWZ; VXP1M: J_KNm: goto sjIJS; Rt0N_: } goto Cu_23; D9sU5: KTeFX: goto U37zw; Cu_23: PxelP: goto MQVAl; nMxz4: $field = array($jtbl->name => array("\164\171\x70\145" => $jtbl->type, "\143\x6f\x6e\x73\164\x72\141\x69\156\x74" => $jtbl->max_length, "\x6e\165\x6c\x6c" => false)); goto yTJBw; aWXaD: goto dddHn; goto xrSVX; e_GOx: $this->dbforge->add_column($table, $field); goto pFXUH; oQ4sQ: gbxP5: goto xiz2_; MQVAl: dddHn: goto D9sU5; rNkn7: $this->dbforge->add_column($table, $field); goto r6Eg_; r6Eg_: goto S8Qqx; goto oQ4sQ; xiz2_: $field = array($jtbl->name => array("\x74\x79\x70\145" => $jtbl->type, "\143\157\156\x73\164\x72\x61\x69\x6e\164" => $jtbl->max_length, "\x64\145\x66\x61\x75\x6c\x74" => $jtbl->default)); goto e_GOx; xrSVX: zGo4A: goto pDUOL; FsYf_: if ($jtbl->primary_key == 0) { goto gbxP5; } goto nMxz4; yTJBw: $this->dbforge->add_key($jtbl->name, true); goto rNkn7; U37zw: } goto P5fhY; a0_Ec: if (!isset($json[$table])) { goto f4hC4; } goto PhzOq; q69Nt: } goto Ijl0O; bmuZk: $full_tables = array_unique($full_tables); goto UrLhP; k9h2P: $tbl_ada = array_keys($fields); goto td0wA; oICLw: $json = (array) $json; goto U4BXv; Hi8HC: $json = file_get_contents("\56\x2f\141\x73\163\145\x74\x73\x2f\141\x70\160\x2f\144\142\57\144\141\x74\x61\x62\141\163\x65\x2e\x6a\163\x6f\x6e"); goto ZgjA7; UrLhP: sort($full_tables); goto ve17v; ZgjA7: $json = json_decode($json); goto oICLw; LQ65g: $fields = []; goto tgLJG; U4BXv: $tbl_baru = array_keys($json); goto k9h2P; td0wA: $full_tables = array_merge($tbl_baru, $tbl_ada); goto bmuZk; OlDiy: echo true; goto XNkuL; qfx9d: sDOqc: goto Hi8HC; tgLJG: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); Ba2kQ: } goto qfx9d; i0PFB: $tabless = $this->db->list_tables(); goto LQ65g; Ijl0O: d1EV5: goto OlDiy; XNkuL: } public function checkDb() { goto zL5pT; zL5pT: $db_debug = $this->db->db_debug; goto IpqAX; Pp5f8: $this->output_json($data); goto mo0zh; Oq89c: $this->db->db_debug = $db_debug; goto sp9_v; lQ5r7: $json = (array) $json; goto nonSS; MjsQW: $full_tables = array_unique($full_tables); goto plCcj; waTD3: $create_tables = []; goto QP8Fh; nonSS: $tbl_seharusnya = array_keys($json); goto fEiXW; ds3DS: foreach ($tabless as $table) { goto rfv4J; COoFG: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto zTUHX; njuND: $retval[$i]->comment = $query[$i]->column_comment; goto HRnzj; bUU3H: if (!($i < $c)) { goto s4D2V; } goto TTWBx; v_kln: $retval[$i]->col_type = $query[$i]->column_type; goto m8XZ0; zDHDD: Gcb3p: goto p_GZu; p_GZu: $i++; goto vUltb; cHmb3: $query = $query->result_object(); goto JT0qs; DRiI1: $c = count($query); goto NItVR; TTWBx: $retval[$i] = new stdClass(); goto FpALP; VQxdu: s4D2V: goto OBcEv; m8XZ0: $retval[$i]->type = $query[$i]->data_type; goto oTDEY; zTUHX: $retval[$i]->default = $query[$i]->column_default; goto njuND; JjIaE: $retval[$i]->primary = $query[$i]->column_key; goto zDHDD; FpALP: $retval[$i]->name = $query[$i]->column_name; goto v_kln; HRnzj: $retval[$i]->extra = $query[$i]->extra; goto j2M57; Ayzj7: if (!(($query = $this->db->query($sql)) === FALSE)) { goto dqdr6; } goto KCHlU; gfzSu: ARn8B: goto TUghI; OBcEv: $fields[$table] = (object) ["\164\x61\142\154\145\137\x6e\x61\x6d\x65" => $table, "\x63\157\154\165\x6d\156\163" => $retval]; goto gfzSu; MT_I5: dqdr6: goto cHmb3; NItVR: CiJEl: goto bUU3H; KCHlU: $fields = FALSE; goto MT_I5; vUltb: goto CiJEl; goto VQxdu; j2M57: $retval[$i]->nullable = $query[$i]->is_nullable; goto JjIaE; oTDEY: $retval[$i]->collation = $query[$i]->collation_name; goto COoFG; XuM1f: $i = 0; goto DRiI1; JT0qs: $retval = array(); goto XuM1f; rfv4J: $sql = "\x53\x45\114\x45\103\124\40\140\x63\157\x6c\165\x6d\x6e\137\x6e\141\x6d\145\x60\x2c\40\140\143\157\x6c\x75\155\156\x5f\x74\171\x70\x65\x60\x2c\40\x60\143\x6f\x6c\154\x61\x74\151\157\x6e\x5f\156\141\155\145\x60\x2c\40\140\x64\141\x74\141\x5f\164\171\x70\x65\140\x2c\40\140\143\150\x61\162\141\x63\164\x65\162\137\x6d\x61\170\x69\x6d\165\x6d\137\154\145\156\147\164\150\140\x2c\40\x60\156\x75\x6d\x65\162\151\143\137\x70\162\x65\x63\x69\x73\x69\x6f\156\140\x2c" . "\x20\140\x63\x6f\154\x75\155\x6e\x5f\x64\x65\x66\141\x75\x6c\x74\x60\x2c\x20\x60\x63\x6f\154\x75\155\156\x5f\153\145\x79\x60\54\x20\140\x63\157\154\165\x6d\x6e\137\x63\x6f\155\x6d\145\x6e\x74\140\54\x20\140\x65\x78\x74\162\141\x60\x2c\40\140\x69\x73\x5f\156\x75\x6c\154\x61\142\x6c\145\x60\xd\12\x9\x9\11\x46\122\x4f\115\40\x60\x69\156\146\x6f\x72\x6d\141\164\x69\157\x6e\x5f\x73\x63\x68\145\155\x61\140\x2e\x60\143\157\x6c\165\155\156\163\x60\40\127\110\x45\x52\105\x20\x74\141\142\154\145\x5f\x73\143\150\145\155\x61\40\75\x20\42" . $this->db->database . "\x22\40\101\x4e\x44\x20\x74\141\x62\154\x65\137\156\141\155\x65\x20\x3d\40\x22" . $table . "\42"; goto Ayzj7; TUghI: } goto hdgsy; xyTVI: foreach ($full_tables as $table) { goto AJ7xE; JRDpP: $create_tables[] = $json[$table]; goto z7Pwt; p1zCu: $add_column = []; goto sMzJ2; rTY_f: $script_create_table[$table] = $script; goto Tl6Te; Lg4EA: ge0T3: goto JRDpP; LWDzF: Ejl15: goto kEQpX; AJ7xE: if (!$this->db->table_exists($table)) { goto ge0T3; } goto z3aLW; BxMOH: $script_create_column[$table] = "\101\114\x54\x45\122\40\124\x41\102\x4c\105\40\140" . $table . "\x60\40" . implode("\x2c\40", $add_column) . "\73"; goto XlVaa; kEQpX: $script .= $pri . "\51\40\x45\x4e\107\x49\x4e\x45\x3d\111\156\x6e\157\104\x42\40\104\105\106\101\125\114\x54\40\103\x48\x41\x52\123\x45\x54\75\x75\164\146\70\155\x62\64\73"; goto rTY_f; uIcAc: if (!(count($add_column) > 0)) { goto A4zjP; } goto BxMOH; gp7Y_: DoHB3: goto nZtix; nOrG0: if (!(count($modif_column) > 0)) { goto DoHB3; } goto FjpK3; ZE9ru: x2oIB: goto l5yKs; FjpK3: $script_edit_column[$table] = "\101\x4c\124\x45\122\40\x54\x41\102\114\105\x20\140" . $table . "\140\x20" . implode("\54\x20", $modif_column) . "\73"; goto gp7Y_; eGvkJ: foreach ($json[$table]->columns as $jtbl) { goto p1DXC; qVi9O: array_push($add_column, "\x41\x44\x44\x20\x60" . $jtbl->name . "\x60\x20" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto SOsH9; WHesm: $length = ''; goto TuXSD; p1DXC: if ($this->db->field_exists($jtbl->name, $table)) { goto J71qD; } goto VdbKG; SgjYw: DoVQE: goto GZ04k; YotEQ: $nullable = $jtbl->nullable == "\116\117" ? "\x20\x4e\117\x54\40\116\x55\114\x4c" : ''; goto r88yz; JvAKy: if ($jtbl->max_length == null) { goto BSYB6; } goto yMYbB; VdbKG: $add_columns[$table][] = $jtbl; goto JvAKy; ilOWX: BSYB6: goto v6fle; Ayp3x: $length = "\x28" . $jtbl->max_length . "\51"; goto hlWP6; Jf7YW: if (!(strtoupper($extra) == "\x20\x41\x55\x54\117\137\x49\x4e\x43\122\105\115\x45\x4e\x54")) { goto cKmoY; } goto e3TUN; GZ04k: ef4vE: goto YotEQ; yMYbB: if ($jtbl->type != "\154\x6f\156\x67\164\145\170\x74" && $jtbl->type != "\155\x65\x64\151\165\x6d\164\x65\x78\x74" && $jtbl->type != "\164\x65\170\x74") { goto wJrg9; } goto WHesm; v6fle: $length = ''; goto pomGr; JFxqw: $comment = $jtbl->comment == '' ? '' : "\x20\x43\x4f\115\115\x45\x4e\124\40\x27" . $jtbl->comment . "\47"; goto qVi9O; oX5Lk: KpoDr: goto wIaV2; ZFoWn: foreach ($fields[$table]->columns as $ftbl) { goto WoEMJ; RCnzc: if (!($jtbl->col_type != $ftbl->col_type)) { goto TjfaZ; } goto qu3Z2; sD3Xo: j2rx0: goto QnXz2; g13gr: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto SzfKO; } goto wrdLd; HDysC: goto j2rx0; goto gv90d; v2mhx: $default = $jtbl->default == null ? '' : "\40\104\x45\106\101\x55\114\124\40" . $jtbl->default; goto pV63a; zS87a: XlVb7: goto d3TKm; K1LgE: oSm7B: goto awo1W; aFAvB: if (!($ftbl->extra != null)) { goto XlVb7; } goto KoDUG; KoDUG: $ftbl->extra = str_replace("\x28\51", '', $ftbl->extra); goto I3h8D; NeQj2: array_push($modif_column, "\115\117\x44\111\x46\x59\40\x60" . $jtbl->name . "\x60\40" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto ge4e4; jXfsR: if (!($jtbl->default != $ftbl->default)) { goto j_aQw; } goto Ofizw; qu3Z2: $edit_columns[$table][$jtbl->name]["\143\x6f\x6c\x5f\164\x79\x70\x65"] = $jtbl->col_type; goto dG9xK; OzsZz: $edit_columns[$table][$jtbl->name]["\143\x6f\155\155\x65\x6e\x74"] = $jtbl->comment; goto K1LgE; GLO47: $edit_columns[$table][$jtbl->name]["\160\162\x69\155\141\x72\x79"] = $jtbl->primary; goto XgJNk; MaYPP: $jtbl->extra = str_replace("\50\51", '', $jtbl->extra); goto M44x0; s80t6: $jtbl->default = strtoupper($jtbl->default); goto W2ynr; dG9xK: TjfaZ: goto xZNFu; Ofizw: $edit_columns[$table][$jtbl->name]["\x64\x65\146\141\165\154\x74"] = $jtbl->default; goto NlH0p; XG6H3: $edit_columns[$table][$jtbl->name]["\156\165\154\x6c\x61\142\154\x65"] = $jtbl->nullable; goto wm3nD; q0aLh: $edit_columns[$table][$jtbl->name]["\145\170\x74\x72\141"] = $jtbl->extra; goto oneTz; FEB4G: $comment = $jtbl->comment == '' ? '' : "\x20\x43\117\115\115\x45\x4e\124\40\x27" . $jtbl->comment . "\x27"; goto NeQj2; oneTz: Ns0Tl: goto jzbqm; P3qso: $ftbl->default = strtoupper($ftbl->default); goto DU2dG; wrdLd: $nullable = $jtbl->nullable == "\x4e\x4f" ? "\x20\x4e\x4f\x54\40\116\x55\x4c\114" : ''; goto v2mhx; I3h8D: $ftbl->extra = strtoupper($ftbl->extra); goto zS87a; NlH0p: j_aQw: goto n4zpD; qVyvJ: $ftbl->default = str_replace("\50\x29", '', $ftbl->default); goto P3qso; W2ynr: YFKSB: goto E9pdh; WoEMJ: if (!($jtbl->name == $ftbl->name)) { goto Y0XC7; } goto RCnzc; XgJNk: if (strtolower($jtbl->primary) == "\x70\x72\151") { goto vvxIa; } goto WiKnt; n4zpD: if (!($jtbl->extra != null)) { goto NSMF2; } goto MaYPP; M44x0: $jtbl->extra = strtoupper($jtbl->extra); goto LG5f1; jzbqm: if (!($jtbl->comment != $ftbl->comment)) { goto oSm7B; } goto OzsZz; LG5f1: NSMF2: goto aFAvB; pV63a: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto FEB4G; d3TKm: if (!($jtbl->extra != $ftbl->extra)) { goto Ns0Tl; } goto q0aLh; DU2dG: wHITk: goto jXfsR; xZNFu: if (!($jtbl->nullable != $ftbl->nullable)) { goto sW4aj; } goto XG6H3; E9pdh: if (!($ftbl->default != null)) { goto wHITk; } goto qVyvJ; QnXz2: fJycI: goto g13gr; QkAR_: array_push($modif_column, "\101\104\x44\x20\x50\x52\x49\115\x41\x52\131\x20\x4b\105\131\x20\x28\x60" . $jtbl->name . "\140\51"); goto lhfXE; wm3nD: sW4aj: goto TXc_l; lhfXE: goto j2rx0; goto ZLJFD; unTNO: uyWCv: goto Mh_2C; ZLJFD: E0rFp: goto ZFSBf; Y0DB_: $jtbl->default = str_replace("\50\51", '', $jtbl->default); goto s80t6; gv90d: vvxIa: goto QkAR_; TXc_l: if (!($jtbl->default != null)) { goto YFKSB; } goto Y0DB_; ge4e4: SzfKO: goto rdAEq; rdAEq: Y0XC7: goto unTNO; awo1W: if (!($jtbl->primary != $ftbl->primary)) { goto fJycI; } goto GLO47; ZFSBf: array_push($modif_column, "\x41\104\x44\x20\125\x4e\111\x51\125\x45\x20\x4b\105\131\40\140" . $jtbl->name . "\140\x20\x28\x60" . $jtbl->name . "\140\x29"); goto sD3Xo; WiKnt: if (strtolower($jtbl->primary) == "\x75\x6e\151") { goto E0rFp; } goto HDysC; Mh_2C: } goto r1RTI; yGRTp: GEiOg: goto PwLRb; pomGr: goto ef4vE; goto JBQMf; r1RTI: rF1Ej: goto yGRTp; e3TUN: $extra .= "\x20\x50\122\111\x4d\101\122\131\40\x4b\x45\131"; goto nRbxi; r88yz: $default = $jtbl->default == null ? '' : "\x20\104\x45\x46\101\125\114\124\x20" . $jtbl->default; goto Vsu8N; SOsH9: J71qD: goto ZFoWn; nRbxi: cKmoY: goto JFxqw; Vsu8N: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto Jf7YW; hlWP6: goto DoVQE; goto oX5Lk; TuXSD: goto ef4vE; goto ilOWX; wIaV2: $length = "\x28" . ($jtbl->max_length + 1) . "\51"; goto SgjYw; JBQMf: wJrg9: goto uDLDk; uDLDk: if ($jtbl->type == "\x69\156\164") { goto KpoDr; } goto Ayp3x; PwLRb: } goto w7xGQ; DSVZm: goto WULz0; goto Lg4EA; XlVaa: A4zjP: goto nOrG0; GkrMi: $pri = ''; goto ugULu; z7Pwt: $script = "\103\x52\105\x41\124\105\40\124\101\102\114\x45\x20\140" . $table . "\x60\x20\50"; goto GkrMi; ugULu: foreach ($json[$table]->columns as $column) { goto VE_7P; fFvg8: $comment = $column->comment == '' ? '' : "\x20\103\117\x4d\x4d\105\116\124\x20\47" . $column->comment . "\x27"; goto VMEKA; q15_5: TFiFS: goto cQtw2; f33Js: $length = ''; goto lTEs0; VMEKA: $script .= "\x60" . $column->name . "\140\40" . $column->type . $length . $nullable . $default . $extra . $comment . "\54\40"; goto KQhmE; j3g58: $length = "\50" . $column->max_length . "\51"; goto LK13n; HQO49: goto f2tAZ; goto S3Qo_; pQMrl: if ($column->type == "\151\156\x74") { goto OU5lu; } goto j3g58; atKkp: De9Kk: goto r9wz1; lTEs0: goto f2tAZ; goto q15_5; VE_7P: if ($column->max_length == null) { goto TFiFS; } goto xBu9z; xBu9z: if ($column->type != "\x6c\157\156\147\164\145\170\164" && $column->type != "\x6d\x65\144\151\165\x6d\164\x65\x78\x74" && $column->type != "\x74\145\170\164") { goto wOFlv; } goto f33Js; KQhmE: $pri .= $column->primary != '' ? "\120\122\111\115\101\x52\x59\40\x4b\x45\131\40\x28\x60" . $column->name . "\x60\51" : ''; goto atKkp; xrFVH: HxDfw: goto rYzUj; Nnr53: OU5lu: goto tGp21; LK13n: goto HxDfw; goto Nnr53; cQtw2: $length = ''; goto HQO49; YmPD3: $nullable = $column->nullable == "\x4e\x4f" ? "\x20\x4e\117\124\40\x4e\x55\114\114" : ''; goto f1IVO; f1IVO: $default = $column->default == null ? '' : "\x20\104\x45\x46\x41\x55\x4c\124\x20" . $column->default; goto EPGQ1; rYzUj: f2tAZ: goto YmPD3; S3Qo_: wOFlv: goto pQMrl; tGp21: $length = "\50" . ($column->max_length + 1) . "\51"; goto xrFVH; EPGQ1: $extra = $column->extra == '' ? '' : "\x20" . strtoupper($column->extra); goto fFvg8; r9wz1: } goto LWDzF; sMzJ2: $modif_column = []; goto eGvkJ; w7xGQ: T_Ptd: goto uIcAc; Tl6Te: WULz0: goto ZE9ru; z3aLW: if (!isset($json[$table])) { goto v3Y_6; } goto p1zCu; nZtix: v3Y_6: goto DSVZm; l5yKs: } goto eNsxb; h3LT6: $fields = []; goto ds3DS; IpqAX: $this->db->db_debug = FALSE; goto HNV7l; HNV7l: $tabless = $this->db->list_tables(); goto h3LT6; hdgsy: bbkoU: goto k3Y23; CduSr: $add_columns = []; goto yIhia; k3Y23: $json = file_get_contents("\x2e\57\x61\163\x73\145\x74\x73\57\141\x70\160\x2f\x64\142\x2f\144\141\164\x61\142\141\x73\145\56\152\x73\157\x6e"); goto RQhcP; RSEfd: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto MjsQW; sp9_v: $data = ["\x66\151\x65\x6c\144\x73" => $fields, "\143\x72\145\141\164\145\137\x74\141\x62\x6c\145\163" => $create_tables, "\143\x6f\165\x6e\x74\x5f\x74\142\154" => count($create_tables), "\141\144\144\x5f\x63\157\154\x75\x6d\156\163\x5f\x74\157\137\164\x61\142\x6c\x65" => $add_columns, "\x63\157\x75\156\164\x5f\143\x6f\154" => count($add_columns), "\145\144\151\x74\137\x63\157\x6c\165\155\x6e\163" => $edit_columns, "\143\x6f\165\x6e\x74\137\155\157\144" => count($edit_columns), "\141\144\144\x5f\x74\142\x6c" => $this->encryption->encrypt(json_encode($script_create_table)), "\141\x64\144\x5f\143\x6f\154" => $this->encryption->encrypt(json_encode($script_create_column)), "\x6d\157\144\137\x63\x6f\154" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto Pp5f8; eNsxb: fVLiq: goto Oq89c; fEiXW: $tbl_ada = array_keys($fields); goto RSEfd; plCcj: sort($full_tables); goto waTD3; yIhia: $script_create_column = []; goto ycSa7; ycSa7: $edit_columns = []; goto Incyx; QP8Fh: $script_create_table = []; goto CduSr; Incyx: $script_edit_column = []; goto xyTVI; RQhcP: $json = json_decode($json); goto lQ5r7; mo0zh: } public function createTable() { goto EIQtR; Ua3Vc: $scripts = json_decode($this->encryption->decrypt($scripts)); goto xGxYz; EIQtR: $scripts = $this->input->post("\x64\141\x74\x61", true); goto Dl3o_; CCdx6: $data["\x73\165\143\x63\x65\163\163"] = $this->runQuery($queries); goto EPRCG; jjKbs: rnesn: goto CCdx6; agqlv: sleep(1); goto Ua3Vc; bk1Vs: foreach ($scripts as $script) { $queries .= $script; kXWTq: } goto jjKbs; Dl3o_: str_replace("\45\62\x42", "\x2b", $scripts); goto agqlv; xGxYz: $queries = ''; goto bk1Vs; EPRCG: $data["\155\145\163\x73\141\147\x65"] = "\x55\x70\x64\141\164\x65\x20\153\x6f\x6c\157\155"; goto rM2V0; rM2V0: $this->output_json($data); goto GOPp2; GOPp2: } public function createColumn() { goto Lrdq_; cK3z1: $data["\163\x75\143\x63\145\x73\x73"] = $this->runQuery($queries); goto eZCbc; G12CK: $this->updateUID(); goto go3MT; Lrdq_: $scripts = $this->input->post("\x64\141\164\141", true); goto Ly3CF; GFHqX: if (!(strpos("\x60\165\x69\144\140", $queries) !== false)) { goto UuxpG; } goto G12CK; wSnUg: $scripts = json_decode($this->encryption->decrypt($scripts)); goto wfzAL; R98xQ: sleep(1); goto wSnUg; Ly3CF: str_replace("\45\62\102", "\x2b", $scripts); goto R98xQ; wfzAL: $queries = ''; goto lHMnw; kLvgZ: lVhXf: goto GFHqX; y0Or6: $this->output_json($data); goto vTqI3; eZCbc: $data["\x6d\145\x73\x73\141\x67\x65"] = "\115\x6f\x64\151\x66\x79\40\x6b\157\154\157\x6d"; goto y0Or6; go3MT: UuxpG: goto cK3z1; lHMnw: foreach ($scripts as $script) { $queries .= $script; QQQl8: } goto kLvgZ; vTqI3: } public function editColumn() { goto WkcNJ; v2nN2: foreach ($scripts as $script) { $queries .= $script; VvawO: } goto rRVdW; UP0JL: $data["\155\145\163\x73\141\x67\x65"] = "\x55\x70\x64\x61\x74\x65\40\163\145\154\145\x73\141\x69"; goto Yqijq; WkcNJ: $scripts = $this->input->post("\144\141\x74\x61", true); goto NPFle; Yqijq: $this->output_json($data); goto VqupS; NPFle: str_replace("\45\62\102", "\x2b", $scripts); goto putR2; ygyMx: $queries = ''; goto v2nN2; putR2: sleep(1); goto Y86ZE; jbOil: $data["\163\x75\143\143\145\163\x73"] = $this->runQuery($queries); goto UP0JL; Y86ZE: $scripts = json_decode($this->encryption->decrypt($scripts)); goto ygyMx; rRVdW: OwOL0: goto jbOil; VqupS: } function runQuery($script) { goto qAHt2; jyQKV: return mysqli_connect_errno(); goto OtmA6; WQ_ha: if (!mysqli_connect_errno()) { goto Sdxoe; } goto jyQKV; sbSfm: $database = $this->db->database; goto cbl6b; cbl6b: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto WQ_ha; qAHt2: $hostname = $this->db->hostname; goto jb010; fsdzj: $mysqli->close(); goto FAac2; OtmA6: Sdxoe: goto GRnIx; jb010: $hostuser = $this->db->username; goto pp8BA; GRnIx: $mysqli->multi_query($script); goto fsdzj; FAac2: return true; goto zm_6u; pp8BA: $hostpass = $this->db->password; goto sbSfm; zm_6u: } function updateUID() { goto iKzND; iKzND: $this->load->library("\x55\165\x69\144", "\165\165\x69\144"); goto KFcW6; a6DQu: return $this->db->update_batch("\x6d\x61\163\x74\145\x72\137\163\x69\x73\x77\141", $input, "\151\x64\137\x73\x69\x73\x77\x61"); goto ZtelL; U0ukm: foreach ($siswas as $siswa) { $input[] = array("\151\144\x5f\x73\151\x73\167\141" => $siswa->id_siswa, "\x75\x69\144" => $this->uuid->v4()); vStoX: } goto E92mF; yC_HA: $input = array(); goto U0ukm; E92mF: CATep: goto a6DQu; KFcW6: $siswas = $this->db->get("\x6d\141\163\164\145\x72\137\x73\x69\x73\167\x61")->result(); goto yC_HA; ZtelL: } function make_base() { } }
