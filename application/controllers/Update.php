<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\x42\101\x53\105\x50\x41\x54\x48") or exit("\116\157\x20\x64\151\162\x65\x63\164\x20\x73\x63\162\x69\160\x74\40\141\143\x63\145\x73\163\x20\141\x6c\x6c\157\167\x65\x64"); class Update extends CI_Controller { function __construct() { goto Af9uf; ndZwN: $this->load->dbforge(); goto l4E9L; Af9uf: parent::__construct(); goto kATos; l4E9L: $this->load->database(); goto MUduW; MUduW: $this->load->library("\145\156\x63\x72\x79\x70\164\x69\157\x6e"); goto kxluL; kATos: include APPPATH . "\143\x6f\x6e\x66\x69\x67\x2f\x64\141\x74\x61\142\141\163\145\x2e\x70\150\160"; goto ndZwN; kxluL: } public function output_json($data, $encode = true) { goto BUcoc; wTKfF: $this->output->set_content_type("\x61\160\x70\x6c\x69\x63\x61\x74\151\157\x6e\x2f\x6a\x73\157\x6e")->set_output($data); goto IIc19; BUcoc: if (!$encode) { goto pAsgI; } goto BfN3X; BfN3X: $data = json_encode($data); goto iY5Iy; iY5Iy: pAsgI: goto wTKfF; IIc19: } public function index() { goto JKsEg; aofq2: $data["\x6a\x73\x6f\x6e"] = $json; goto ApMOc; MDs7Q: $this->load->view("\151\x6e\x73\164\141\x6c\154\x2f\165\160\144\x61\x74\x65"); goto kPeMi; kPeMi: $this->load->view("\x69\x6e\x73\164\x61\x6c\154\x2f\x66\x6f\x6f\164\x65\162"); goto Ebcch; JKsEg: $json = file_get_contents("\56\57\141\163\163\145\x74\163\x2f\141\160\x70\57\144\142\x2f\x64\x61\164\141\x62\x61\x73\145\x2e\152\163\157\156"); goto bWrdJ; bWrdJ: $json = json_decode($json); goto BTVmD; BTVmD: $json = (array) $json; goto aofq2; ApMOc: $this->load->view("\x69\x6e\x73\x74\141\154\154\x2f\150\145\141\144\145\162", $data); goto MDs7Q; Ebcch: } function object_to_array($data) { goto csJa3; svQzP: return $result; goto MIHRo; MIHRo: uqw1Z: goto nXtzs; csJa3: if (!(is_array($data) || is_object($data))) { goto uqw1Z; } goto Yjmkb; nXtzs: return $data; goto wO3Ug; CzgHo: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; rEL8B: } goto F8ixK; Yjmkb: $result = []; goto CzgHo; F8ixK: GZ5WW: goto svQzP; wO3Ug: } public function checkDatabase() { goto xy8ae; TXGNI: $this->output_json($data); goto f7vCl; ZM4IX: $full_tables = array_unique($full_tables); goto u2wDN; ilQO7: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto g91Qw; nEBWL: $json = json_decode($json); goto fPR_o; u2wDN: sort($full_tables); goto O_BbM; CK6N2: $this->db->db_debug = FALSE; goto EERed; ysOF9: $tbl_baru = array_keys($json); goto iZZSs; xy8ae: $db_debug = $this->db->db_debug; goto CK6N2; y6beE: $fields = []; goto HGMrf; HGMrf: $currentDb = []; goto QXmhN; FGFL5: foreach ($full_tables as $table) { goto Fs1GL; j_chi: K3TqY: goto TgvHc; FNvC2: TlSeo: goto ue9rv; TmM4K: bAu4P: goto FNvC2; BYG93: $create_tables[$table] = $json[$table]; goto MnrVB; lNClK: baMHv: goto Lh3I9; MnrVB: goto MHjPr; goto lNClK; ue9rv: MHjPr: goto j_chi; Fs1GL: if ($this->db->table_exists($table)) { goto baMHv; } goto BYG93; AbCWn: foreach ($json[$table] as $jtbl) { goto TgUeT; JVHe4: PP2MH: goto jbwVQ; Zpomo: C3qIH: goto goPXs; TgUeT: if ($this->db->field_exists($jtbl->name, $table)) { goto m7T5J; } goto FXfeZ; goPXs: ZApDY: goto JVHe4; ILuC7: foreach ($fields[$table] as $ftbl) { goto xxxgg; byY5U: uU6AP: goto jgRkP; YbeLF: $edit_columns[$table][] = $jtbl; goto byY5U; YHtCF: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto uU6AP; } goto YbeLF; KQVGE: l5WTV: goto vsrAo; xxxgg: if (!($jtbl->name == $ftbl->name)) { goto Vt6FF; } goto YHtCF; jgRkP: Vt6FF: goto KQVGE; vsrAo: } goto Zpomo; FXfeZ: $add_columns[$table][] = $jtbl; goto ssp9y; fv0xf: m7T5J: goto ILuC7; ssp9y: goto ZApDY; goto fv0xf; jbwVQ: } goto TmM4K; Lh3I9: if (!isset($json[$table])) { goto TlSeo; } goto AbCWn; TgvHc: } goto nC0Ah; EvUrm: $full_tables = array_merge($tbl_baru, $tbl_ada); goto ZM4IX; g91Qw: $data = ["\x64\142" => $fields, "\143\x72\x65\141\164\x65" => $create_tables, "\155\157\x64\151\x66\171" => $edit_columns, "\x61\144\x64" => $add_columns, "\143\157\x75\x6e\164\163" => $counts, "\x6a\x73\157\156" => $json, "\143\x75\x72\162\x65\156\x74" => $currentDb]; goto TXGNI; vyFWS: nnZIG: goto HE3dB; HE3dB: $json = file_get_contents("\56\x2f\141\x73\x73\x65\164\x73\57\x61\x70\x70\x2f\x64\x62\57\144\x61\x74\x61\142\141\163\x65\56\152\x73\x6f\x6e"); goto nEBWL; QXmhN: foreach ($tabless as $table) { goto HiRB_; gEfMm: if (!(($query = $this->db->query($sql)) === FALSE)) { goto Fyc1i; } goto Sid1X; QATkT: $fields[$table] = $datafld; goto VDHUb; WtVwo: $i++; goto VOlAL; gHK1C: qiglE: goto IxQ2F; dulN0: $query = $query->result_object(); goto UrD78; xT7nE: Lnu_B: goto wcYk6; UrD78: $retval = array(); goto h7Igo; IAQBz: $retval[$i]->name = $query[$i]->column_name; goto TSPrH; yqaHc: $retval[$i] = new stdClass(); goto IAQBz; xXH9r: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto sZM6N; } goto lMmJe; IxQ2F: c7yIs: goto wAulY; I7t9s: Fyc1i: goto dulN0; H72_m: l3tyh: goto EVgdQ; JsZ18: if ($query[$i]->extra == "\141\x75\164\157\137\x69\x6e\143\162\145\155\x65\156\x74") { goto l3tyh; } goto OIHJd; IejIp: YXWxs: goto WtVwo; OIHJd: $datafld[$i]->extra = $query[$i]->extra; goto xAk3Z; Dk2sq: Jgq5K: goto Z3Tvk; xAk3Z: goto qiglE; goto H72_m; KDmyD: $c = count($query); goto Dk2sq; wAulY: sZM6N: goto yqaHc; TSPrH: $retval[$i]->extra = $query[$i]->extra; goto IejIp; wcYk6: $currentDb[$table] = $retval; goto QATkT; VDHUb: DIwp4: goto IDyxI; h7Igo: $i = 0; goto KDmyD; EVgdQ: $datafld[$i]->auto_increment = true; goto gHK1C; lMmJe: if (!($query[$i]->extra != '')) { goto c7yIs; } goto JsZ18; VOlAL: goto Jgq5K; goto xT7nE; bj17r: $sql = "\x53\105\114\x45\x43\x54\x20\x60\x63\x6f\x6c\x75\x6d\x6e\x5f\156\141\x6d\145\140\54\40\x60\156\x75\155\145\x72\151\x63\x5f\160\x72\145\x63\x69\x73\151\157\x6e\140\54\x20\140\145\x78\164\x72\x61\140\54\x20\140\x69\x73\x5f\x6e\x75\x6c\x6c\141\x62\x6c\145\140" . "\40\x46\122\117\115\x20\x60\x69\156\146\157\162\155\x61\164\151\157\x6e\137\x73\143\x68\x65\x6d\x61\140\x2e\x60\x63\157\154\x75\155\x6e\x73\140\40\127\x48\105\x52\x45\x20\x74\141\x62\154\145\x5f\x73\x63\150\145\155\x61\x20\x3d\40\42" . $this->db->database . "\x22\40\101\x4e\104\40\x74\x61\142\x6c\x65\137\156\141\155\145\40\75\x20\x22" . $table . "\x22"; goto gEfMm; HiRB_: $datafld = $this->db->field_data($table); goto bj17r; Z3Tvk: if (!($i < $c)) { goto Lnu_B; } goto xXH9r; Sid1X: $currentDb = FALSE; goto I7t9s; IDyxI: } goto vyFWS; kXQQA: $edit_columns = []; goto FGFL5; iZZSs: $tbl_ada = array_keys($fields); goto EvUrm; O_BbM: $create_tables = []; goto GeFki; EERed: $tabless = $this->db->list_tables(); goto y6beE; GeFki: $add_columns = []; goto kXQQA; nC0Ah: eDFBV: goto ilQO7; fPR_o: $json = (array) $json; goto ysOF9; f7vCl: } public function updateDatabase() { goto O6p1K; yOTrG: $tbl_baru = array_keys($json); goto tvLwn; OR48S: $json = (array) $json; goto yOTrG; Ylq9Y: $json = file_get_contents("\x2e\57\141\x73\x73\x65\164\163\57\x61\x70\160\57\144\142\57\x64\141\164\141\x62\x61\163\x65\x2e\x6a\163\x6f\x6e"); goto snS1d; r87YG: sort($full_tables); goto BUzhe; DXSwD: xEahh: goto Ylq9Y; C83kW: m4rfp: goto OM4HD; snS1d: $json = json_decode($json); goto OR48S; l0sC3: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); n9bFh: } goto DXSwD; tvLwn: $tbl_ada = array_keys($fields); goto x7Mvy; OM4HD: echo true; goto aaBms; IIKhZ: $fields = []; goto l0sC3; x7Mvy: $full_tables = array_merge($tbl_baru, $tbl_ada); goto Uqzd9; O6p1K: $tabless = $this->db->list_tables(); goto IIKhZ; Uqzd9: $full_tables = array_unique($full_tables); goto r87YG; BUzhe: foreach ($full_tables as $table) { goto U9W0B; BM4Bc: foreach ($json[$table] as $jtbl) { goto Lh84s; ThMO_: r0IOw: goto KyWJB; lR0nu: UukDp: goto k5iT1; fgv6y: $this->dbforge->add_key($jtbl->name, true); goto ZImmT; u6tnd: kbwEA: goto ARWwX; KbRuH: e8D6F: goto ppMYB; Go1Qd: foreach ($fields[$table] as $ftbl) { goto SfcR1; l50aP: c2Ulh: goto h85qf; pqVIJ: $onUpdate = isset($jtbl->extra) ? "\40" . strtolower($jtbl->extra) : ''; goto SwL0K; MeMR1: goto aMTPW; goto TnDjd; s00h4: vzi3X: goto pqVIJ; Nkh33: tf_FW: goto NMywX; t1KZE: aMTPW: goto Z51pd; aqz2f: ejXep: goto Ycd2C; EdqFm: if ($jtbl->primary_key == 0) { goto nZXY5; } goto vqkPj; IfNP0: QkLO3: goto BFteu; NMywX: $field = array($jtbl->name => array("\x74\171\x70\x65" => $jtbl->type, "\143\x6f\x6e\x73\164\162\x61\x69\x6e\164" => $jtbl->max_length, "\x6e\165\154\154" => false, "\x61\x75\164\x6f\x5f\x69\156\143\x72\145\155\145\156\164" => true)); goto l50aP; Z51pd: dRdpp: goto IfNP0; hRekQ: $this->dbforge->modify_column($table, $field); goto MeMR1; TnDjd: nZXY5: goto sYGrt; vqkPj: if ($jtbl->auto_increment == true) { goto tf_FW; } goto bH0wO; BFteu: nr1YZ: goto hGCkZ; SwL0K: $field = array($jtbl->name . "\40\144\x61\164\x65\x74\151\x6d\145\x20\144\x65\x66\141\x75\x6c\164\x20\x63\x75\x72\x72\x65\156\x74\x5f\164\x69\155\x65\x73\x74\141\155\160" . $onUpdate); goto aqz2f; sYGrt: if ($jtbl->default == "\103\125\x52\x52\105\116\124\x5f\x54\111\115\x45\123\124\x41\x4d\x50") { goto vzi3X; } goto VyPgn; SfcR1: if (!($jtbl->name == $ftbl->name)) { goto QkLO3; } goto esvuw; VyPgn: $field = array($jtbl->name => array("\x74\171\160\145" => $jtbl->type, "\x63\157\156\x73\x74\162\141\x69\x6e\164" => $jtbl->max_length, "\144\145\x66\x61\x75\154\164" => $jtbl->default)); goto LG4YN; Ycd2C: $this->dbforge->modify_column($table, $field); goto t1KZE; LG4YN: goto ejXep; goto s00h4; bH0wO: $field = array($jtbl->name => array("\164\x79\x70\145" => $jtbl->type, "\143\x6f\156\x73\x74\162\141\151\x6e\x74" => $jtbl->max_length, "\156\165\x6c\x6c" => false)); goto pgugf; esvuw: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto dRdpp; } goto EdqFm; h85qf: $this->dbforge->add_key($jtbl->name, true); goto hRekQ; pgugf: goto c2Ulh; goto Nkh33; hGCkZ: } goto ThMO_; Lh84s: if ($this->db->field_exists($jtbl->name, $table)) { goto f52wN; } goto O2cg8; SeqqX: goto UukDp; goto KbRuH; KyWJB: A2Xnp: goto u6tnd; qnGI2: f52wN: goto Go1Qd; WPdxL: $this->dbforge->add_column($table, $field); goto lR0nu; ppMYB: $field = array($jtbl->name => array("\x74\x79\x70\x65" => $jtbl->type, "\143\157\x6e\x73\x74\x72\x61\x69\x6e\164" => $jtbl->max_length, "\x64\145\146\141\x75\154\164" => $jtbl->default)); goto WPdxL; ZImmT: $this->dbforge->add_column($table, $field); goto SeqqX; BUsp2: $field = array($jtbl->name => array("\x74\x79\x70\145" => $jtbl->type, "\x63\157\156\x73\164\162\141\x69\x6e\164" => $jtbl->max_length, "\156\x75\154\154" => false)); goto fgv6y; k5iT1: goto A2Xnp; goto qnGI2; O2cg8: if ($jtbl->primary_key == 0) { goto e8D6F; } goto BUsp2; ARWwX: } goto Yy3o4; I0Ow7: $this->db->query("\101\x4c\x54\105\x52\x20\124\101\102\x4c\x45\40\x20\x60" . $table . "\x60\40\x45\116\x47\x49\116\105\x20\75\40\x49\156\x6e\x6f\x44\102"); goto lrsJs; U9W0B: if ($this->db->table_exists($table)) { goto VUTFG; } goto ThLO8; Yy3o4: eafcN: goto AcQFM; i4DV0: $this->dbforge->create_table($table, TRUE); goto I0Ow7; Y30AA: CXlq0: goto ci9Nh; IzzOa: VUTFG: goto O2xxK; AcQFM: fsq0d: goto PffPx; ThLO8: if (!isset($json[$table])) { goto li4ok; } goto CXiky; u6idW: goto FzlxY; goto IzzOa; PffPx: FzlxY: goto Y30AA; lrsJs: li4ok: goto u6idW; CXiky: foreach ($json[$table] as $tbl => $jtbl) { goto PlJLY; n69y2: S06ai: goto DXEMq; pTD0b: $this->dbforge->add_field($field); goto ZyydX; ZyydX: if (!($jtbl->primary_key == 1)) { goto S06ai; } goto ZAS0O; ZAS0O: $this->dbforge->add_key($jtbl->name, true); goto n69y2; PlJLY: $field = [$jtbl->name => ["\x74\x79\160\145" => $jtbl->type, "\x63\157\156\163\x74\162\141\151\156\x74" => $jtbl->max_length, "\156\165\154\154" => $jtbl->primary_key == 0]]; goto pTD0b; DXEMq: LyZZv: goto QdqBO; QdqBO: } goto Bab7_; O2xxK: if (!isset($json[$table])) { goto fsq0d; } goto BM4Bc; Bab7_: xLagS: goto i4DV0; ci9Nh: } goto C83kW; aaBms: } public function checkDb() { goto yGHMB; SxsFa: pBo38: goto zN4X2; jV8R3: $full_tables = array_unique($full_tables); goto UQmXu; y1fj3: $tbl_seharusnya = array_keys($json); goto ks5w1; WyTWe: $edit_columns = []; goto O2Pps; tjM5g: $json = (array) $json; goto y1fj3; vlE4C: foreach ($tabless as $table) { goto luENu; iRRZC: $fields = FALSE; goto YF_v8; vV9vf: $retval[$i]->extra = $query[$i]->extra; goto qlB7B; SN3RL: $retval[$i]->primary = $query[$i]->column_key; goto QaORZ; oOxVZ: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto PC4QL; Upr7o: $retval = array(); goto azEGM; YF_v8: qoP_l: goto mTkKM; sBmdH: if (!($i < $c)) { goto yqHEf; } goto bwBCb; mTkKM: $query = $query->result_object(); goto Upr7o; i0rJh: $c = count($query); goto K1IRq; C_pm6: goto DvhZx; goto lvuVQ; s2wrJ: $retval[$i]->collation = $query[$i]->collation_name; goto oOxVZ; vNd7_: $retval[$i]->type = $query[$i]->data_type; goto s2wrJ; QaORZ: R4uzu: goto MRT03; K1IRq: DvhZx: goto sBmdH; jC4IH: $fields[$table] = (object) ["\164\x61\x62\154\145\137\156\141\x6d\145" => $table, "\x63\x6f\154\165\x6d\156\163" => $retval]; goto XEmR6; B99Fs: $retval[$i]->name = $query[$i]->column_name; goto Wtlpp; PC4QL: $retval[$i]->default = $query[$i]->column_default; goto XvNQ2; MRT03: $i++; goto C_pm6; u9zu3: if (!(($query = $this->db->query($sql)) === FALSE)) { goto qoP_l; } goto iRRZC; luENu: $sql = "\x53\105\x4c\105\103\x54\x20\140\143\x6f\154\x75\155\x6e\137\156\x61\155\145\x60\x2c\40\x60\143\157\154\x75\155\156\137\164\171\x70\x65\x60\x2c\x20\140\x63\157\154\x6c\x61\164\151\x6f\156\x5f\x6e\141\x6d\145\140\54\x20\140\144\x61\x74\x61\137\164\x79\x70\x65\x60\54\x20\x60\143\150\x61\162\x61\143\x74\145\x72\x5f\x6d\x61\x78\x69\155\165\155\x5f\154\x65\156\147\164\150\x60\x2c\x20\x60\x6e\165\155\x65\162\x69\x63\x5f\160\162\145\143\151\163\x69\157\156\x60\x2c" . "\x20\x60\x63\157\x6c\x75\155\156\137\144\145\146\141\165\x6c\x74\140\x2c\40\x60\143\x6f\x6c\165\x6d\156\137\x6b\x65\171\x60\54\40\x60\143\x6f\x6c\x75\x6d\x6e\x5f\x63\157\155\x6d\145\156\x74\140\54\x20\140\x65\170\x74\x72\x61\x60\x2c\40\x60\151\163\x5f\x6e\165\x6c\154\x61\142\154\145\140\xd\xa\11\11\x9\106\x52\x4f\115\40\140\x69\x6e\146\x6f\x72\155\141\164\151\x6f\156\137\x73\x63\x68\145\x6d\141\140\x2e\140\143\157\x6c\x75\x6d\156\163\140\x20\x57\110\x45\122\105\x20\164\x61\x62\x6c\x65\x5f\x73\143\150\145\155\141\x20\75\x20\x22" . $this->db->database . "\42\40\x41\x4e\x44\40\164\x61\x62\154\145\x5f\156\x61\155\x65\40\x3d\40\x22" . $table . "\42"; goto u9zu3; qlB7B: $retval[$i]->nullable = $query[$i]->is_nullable; goto SN3RL; XvNQ2: $retval[$i]->comment = $query[$i]->column_comment; goto vV9vf; bwBCb: $retval[$i] = new stdClass(); goto B99Fs; azEGM: $i = 0; goto i0rJh; lvuVQ: yqHEf: goto jC4IH; Wtlpp: $retval[$i]->col_type = $query[$i]->column_type; goto vNd7_; XEmR6: Esxcz: goto TfYMh; TfYMh: } goto bx0qX; yGHMB: $db_debug = $this->db->db_debug; goto K1bZ0; SYtVy: $script_create_table = []; goto CY0sF; WFOGt: $fields = []; goto vlE4C; Yg1f3: $json = json_decode($json); goto tjM5g; O2Pps: $script_edit_column = []; goto YRwfy; zOt1d: $create_tables = []; goto SYtVy; xD3Nz: $data = ["\146\x69\x65\x6c\x64\x73" => $fields, "\143\162\145\141\164\145\x5f\164\141\142\154\x65\x73" => $create_tables, "\x63\157\x75\156\x74\137\x74\142\x6c" => count($create_tables), "\x61\144\x64\x5f\143\x6f\x6c\x75\155\156\163\137\x74\x6f\137\164\x61\142\154\145" => $add_columns, "\x63\x6f\x75\x6e\164\x5f\143\x6f\x6c" => count($add_columns), "\x65\144\151\x74\x5f\143\157\x6c\165\x6d\x6e\x73" => $edit_columns, "\143\x6f\x75\156\x74\x5f\x6d\x6f\x64" => count($edit_columns), "\x61\x64\x64\x5f\x74\x62\154" => $this->encryption->encrypt(json_encode($script_create_table)), "\141\144\144\x5f\x63\x6f\x6c" => $this->encryption->encrypt(json_encode($script_create_column)), "\155\157\144\x5f\x63\x6f\154" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto HZ9XJ; zN4X2: $this->db->db_debug = $db_debug; goto xD3Nz; YRwfy: foreach ($full_tables as $table) { goto FJUwV; f4KHT: $script_edit_column[$table] = "\101\114\x54\105\122\40\x54\101\x42\114\105\x20\x60" . $table . "\x60\x20" . implode("\54\x20", $modif_column) . "\73"; goto SPClL; TEeTN: Ssvqd: goto CKLHI; SPClL: lbcMz: goto TEeTN; gZ0_K: $script_create_column[$table] = "\101\114\124\x45\x52\x20\124\101\102\114\x45\x20\x60" . $table . "\x60\x20" . implode("\x2c\40", $add_column) . "\73"; goto rwhOr; yiJOA: if (!isset($json[$table])) { goto Ssvqd; } goto EgelM; yW7gr: u41qa: goto HMlWA; PpbIg: B1RCl: goto ccFLE; ZhCMq: foreach ($json[$table]->columns as $column) { goto FrClQ; nszT7: goto noo6K; goto N1gQN; eKi0Q: $length = ''; goto ey88m; mLPm0: rAsg5: goto vBfI_; N1gQN: zga34: goto Fp61N; f2VGK: if ($column->type == "\151\156\x74") { goto zga34; } goto PLmqC; heZ4W: $default = $column->default == null ? '' : "\40\x44\105\106\101\125\x4c\x54\40" . $column->default; goto VzVvg; Fp61N: $length = "\50" . ($column->max_length + 1) . "\51"; goto CrH_n; PLmqC: $length = "\50" . $column->max_length . "\x29"; goto nszT7; cswjC: GgtUY: goto XPxZV; E2iAx: $comment = $column->comment == '' ? '' : "\x20\103\x4f\x4d\x4d\105\116\x54\x20\47" . $column->comment . "\47"; goto u8VjP; EnAEN: if ($column->type != "\x6c\x6f\156\x67\164\x65\x78\x74" && $column->type != "\x6d\145\x64\x69\x75\x6d\x74\x65\170\164" && $column->type != "\x74\145\170\164") { goto OHGrN; } goto jVlDg; UqrrN: OHGrN: goto f2VGK; aoNvE: $pri .= $column->primary != '' ? "\120\122\x49\x4d\x41\x52\131\40\x4b\x45\x59\40\x28\140" . $column->name . "\x60\x29" : ''; goto mLPm0; FrClQ: if ($column->max_length == null) { goto Rgbnf; } goto EnAEN; UY__F: Rgbnf: goto eKi0Q; jVlDg: $length = ''; goto wg3cG; ey88m: goto GgtUY; goto UqrrN; VzVvg: $extra = $column->extra == '' ? '' : "\x20" . strtoupper($column->extra); goto E2iAx; wg3cG: goto GgtUY; goto UY__F; u8VjP: $script .= "\140" . $column->name . "\x60\x20" . $column->type . $length . $nullable . $default . $extra . $comment . "\54\40"; goto aoNvE; CrH_n: noo6K: goto cswjC; XPxZV: $nullable = $column->nullable == "\116\x4f" ? "\x20\x4e\117\124\40\116\125\114\x4c" : ''; goto heZ4W; vBfI_: } goto yW7gr; CKLHI: goto selQK; goto M4Evz; munqG: if (!(count($modif_column) > 0)) { goto lbcMz; } goto f4KHT; HMlWA: $script .= $pri . "\51\40\105\116\107\x49\x4e\105\x3d\x49\156\156\x6f\104\102\40\104\105\x46\101\x55\x4c\124\x20\103\x48\x41\122\123\105\124\75\165\164\x66\70\x6d\x62\64\x3b"; goto zHySf; Dnp0y: $pri = ''; goto ZhCMq; J47m_: $create_tables[] = $json[$table]; goto PKoif; zHySf: $script_create_table[$table] = $script; goto KNIGT; FJUwV: if (!$this->db->table_exists($table)) { goto X0lE4; } goto yiJOA; KNIGT: selQK: goto Tk4Sc; PKoif: $script = "\x43\122\105\101\124\105\40\124\101\x42\x4c\x45\x20\x60" . $table . "\x60\40\x28"; goto Dnp0y; rwhOr: HwUMh: goto munqG; ccFLE: if (!(count($add_column) > 0)) { goto HwUMh; } goto gZ0_K; Nc9UA: foreach ($json[$table]->columns as $jtbl) { goto aMGCt; let5m: EUez0: goto B15Js; wQx7Z: goto knwz8; goto ctbM2; VQCIq: goto Hrqov; goto Kejim; h6e7I: $extra .= "\x20\x50\x52\x49\x4d\101\x52\x59\x20\113\x45\131"; goto L5s4w; Kejim: SqdLj: goto jOZsH; aMGCt: if ($this->db->field_exists($jtbl->name, $table)) { goto ADga4; } goto AUXGe; bOzet: $default = $jtbl->default == null ? '' : "\x20\x44\x45\x46\101\x55\x4c\124\x20" . $jtbl->default; goto YUZQZ; AUXGe: $add_columns[$table][] = $jtbl; goto hxF0G; HVPKD: ADga4: goto KdOCm; hxF0G: if ($jtbl->max_length == null) { goto hnBRC; } goto bxNn4; zbPd2: Hrqov: goto Ko2RB; t2NKD: $nullable = $jtbl->nullable == "\x4e\x4f" ? "\x20\116\x4f\x54\x20\116\x55\114\114" : ''; goto bOzet; ctbM2: hnBRC: goto b4f3w; ng5eA: goto knwz8; goto SPBfq; Ko2RB: knwz8: goto t2NKD; B15Js: MF9hF: goto GR0hb; bxNn4: if ($jtbl->type != "\x6c\157\x6e\147\x74\x65\x78\x74" && $jtbl->type != "\155\x65\144\151\165\155\164\x65\x78\164" && $jtbl->type != "\164\x65\x78\164") { goto NZUSB; } goto WuCnw; YUZQZ: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto fKrh5; fKrh5: if (!(strtoupper($extra) == "\x20\101\125\124\117\137\111\x4e\x43\122\105\115\105\116\124")) { goto HOeXy; } goto h6e7I; c_PXY: $length = "\50" . $jtbl->max_length . "\51"; goto VQCIq; jOZsH: $length = "\x28" . ($jtbl->max_length + 1) . "\51"; goto zbPd2; hP0hu: array_push($add_column, "\101\x44\104\40\140" . $jtbl->name . "\x60\x20" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto HVPKD; b4f3w: $length = ''; goto ng5eA; L5s4w: HOeXy: goto KpISW; KdOCm: foreach ($fields[$table]->columns as $ftbl) { goto kha7X; p8eeM: $edit_columns[$table][$jtbl->name]["\x64\145\146\x61\x75\x6c\164"] = $jtbl->default; goto Wovzf; EqgnI: if (strtolower($jtbl->primary) == "\x70\162\x69") { goto DHe52; } goto GA_Rk; G9Yxm: goto cwlA3; goto FdmV3; i1L18: DHe52: goto mfCxx; ramPH: $edit_columns[$table][$jtbl->name]["\156\165\x6c\x6c\141\142\x6c\145"] = $jtbl->nullable; goto iC50j; i5iVG: Yq2BE: goto OXs66; GA_Rk: if (strtolower($jtbl->primary) == "\x75\x6e\x69") { goto oyyDJ; } goto DCGwF; E3df8: $default = $jtbl->default == null ? '' : "\x20\x44\x45\106\101\x55\114\124\x20" . $jtbl->default; goto LMPbv; bG_Ap: if (!($jtbl->default != $ftbl->default)) { goto MCddv; } goto p8eeM; LMPbv: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto Qx4X8; D8S6v: $jtbl->extra = strtoupper($jtbl->extra); goto og13Y; ZJouz: $ftbl->extra = str_replace("\50\51", '', $ftbl->extra); goto FNvdK; kha7X: if (!($jtbl->name == $ftbl->name)) { goto rmsY9; } goto SDskx; mfCxx: array_push($modif_column, "\101\x44\104\40\120\x52\111\x4d\x41\122\x59\40\113\105\x59\x20\50\140" . $jtbl->name . "\x60\51"); goto G9Yxm; zWlzZ: array_push($modif_column, "\x41\x44\x44\x20\x55\x4e\111\x51\125\105\40\x4b\x45\x59\x20\140" . $jtbl->name . "\140\x20\50\x60" . $jtbl->name . "\140\x29"); goto nV4sw; nb5od: cSXKT: goto KNuLF; og13Y: HGRRs: goto f1QXZ; NShYG: $jtbl->extra = str_replace("\x28\x29", '', $jtbl->extra); goto D8S6v; nV4sw: cwlA3: goto EYOok; ISLBd: JBXfu: goto LewBV; wY9R6: $edit_columns[$table][$jtbl->name]["\143\x6f\x6d\x6d\x65\x6e\x74"] = $jtbl->comment; goto xYfvy; rNir1: $nullable = $jtbl->nullable == "\116\x4f" ? "\40\x4e\x4f\124\40\116\125\114\x4c" : ''; goto E3df8; OXs66: if (!($ftbl->default != null)) { goto orHGz; } goto VWPAk; xYfvy: tPknw: goto aWci8; osxGw: if (!($jtbl->extra != $ftbl->extra)) { goto cSXKT; } goto bOKXh; DFzyP: rkBI3: goto MyO8_; Oo4Bw: rmsY9: goto DFzyP; qJjbe: $jtbl->default = str_replace("\x28\51", '', $jtbl->default); goto H4k2E; EYOok: P9cDM: goto LYFf0; ONes5: $ftbl->default = strtoupper($ftbl->default); goto ouu2e; xzR24: TVOJ9: goto osxGw; SDskx: if (!($jtbl->col_type != $ftbl->col_type)) { goto JBXfu; } goto Pz_Nu; a4a8M: d0WNw: goto Oo4Bw; Pz_Nu: $edit_columns[$table][$jtbl->name]["\x63\x6f\154\x5f\x74\x79\160\x65"] = $jtbl->col_type; goto ISLBd; C6a_6: array_push($modif_column, "\x4d\x4f\104\111\x46\131\x20\140" . $jtbl->name . "\140\40" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto a4a8M; FNvdK: $ftbl->extra = strtoupper($ftbl->extra); goto xzR24; iC50j: NXTII: goto FRQYy; Oll1S: if (!($jtbl->extra != null)) { goto HGRRs; } goto NShYG; f1QXZ: if (!($ftbl->extra != null)) { goto TVOJ9; } goto ZJouz; Qx4X8: $comment = $jtbl->comment == '' ? '' : "\40\103\117\x4d\115\105\116\124\x20\47" . $jtbl->comment . "\x27"; goto C6a_6; aWci8: if (!($jtbl->primary != $ftbl->primary)) { goto P9cDM; } goto ruo8m; KNuLF: if (!($jtbl->comment != $ftbl->comment)) { goto tPknw; } goto wY9R6; Wovzf: MCddv: goto Oll1S; H4k2E: $jtbl->default = strtoupper($jtbl->default); goto i5iVG; FdmV3: oyyDJ: goto zWlzZ; VWPAk: $ftbl->default = str_replace("\50\51", '', $ftbl->default); goto ONes5; bOKXh: $edit_columns[$table][$jtbl->name]["\145\x78\x74\x72\x61"] = $jtbl->extra; goto nb5od; ruo8m: $edit_columns[$table][$jtbl->name]["\x70\162\151\x6d\141\x72\x79"] = $jtbl->primary; goto EqgnI; ouu2e: orHGz: goto bG_Ap; DCGwF: goto cwlA3; goto i1L18; FRQYy: if (!($jtbl->default != null)) { goto Yq2BE; } goto qJjbe; LYFf0: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto d0WNw; } goto rNir1; LewBV: if (!($jtbl->nullable != $ftbl->nullable)) { goto NXTII; } goto ramPH; MyO8_: } goto let5m; WuCnw: $length = ''; goto wQx7Z; SPBfq: NZUSB: goto fdJ86; fdJ86: if ($jtbl->type == "\x69\156\164") { goto SqdLj; } goto c_PXY; KpISW: $comment = $jtbl->comment == '' ? '' : "\40\x43\x4f\x4d\x4d\105\x4e\x54\x20\47" . $jtbl->comment . "\47"; goto hP0hu; GR0hb: } goto PpbIg; VuH0Z: $modif_column = []; goto Nc9UA; Tk4Sc: cHKp8: goto yKk4c; EgelM: $add_column = []; goto VuH0Z; M4Evz: X0lE4: goto J47m_; yKk4c: } goto SxsFa; ks5w1: $tbl_ada = array_keys($fields); goto CqdKG; K1bZ0: $this->db->db_debug = FALSE; goto sngsO; sngsO: $tabless = $this->db->list_tables(); goto WFOGt; HZ9XJ: $this->output_json($data); goto Lw1X2; EWc0k: $script_create_column = []; goto WyTWe; UQmXu: sort($full_tables); goto zOt1d; CY0sF: $add_columns = []; goto EWc0k; PeVsv: $json = file_get_contents("\x2e\57\x61\x73\163\145\164\x73\57\x61\160\160\57\x64\x62\x2f\x64\141\164\141\142\141\x73\x65\x2e\152\163\157\156"); goto Yg1f3; CqdKG: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto jV8R3; bx0qX: rhLs8: goto PeVsv; Lw1X2: } public function createTable() { goto d2RrJ; hl27U: $this->output_json($data); goto l0W9d; d2RrJ: $scripts = $this->input->post("\x64\x61\164\x61", true); goto Dh52G; a3Rr8: sleep(1); goto CXqO5; rGzop: $data["\x73\165\143\143\x65\x73\163"] = $this->runQuery($queries); goto jMGgL; CXqO5: $scripts = json_decode($this->encryption->decrypt($scripts)); goto GMywN; jMGgL: $data["\x6d\x65\x73\x73\x61\147\145"] = "\125\x70\144\x61\x74\x65\40\x6b\x6f\x6c\x6f\x6d"; goto hl27U; yyz40: LoGnU: goto rGzop; OcOOi: foreach ($scripts as $script) { $queries .= $script; aM2bp: } goto yyz40; GMywN: $queries = ''; goto OcOOi; Dh52G: str_replace("\45\62\102", "\53", $scripts); goto a3Rr8; l0W9d: } public function createColumn() { goto eSjdD; Fi_QS: $data["\155\x65\x73\x73\x61\x67\x65"] = "\x4d\157\x64\x69\146\x79\x20\153\x6f\154\157\x6d"; goto cevQs; rkYC0: $queries = ''; goto XF3k3; pKp3M: FZLDs: goto NoxQG; cHwqr: $scripts = json_decode($this->encryption->decrypt($scripts)); goto rkYC0; NoxQG: if (!(strpos("\140\x75\151\x64\140", $queries) !== false)) { goto DrCGi; } goto AphMn; XF3k3: foreach ($scripts as $script) { $queries .= $script; ZfZpb: } goto pKp3M; eSjdD: $scripts = $this->input->post("\x64\141\164\x61", true); goto tRpbi; tRpbi: str_replace("\x25\x32\x42", "\53", $scripts); goto qdO2D; J9iMY: DrCGi: goto j_HLw; cevQs: $this->output_json($data); goto b_Mh2; qdO2D: sleep(1); goto cHwqr; j_HLw: $data["\163\x75\x63\143\x65\163\163"] = $this->runQuery($queries); goto Fi_QS; AphMn: $this->updateUID(); goto J9iMY; b_Mh2: } public function editColumn() { goto QvGDX; lBbwI: $scripts = json_decode($this->encryption->decrypt($scripts)); goto BWbS9; zLsmk: h69NJ: goto d7AIe; QvGDX: $scripts = $this->input->post("\144\141\x74\141", true); goto kO4Nd; LwdHf: foreach ($scripts as $script) { $queries .= $script; PKTVb: } goto zLsmk; BoJTt: $this->output_json($data); goto bL4zA; kO4Nd: str_replace("\45\62\102", "\x2b", $scripts); goto uzH0k; VCRC8: $data["\155\x65\163\x73\141\x67\x65"] = "\125\160\144\141\164\x65\x20\x73\x65\x6c\145\x73\x61\151"; goto BoJTt; d7AIe: $data["\x73\x75\x63\x63\145\163\163"] = $this->runQuery($queries); goto VCRC8; BWbS9: $queries = ''; goto LwdHf; uzH0k: sleep(1); goto lBbwI; bL4zA: } function runQuery($script) { goto MrnzR; EQTRF: return mysqli_connect_errno(); goto v5yTo; wHTsP: $mysqli->close(); goto ziZfB; ziZfB: return true; goto LfDzN; O20Nd: if (!mysqli_connect_errno()) { goto q6ubo; } goto EQTRF; MwqfN: $hostuser = $this->db->username; goto ZJHDZ; mqP0o: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto O20Nd; JymFL: $mysqli->multi_query($script); goto wHTsP; ZJHDZ: $hostpass = $this->db->password; goto pIfmv; MrnzR: $hostname = $this->db->hostname; goto MwqfN; v5yTo: q6ubo: goto JymFL; pIfmv: $database = $this->db->database; goto mqP0o; LfDzN: } function updateUID() { goto HPmgV; LFFI2: $input = array(); goto Sqryj; h9Cld: pcJdN: goto NUgQx; NUgQx: return $this->db->update_batch("\155\x61\x73\164\145\x72\x5f\x73\151\163\167\x61", $input, "\151\x64\x5f\x73\151\163\x77\x61"); goto AJSH3; HPmgV: $this->load->library("\125\165\x69\x64", "\165\x75\x69\144"); goto o8aAx; o8aAx: $siswas = $this->db->get("\155\141\163\164\x65\x72\x5f\x73\151\x73\x77\141")->result(); goto LFFI2; Sqryj: foreach ($siswas as $siswa) { $input[] = array("\x69\x64\x5f\x73\151\163\167\x61" => $siswa->id_siswa, "\x75\x69\144" => $this->uuid->v4()); jLy3f: } goto h9Cld; AJSH3: } function make_base() { } }
