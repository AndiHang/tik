<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\x41\123\x45\120\x41\124\110") or exit("\x4e\157\x20\x64\x69\162\x65\143\164\40\163\x63\162\151\x70\x74\40\x61\x63\x63\145\x73\x73\x20\141\154\x6c\x6f\x77\145\144"); class Update extends CI_Controller { function __construct() { goto YOiby; YOiby: parent::__construct(); goto bhmCs; o9ZTf: $this->load->database(); goto kiaou; BXtci: $this->load->dbforge(); goto o9ZTf; bhmCs: include APPPATH . "\143\x6f\156\x66\151\x67\x2f\144\141\164\x61\x62\141\163\x65\56\160\x68\160"; goto BXtci; kiaou: $this->load->library("\145\156\x63\162\171\160\x74\x69\157\x6e"); goto Dd5T0; Dd5T0: } public function output_json($data, $encode = true) { goto Rf2Om; fvouu: $this->output->set_content_type("\x61\x70\x70\154\151\x63\x61\x74\151\157\156\57\x6a\163\157\156")->set_output($data); goto QJvQL; Qo66G: $data = json_encode($data); goto Nf2Yu; Nf2Yu: InRwD: goto fvouu; Rf2Om: if (!$encode) { goto InRwD; } goto Qo66G; QJvQL: } public function index() { goto FlLNy; r3Dwz: $this->load->view("\x69\x6e\x73\164\141\154\x6c\57\150\x65\x61\x64\145\x72", $data); goto GkRh7; GkRh7: $this->load->view("\x69\156\x73\164\141\154\x6c\x2f\165\160\x64\x61\164\145"); goto ZotMb; FlLNy: $json = file_get_contents("\x2e\x2f\141\163\x73\145\x74\x73\57\141\x70\x70\x2f\144\142\x2f\x64\x61\164\x61\x62\x61\x73\x65\x2e\152\163\x6f\x6e"); goto eQ20c; XdzVk: $data["\152\x73\x6f\156"] = $json; goto r3Dwz; eQ20c: $json = json_decode($json); goto G_yPa; ZotMb: $this->load->view("\x69\x6e\x73\164\141\154\x6c\57\146\x6f\x6f\x74\x65\162"); goto UKJqJ; G_yPa: $json = (array) $json; goto XdzVk; UKJqJ: } function object_to_array($data) { goto oanWt; Sg2B0: $result = []; goto QvikE; CT_Yd: return $result; goto qkD6X; QvikE: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; dL00z: } goto ByCtq; oanWt: if (!(is_array($data) || is_object($data))) { goto LfKQM; } goto Sg2B0; qkD6X: LfKQM: goto rVlUR; ByCtq: Izw07: goto CT_Yd; rVlUR: return $data; goto bG0sL; bG0sL: } public function checkDatabase() { goto OP5Wx; vlWw7: oGTj4: goto kt2ml; iu3Ab: $tbl_ada = array_keys($fields); goto n8H02; FRjiv: foreach ($full_tables as $table) { goto XKJPr; XKJPr: if ($this->db->table_exists($table)) { goto LLn39; } goto p5WEY; UVIyi: foreach ($json[$table] as $jtbl) { goto F0apJ; F0apJ: if ($this->db->field_exists($jtbl->name, $table)) { goto tG93w; } goto v33h0; Qh0dJ: OWZX8: goto XWy8n; T9ig_: foreach ($fields[$table] as $ftbl) { goto Wl9ZW; V09Cx: Qbq4C: goto uTOdi; GWYCa: UcswA: goto V09Cx; i6sG9: b3nZn: goto GWYCa; Wl9ZW: if (!($jtbl->name == $ftbl->name)) { goto UcswA; } goto rMCs3; rMCs3: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto b3nZn; } goto qzWL5; qzWL5: $edit_columns[$table][] = $jtbl; goto i6sG9; uTOdi: } goto Qh0dJ; uLyFX: tG93w: goto T9ig_; XWy8n: kRYhn: goto rUFXd; rUFXd: MEG68: goto lbNKR; bkZnj: goto kRYhn; goto uLyFX; v33h0: $add_columns[$table][] = $jtbl; goto bkZnj; lbNKR: } goto y1tQb; uqbxH: WpFRL: goto jpkr3; H3IDZ: LLn39: goto Enx_V; gKqyc: PHQUF: goto asrte; p5WEY: $create_tables[$table] = $json[$table]; goto riFlS; riFlS: goto m9Y67; goto H3IDZ; Enx_V: if (!isset($json[$table])) { goto PHQUF; } goto UVIyi; y1tQb: pRB4r: goto gKqyc; asrte: m9Y67: goto uqbxH; jpkr3: } goto vlWw7; W3XQz: $this->output_json($data); goto HGqVG; IV4xW: $json = json_decode($json); goto HEqYi; RAX4K: foreach ($tabless as $table) { goto qkQiQ; qkQiQ: $datafld = $this->db->field_data($table); goto dpB3I; w1CSD: $retval[$i]->name = $query[$i]->column_name; goto jqj9R; SK1yH: $retval[$i] = new stdClass(); goto w1CSD; SeTEl: fJ4Gh: goto RT3V6; yCRoh: $datafld[$i]->extra = $query[$i]->extra; goto UsP72; XjHX9: if (!($i < $c)) { goto fJ4Gh; } goto bFP2D; DSajI: $datafld[$i]->auto_increment = true; goto gN7Xj; VPFRj: $i++; goto CR9xW; cKRVm: YQ1C1: goto vCRxa; f6cMs: if ($query[$i]->extra == "\x61\165\164\157\137\151\x6e\143\x72\x65\x6d\145\156\164") { goto CigzR; } goto yCRoh; g4wUj: uyH0R: goto SK1yH; DD2gs: $currentDb = FALSE; goto cKRVm; bFP2D: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto uyH0R; } goto QwavS; dpB3I: $sql = "\x53\x45\x4c\x45\x43\x54\x20\140\x63\157\154\165\x6d\x6e\x5f\x6e\x61\x6d\145\x60\54\40\x60\156\165\x6d\x65\162\x69\x63\137\x70\162\145\143\151\x73\x69\x6f\x6e\x60\x2c\40\x60\x65\x78\x74\x72\x61\x60\x2c\x20\x60\x69\163\137\156\x75\154\154\x61\142\154\x65\x60" . "\40\106\122\117\115\x20\140\151\x6e\x66\157\162\155\x61\x74\151\157\156\x5f\x73\143\x68\145\155\x61\140\x2e\x60\143\157\154\165\x6d\x6e\163\140\x20\127\x48\105\x52\x45\40\x74\x61\x62\x6c\145\137\163\143\x68\145\x6d\x61\x20\75\x20\42" . $this->db->database . "\42\40\101\116\104\40\164\x61\142\154\145\137\x6e\141\x6d\145\x20\75\40\42" . $table . "\42"; goto e_WPq; KmahN: F8CNb: goto XjHX9; CR9xW: goto F8CNb; goto SeTEl; jqj9R: $retval[$i]->extra = $query[$i]->extra; goto TqCsl; m4g0U: s1Zc0: goto E1Vpn; iw8Bf: $c = count($query); goto KmahN; ChLIy: $retval = array(); goto BNXnI; BNXnI: $i = 0; goto iw8Bf; vCRxa: $query = $query->result_object(); goto ChLIy; UsP72: goto pgw9D; goto Bl8Hj; QwavS: if (!($query[$i]->extra != '')) { goto ll9LY; } goto f6cMs; Bl8Hj: CigzR: goto DSajI; PRNdV: ll9LY: goto g4wUj; RT3V6: $currentDb[$table] = $retval; goto X_QJn; e_WPq: if (!(($query = $this->db->query($sql)) === FALSE)) { goto YQ1C1; } goto DD2gs; X_QJn: $fields[$table] = $datafld; goto m4g0U; TqCsl: gCHbv: goto VPFRj; gN7Xj: pgw9D: goto PRNdV; E1Vpn: } goto xAQY1; BBrul: $create_tables = []; goto D0Uql; VFCnU: $edit_columns = []; goto FRjiv; Yu2L4: $json = file_get_contents("\x2e\57\141\163\x73\145\x74\x73\57\141\x70\x70\x2f\x64\x62\57\x64\x61\164\141\142\141\163\145\56\152\x73\x6f\156"); goto IV4xW; xAQY1: UnFaR: goto Yu2L4; sVBQo: $currentDb = []; goto RAX4K; WrTVk: sort($full_tables); goto BBrul; Cr9jG: $data = ["\144\x62" => $fields, "\143\x72\145\141\164\145" => $create_tables, "\x6d\157\x64\x69\146\x79" => $edit_columns, "\x61\x64\144" => $add_columns, "\143\157\x75\156\164\x73" => $counts, "\152\x73\157\x6e" => $json, "\143\165\162\162\x65\156\164" => $currentDb]; goto W3XQz; N3W21: $this->db->db_debug = FALSE; goto VniQW; V4FDg: $full_tables = array_unique($full_tables); goto WrTVk; OP5Wx: $db_debug = $this->db->db_debug; goto N3W21; cGWEX: $fields = []; goto sVBQo; VniQW: $tabless = $this->db->list_tables(); goto cGWEX; D0Uql: $add_columns = []; goto VFCnU; n8H02: $full_tables = array_merge($tbl_baru, $tbl_ada); goto V4FDg; HEqYi: $json = (array) $json; goto Q0Uid; kt2ml: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto Cr9jG; Q0Uid: $tbl_baru = array_keys($json); goto iu3Ab; HGqVG: } public function updateDatabase() { goto dOvGe; NGpnA: sort($full_tables); goto pYnQU; Y7ywR: $full_tables = array_unique($full_tables); goto NGpnA; dOvGe: $tabless = $this->db->list_tables(); goto XRxoM; hJ5Mz: g927n: goto d2xoP; DHUKj: $tbl_ada = array_keys($fields); goto Sikku; PwejT: jvKVq: goto bYw_p; teMhb: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); i4CKB: } goto PwejT; XWbpr: $json = (array) $json; goto u3rHl; bYw_p: $json = file_get_contents("\x2e\57\x61\x73\x73\x65\x74\x73\x2f\x61\160\160\57\144\142\x2f\x64\141\164\x61\x62\x61\x73\x65\x2e\x6a\x73\x6f\x6e"); goto h7e9G; Sikku: $full_tables = array_merge($tbl_baru, $tbl_ada); goto Y7ywR; d2xoP: echo true; goto vZQXp; pYnQU: foreach ($full_tables as $table) { goto Rr_Fd; lf6ju: BLd5L: goto AB4yw; cbm_s: $this->db->query("\101\114\x54\105\122\40\x54\101\102\x4c\105\40\40\140" . $table . "\x60\40\105\116\107\x49\116\x45\x20\75\x20\111\156\156\157\x44\102"); goto bapGg; UFuNg: $this->dbforge->create_table($table, TRUE); goto cbm_s; zqESE: jmEZM: goto lf6ju; AB4yw: kT9kV: goto oVXiS; oLgLc: goto BLd5L; goto g14Ke; ziqRr: foreach ($json[$table] as $jtbl) { goto MLlXo; KYdOZ: aiMgh: goto Nro_3; YAhEW: PHyWq: goto QwpxM; YoNZG: $field = array($jtbl->name => array("\x74\x79\160\x65" => $jtbl->type, "\143\x6f\156\x73\x74\162\141\151\156\164" => $jtbl->max_length, "\156\165\154\x6c" => false)); goto h50BV; Mjm3q: goto Jh3s8; goto KYdOZ; MLlXo: if ($this->db->field_exists($jtbl->name, $table)) { goto W5ioJ; } goto fZp7H; D3aje: $this->dbforge->add_column($table, $field); goto Mjm3q; Nro_3: $field = array($jtbl->name => array("\164\171\x70\145" => $jtbl->type, "\143\x6f\x6e\163\x74\162\141\151\156\164" => $jtbl->max_length, "\x64\145\x66\141\165\x6c\x74" => $jtbl->default)); goto tO5LS; fZp7H: if ($jtbl->primary_key == 0) { goto aiMgh; } goto YoNZG; zrMov: W5ioJ: goto EONmt; ADr6L: JHsUq: goto AK1sM; h50BV: $this->dbforge->add_key($jtbl->name, true); goto D3aje; HtExR: goto tl9qE; goto zrMov; EONmt: foreach ($fields[$table] as $ftbl) { goto FSBs0; ez0QQ: if ($jtbl->auto_increment == true) { goto TH35y; } goto pKcJV; TbOCT: Wq16s: goto oL7ug; C0a2d: fXLQg: goto CAC8U; P3HTB: TH35y: goto WMVf4; ySrCN: if ($jtbl->primary_key == 0) { goto s5sPp; } goto ez0QQ; ec229: fZioM: goto C0a2d; j5fc2: $onUpdate = isset($jtbl->extra) ? "\40" . strtolower($jtbl->extra) : ''; goto vX6rZ; vX6rZ: $field = array($jtbl->name . "\x20\x64\141\x74\x65\164\x69\155\145\40\x64\x65\146\x61\x75\x6c\x74\40\x63\x75\x72\x72\145\x6e\164\137\x74\x69\155\x65\x73\164\x61\155\x70" . $onUpdate); goto FM7XL; ua7QI: $field = array($jtbl->name => array("\x74\171\x70\145" => $jtbl->type, "\143\x6f\x6e\163\x74\x72\141\151\x6e\x74" => $jtbl->max_length, "\144\145\146\141\x75\154\x74" => $jtbl->default)); goto m7u0C; FM7XL: rr3BE: goto MMZt0; oL7ug: wuHuV: goto ec229; wQiBL: goto S3clD; goto P3HTB; pKcJV: $field = array($jtbl->name => array("\164\171\160\145" => $jtbl->type, "\143\157\x6e\163\164\x72\x61\x69\156\164" => $jtbl->max_length, "\156\x75\x6c\154" => false)); goto wQiBL; nF5bH: lHBLi: goto j5fc2; m7u0C: goto rr3BE; goto nF5bH; FSBs0: if (!($jtbl->name == $ftbl->name)) { goto fZioM; } goto lB1Z5; dyWmd: goto Wq16s; goto GlDeG; WMVf4: $field = array($jtbl->name => array("\164\x79\160\x65" => $jtbl->type, "\143\x6f\156\163\164\162\x61\151\156\x74" => $jtbl->max_length, "\x6e\x75\154\154" => false, "\141\x75\164\x6f\137\151\x6e\143\162\145\x6d\x65\x6e\164" => true)); goto maSJq; maSJq: S3clD: goto He_AF; He_AF: $this->dbforge->add_key($jtbl->name, true); goto waguL; GlDeG: s5sPp: goto MTbCp; MMZt0: $this->dbforge->modify_column($table, $field); goto TbOCT; waguL: $this->dbforge->modify_column($table, $field); goto dyWmd; lB1Z5: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto wuHuV; } goto ySrCN; MTbCp: if ($jtbl->default == "\x43\125\x52\122\105\x4e\124\137\x54\x49\115\105\x53\x54\101\x4d\x50") { goto lHBLi; } goto ua7QI; CAC8U: } goto ADr6L; tO5LS: $this->dbforge->add_column($table, $field); goto r77pu; AK1sM: tl9qE: goto YAhEW; r77pu: Jh3s8: goto HtExR; QwpxM: } goto C7d2I; Yfv5x: if (!isset($json[$table])) { goto wFZZz; } goto hIuwg; g14Ke: Z0egQ: goto XRZ9c; BDOq6: gBI31: goto UFuNg; hIuwg: foreach ($json[$table] as $tbl => $jtbl) { goto bV8aX; WJNKx: if (!($jtbl->primary_key == 1)) { goto z3uol; } goto lVW0p; kAJDk: R0tWN: goto aPyKk; lVW0p: $this->dbforge->add_key($jtbl->name, true); goto FWchx; FWchx: z3uol: goto kAJDk; bV8aX: $field = [$jtbl->name => ["\164\171\x70\x65" => $jtbl->type, "\x63\x6f\x6e\163\x74\x72\x61\151\x6e\x74" => $jtbl->max_length, "\156\165\154\x6c" => $jtbl->primary_key == 0]]; goto BfwxB; BfwxB: $this->dbforge->add_field($field); goto WJNKx; aPyKk: } goto BDOq6; Rr_Fd: if ($this->db->table_exists($table)) { goto Z0egQ; } goto Yfv5x; XRZ9c: if (!isset($json[$table])) { goto jmEZM; } goto ziqRr; bapGg: wFZZz: goto oLgLc; C7d2I: dCfGo: goto zqESE; oVXiS: } goto hJ5Mz; h7e9G: $json = json_decode($json); goto XWbpr; XRxoM: $fields = []; goto teMhb; u3rHl: $tbl_baru = array_keys($json); goto DHUKj; vZQXp: } public function checkDb() { goto nLDRh; JT6L2: $this->db->db_debug = $db_debug; goto B4pso; dVxVs: $this->db->db_debug = FALSE; goto o7zd1; GEYvU: $script_create_table = []; goto MO8UD; o7zd1: $tabless = $this->db->list_tables(); goto g8YCt; X7a0C: $full_tables = array_unique($full_tables); goto Zl3Ns; J0UPX: $json = file_get_contents("\x2e\57\x61\x73\x73\145\x74\163\57\x61\x70\160\57\144\142\57\144\141\164\141\142\x61\x73\x65\56\x6a\163\x6f\156"); goto QGqjv; X5WkV: $edit_columns = []; goto HQhI9; B4pso: $data = ["\146\x69\145\x6c\144\163" => $fields, "\x63\x72\145\x61\164\x65\x5f\x74\141\142\154\145\x73" => $create_tables, "\143\x6f\165\156\x74\137\164\x62\154" => count($create_tables), "\x61\144\144\x5f\143\157\154\x75\x6d\x6e\x73\x5f\164\x6f\137\x74\x61\142\154\x65" => $add_columns, "\143\x6f\x75\x6e\164\137\x63\157\x6c" => count($add_columns), "\145\x64\151\x74\x5f\x63\157\154\165\x6d\156\x73" => $edit_columns, "\143\157\x75\156\164\x5f\x6d\157\144" => count($edit_columns), "\141\144\144\x5f\x74\142\x6c" => $this->encryption->encrypt(json_encode($script_create_table)), "\141\144\144\137\x63\157\154" => $this->encryption->encrypt(json_encode($script_create_column)), "\x6d\x6f\x64\x5f\x63\157\154" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto ffj71; oDw4B: pWdR3: goto J0UPX; LRK84: $tbl_ada = array_keys($fields); goto ZfVOh; ZfVOh: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto X7a0C; HQhI9: $script_edit_column = []; goto bwHJP; OFe06: $tbl_seharusnya = array_keys($json); goto LRK84; Zl3Ns: sort($full_tables); goto Wy7Jr; g8YCt: $fields = []; goto bMJnb; nLDRh: $db_debug = $this->db->db_debug; goto dVxVs; MO8UD: $add_columns = []; goto L7l_n; bwHJP: foreach ($full_tables as $table) { goto I2Vej; c9XLe: if (!(count($add_column) > 0)) { goto WC3ss; } goto VktVo; VmI17: owgPH: goto mh3Ym; xUk6f: $script = "\x43\x52\x45\101\x54\105\40\124\101\x42\114\x45\40\x60" . $table . "\140\40\50"; goto e8V3O; IXgOv: $script_create_table[$table] = $script; goto VmI17; VktVo: $script_create_column[$table] = "\x41\x4c\x54\x45\122\40\x54\101\102\114\105\x20\140" . $table . "\140\40" . implode("\x2c\x20", $add_column) . "\73"; goto j0AHP; p9qYD: $add_column = []; goto Lf0nz; Drn2V: Sz15n: goto CYie7; IvPfC: Z23dL: goto c9XLe; I2Vej: if (!$this->db->table_exists($table)) { goto Sz15n; } goto BeBN6; OJnij: oA1bV: goto YPj8I; hZMRG: if (!(count($modif_column) > 0)) { goto oA1bV; } goto Npctc; QuoDI: goto owgPH; goto Drn2V; CYie7: $create_tables[] = $json[$table]; goto xUk6f; y6D8h: foreach ($json[$table]->columns as $column) { goto sdYUU; DP82d: $extra = $column->extra == '' ? '' : "\x20" . strtoupper($column->extra); goto cC5rc; hggHl: goto OvImA; goto Nvdf3; COTI_: if ($column->type == "\x69\156\x74") { goto kvp4C; } goto YWuFw; cC5rc: $comment = $column->comment == '' ? '' : "\x20\x43\x4f\115\x4d\x45\116\124\x20\47" . $column->comment . "\47"; goto lAJus; vbdll: OvImA: goto nKYse; R9yMM: IIsev: goto mOC__; LAzd_: if ($column->type != "\154\x6f\156\147\164\x65\x78\x74" && $column->type != "\x6d\145\x64\151\x75\155\164\x65\170\164" && $column->type != "\164\145\170\x74") { goto kD81y; } goto yYziL; Nvdf3: kvp4C: goto H2SJ2; H2SJ2: $length = "\50" . ($column->max_length + 1) . "\51"; goto vbdll; Uth4m: $nullable = $column->nullable == "\x4e\117" ? "\x20\116\117\124\x20\116\125\x4c\x4c" : ''; goto ionni; yYziL: $length = ''; goto FMceI; qhQOi: $pri .= $column->primary != '' ? "\120\122\x49\x4d\101\x52\x59\x20\113\105\131\40\50\x60" . $column->name . "\140\51" : ''; goto lQF2r; FMceI: goto vwFC6; goto R9yMM; sdYUU: if ($column->max_length == null) { goto IIsev; } goto LAzd_; lAJus: $script .= "\x60" . $column->name . "\140\40" . $column->type . $length . $nullable . $default . $extra . $comment . "\x2c\x20"; goto qhQOi; ionni: $default = $column->default == null ? '' : "\x20\x44\105\x46\101\x55\x4c\x54\40" . $column->default; goto DP82d; vmvXt: kD81y: goto COTI_; OADCH: goto vwFC6; goto vmvXt; YWuFw: $length = "\50" . $column->max_length . "\51"; goto hggHl; mOC__: $length = ''; goto OADCH; lQF2r: pc22G: goto n37Ki; nKYse: vwFC6: goto Uth4m; n37Ki: } goto qF9Ic; mh3Ym: PClQg: goto yYOWj; e8V3O: $pri = ''; goto y6D8h; Lf0nz: $modif_column = []; goto OgjDf; j0AHP: WC3ss: goto hZMRG; OgjDf: foreach ($json[$table]->columns as $jtbl) { goto HFex9; W5OOL: g0uIv: goto Z8g7T; g1tsC: if (!(strtoupper($extra) == "\x20\101\125\x54\x4f\x5f\x49\x4e\x43\x52\105\x4d\x45\116\x54")) { goto f8For; } goto E4TfS; gswXZ: $length = ''; goto Bih4Y; BIwGL: if ($jtbl->type != "\x6c\157\x6e\x67\x74\145\x78\x74" && $jtbl->type != "\155\145\x64\x69\165\x6d\x74\145\x78\164" && $jtbl->type != "\x74\x65\x78\x74") { goto t8Js8; } goto gswXZ; S5ELf: kaTBz: goto cWSf7; yg9XD: $length = ''; goto UkKmU; Bih4Y: goto oH_KK; goto ygeJj; zNprT: $default = $jtbl->default == null ? '' : "\x20\x44\x45\106\x41\125\114\124\x20" . $jtbl->default; goto t04z1; f370X: f8For: goto Y6eVu; cZodo: $add_columns[$table][] = $jtbl; goto SDpVP; fYL3u: t8Js8: goto WUf3F; rnEKV: $nullable = $jtbl->nullable == "\116\117" ? "\x20\x4e\x4f\124\40\x4e\x55\114\x4c" : ''; goto zNprT; t0ay_: array_push($add_column, "\x41\104\x44\x20\x60" . $jtbl->name . "\x60\x20" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto xq78x; uGIhV: foreach ($fields[$table]->columns as $ftbl) { goto hW3uZ; EYrjd: jGczB: goto sqozo; sxrcO: if (!($jtbl->extra != null)) { goto MuGna; } goto vHnGh; ehHYc: VWtgU: goto k7tdW; Mgc30: $jtbl->default = strtoupper($jtbl->default); goto DnpDL; QwJxY: if (!($ftbl->default != null)) { goto gFaul; } goto TU76a; yI_5J: pMXUH: goto XYNwS; dQX7c: if (!($jtbl->default != null)) { goto VrPvM; } goto RgoZm; hW3uZ: if (!($jtbl->name == $ftbl->name)) { goto qplqU; } goto UODEa; Xn0QP: $ftbl->extra = str_replace("\50\51", '', $ftbl->extra); goto XwOi3; DnpDL: VrPvM: goto QwJxY; k7tdW: ypjg_: goto x6vWs; f00WX: EO0r1: goto uke7n; vHnGh: $jtbl->extra = str_replace("\x28\51", '', $jtbl->extra); goto LN0CF; TBjwS: bFmAG: goto kaftB; lL89n: $nullable = $jtbl->nullable == "\x4e\x4f" ? "\x20\116\117\x54\40\116\x55\114\114" : ''; goto PC9Z7; Ut5Fd: $comment = $jtbl->comment == '' ? '' : "\40\x43\117\115\x4d\x45\x4e\x54\40\x27" . $jtbl->comment . "\47"; goto YMXqW; PC9Z7: $default = $jtbl->default == null ? '' : "\40\x44\x45\106\101\x55\114\x54\40" . $jtbl->default; goto E_RC2; QAJGD: NnUUk: goto JfnTe; uke7n: if (!($jtbl->extra != $ftbl->extra)) { goto jGczB; } goto Q8y3K; iN_fs: qplqU: goto vIlZn; zQqZz: $edit_columns[$table][$jtbl->name]["\143\x6f\155\x6d\145\x6e\164"] = $jtbl->comment; goto oO8AY; DChH0: if (strtolower($jtbl->primary) == "\x70\x72\x69") { goto bFmAG; } goto Pw1Zh; XwOi3: $ftbl->extra = strtoupper($ftbl->extra); goto f00WX; NxW2d: $edit_columns[$table][$jtbl->name]["\x64\145\146\141\x75\x6c\164"] = $jtbl->default; goto HY9qd; oO8AY: jE9cf: goto C40t7; QUz5V: goto VWtgU; goto TBjwS; LN0CF: $jtbl->extra = strtoupper($jtbl->extra); goto Zt87Y; Vqaz0: goto VWtgU; goto QAJGD; Q8y3K: $edit_columns[$table][$jtbl->name]["\x65\x78\x74\162\x61"] = $jtbl->extra; goto EYrjd; HY9qd: cSi4J: goto sxrcO; x6vWs: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto zklAv; } goto lL89n; E_RC2: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto Ut5Fd; yiurz: $ftbl->default = strtoupper($ftbl->default); goto IPS5B; Zt87Y: MuGna: goto YPaZ6; XYNwS: if (!($jtbl->nullable != $ftbl->nullable)) { goto SZQ4O; } goto q1YwD; FsMxJ: if (!($jtbl->default != $ftbl->default)) { goto cSi4J; } goto NxW2d; TU76a: $ftbl->default = str_replace("\50\51", '', $ftbl->default); goto yiurz; QSzBk: $edit_columns[$table][$jtbl->name]["\143\157\x6c\x5f\164\x79\160\145"] = $jtbl->col_type; goto yI_5J; UODEa: if (!($jtbl->col_type != $ftbl->col_type)) { goto pMXUH; } goto QSzBk; FTy3C: zklAv: goto iN_fs; kaftB: array_push($modif_column, "\x41\104\104\40\120\122\111\x4d\x41\122\x59\x20\x4b\105\131\x20\50\140" . $jtbl->name . "\x60\x29"); goto Vqaz0; YMXqW: array_push($modif_column, "\x4d\117\104\x49\106\131\40\x60" . $jtbl->name . "\140\40" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto FTy3C; sqozo: if (!($jtbl->comment != $ftbl->comment)) { goto jE9cf; } goto zQqZz; JfnTe: array_push($modif_column, "\x41\104\x44\40\x55\116\x49\121\125\105\40\x4b\105\x59\40\x60" . $jtbl->name . "\140\x20\x28\140" . $jtbl->name . "\x60\51"); goto ehHYc; Pw1Zh: if (strtolower($jtbl->primary) == "\165\156\x69") { goto NnUUk; } goto QUz5V; IPS5B: gFaul: goto FsMxJ; YPaZ6: if (!($ftbl->extra != null)) { goto EO0r1; } goto Xn0QP; q1YwD: $edit_columns[$table][$jtbl->name]["\x6e\x75\154\154\141\142\154\x65"] = $jtbl->nullable; goto yIOVc; yIOVc: SZQ4O: goto dQX7c; vIlZn: Ir6ED: goto IcESD; RgoZm: $jtbl->default = str_replace("\50\51", '', $jtbl->default); goto Mgc30; Mic_B: $edit_columns[$table][$jtbl->name]["\x70\162\x69\x6d\x61\x72\x79"] = $jtbl->primary; goto DChH0; C40t7: if (!($jtbl->primary != $ftbl->primary)) { goto ypjg_; } goto Mic_B; IcESD: } goto S5ELf; xq78x: OTDeJ: goto uGIhV; t04z1: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto g1tsC; WUf3F: if ($jtbl->type == "\x69\156\164") { goto g0uIv; } goto pcGHL; UkKmU: goto oH_KK; goto fYL3u; SDpVP: if ($jtbl->max_length == null) { goto oqYid; } goto BIwGL; pcGHL: $length = "\x28" . $jtbl->max_length . "\51"; goto n56yJ; E4TfS: $extra .= "\x20\x50\122\x49\115\101\122\131\40\113\105\131"; goto f370X; Z8g7T: $length = "\50" . ($jtbl->max_length + 1) . "\x29"; goto oe_4s; ygeJj: oqYid: goto yg9XD; HFex9: if ($this->db->field_exists($jtbl->name, $table)) { goto OTDeJ; } goto cZodo; oe_4s: iYPt8: goto fIxSo; cWSf7: IIFBy: goto SPMPy; n56yJ: goto iYPt8; goto W5OOL; Y6eVu: $comment = $jtbl->comment == '' ? '' : "\x20\103\117\x4d\x4d\105\116\124\x20\x27" . $jtbl->comment . "\47"; goto t0ay_; fIxSo: oH_KK: goto rnEKV; SPMPy: } goto IvPfC; Npctc: $script_edit_column[$table] = "\x41\x4c\x54\105\x52\40\x54\101\102\x4c\105\x20\x60" . $table . "\x60\40" . implode("\x2c\40", $modif_column) . "\73"; goto OJnij; qF9Ic: ixAV0: goto mnJn4; BeBN6: if (!isset($json[$table])) { goto KPcUp; } goto p9qYD; mnJn4: $script .= $pri . "\x29\40\x45\x4e\107\x49\116\105\75\111\156\156\x6f\x44\102\x20\104\x45\x46\101\x55\114\124\40\103\110\101\122\x53\x45\x54\75\165\x74\146\70\155\x62\64\x3b"; goto IXgOv; YPj8I: KPcUp: goto QuoDI; yYOWj: } goto j2VYh; bMJnb: foreach ($tabless as $table) { goto IloDL; Ro71R: $retval[$i]->col_type = $query[$i]->column_type; goto PbH1a; QR3yM: if (!($i < $c)) { goto OSeCz; } goto DpMhg; kL_ft: $retval[$i]->nullable = $query[$i]->is_nullable; goto seJru; DpMhg: $retval[$i] = new stdClass(); goto RJ7Wc; psccJ: $retval[$i]->collation = $query[$i]->collation_name; goto PVVAR; melGL: if (!(($query = $this->db->query($sql)) === FALSE)) { goto ipw6t; } goto NGuRo; ky4qb: pYy6y: goto H8ou3; XyHqV: $query = $query->result_object(); goto NeSnq; Qqijw: OSeCz: goto HRY9O; Oyw2R: $c = count($query); goto dEZDU; PbH1a: $retval[$i]->type = $query[$i]->data_type; goto psccJ; HS6Lp: mQkSA: goto MAM4O; seJru: $retval[$i]->primary = $query[$i]->column_key; goto HS6Lp; HRY9O: $fields[$table] = (object) ["\164\141\x62\154\x65\x5f\156\x61\x6d\x65" => $table, "\x63\x6f\x6c\165\155\156\x73" => $retval]; goto ky4qb; IloDL: $sql = "\123\x45\x4c\x45\x43\x54\x20\x60\143\x6f\x6c\x75\x6d\x6e\137\156\141\x6d\145\140\x2c\40\x60\143\x6f\x6c\165\x6d\x6e\137\164\171\160\x65\x60\x2c\x20\x60\x63\157\x6c\154\141\164\151\x6f\156\137\x6e\x61\x6d\x65\140\54\40\140\144\x61\x74\x61\137\164\x79\x70\145\x60\x2c\40\x60\x63\150\x61\x72\x61\x63\x74\x65\x72\x5f\155\141\170\x69\155\165\155\x5f\154\x65\x6e\x67\x74\x68\140\x2c\x20\140\156\x75\x6d\145\162\x69\143\137\x70\x72\145\x63\151\163\151\157\x6e\x60\54" . "\40\x60\x63\157\x6c\165\155\x6e\137\144\145\x66\x61\x75\x6c\164\x60\x2c\40\140\143\x6f\154\x75\155\156\x5f\153\x65\171\140\54\40\140\x63\x6f\x6c\165\155\x6e\137\x63\x6f\155\155\x65\156\164\140\54\40\x60\145\170\164\162\141\x60\x2c\40\140\151\x73\x5f\156\165\154\154\x61\x62\x6c\145\x60\15\12\11\x9\x9\x46\x52\117\x4d\x20\140\x69\x6e\x66\157\x72\x6d\x61\x74\151\x6f\x6e\x5f\x73\x63\x68\145\155\x61\140\56\x60\143\x6f\154\x75\155\x6e\x73\140\40\x57\110\105\122\105\x20\164\141\x62\x6c\x65\x5f\x73\143\x68\145\155\x61\40\x3d\x20\42" . $this->db->database . "\x22\x20\101\x4e\104\40\x74\x61\x62\x6c\145\x5f\156\141\x6d\x65\40\x3d\40\42" . $table . "\42"; goto melGL; PVVAR: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto dPmEi; NGuRo: $fields = FALSE; goto CmhU8; dPmEi: $retval[$i]->default = $query[$i]->column_default; goto c6m_F; NeSnq: $retval = array(); goto eD1dO; c6m_F: $retval[$i]->comment = $query[$i]->column_comment; goto atxoj; dEZDU: CDQR5: goto QR3yM; eD1dO: $i = 0; goto Oyw2R; atxoj: $retval[$i]->extra = $query[$i]->extra; goto kL_ft; RJ7Wc: $retval[$i]->name = $query[$i]->column_name; goto Ro71R; MAM4O: $i++; goto IevW_; IevW_: goto CDQR5; goto Qqijw; CmhU8: ipw6t: goto XyHqV; H8ou3: } goto oDw4B; agdw_: $json = (array) $json; goto OFe06; Wy7Jr: $create_tables = []; goto GEYvU; L7l_n: $script_create_column = []; goto X5WkV; QGqjv: $json = json_decode($json); goto agdw_; ffj71: $this->output_json($data); goto kYVwT; j2VYh: w5RZt: goto JT6L2; kYVwT: } public function createTable() { goto Kqobc; q1Ibb: bJZ6E: goto PZxSB; lKTU2: sleep(1); goto AACMB; PZxSB: $data["\163\165\x63\x63\x65\163\x73"] = $this->runQuery($queries); goto MjwcL; keQ2r: $queries = ''; goto LIzdg; AACMB: $scripts = json_decode($this->encryption->decrypt($scripts)); goto keQ2r; avRKl: $this->output_json($data); goto mOLNt; LIzdg: foreach ($scripts as $script) { $queries .= $script; rsuC_: } goto q1Ibb; EFw7O: str_replace("\x25\62\102", "\53", $scripts); goto lKTU2; Kqobc: $scripts = $this->input->post("\144\x61\x74\141", true); goto EFw7O; MjwcL: $data["\x6d\145\163\163\141\147\145"] = "\125\x70\144\x61\x74\x65\x20\x6b\157\154\x6f\x6d"; goto avRKl; mOLNt: } public function createColumn() { goto JgqzF; TM24s: $data["\x6d\x65\x73\163\x61\x67\x65"] = "\115\157\144\x69\146\x79\x20\x6b\x6f\x6c\157\155"; goto x6Uup; x6Uup: $this->output_json($data); goto lfWte; JgqzF: $scripts = $this->input->post("\144\141\x74\141", true); goto sNgku; sNgku: str_replace("\45\x32\102", "\53", $scripts); goto c0lYt; UmPad: g3tZj: goto sJG1l; hwlQC: $queries = ''; goto WSgy1; WSgy1: foreach ($scripts as $script) { $queries .= $script; pMTpe: } goto UmPad; I4z6U: i5p3b: goto qUdAY; wjklt: $scripts = json_decode($this->encryption->decrypt($scripts)); goto hwlQC; sJG1l: if (!(strpos("\140\x75\x69\144\x60", $queries) !== false)) { goto i5p3b; } goto g9Xy3; c0lYt: sleep(1); goto wjklt; qUdAY: $data["\x73\165\x63\x63\145\x73\x73"] = $this->runQuery($queries); goto TM24s; g9Xy3: $this->updateUID(); goto I4z6U; lfWte: } public function editColumn() { goto JOHMa; T_GA2: $this->output_json($data); goto qYB03; LZx7H: $queries = ''; goto omMRE; x3wVI: wiaGv: goto b2Cnl; JOHMa: $scripts = $this->input->post("\144\x61\x74\141", true); goto Opj2L; b2Cnl: $data["\163\165\143\x63\x65\163\x73"] = $this->runQuery($queries); goto zCFC1; NfI5d: $scripts = json_decode($this->encryption->decrypt($scripts)); goto LZx7H; Opj2L: str_replace("\45\x32\102", "\53", $scripts); goto CfOxF; zCFC1: $data["\155\145\x73\x73\141\x67\x65"] = "\125\x70\x64\141\164\145\40\x73\145\x6c\x65\x73\x61\x69"; goto T_GA2; CfOxF: sleep(1); goto NfI5d; omMRE: foreach ($scripts as $script) { $queries .= $script; Z43Yh: } goto x3wVI; qYB03: } function runQuery($script) { goto K2UuU; Gww23: return true; goto bA81S; lY2KN: $hostpass = $this->db->password; goto N9byy; sJlAA: $mysqli->close(); goto Gww23; N9byy: $database = $this->db->database; goto y5VQZ; qYT1g: $mysqli->multi_query($script); goto sJlAA; hv3LC: if (!mysqli_connect_errno()) { goto HI2pW; } goto IMpnh; IMpnh: return mysqli_connect_errno(); goto yRIyN; yRIyN: HI2pW: goto qYT1g; y5VQZ: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto hv3LC; K2UuU: $hostname = $this->db->hostname; goto bCPwf; bCPwf: $hostuser = $this->db->username; goto lY2KN; bA81S: } function updateUID() { goto QWmKt; LTeMo: $siswas = $this->db->get("\155\141\x73\164\x65\x72\x5f\163\x69\163\167\141")->result(); goto TbKAy; WMoVX: foreach ($siswas as $siswa) { $input[] = array("\x69\x64\x5f\x73\x69\x73\x77\141" => $siswa->id_siswa, "\x75\151\144" => $this->uuid->v4()); KrDrl: } goto BH0fR; BH0fR: DBXib: goto ZPoq6; QWmKt: $this->load->library("\x55\x75\151\144", "\165\x75\x69\144"); goto LTeMo; ZPoq6: return $this->db->update_batch("\x6d\x61\163\x74\145\162\137\163\151\x73\167\x61", $input, "\x69\144\137\x73\151\163\x77\x61"); goto Xg5B0; TbKAy: $input = array(); goto WMoVX; Xg5B0: } function make_base() { } }
