<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\x41\x53\x45\x50\x41\x54\x48") or exit("\116\157\40\x64\151\162\x65\143\x74\40\163\x63\x72\151\x70\164\x20\141\143\143\x65\163\x73\x20\x61\154\x6c\157\x77\x65\144"); class Update extends CI_Controller { function __construct() { goto Fja81; hDlK0: $this->load->database(); goto K17Hn; Yj5un: include APPPATH . "\x63\x6f\156\146\151\x67\x2f\144\141\164\x61\142\141\163\x65\56\x70\x68\160"; goto emxic; K17Hn: $this->load->library("\x65\156\143\162\171\x70\164\x69\157\x6e"); goto ee9xM; Fja81: parent::__construct(); goto Yj5un; emxic: $this->load->dbforge(); goto hDlK0; ee9xM: } public function output_json($data, $encode = true) { goto JnrCb; JnrCb: if (!$encode) { goto aZSGh; } goto uBMz1; HJoFw: $this->output->set_content_type("\x61\x70\x70\154\x69\x63\141\x74\x69\157\x6e\57\x6a\x73\157\x6e")->set_output($data); goto OfTCR; AMR26: aZSGh: goto HJoFw; uBMz1: $data = json_encode($data); goto AMR26; OfTCR: } public function index() { goto nz30L; nz30L: $json = file_get_contents("\56\x2f\141\163\163\x65\164\x73\57\x61\x70\x70\x2f\x64\x62\x2f\x64\x61\164\141\142\x61\163\x65\56\152\x73\x6f\x6e"); goto QWzKg; Xwmyw: $this->load->view("\x69\156\x73\164\x61\x6c\154\57\x75\160\x64\141\x74\x65"); goto Kv42P; QWzKg: $json = json_decode($json); goto l8mJJ; l8mJJ: $json = (array) $json; goto MzDd7; MzDd7: $data["\x6a\163\x6f\x6e"] = $json; goto VjZNV; Kv42P: $this->load->view("\151\156\163\x74\x61\x6c\x6c\57\146\x6f\157\164\145\x72"); goto A3J0Q; VjZNV: $this->load->view("\x69\x6e\x73\x74\141\x6c\x6c\x2f\x68\145\x61\x64\145\162", $data); goto Xwmyw; A3J0Q: } function object_to_array($data) { goto Zp_k_; Zj8Fr: return $result; goto SXvPA; qrOkp: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; vSod5: } goto KGa5b; sDMP3: $result = []; goto qrOkp; wvyHv: return $data; goto GrjKf; Zp_k_: if (!(is_array($data) || is_object($data))) { goto xIJaA; } goto sDMP3; KGa5b: OvTn9: goto Zj8Fr; SXvPA: xIJaA: goto wvyHv; GrjKf: } public function checkDatabase() { goto vYOv_; o1YBM: $currentDb = []; goto QR46S; TpahR: $json = json_decode($json); goto OFY5w; LGN7Y: $edit_columns = []; goto u0xDk; tTI20: $data = ["\x64\x62" => $fields, "\143\x72\145\x61\x74\145" => $create_tables, "\155\157\144\151\146\171" => $edit_columns, "\x61\144\144" => $add_columns, "\143\x6f\165\x6e\164\163" => $counts, "\152\163\x6f\x6e" => $json, "\x63\x75\162\x72\x65\x6e\x74" => $currentDb]; goto KXCZK; wnM_z: $full_tables = array_merge($tbl_baru, $tbl_ada); goto QLTJh; WB5iA: $create_tables = []; goto Qv7ZF; Qv7ZF: $add_columns = []; goto LGN7Y; QR46S: foreach ($tabless as $table) { goto zvW2Z; L40Nt: if ($query[$i]->extra == "\x61\165\x74\157\137\151\156\143\x72\x65\155\x65\156\x74") { goto AT_cU; } goto UAh9O; mhEnV: $i = 0; goto qQnyB; xol0i: $datafld[$i]->auto_increment = true; goto yO53W; bimfK: KZMiL: goto d_dmU; IiyZa: goto r9XKJ; goto km5W7; pQWBK: $query = $query->result_object(); goto NSLhi; LS6TA: if (!($query[$i]->extra != '')) { goto J6poc; } goto L40Nt; q1QeZ: wrjji: goto o6nEp; qHM8Q: $retval[$i]->name = $query[$i]->column_name; goto U_T_f; zvW2Z: $datafld = $this->db->field_data($table); goto xK0C_; xK0C_: $sql = "\123\x45\114\105\103\x54\40\x60\x63\157\154\165\155\156\137\156\141\x6d\x65\x60\x2c\x20\140\x6e\x75\x6d\x65\x72\x69\143\137\160\162\145\x63\151\163\x69\x6f\x6e\x60\54\40\140\145\170\x74\x72\141\140\x2c\40\x60\151\x73\137\156\165\154\154\141\142\154\x65\x60" . "\x20\x46\x52\x4f\x4d\x20\140\151\x6e\146\157\x72\155\141\x74\151\x6f\156\137\163\x63\x68\x65\155\x61\140\x2e\x60\143\x6f\154\x75\155\156\163\x60\40\x57\110\105\122\105\40\x74\x61\142\154\x65\x5f\163\143\150\145\155\141\40\75\x20\x22" . $this->db->database . "\42\x20\101\116\104\40\x74\141\x62\x6c\x65\137\x6e\x61\x6d\145\40\x3d\x20\x22" . $table . "\42"; goto cHltX; UAh9O: $datafld[$i]->extra = $query[$i]->extra; goto IiyZa; N_b52: if (!($i < $c)) { goto ZcFwL; } goto UB6_4; t0LUt: ZcFwL: goto om9Oh; R9o1i: $fields[$table] = $datafld; goto bimfK; cbGJc: cBIKQ: goto N_b52; km5W7: AT_cU: goto xol0i; qQnyB: $c = count($query); goto cbGJc; cHltX: if (!(($query = $this->db->query($sql)) === FALSE)) { goto LVTyp; } goto HtMMy; p7woX: goto cBIKQ; goto t0LUt; om9Oh: $currentDb[$table] = $retval; goto R9o1i; QMYTJ: QGCRR: goto ms3MA; ZiUDO: J6poc: goto QMYTJ; UB6_4: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto QGCRR; } goto LS6TA; U_T_f: $retval[$i]->extra = $query[$i]->extra; goto q1QeZ; ms3MA: $retval[$i] = new stdClass(); goto qHM8Q; o6nEp: $i++; goto p7woX; aI6W_: LVTyp: goto pQWBK; HtMMy: $currentDb = FALSE; goto aI6W_; yO53W: r9XKJ: goto ZiUDO; NSLhi: $retval = array(); goto mhEnV; d_dmU: } goto GqCsu; GqCsu: PVU9f: goto c7ZS_; KXCZK: $this->output_json($data); goto hgQ26; OFY5w: $json = (array) $json; goto cBBVx; u0xDk: foreach ($full_tables as $table) { goto AUa05; hj5VE: H4tTo: goto lu53V; ndqPW: $create_tables[$table] = $json[$table]; goto f_2Fv; AUa05: if ($this->db->table_exists($table)) { goto R8Rpz; } goto ndqPW; V2o_9: b094Z: goto Co4P4; f_2Fv: goto icBXn; goto f0Y3t; lCNNL: if (!isset($json[$table])) { goto vd685; } goto LBjPq; f0Y3t: R8Rpz: goto lCNNL; LopIJ: icBXn: goto V2o_9; LBjPq: foreach ($json[$table] as $jtbl) { goto URjzq; S_HSx: Ofhgr: goto OjxmT; BACIT: mWtAG: goto oyUg3; GSgUt: goto cXyjQ; goto vjJWK; oyUg3: cXyjQ: goto S_HSx; vjJWK: WS6B4: goto EE230; URjzq: if ($this->db->field_exists($jtbl->name, $table)) { goto WS6B4; } goto BUScQ; BUScQ: $add_columns[$table][] = $jtbl; goto GSgUt; EE230: foreach ($fields[$table] as $ftbl) { goto J9MIx; oaDD6: DGTIG: goto KbVJE; hUmNA: MIQ9n: goto oaDD6; TlvtU: $edit_columns[$table][] = $jtbl; goto hUmNA; KbVJE: FjuVj: goto a35vM; J9MIx: if (!($jtbl->name == $ftbl->name)) { goto DGTIG; } goto x8__B; x8__B: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto MIQ9n; } goto TlvtU; a35vM: } goto BACIT; OjxmT: } goto hj5VE; lu53V: vd685: goto LopIJ; Co4P4: } goto ZfEoR; Wwe6z: $fields = []; goto o1YBM; vYOv_: $db_debug = $this->db->db_debug; goto q2cXM; evZFc: $tabless = $this->db->list_tables(); goto Wwe6z; cBBVx: $tbl_baru = array_keys($json); goto GRbxO; c7ZS_: $json = file_get_contents("\x2e\x2f\x61\x73\163\145\x74\x73\x2f\x61\x70\160\57\x64\x62\x2f\x64\x61\164\x61\x62\x61\163\145\56\x6a\163\157\x6e"); goto TpahR; QLTJh: $full_tables = array_unique($full_tables); goto DJvHA; q2cXM: $this->db->db_debug = FALSE; goto evZFc; DJvHA: sort($full_tables); goto WB5iA; UDku6: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto tTI20; ZfEoR: ElV_1: goto UDku6; GRbxO: $tbl_ada = array_keys($fields); goto wnM_z; hgQ26: } public function updateDatabase() { goto l2FBW; dcOG1: $fields = []; goto ZmyfK; m5YmO: $json = file_get_contents("\56\57\141\163\x73\x65\164\163\57\141\160\x70\57\144\x62\x2f\x64\x61\164\141\142\x61\x73\145\56\x6a\x73\157\x6e"); goto nhorz; i0JZ2: $json = (array) $json; goto noBbw; noBbw: $tbl_baru = array_keys($json); goto ukSA6; W2jDO: $full_tables = array_unique($full_tables); goto w0UAJ; DRAR3: echo true; goto pjGxX; ukSA6: $tbl_ada = array_keys($fields); goto yySBP; yySBP: $full_tables = array_merge($tbl_baru, $tbl_ada); goto W2jDO; nhorz: $json = json_decode($json); goto i0JZ2; tBN3a: MLOSD: goto m5YmO; l2FBW: $tabless = $this->db->list_tables(); goto dcOG1; IdRzS: QCvct: goto DRAR3; w0UAJ: sort($full_tables); goto QLnjp; QLnjp: foreach ($full_tables as $table) { goto Ff25L; KIFYt: foreach ($json[$table] as $jtbl) { goto qaG9C; cS9TX: EiCny: goto yuc4M; ra_Jk: kuzxM: goto r1NmD; r1NmD: XGmN3: goto BKdW_; f2gut: $this->dbforge->add_column($table, $field); goto ty3Tw; capfz: goto ZrEIE; goto cS9TX; zlFhd: $this->dbforge->add_key($jtbl->name, true); goto h415J; IyXv8: goto kuzxM; goto OEmRu; h415J: $this->dbforge->add_column($table, $field); goto capfz; yuc4M: $field = array($jtbl->name => array("\x74\x79\x70\x65" => $jtbl->type, "\x63\157\156\x73\x74\162\x61\x69\x6e\164" => $jtbl->max_length, "\144\x65\x66\141\165\154\x74" => $jtbl->default)); goto f2gut; pBsIj: foreach ($fields[$table] as $ftbl) { goto mQ6SI; Rboip: $this->dbforge->modify_column($table, $field); goto E2an8; zCnEE: zQfWj: goto Rboip; xu71u: if ($jtbl->auto_increment == true) { goto SHHtJ; } goto pJBt7; G5e94: nzstr: goto qTg_e; irWRK: $onUpdate = isset($jtbl->extra) ? "\40" . strtolower($jtbl->extra) : ''; goto hfp9F; p9Ajg: q78Ml: goto dDEne; Edb2u: $field = array($jtbl->name => array("\x74\171\160\145" => $jtbl->type, "\x63\x6f\x6e\x73\164\x72\141\151\156\164" => $jtbl->max_length, "\144\x65\x66\141\165\154\x74" => $jtbl->default)); goto zB9kZ; pJBt7: $field = array($jtbl->name => array("\x74\171\160\145" => $jtbl->type, "\143\157\x6e\x73\164\162\x61\x69\156\x74" => $jtbl->max_length, "\156\165\x6c\x6c" => false)); goto IJJYB; KnX3b: if ($jtbl->primary_key == 0) { goto akn5u; } goto xu71u; MBiQO: $field = array($jtbl->name => array("\164\171\x70\145" => $jtbl->type, "\x63\x6f\156\163\164\162\141\151\156\164" => $jtbl->max_length, "\x6e\165\x6c\154" => false, "\141\165\x74\157\137\151\156\143\162\x65\x6d\x65\x6e\164" => true)); goto G5e94; hfp9F: $field = array($jtbl->name . "\x20\x64\141\x74\x65\164\151\155\x65\40\144\x65\x66\x61\x75\x6c\x74\40\143\x75\x72\x72\x65\156\x74\137\164\151\x6d\145\163\164\x61\x6d\160" . $onUpdate); goto zCnEE; tXGYK: SHHtJ: goto MBiQO; IJJYB: goto nzstr; goto tXGYK; WZ6sU: $this->dbforge->modify_column($table, $field); goto X2KPh; qTg_e: $this->dbforge->add_key($jtbl->name, true); goto WZ6sU; mQ6SI: if (!($jtbl->name == $ftbl->name)) { goto q78Ml; } goto fTOgs; Ye0zN: L61Av: goto p9Ajg; dDEne: aLoZC: goto XWBYs; T4IA9: s0Dl4: goto irWRK; E2an8: lCXTR: goto Ye0zN; Xgu5o: akn5u: goto PRbBh; fTOgs: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto L61Av; } goto KnX3b; PRbBh: if ($jtbl->default == "\x43\125\122\122\x45\x4e\124\137\124\111\115\105\x53\x54\x41\x4d\120") { goto s0Dl4; } goto Edb2u; zB9kZ: goto zQfWj; goto T4IA9; X2KPh: goto lCXTR; goto Xgu5o; XWBYs: } goto MCuMS; D4kxD: $field = array($jtbl->name => array("\x74\x79\x70\x65" => $jtbl->type, "\x63\x6f\156\163\164\162\141\151\156\x74" => $jtbl->max_length, "\x6e\x75\x6c\x6c" => false)); goto zlFhd; ty3Tw: ZrEIE: goto IyXv8; A8JvD: if ($jtbl->primary_key == 0) { goto EiCny; } goto D4kxD; OEmRu: YTRem: goto pBsIj; MCuMS: qFImG: goto ra_Jk; qaG9C: if ($this->db->field_exists($jtbl->name, $table)) { goto YTRem; } goto A8JvD; BKdW_: } goto sfD32; tEmkf: dgfIE: goto it7lL; pH_DX: $this->dbforge->create_table($table, TRUE); goto O21Or; it7lL: inLXr: goto foO4E; WeNOl: ZsbfI: goto tEmkf; L4Gtp: eoeOz: goto pH_DX; Ff25L: if ($this->db->table_exists($table)) { goto rYlah; } goto BViLh; Lawea: foreach ($json[$table] as $tbl => $jtbl) { goto lsuFH; cdji8: xG3l1: goto uuX8W; JmxMw: if (!($jtbl->primary_key == 1)) { goto xG3l1; } goto obguD; uuX8W: z94Lz: goto tjy_X; lsuFH: $field = [$jtbl->name => ["\x74\x79\x70\145" => $jtbl->type, "\x63\157\x6e\163\x74\162\141\151\156\x74" => $jtbl->max_length, "\x6e\x75\154\154" => $jtbl->primary_key == 0]]; goto pmtjO; obguD: $this->dbforge->add_key($jtbl->name, true); goto cdji8; pmtjO: $this->dbforge->add_field($field); goto JmxMw; tjy_X: } goto L4Gtp; O21Or: $this->db->query("\101\x4c\124\x45\x52\40\x54\x41\102\x4c\105\x20\40\x60" . $table . "\140\40\x45\116\x47\111\x4e\x45\x20\x3d\x20\x49\156\156\157\x44\x42"); goto I9PqE; sfD32: zVACp: goto WeNOl; R0UMb: if (!isset($json[$table])) { goto ZsbfI; } goto KIFYt; I9PqE: zN11e: goto Iot1L; Iot1L: goto dgfIE; goto gBSPU; gBSPU: rYlah: goto R0UMb; BViLh: if (!isset($json[$table])) { goto zN11e; } goto Lawea; foO4E: } goto IdRzS; ZmyfK: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); prWkO: } goto tBN3a; pjGxX: } public function checkDb() { goto nZcF0; oT6Dl: $json = (array) $json; goto nOPpq; PWH2S: $script_create_table = []; goto SykuK; vuy96: b5LA6: goto aZqZl; mNzwT: sort($full_tables); goto hU5Ti; c24BB: $json = json_decode($json); goto oT6Dl; jTYC7: $full_tables = array_unique($full_tables); goto mNzwT; xpv8h: $data = ["\x66\x69\x65\x6c\x64\x73" => $fields, "\143\162\145\141\x74\145\x5f\164\141\x62\x6c\145\163" => $create_tables, "\143\157\165\x6e\x74\x5f\164\x62\x6c" => count($create_tables), "\141\x64\144\x5f\143\157\154\x75\155\x6e\x73\137\164\157\137\x74\x61\142\x6c\x65" => $add_columns, "\x63\157\x75\x6e\164\x5f\143\157\154" => count($add_columns), "\x65\144\x69\x74\137\x63\157\154\x75\x6d\156\x73" => $edit_columns, "\x63\157\165\156\x74\137\155\x6f\x64" => count($edit_columns), "\141\144\144\137\164\142\154" => $this->encryption->encrypt(json_encode($script_create_table)), "\141\144\144\137\143\157\x6c" => $this->encryption->encrypt(json_encode($script_create_column)), "\x6d\157\x64\x5f\143\x6f\x6c" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto uUVoO; naTno: $this->db->db_debug = $db_debug; goto xpv8h; aZqZl: $json = file_get_contents("\56\x2f\141\x73\163\145\164\x73\x2f\x61\x70\160\57\x64\142\57\144\x61\164\x61\x62\141\x73\x65\56\x6a\163\x6f\156"); goto c24BB; ZaC9A: $script_create_column = []; goto fqqYA; nEcQN: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto jTYC7; szVDm: $script_edit_column = []; goto nmLia; uUVoO: $this->output_json($data); goto bQ9Qn; ulyDE: $this->db->db_debug = FALSE; goto jx1sX; WHAx6: $tbl_ada = array_keys($fields); goto nEcQN; ANTHg: $fields = []; goto ZgmPc; jx1sX: $tabless = $this->db->list_tables(); goto ANTHg; mf3fu: bWGty: goto naTno; SykuK: $add_columns = []; goto ZaC9A; fqqYA: $edit_columns = []; goto szVDm; ZgmPc: foreach ($tabless as $table) { goto Kehu4; S2QH0: $c = count($query); goto xHxxk; Hy21L: $retval[$i] = new stdClass(); goto XRnoK; sYOfA: $query = $query->result_object(); goto koSBB; sIN3I: wf1wK: goto t6KWW; CjgHT: $fields = FALSE; goto sFN5l; t6KWW: $i++; goto uwcbg; J8rfF: $retval[$i]->col_type = $query[$i]->column_type; goto teHfN; xHxxk: Nem8B: goto caHq9; osFIP: $retval[$i]->primary = $query[$i]->column_key; goto sIN3I; XRnoK: $retval[$i]->name = $query[$i]->column_name; goto J8rfF; koSBB: $retval = array(); goto LbJM_; G4LTb: $retval[$i]->comment = $query[$i]->column_comment; goto gCtmx; xdivM: e7Vd3: goto MVhHT; sFN5l: eAICG: goto sYOfA; gCtmx: $retval[$i]->extra = $query[$i]->extra; goto u3zxb; LbJM_: $i = 0; goto S2QH0; uwcbg: goto Nem8B; goto xdivM; oJ4ou: if (!(($query = $this->db->query($sql)) === FALSE)) { goto eAICG; } goto CjgHT; ePtPM: $retval[$i]->default = $query[$i]->column_default; goto G4LTb; s9EZ4: mA6io: goto Pga25; Kehu4: $sql = "\x53\x45\x4c\105\x43\124\x20\x60\x63\157\154\165\155\x6e\137\x6e\x61\x6d\145\x60\54\x20\x60\x63\157\x6c\165\x6d\156\137\x74\x79\160\145\140\x2c\x20\x60\143\157\x6c\x6c\141\164\151\157\x6e\x5f\x6e\141\x6d\145\140\54\x20\x60\x64\141\164\141\137\164\171\x70\145\140\x2c\40\x60\x63\x68\141\x72\x61\x63\164\145\162\137\x6d\141\170\151\x6d\x75\155\x5f\x6c\145\156\x67\x74\150\x60\54\40\x60\x6e\165\155\145\162\x69\143\x5f\160\x72\145\x63\151\163\151\x6f\x6e\x60\54" . "\x20\x60\x63\157\154\165\155\156\x5f\144\145\146\141\165\154\164\x60\x2c\x20\140\x63\157\x6c\165\155\156\137\x6b\145\x79\x60\x2c\x20\x60\143\157\154\x75\x6d\x6e\137\143\157\155\155\x65\156\x74\x60\x2c\x20\x60\145\x78\x74\162\141\x60\54\x20\140\151\x73\137\x6e\165\154\x6c\x61\x62\x6c\145\x60\15\xa\x9\x9\11\x46\x52\x4f\x4d\x20\x60\151\x6e\x66\x6f\x72\155\x61\x74\151\x6f\x6e\x5f\x73\143\x68\x65\x6d\x61\x60\56\140\x63\157\x6c\165\x6d\156\x73\140\x20\x57\110\105\x52\x45\40\x74\x61\x62\154\x65\137\163\x63\150\x65\x6d\141\x20\x3d\x20\42" . $this->db->database . "\42\x20\x41\116\104\40\x74\141\142\154\145\137\x6e\141\155\x65\x20\x3d\40\42" . $table . "\42"; goto oJ4ou; Eydfw: $retval[$i]->collation = $query[$i]->collation_name; goto QQmk1; u3zxb: $retval[$i]->nullable = $query[$i]->is_nullable; goto osFIP; QQmk1: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto ePtPM; MVhHT: $fields[$table] = (object) ["\164\x61\142\154\145\x5f\x6e\141\x6d\145" => $table, "\143\x6f\154\x75\x6d\156\163" => $retval]; goto s9EZ4; caHq9: if (!($i < $c)) { goto e7Vd3; } goto Hy21L; teHfN: $retval[$i]->type = $query[$i]->data_type; goto Eydfw; Pga25: } goto vuy96; nmLia: foreach ($full_tables as $table) { goto Zqk5k; j_KHm: zzj7v: goto ofWd8; yECMO: $script_create_column[$table] = "\x41\x4c\124\105\x52\x20\124\101\102\x4c\105\x20\x60" . $table . "\x60\40" . implode("\54\x20", $add_column) . "\73"; goto kAMJK; k70HU: Yxah2: goto W4A9M; AIGOw: $script = "\x43\x52\x45\101\124\105\40\x54\101\x42\114\x45\x20\x60" . $table . "\x60\x20\x28"; goto T16b2; VKK_a: y24pn: goto G_OyE; VFiSb: foreach ($json[$table]->columns as $jtbl) { goto bcPUb; wcV_O: kycdq: goto NVl52; Sq6LE: if ($jtbl->max_length == null) { goto YsRAw; } goto vPGEd; xqkfQ: goto oZhHy; goto R5xso; m4OQw: PEwc1: goto n2Q4b; vPGEd: if ($jtbl->type != "\154\x6f\156\x67\x74\x65\x78\164" && $jtbl->type != "\155\145\144\x69\x75\x6d\164\145\170\164" && $jtbl->type != "\x74\x65\170\x74") { goto zLVye; } goto fT52U; x94af: goto VFbNS; goto aOqs2; jHJHa: UzqfV: goto m4OQw; fT52U: $length = ''; goto xqkfQ; jYs8A: $default = $jtbl->default == null ? '' : "\x20\104\105\106\x41\x55\x4c\124\40" . $jtbl->default; goto JO1MF; bcPUb: if ($this->db->field_exists($jtbl->name, $table)) { goto lVgfz; } goto cAIvq; f4RFK: array_push($add_column, "\x41\104\x44\40\140" . $jtbl->name . "\x60\x20" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto g180u; JO1MF: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto n2_wf; n0fY4: if ($jtbl->type == "\151\x6e\x74") { goto WByG2; } goto xBJWL; aOqs2: WByG2: goto ujWyg; YcY0i: $length = ''; goto R44yq; R5xso: YsRAw: goto YcY0i; ujWyg: $length = "\50" . ($jtbl->max_length + 1) . "\x29"; goto XQQiF; cAIvq: $add_columns[$table][] = $jtbl; goto Sq6LE; nxp8d: oZhHy: goto AZa1c; R44yq: goto oZhHy; goto ZP4Jt; BYTY1: foreach ($fields[$table]->columns as $ftbl) { goto lFxJT; X9zDc: XVGkS: goto JPCnW; ftVwW: goto r3EjE; goto qdqEc; rcW2D: dI7kj: goto RBaTr; HcD2Q: $ftbl->extra = str_replace("\50\51", '', $ftbl->extra); goto Vc3wo; rI3cP: if (!($jtbl->nullable != $ftbl->nullable)) { goto StCMa; } goto mzJ1P; mzJ1P: $edit_columns[$table][$jtbl->name]["\156\x75\x6c\154\141\142\x6c\x65"] = $jtbl->nullable; goto NrfC4; IGAK4: $jtbl->extra = strtoupper($jtbl->extra); goto HnYim; bahDj: if (!($jtbl->default != null)) { goto gwJxg; } goto h2d4Z; qdqEc: y0kbz: goto d2kZ0; oY79P: GD5n2: goto I8h3g; RYxsy: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto pquJr; kjSWm: $edit_columns[$table][$jtbl->name]["\x63\x6f\155\x6d\x65\x6e\164"] = $jtbl->comment; goto rcW2D; rbbT7: lFTtq: goto i7frt; unGfn: $ftbl->default = str_replace("\50\x29", '', $ftbl->default); goto VLB1u; cugGi: if (!($ftbl->default != null)) { goto lFTtq; } goto unGfn; pquJr: $comment = $jtbl->comment == '' ? '' : "\x20\103\x4f\x4d\x4d\x45\116\124\x20\47" . $jtbl->comment . "\x27"; goto Octzp; xbf1Q: if (!($jtbl->col_type != $ftbl->col_type)) { goto Md31c; } goto K1Af4; Ljjzt: if (strtolower($jtbl->primary) == "\160\162\x69") { goto y0kbz; } goto nYSPK; RBaTr: if (!($jtbl->primary != $ftbl->primary)) { goto pb5eq; } goto r_7Sd; oa5kw: goto r3EjE; goto rkmer; GFjSl: r3EjE: goto b8ury; x0rNF: $jtbl->default = strtoupper($jtbl->default); goto zO7Qp; oSxJw: $nullable = $jtbl->nullable == "\x4e\x4f" ? "\x20\116\x4f\x54\40\x4e\125\x4c\114" : ''; goto o3fm2; Mh4vf: array_push($modif_column, "\101\104\104\40\125\x4e\x49\x51\x55\x45\40\113\105\131\x20\140" . $jtbl->name . "\x60\x20\50\140" . $jtbl->name . "\140\x29"); goto GFjSl; JPCnW: if (!($jtbl->extra != null)) { goto V6Mhw; } goto gM7KX; lFxJT: if (!($jtbl->name == $ftbl->name)) { goto GD5n2; } goto xbf1Q; Octzp: array_push($modif_column, "\115\117\x44\111\106\x59\x20\x60" . $jtbl->name . "\140\x20" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto pC_te; r_7Sd: $edit_columns[$table][$jtbl->name]["\160\162\151\155\x61\x72\x79"] = $jtbl->primary; goto Ljjzt; NrfC4: StCMa: goto bahDj; o3fm2: $default = $jtbl->default == null ? '' : "\x20\x44\105\x46\x41\x55\x4c\x54\40" . $jtbl->default; goto RYxsy; uJpyg: $edit_columns[$table][$jtbl->name]["\145\x78\x74\x72\x61"] = $jtbl->extra; goto bjCSq; VLB1u: $ftbl->default = strtoupper($ftbl->default); goto rbbT7; HnYim: V6Mhw: goto uqptS; uqptS: if (!($ftbl->extra != null)) { goto HiYFE; } goto HcD2Q; nqBFP: HiYFE: goto ztm7F; rkmer: noFLi: goto Mh4vf; i7frt: if (!($jtbl->default != $ftbl->default)) { goto XVGkS; } goto Ds2OR; jTqJy: Md31c: goto rI3cP; Ds2OR: $edit_columns[$table][$jtbl->name]["\144\145\x66\x61\x75\x6c\164"] = $jtbl->default; goto X9zDc; pC_te: amyYr: goto oY79P; nYSPK: if (strtolower($jtbl->primary) == "\165\156\151") { goto noFLi; } goto ftVwW; d2kZ0: array_push($modif_column, "\101\x44\104\40\x50\122\x49\x4d\x41\122\x59\40\x4b\105\131\x20\50\140" . $jtbl->name . "\x60\51"); goto oa5kw; zO7Qp: gwJxg: goto cugGi; kybTM: if (!($jtbl->comment != $ftbl->comment)) { goto dI7kj; } goto kjSWm; ztm7F: if (!($jtbl->extra != $ftbl->extra)) { goto EmE0J; } goto uJpyg; gM7KX: $jtbl->extra = str_replace("\x28\x29", '', $jtbl->extra); goto IGAK4; a54XP: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto amyYr; } goto oSxJw; Vc3wo: $ftbl->extra = strtoupper($ftbl->extra); goto nqBFP; I8h3g: Mg51d: goto FsWRw; b8ury: pb5eq: goto a54XP; K1Af4: $edit_columns[$table][$jtbl->name]["\143\x6f\154\x5f\x74\171\x70\145"] = $jtbl->col_type; goto jTqJy; h2d4Z: $jtbl->default = str_replace("\50\x29", '', $jtbl->default); goto x0rNF; bjCSq: EmE0J: goto kybTM; FsWRw: } goto jHJHa; ZP4Jt: zLVye: goto n0fY4; AZa1c: $nullable = $jtbl->nullable == "\x4e\x4f" ? "\x20\116\117\124\40\x4e\125\114\x4c" : ''; goto jYs8A; XQQiF: VFbNS: goto nxp8d; xBJWL: $length = "\50" . $jtbl->max_length . "\51"; goto x94af; g180u: lVgfz: goto BYTY1; UuvIY: $extra .= "\40\x50\122\111\115\x41\122\x59\x20\113\x45\x59"; goto wcV_O; NVl52: $comment = $jtbl->comment == '' ? '' : "\40\x43\117\115\x4d\x45\x4e\124\40\x27" . $jtbl->comment . "\47"; goto f4RFK; n2_wf: if (!(strtoupper($extra) == "\40\101\125\124\117\x5f\111\x4e\x43\x52\x45\115\x45\x4e\124")) { goto kycdq; } goto UuvIY; n2Q4b: } goto j_KHm; w6xXl: $script_edit_column[$table] = "\101\x4c\124\x45\122\x20\x54\101\x42\114\x45\x20\140" . $table . "\x60\40" . implode("\x2c\x20", $modif_column) . "\73"; goto k70HU; ES4DA: foreach ($json[$table]->columns as $column) { goto fD0lu; JqcEt: $comment = $column->comment == '' ? '' : "\x20\103\x4f\115\115\x45\116\x54\40\47" . $column->comment . "\x27"; goto oOZS5; VHOdz: goto z3dOA; goto Bu416; Be6A1: if ($column->type == "\151\x6e\164") { goto GPVm8; } goto AShR3; hH_tP: goto DNzJa; goto gVuH9; KaB5z: $nullable = $column->nullable == "\116\117" ? "\40\116\x4f\124\40\116\125\114\x4c" : ''; goto tt2DW; AShR3: $length = "\x28" . $column->max_length . "\51"; goto hH_tP; fkTHl: $extra = $column->extra == '' ? '' : "\x20" . strtoupper($column->extra); goto JqcEt; gVuH9: GPVm8: goto kk5RL; Ezw4n: if ($column->type != "\x6c\157\156\147\x74\x65\x78\164" && $column->type != "\x6d\x65\144\x69\165\155\x74\x65\x78\164" && $column->type != "\x74\145\x78\164") { goto jE3OM; } goto nJQG7; tt2DW: $default = $column->default == null ? '' : "\40\x44\x45\x46\101\125\x4c\x54\40" . $column->default; goto fkTHl; IcLvd: z3dOA: goto KaB5z; kzIxC: $pri .= $column->primary != '' ? "\x50\122\x49\115\101\122\x59\40\113\105\x59\40\x28\x60" . $column->name . "\140\x29" : ''; goto Iy8hL; oOZS5: $script .= "\x60" . $column->name . "\140\40" . $column->type . $length . $nullable . $default . $extra . $comment . "\x2c\x20"; goto kzIxC; kk5RL: $length = "\50" . ($column->max_length + 1) . "\51"; goto Yl851; Yl851: DNzJa: goto IcLvd; fD0lu: if ($column->max_length == null) { goto bOiCP; } goto Ezw4n; y8mT8: goto z3dOA; goto MtvIL; mnPfk: $length = ''; goto VHOdz; MtvIL: bOiCP: goto mnPfk; Iy8hL: lKG_u: goto rqH2o; nJQG7: $length = ''; goto y8mT8; Bu416: jE3OM: goto Be6A1; rqH2o: } goto gIETV; kAMJK: krT2E: goto tda_9; T16b2: $pri = ''; goto ES4DA; Zqk5k: if (!$this->db->table_exists($table)) { goto y24pn; } goto YfARN; J6DK1: $script_create_table[$table] = $script; goto JGSDs; zACGl: $add_column = []; goto QESuX; ofWd8: if (!(count($add_column) > 0)) { goto krT2E; } goto yECMO; JGSDs: eJ83I: goto DpR_6; G_OyE: $create_tables[] = $json[$table]; goto AIGOw; tda_9: if (!(count($modif_column) > 0)) { goto Yxah2; } goto w6xXl; DpR_6: nxMRq: goto Rh7HS; gIETV: pIZD2: goto bcXhP; YfARN: if (!isset($json[$table])) { goto oS9Dg; } goto zACGl; bcXhP: $script .= $pri . "\51\x20\105\116\x47\111\x4e\105\75\111\156\156\x6f\104\102\x20\x44\x45\106\101\x55\x4c\x54\x20\103\x48\101\x52\x53\x45\x54\x3d\x75\x74\x66\x38\x6d\x62\64\73"; goto J6DK1; W4A9M: oS9Dg: goto EUkIx; EUkIx: goto eJ83I; goto VKK_a; QESuX: $modif_column = []; goto VFiSb; Rh7HS: } goto mf3fu; nZcF0: $db_debug = $this->db->db_debug; goto ulyDE; nOPpq: $tbl_seharusnya = array_keys($json); goto WHAx6; hU5Ti: $create_tables = []; goto PWH2S; bQ9Qn: } public function createTable() { goto tID8E; tPL8P: $data["\155\145\x73\163\x61\x67\x65"] = "\125\160\144\x61\x74\x65\40\x6b\157\x6c\157\155"; goto T30qa; EbcRg: $queries = ''; goto P9rtt; rArX5: $data["\x73\x75\x63\x63\145\163\x73"] = $this->runQuery($queries); goto tPL8P; tID8E: $scripts = $this->input->post("\x64\141\164\141", true); goto ZW_4i; VpsAZ: qVXm1: goto rArX5; ZW_4i: str_replace("\x25\x32\102", "\53", $scripts); goto q5mBF; P9rtt: foreach ($scripts as $script) { $queries .= $script; ic3G9: } goto VpsAZ; T30qa: $this->output_json($data); goto PQh6N; u6NDX: $scripts = json_decode($this->encryption->decrypt($scripts)); goto EbcRg; q5mBF: sleep(1); goto u6NDX; PQh6N: } public function createColumn() { goto iR0Jj; PWnYb: $queries = ''; goto c0L6J; Q1CMF: $data["\x6d\145\163\163\x61\x67\x65"] = "\115\157\144\x69\146\x79\40\153\157\x6c\157\x6d"; goto IjRNA; iR0Jj: $scripts = $this->input->post("\144\x61\164\x61", true); goto T7m0v; c0L6J: foreach ($scripts as $script) { $queries .= $script; hHn4t: } goto pe7Xm; pe7Xm: MyAUa: goto oaNyU; By_9j: FpvX1: goto BT4Ag; T7m0v: str_replace("\45\62\x42", "\53", $scripts); goto TglUF; oaNyU: if (!(strpos("\140\165\151\x64\140", $queries) !== false)) { goto FpvX1; } goto dlc4r; TglUF: sleep(1); goto HFIKM; BT4Ag: $data["\163\x75\143\x63\x65\x73\163"] = $this->runQuery($queries); goto Q1CMF; HFIKM: $scripts = json_decode($this->encryption->decrypt($scripts)); goto PWnYb; IjRNA: $this->output_json($data); goto sfutO; dlc4r: $this->updateUID(); goto By_9j; sfutO: } public function editColumn() { goto nD1pz; Njotr: lEdmj: goto Be0gu; yS1oW: $queries = ''; goto tSlmb; CMU1I: $this->output_json($data); goto stHf2; UMZjO: sleep(1); goto FAGEF; Be0gu: $data["\x73\x75\x63\x63\145\x73\x73"] = $this->runQuery($queries); goto Gw3lY; nD1pz: $scripts = $this->input->post("\144\141\164\x61", true); goto H2Moy; H2Moy: str_replace("\45\x32\x42", "\x2b", $scripts); goto UMZjO; tSlmb: foreach ($scripts as $script) { $queries .= $script; jCWPi: } goto Njotr; Gw3lY: $data["\155\x65\x73\163\x61\147\x65"] = "\x55\160\144\x61\164\145\x20\x73\145\x6c\x65\x73\x61\x69"; goto CMU1I; FAGEF: $scripts = json_decode($this->encryption->decrypt($scripts)); goto yS1oW; stHf2: } function runQuery($script) { goto Z2fcy; lRDBk: return mysqli_connect_errno(); goto ziXyG; hWwnK: $mysqli->multi_query($script); goto bt6Ky; VhKoK: return true; goto Tv_WN; bt6Ky: $mysqli->close(); goto VhKoK; ziXyG: XyVhK: goto hWwnK; e2J1p: if (!mysqli_connect_errno()) { goto XyVhK; } goto lRDBk; ypvMh: $database = $this->db->database; goto KAe0b; hBvTz: $hostuser = $this->db->username; goto OACCA; KAe0b: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto e2J1p; OACCA: $hostpass = $this->db->password; goto ypvMh; Z2fcy: $hostname = $this->db->hostname; goto hBvTz; Tv_WN: } function updateUID() { goto ZLu41; JA9PU: $siswas = $this->db->get("\x6d\x61\163\x74\x65\162\x5f\163\151\x73\x77\x61")->result(); goto X2rXR; ZLu41: $this->load->library("\x55\165\x69\x64", "\x75\x75\x69\144"); goto JA9PU; grEgc: return $this->db->update_batch("\155\141\x73\x74\x65\162\x5f\163\151\163\x77\141", $input, "\151\x64\137\163\x69\163\167\141"); goto Ug9I1; zbdHO: foreach ($siswas as $siswa) { $input[] = array("\151\144\137\163\x69\163\167\141" => $siswa->id_siswa, "\x75\x69\144" => $this->uuid->v4()); asJPS: } goto RTTjh; X2rXR: $input = array(); goto zbdHO; RTTjh: E716r: goto grEgc; Ug9I1: } function make_base() { } }
