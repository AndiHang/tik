<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\101\123\105\120\101\124\x48") or exit("\x4e\x6f\x20\x64\x69\x72\145\143\164\40\163\x63\162\151\160\x74\x20\x61\143\x63\x65\x73\x73\40\141\154\x6c\157\x77\x65\144"); class Update extends CI_Controller { function __construct() { goto sHRXH; sHRXH: parent::__construct(); goto zoWyC; YTnpo: $this->load->library("\x65\156\x63\x72\171\160\x74\151\x6f\156"); goto zqVcO; CU2YW: $this->load->dbforge(); goto ipv1S; zoWyC: include APPPATH . "\x63\157\x6e\x66\x69\147\57\144\x61\164\141\x62\141\x73\145\x2e\x70\150\160"; goto CU2YW; ipv1S: $this->load->database(); goto YTnpo; zqVcO: } public function output_json($data, $encode = true) { goto E91qC; a4nB_: $this->output->set_content_type("\141\160\x70\x6c\x69\x63\141\164\151\x6f\x6e\x2f\152\163\x6f\156")->set_output($data); goto fnsOh; L_lC1: rf7Us: goto a4nB_; FuTe9: $data = json_encode($data); goto L_lC1; E91qC: if (!$encode) { goto rf7Us; } goto FuTe9; fnsOh: } public function index() { goto MPWZT; YRkon: $this->load->view("\151\156\x73\x74\141\x6c\154\x2f\165\x70\144\x61\164\x65"); goto yHgxY; yHgxY: $this->load->view("\151\156\x73\164\x61\154\154\x2f\146\x6f\157\164\x65\x72"); goto FQShK; s7ON4: $this->load->view("\x69\156\x73\x74\x61\154\x6c\57\x68\145\141\x64\145\162", $data); goto YRkon; mv7dX: $json = json_decode($json); goto T7ftm; MPWZT: $json = file_get_contents("\x2e\x2f\x61\x73\x73\x65\164\x73\x2f\x61\x70\160\57\x64\x62\57\144\141\x74\141\142\x61\x73\145\56\x6a\163\157\156"); goto mv7dX; T7ftm: $json = (array) $json; goto lWiS3; lWiS3: $data["\152\x73\x6f\156"] = $json; goto s7ON4; FQShK: } function object_to_array($data) { goto LML1L; XTmkS: nqOk9: goto W07jI; zDPxK: return $result; goto XTmkS; EgGpw: TglvS: goto zDPxK; W07jI: return $data; goto w6nY0; Sv3ER: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; oU6jk: } goto EgGpw; LML1L: if (!(is_array($data) || is_object($data))) { goto nqOk9; } goto BbWgH; BbWgH: $result = []; goto Sv3ER; w6nY0: } public function checkDatabase() { goto Kwcla; qe2nz: $add_columns = []; goto G0s5H; yvXVn: sort($full_tables); goto qeUMQ; kWARd: u6ooJ: goto TrmYB; DMean: foreach ($tabless as $table) { goto fPBr8; fIGHV: uVJjV: goto TIimA; fPBr8: $datafld = $this->db->field_data($table); goto UHGRP; p6bBM: $datafld[$i]->auto_increment = true; goto fIGHV; hK4oE: $query = $query->result_object(); goto tL9MQ; oh1ry: $i++; goto rbqbD; m_7zZ: if ($query[$i]->extra == "\141\165\164\157\137\151\156\x63\162\x65\x6d\x65\x6e\x74") { goto pcwsc; } goto CIUXa; BoOSy: GG723: goto oh1ry; kwZqd: if (!($i < $c)) { goto zfJCf; } goto JKJyE; cny9w: if (!($query[$i]->extra != '')) { goto YOgJ5; } goto m_7zZ; QbK7R: QZOP6: goto hK4oE; TIimA: YOgJ5: goto APmzt; UHGRP: $sql = "\123\105\x4c\x45\103\x54\x20\x60\143\157\154\x75\x6d\156\x5f\156\x61\155\x65\x60\x2c\40\x60\156\x75\x6d\x65\x72\151\143\137\160\x72\x65\x63\x69\163\x69\157\156\x60\54\x20\x60\145\x78\164\162\x61\x60\54\x20\140\x69\x73\137\x6e\165\154\x6c\x61\x62\154\145\x60" . "\x20\x46\122\x4f\x4d\40\140\151\156\146\157\162\x6d\141\164\151\157\156\137\x73\x63\150\145\155\141\140\56\140\143\x6f\154\165\155\x6e\163\140\40\x57\x48\x45\122\x45\x20\164\141\x62\x6c\x65\137\x73\143\x68\145\155\141\x20\x3d\40\x22" . $this->db->database . "\42\40\101\116\104\40\x74\x61\x62\x6c\x65\137\156\x61\x6d\x65\x20\75\40\x22" . $table . "\42"; goto iyARq; Jwvha: $retval[$i] = new stdClass(); goto fyzoj; JKJyE: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto A8iB5; } goto cny9w; iyARq: if (!(($query = $this->db->query($sql)) === FALSE)) { goto QZOP6; } goto QVCx7; r1bx5: $fields[$table] = $datafld; goto RIWoD; ypJ4Y: $currentDb[$table] = $retval; goto r1bx5; RIWoD: x2eEI: goto YVnO1; WaR5q: zfJCf: goto ypJ4Y; fK6Xs: AsYS4: goto kwZqd; poQR3: goto uVJjV; goto X7AWk; fyzoj: $retval[$i]->name = $query[$i]->column_name; goto RBn4b; QVCx7: $currentDb = FALSE; goto QbK7R; CIUXa: $datafld[$i]->extra = $query[$i]->extra; goto poQR3; rbqbD: goto AsYS4; goto WaR5q; X7AWk: pcwsc: goto p6bBM; tpQYM: $c = count($query); goto fK6Xs; RBn4b: $retval[$i]->extra = $query[$i]->extra; goto BoOSy; Y0YZ3: $i = 0; goto tpQYM; tL9MQ: $retval = array(); goto Y0YZ3; APmzt: A8iB5: goto Jwvha; YVnO1: } goto kWARd; Ppmb_: $tbl_ada = array_keys($fields); goto ZWe2Z; TrmYB: $json = file_get_contents("\x2e\x2f\x61\x73\163\145\x74\x73\x2f\x61\x70\160\x2f\x64\x62\x2f\144\141\164\141\x62\141\x73\x65\56\152\x73\157\156"); goto CpogR; f1qet: $data = ["\144\142" => $fields, "\143\162\x65\141\x74\x65" => $create_tables, "\x6d\157\144\x69\146\x79" => $edit_columns, "\141\x64\144" => $add_columns, "\x63\157\x75\x6e\164\x73" => $counts, "\152\163\157\x6e" => $json, "\143\165\x72\x72\x65\156\164" => $currentDb]; goto vB7sl; vB7sl: $this->output_json($data); goto K1zc3; X7j4r: $fields = []; goto kiSFM; X3jk5: dtAXe: goto Xkh8c; isqg4: $tbl_baru = array_keys($json); goto Ppmb_; mo1vd: $json = (array) $json; goto isqg4; MNPcC: $this->db->db_debug = FALSE; goto TGaM6; kiSFM: $currentDb = []; goto DMean; qeUMQ: $create_tables = []; goto qe2nz; WCWHK: foreach ($full_tables as $table) { goto jI8Mo; nvhaz: hJg7h: goto F3_Bz; OFg5V: foreach ($json[$table] as $jtbl) { goto w26Ql; X8HSD: ZLqXN: goto V9eUf; womRV: goto RH0tg; goto I4oyS; I4oyS: XI_lk: goto vqghE; BXIt3: $add_columns[$table][] = $jtbl; goto womRV; g_WJk: gZZZ5: goto Z75tc; w26Ql: if ($this->db->field_exists($jtbl->name, $table)) { goto XI_lk; } goto BXIt3; V9eUf: RH0tg: goto g_WJk; vqghE: foreach ($fields[$table] as $ftbl) { goto byCMf; byCMf: if (!($jtbl->name == $ftbl->name)) { goto ihdb4; } goto jyyNQ; UX9z_: ihdb4: goto kvEcD; jyyNQ: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto tBSgK; } goto adeGD; VN8bf: tBSgK: goto UX9z_; kvEcD: Nwo8O: goto M8Aqw; adeGD: $edit_columns[$table][] = $jtbl; goto VN8bf; M8Aqw: } goto X8HSD; Z75tc: } goto P1Tcj; P1Tcj: WnDXy: goto vs3oj; v5HVU: QQpEz: goto rMp9d; jI8Mo: if ($this->db->table_exists($table)) { goto QQpEz; } goto WTUOZ; rMp9d: if (!isset($json[$table])) { goto lkmqV; } goto OFg5V; F3_Bz: nldBE: goto Y2YZB; B5gFg: goto hJg7h; goto v5HVU; vs3oj: lkmqV: goto nvhaz; WTUOZ: $create_tables[$table] = $json[$table]; goto B5gFg; Y2YZB: } goto X3jk5; ZWe2Z: $full_tables = array_merge($tbl_baru, $tbl_ada); goto TSPGi; TSPGi: $full_tables = array_unique($full_tables); goto yvXVn; Xkh8c: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto f1qet; Kwcla: $db_debug = $this->db->db_debug; goto MNPcC; TGaM6: $tabless = $this->db->list_tables(); goto X7j4r; CpogR: $json = json_decode($json); goto mo1vd; G0s5H: $edit_columns = []; goto WCWHK; K1zc3: } public function updateDatabase() { goto b2ei2; jr6Td: $full_tables = array_unique($full_tables); goto hc4E7; hc4E7: sort($full_tables); goto Q6iW_; L2wCB: SYr59: goto aEBoF; xo7Sw: $fields = []; goto AzoXg; vak3q: $tbl_ada = array_keys($fields); goto lhLIJ; c0Ux5: $json = (array) $json; goto YN7w3; ub23I: $json = file_get_contents("\x2e\57\141\163\x73\145\164\163\x2f\141\160\x70\57\x64\x62\57\x64\141\x74\141\x62\141\x73\145\56\x6a\163\x6f\156"); goto AGx3l; b2ei2: $tabless = $this->db->list_tables(); goto xo7Sw; lhLIJ: $full_tables = array_merge($tbl_baru, $tbl_ada); goto jr6Td; AzoXg: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); WqT3V: } goto Yx653; Q6iW_: foreach ($full_tables as $table) { goto P6EVE; JKp1x: iUVni: goto kOfUm; KrSQa: rNwcD: goto dAFPf; iNvux: EPasx: goto f108B; Rj210: if (!isset($json[$table])) { goto zjjGA; } goto STDKM; STDKM: foreach ($json[$table] as $tbl => $jtbl) { goto R96ij; plZXZ: $this->dbforge->add_key($jtbl->name, true); goto xrRzU; DC8mi: if (!($jtbl->primary_key == 1)) { goto pI6fG; } goto plZXZ; R96ij: $field = [$jtbl->name => ["\164\171\x70\145" => $jtbl->type, "\143\x6f\156\x73\x74\162\141\151\x6e\164" => $jtbl->max_length, "\156\165\154\154" => $jtbl->primary_key == 0]]; goto B2H3z; CmIcO: Bvx0i: goto df_7h; B2H3z: $this->dbforge->add_field($field); goto DC8mi; xrRzU: pI6fG: goto CmIcO; df_7h: } goto KrSQa; P6EVE: if ($this->db->table_exists($table)) { goto h3DDF; } goto Rj210; Bo9fG: foreach ($json[$table] as $jtbl) { goto xsfVi; M2hYj: MweJN: goto JAP33; IkzoF: goto asQO7; goto gW_Rx; kdm0Q: XiLdw: goto yB4IV; aT9NL: if ($jtbl->primary_key == 0) { goto MweJN; } goto ZGE7j; gW_Rx: sq3yS: goto Uhgj_; DqvEP: Ht727: goto IkzoF; JAP33: $field = array($jtbl->name => array("\164\171\160\145" => $jtbl->type, "\143\x6f\x6e\163\164\162\x61\x69\x6e\x74" => $jtbl->max_length, "\x64\145\x66\141\165\154\x74" => $jtbl->default)); goto kG3BY; xsfVi: if ($this->db->field_exists($jtbl->name, $table)) { goto sq3yS; } goto aT9NL; Uhgj_: foreach ($fields[$table] as $ftbl) { goto oia7m; qVRUk: y7QjG: goto XYyl0; p80XT: oLjsY: goto UO1DI; inLKb: $this->dbforge->modify_column($table, $field); goto JxO_x; ldPFX: Ks43C: goto MW_Nb; R2Qo7: $field = array($jtbl->name => array("\164\171\160\145" => $jtbl->type, "\x63\157\156\163\x74\x72\141\151\156\164" => $jtbl->max_length, "\x6e\165\x6c\154" => false)); goto nOGlE; j3cdx: $field = array($jtbl->name => array("\164\x79\160\x65" => $jtbl->type, "\143\157\x6e\x73\x74\x72\x61\151\x6e\x74" => $jtbl->max_length, "\156\165\x6c\154" => false, "\x61\165\164\157\x5f\151\156\143\x72\145\155\x65\x6e\164" => true)); goto leL32; oJums: $this->dbforge->modify_column($table, $field); goto PXI_0; dGY6x: $field = array($jtbl->name => array("\x74\171\160\145" => $jtbl->type, "\x63\157\156\163\x74\162\141\x69\156\x74" => $jtbl->max_length, "\x64\145\146\x61\165\x6c\x74" => $jtbl->default)); goto r2WPI; oia7m: if (!($jtbl->name == $ftbl->name)) { goto l1f2g; } goto zv2Kb; lPVBg: d_EFD: goto H67Ye; JxO_x: yOrfZ: goto ldPFX; PXI_0: goto yOrfZ; goto lPVBg; r2WPI: goto Ng8HA; goto qVRUk; MHQ0h: $field = array($jtbl->name . "\x20\x64\x61\164\145\x74\151\x6d\x65\40\144\145\x66\x61\165\154\164\40\x63\x75\162\x72\x65\x6e\164\x5f\x74\x69\x6d\145\163\x74\141\155\x70" . $onUpdate); goto OTjVB; HRnin: hEOpn: goto j3cdx; leL32: ed1hv: goto ywQGA; pZUqg: if ($jtbl->primary_key == 0) { goto d_EFD; } goto zFH1j; ywQGA: $this->dbforge->add_key($jtbl->name, true); goto oJums; zv2Kb: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto Ks43C; } goto pZUqg; MW_Nb: l1f2g: goto p80XT; nOGlE: goto ed1hv; goto HRnin; H67Ye: if ($jtbl->default == "\103\x55\122\x52\105\x4e\124\137\x54\111\115\x45\x53\124\101\115\x50") { goto y7QjG; } goto dGY6x; OTjVB: Ng8HA: goto inLKb; zFH1j: if ($jtbl->auto_increment == true) { goto hEOpn; } goto R2Qo7; XYyl0: $onUpdate = isset($jtbl->extra) ? "\40" . strtolower($jtbl->extra) : ''; goto MHQ0h; UO1DI: } goto kdm0Q; eyoO9: $this->dbforge->add_column($table, $field); goto aFLdp; kG3BY: $this->dbforge->add_column($table, $field); goto DqvEP; aFLdp: goto Ht727; goto M2hYj; ZGE7j: $field = array($jtbl->name => array("\x74\171\160\x65" => $jtbl->type, "\143\x6f\156\x73\164\162\141\x69\x6e\164" => $jtbl->max_length, "\156\165\x6c\154" => false)); goto k0Mlf; E09ND: kf2ie: goto qgOJJ; k0Mlf: $this->dbforge->add_key($jtbl->name, true); goto eyoO9; yB4IV: asQO7: goto E09ND; qgOJJ: } goto ublTB; kOfUm: xxzSX: goto iNvux; OwibT: h3DDF: goto Ss4Sc; ublTB: TVOJz: goto JKp1x; Eye55: zjjGA: goto ROYII; Ss4Sc: if (!isset($json[$table])) { goto iUVni; } goto Bo9fG; ROYII: goto xxzSX; goto OwibT; V2s6g: $this->db->query("\101\x4c\124\x45\x52\x20\x54\101\102\x4c\x45\40\x20\x60" . $table . "\x60\x20\x45\x4e\x47\x49\x4e\105\x20\75\x20\111\156\156\157\x44\102"); goto Eye55; dAFPf: $this->dbforge->create_table($table, TRUE); goto V2s6g; f108B: } goto L2wCB; aEBoF: echo true; goto UiDXR; AGx3l: $json = json_decode($json); goto c0Ux5; Yx653: gzEfq: goto ub23I; YN7w3: $tbl_baru = array_keys($json); goto vak3q; UiDXR: } public function checkDb() { goto nuy3S; T3IEx: $create_tables = []; goto pb_dz; SXrC_: E3_Ai: goto C8Osf; Vlbjy: $this->db->db_debug = FALSE; goto zz7bI; oK72R: aWDec: goto ykpXz; pb_dz: $script_create_table = []; goto n012j; EZ3JX: foreach ($full_tables as $table) { goto lU_uA; lU_uA: if (!$this->db->table_exists($table)) { goto Orw14; } goto uTSWb; fgePM: foreach ($json[$table]->columns as $column) { goto Drhhw; FySZz: $nullable = $column->nullable == "\116\117" ? "\40\x4e\x4f\124\40\x4e\125\x4c\114" : ''; goto fld33; iJ3VF: Eh7V3: goto v8zip; hnm9C: if ($column->type != "\154\x6f\x6e\x67\x74\x65\170\164" && $column->type != "\155\x65\144\151\x75\x6d\164\145\170\164" && $column->type != "\x74\145\x78\x74") { goto kGTQk; } goto f_rz4; ievtB: kGTQk: goto PqHzd; FGRGd: $pri .= $column->primary != '' ? "\x50\122\111\x4d\101\x52\x59\x20\x4b\x45\131\40\50\x60" . $column->name . "\x60\x29" : ''; goto Olr2V; GLr5L: goto DrzhK; goto lhtlP; NpAYe: goto DrzhK; goto ievtB; f_rz4: $length = ''; goto GLr5L; lhtlP: bUtwH: goto o8woI; i0c39: $script .= "\140" . $column->name . "\140\40" . $column->type . $length . $nullable . $default . $extra . $comment . "\54\x20"; goto FGRGd; wpFvR: $length = "\x28" . $column->max_length . "\51"; goto jakT0; QJapG: $comment = $column->comment == '' ? '' : "\40\103\x4f\115\x4d\105\116\124\40\x27" . $column->comment . "\x27"; goto i0c39; jakT0: goto Eh7V3; goto ikaVP; L2Sld: $extra = $column->extra == '' ? '' : "\x20" . strtoupper($column->extra); goto QJapG; v8zip: DrzhK: goto FySZz; fld33: $default = $column->default == null ? '' : "\x20\104\x45\x46\101\x55\114\124\x20" . $column->default; goto L2Sld; ikaVP: O9Owr: goto ssmnB; PqHzd: if ($column->type == "\x69\x6e\164") { goto O9Owr; } goto wpFvR; o8woI: $length = ''; goto NpAYe; Olr2V: PQRri: goto OfA0i; Drhhw: if ($column->max_length == null) { goto bUtwH; } goto hnm9C; ssmnB: $length = "\50" . ($column->max_length + 1) . "\x29"; goto iJ3VF; OfA0i: } goto UZp7t; XLqmg: $create_tables[] = $json[$table]; goto zLxSq; Qgevu: Orw14: goto XLqmg; kUzVL: MKoyR: goto p69Z2; zLxSq: $script = "\x43\122\105\101\124\x45\40\x54\101\102\114\x45\x20\140" . $table . "\x60\40\x28"; goto ZhXMS; Y_SMZ: if (!(count($add_column) > 0)) { goto lDYyP; } goto ke0AQ; LZ4pn: juu6Q: goto tnjR2; ke0AQ: $script_create_column[$table] = "\101\114\124\x45\x52\40\x54\101\102\x4c\x45\40\140" . $table . "\x60\40" . implode("\54\x20", $add_column) . "\73"; goto QgSJG; I0JB8: $script_edit_column[$table] = "\101\x4c\x54\x45\122\40\x54\101\x42\x4c\x45\x20\140" . $table . "\x60\40" . implode("\54\x20", $modif_column) . "\x3b"; goto kUzVL; uTSWb: if (!isset($json[$table])) { goto NfZ1i; } goto MowIT; UZp7t: NPnhE: goto GZ1fv; QgSJG: lDYyP: goto F8t6Y; Klm3L: jqWK2: goto Y_SMZ; p69Z2: NfZ1i: goto JrNlk; LVHTB: $modif_column = []; goto Nb0L3; Nb0L3: foreach ($json[$table]->columns as $jtbl) { goto e7TsY; pKYUS: feFSE: goto QuPDy; j0ot9: gzdYP: goto Y6Y4o; zVUDt: $default = $jtbl->default == null ? '' : "\40\x44\x45\106\x41\125\114\124\40" . $jtbl->default; goto rUG2f; Zvs2o: zFLHZ: goto KqXfD; Od6M5: $comment = $jtbl->comment == '' ? '' : "\40\103\117\x4d\x4d\x45\x4e\124\40\x27" . $jtbl->comment . "\x27"; goto qsWuo; bvXqX: GSbtr: goto Od6M5; aH5ui: if ($jtbl->type == "\151\156\x74") { goto feFSE; } goto ZPBLs; gIeVz: $length = ''; goto GZvP2; YkYhm: nP3bH: goto x09Q6; rCHP6: fW1jc: goto hzQoJ; hzQoJ: SGYiB: goto cLns7; uzGS3: goto BA7SV; goto pKYUS; BVUlm: BA7SV: goto Zvs2o; GZvP2: goto zFLHZ; goto YkYhm; rPDhl: $extra .= "\x20\x50\x52\x49\x4d\101\122\131\x20\x4b\x45\131"; goto bvXqX; qsWuo: array_push($add_column, "\101\104\x44\40\x60" . $jtbl->name . "\140\40" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto j0ot9; ZPBLs: $length = "\x28" . $jtbl->max_length . "\x29"; goto uzGS3; x09Q6: $length = ''; goto iPgKB; iPgKB: goto zFLHZ; goto CXYF5; e7TsY: if ($this->db->field_exists($jtbl->name, $table)) { goto gzdYP; } goto myl26; QuPDy: $length = "\x28" . ($jtbl->max_length + 1) . "\51"; goto BVUlm; Y6Y4o: foreach ($fields[$table]->columns as $ftbl) { goto nMJFa; ZsF3X: $edit_columns[$table][$jtbl->name]["\x70\162\151\x6d\x61\x72\171"] = $jtbl->primary; goto aWfcQ; DICS5: u7zUh: goto qWEbL; MLvsK: $jtbl->extra = str_replace("\x28\x29", '', $jtbl->extra); goto CIom3; sT1qW: DljE4: goto dSpE0; O2OVD: EnaQA: goto cPiMt; qqWai: jHpKJ: goto N4Zje; SdHZQ: $ftbl->default = str_replace("\50\51", '', $ftbl->default); goto wJzYr; OVE3R: eIP54: goto Utqru; nI3Rj: $ftbl->extra = strtoupper($ftbl->extra); goto OVE3R; lGCu2: $default = $jtbl->default == null ? '' : "\40\x44\x45\x46\101\125\114\124\40" . $jtbl->default; goto Hug5u; dSpE0: if (!($jtbl->primary != $ftbl->primary)) { goto WTpvi; } goto ZsF3X; I2OfR: $nullable = $jtbl->nullable == "\x4e\117" ? "\x20\116\x4f\124\x20\116\x55\114\x4c" : ''; goto lGCu2; Ae90K: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto Ctkgk; } goto I2OfR; DUI5h: $jtbl->default = str_replace("\50\x29", '', $jtbl->default); goto yva4W; Tu9YT: $edit_columns[$table][$jtbl->name]["\x63\157\x6c\x5f\164\x79\x70\145"] = $jtbl->col_type; goto VjHMs; CIom3: $jtbl->extra = strtoupper($jtbl->extra); goto zzqJt; Utqru: if (!($jtbl->extra != $ftbl->extra)) { goto Cv096; } goto gvIuP; nMJFa: if (!($jtbl->name == $ftbl->name)) { goto pZK2Z; } goto JrJ4Q; s1iw8: $edit_columns[$table][$jtbl->name]["\x63\157\x6d\155\x65\x6e\x74"] = $jtbl->comment; goto sT1qW; QWyTk: $edit_columns[$table][$jtbl->name]["\156\x75\x6c\154\141\142\x6c\x65"] = $jtbl->nullable; goto O2OVD; w1Ro6: Ctkgk: goto uvl_q; Ul72p: $ftbl->extra = str_replace("\50\51", '', $ftbl->extra); goto nI3Rj; HzqxC: array_push($modif_column, "\101\104\104\x20\x55\x4e\111\121\125\105\x20\113\105\131\x20\140" . $jtbl->name . "\x60\x20\50\x60" . $jtbl->name . "\x60\51"); goto FJ1V1; B0Wv8: if (strtolower($jtbl->primary) == "\165\x6e\x69") { goto qAIq6; } goto X3eU3; JrJ4Q: if (!($jtbl->col_type != $ftbl->col_type)) { goto uSbwD; } goto Tu9YT; cPiMt: if (!($jtbl->default != null)) { goto jHpKJ; } goto DUI5h; IEO0o: Cv096: goto waCr_; pYG6q: if (!($ftbl->extra != null)) { goto eIP54; } goto Ul72p; tBJdp: if (!($jtbl->nullable != $ftbl->nullable)) { goto EnaQA; } goto QWyTk; qWEbL: if (!($jtbl->extra != null)) { goto f2VQa; } goto MLvsK; ucmKq: if (!($jtbl->default != $ftbl->default)) { goto u7zUh; } goto RKN96; RKN96: $edit_columns[$table][$jtbl->name]["\x64\x65\x66\x61\165\154\164"] = $jtbl->default; goto DICS5; MTxLH: z4lEJ: goto I0Jbp; FJ1V1: aEG6o: goto nKsFi; zzqJt: f2VQa: goto pYG6q; sVRbC: array_push($modif_column, "\x41\104\104\x20\120\x52\x49\115\101\122\x59\40\113\x45\131\40\x28\x60" . $jtbl->name . "\x60\51"); goto agEJd; yva4W: $jtbl->default = strtoupper($jtbl->default); goto qqWai; Hug5u: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto FCrxx; X3eU3: goto aEG6o; goto E1oY9; E1oY9: ivTxB: goto sVRbC; VjHMs: uSbwD: goto tBJdp; N4Zje: if (!($ftbl->default != null)) { goto lyS3Q; } goto SdHZQ; agEJd: goto aEG6o; goto NvYGH; nKsFi: WTpvi: goto Ae90K; uvl_q: pZK2Z: goto MTxLH; gvIuP: $edit_columns[$table][$jtbl->name]["\x65\170\164\x72\141"] = $jtbl->extra; goto IEO0o; wJzYr: $ftbl->default = strtoupper($ftbl->default); goto lBNbA; FCrxx: $comment = $jtbl->comment == '' ? '' : "\x20\103\117\x4d\x4d\x45\x4e\124\x20\47" . $jtbl->comment . "\x27"; goto AhKfd; AhKfd: array_push($modif_column, "\x4d\x4f\x44\x49\106\131\x20\x60" . $jtbl->name . "\x60\40" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto w1Ro6; waCr_: if (!($jtbl->comment != $ftbl->comment)) { goto DljE4; } goto s1iw8; NvYGH: qAIq6: goto HzqxC; lBNbA: lyS3Q: goto ucmKq; aWfcQ: if (strtolower($jtbl->primary) == "\x70\162\x69") { goto ivTxB; } goto B0Wv8; I0Jbp: } goto rCHP6; n7GR4: if ($jtbl->max_length == null) { goto nP3bH; } goto OKb11; myl26: $add_columns[$table][] = $jtbl; goto n7GR4; LvRwY: if (!(strtoupper($extra) == "\x20\101\x55\x54\117\137\x49\x4e\103\122\105\115\x45\116\124")) { goto GSbtr; } goto rPDhl; CXYF5: lfiIe: goto aH5ui; rUG2f: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto LvRwY; OKb11: if ($jtbl->type != "\154\157\x6e\x67\x74\x65\170\164" && $jtbl->type != "\155\x65\144\x69\165\x6d\164\145\170\x74" && $jtbl->type != "\x74\x65\170\x74") { goto lfiIe; } goto gIeVz; KqXfD: $nullable = $jtbl->nullable == "\116\117" ? "\x20\116\x4f\124\40\x4e\125\114\x4c" : ''; goto zVUDt; cLns7: } goto Klm3L; tnjR2: Az7Vo: goto llCh9; ZhXMS: $pri = ''; goto fgePM; JrNlk: goto juu6Q; goto Qgevu; R8_Xw: $script_create_table[$table] = $script; goto LZ4pn; GZ1fv: $script .= $pri . "\51\40\x45\116\107\111\x4e\x45\x3d\x49\x6e\156\x6f\104\102\40\x44\x45\106\101\125\114\x54\40\x43\110\101\x52\123\105\124\x3d\x75\x74\146\70\155\x62\64\x3b"; goto R8_Xw; MowIT: $add_column = []; goto LVHTB; F8t6Y: if (!(count($modif_column) > 0)) { goto MKoyR; } goto I0JB8; llCh9: } goto oK72R; y_6dG: $json = json_decode($json); goto QAxIV; hsa5l: $tbl_seharusnya = array_keys($json); goto bZ2sD; C8Osf: $json = file_get_contents("\x2e\x2f\141\163\x73\145\x74\163\57\x61\160\160\57\144\x62\x2f\x64\x61\164\x61\142\x61\163\x65\x2e\152\163\157\156"); goto y_6dG; A_5Zj: $fields = []; goto MV25T; ykpXz: $this->db->db_debug = $db_debug; goto gXwjm; gXwjm: $data = ["\x66\151\x65\154\144\163" => $fields, "\143\162\x65\141\164\x65\137\164\x61\x62\154\145\x73" => $create_tables, "\143\157\165\156\x74\x5f\164\142\x6c" => count($create_tables), "\x61\x64\144\137\x63\x6f\154\x75\155\156\163\x5f\164\x6f\x5f\x74\x61\x62\154\145" => $add_columns, "\x63\157\165\x6e\x74\137\x63\157\154" => count($add_columns), "\x65\x64\151\164\137\x63\x6f\154\x75\155\x6e\163" => $edit_columns, "\x63\157\165\156\164\x5f\x6d\x6f\144" => count($edit_columns), "\141\x64\x64\x5f\164\142\x6c" => $this->encryption->encrypt(json_encode($script_create_table)), "\x61\144\144\x5f\x63\x6f\x6c" => $this->encryption->encrypt(json_encode($script_create_column)), "\x6d\x6f\144\x5f\143\157\x6c" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto ChD9p; QFDS7: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto jORun; ChD9p: $this->output_json($data); goto dmc_l; nuy3S: $db_debug = $this->db->db_debug; goto Vlbjy; n012j: $add_columns = []; goto kYIot; jORun: $full_tables = array_unique($full_tables); goto hRhZT; kYIot: $script_create_column = []; goto oon4P; QAxIV: $json = (array) $json; goto hsa5l; zz7bI: $tabless = $this->db->list_tables(); goto A_5Zj; dYlP1: $script_edit_column = []; goto EZ3JX; bZ2sD: $tbl_ada = array_keys($fields); goto QFDS7; oon4P: $edit_columns = []; goto dYlP1; hRhZT: sort($full_tables); goto T3IEx; MV25T: foreach ($tabless as $table) { goto wh1mY; F2EkG: $retval[$i]->type = $query[$i]->data_type; goto OpCEP; L21VI: $retval[$i]->primary = $query[$i]->column_key; goto uQyfI; Wf2MZ: YlX23: goto ImHRA; TtSic: $retval = array(); goto hvd_p; lZrtR: $retval[$i]->nullable = $query[$i]->is_nullable; goto L21VI; mb7B7: if (!($i < $c)) { goto YlX23; } goto TAuRT; uQyfI: h_ZnE: goto ALMa2; dRZ_b: $retval[$i]->col_type = $query[$i]->column_type; goto F2EkG; UILnV: $c = count($query); goto Xu21c; trEfC: $fields = FALSE; goto Rn1h1; gYcOh: if (!(($query = $this->db->query($sql)) === FALSE)) { goto FmdKg; } goto trEfC; wh1mY: $sql = "\x53\105\114\105\103\x54\40\140\x63\x6f\154\x75\x6d\x6e\x5f\156\141\x6d\x65\140\54\x20\140\143\x6f\154\x75\155\x6e\x5f\x74\171\x70\x65\140\54\40\140\143\x6f\x6c\x6c\x61\x74\151\x6f\156\137\x6e\141\x6d\x65\140\54\40\x60\144\141\x74\x61\137\x74\x79\x70\x65\140\x2c\40\x60\143\x68\x61\162\141\143\x74\145\162\x5f\x6d\x61\170\151\155\165\x6d\137\x6c\x65\156\147\x74\150\x60\x2c\x20\x60\x6e\x75\155\145\162\x69\x63\x5f\160\x72\145\143\151\163\151\x6f\x6e\140\x2c" . "\40\x60\x63\x6f\x6c\x75\155\156\137\x64\x65\146\141\x75\x6c\164\x60\54\40\140\x63\x6f\x6c\165\x6d\156\137\153\145\x79\x60\x2c\40\x60\143\x6f\x6c\x75\x6d\x6e\137\x63\157\155\x6d\x65\x6e\x74\140\x2c\40\140\x65\170\x74\x72\141\140\x2c\40\140\x69\x73\137\156\x75\x6c\154\141\142\154\x65\140\xd\xa\11\x9\x9\x46\x52\117\x4d\x20\140\x69\156\x66\x6f\x72\155\x61\x74\151\x6f\x6e\137\163\x63\x68\x65\155\x61\140\x2e\140\x63\157\x6c\165\x6d\156\163\x60\x20\127\x48\105\x52\x45\x20\164\x61\142\x6c\145\x5f\163\x63\x68\145\155\141\x20\75\x20\42" . $this->db->database . "\42\40\x41\116\x44\40\164\x61\x62\154\145\137\156\x61\x6d\x65\40\75\x20\x22" . $table . "\42"; goto gYcOh; u_R0r: $retval[$i]->extra = $query[$i]->extra; goto lZrtR; CLEqG: $retval[$i]->comment = $query[$i]->column_comment; goto u_R0r; OpCEP: $retval[$i]->collation = $query[$i]->collation_name; goto n03I6; IwYC5: EaRMA: goto bKjRa; B4RWJ: $query = $query->result_object(); goto TtSic; ImHRA: $fields[$table] = (object) ["\164\141\x62\x6c\145\x5f\156\141\155\x65" => $table, "\143\x6f\x6c\165\x6d\x6e\163" => $retval]; goto IwYC5; Xu21c: zWP2K: goto mb7B7; hvd_p: $i = 0; goto UILnV; Rn1h1: FmdKg: goto B4RWJ; ALMa2: $i++; goto OKRRv; OKRRv: goto zWP2K; goto Wf2MZ; dEodP: $retval[$i]->default = $query[$i]->column_default; goto CLEqG; TAuRT: $retval[$i] = new stdClass(); goto xN0_S; xN0_S: $retval[$i]->name = $query[$i]->column_name; goto dRZ_b; n03I6: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto dEodP; bKjRa: } goto SXrC_; dmc_l: } public function createTable() { goto HRAkC; uyGhA: $data["\163\x75\x63\x63\x65\163\163"] = $this->runQuery($queries); goto D11M4; THAic: sleep(1); goto pV9Rg; FIaJw: str_replace("\45\x32\x42", "\x2b", $scripts); goto THAic; D11M4: $data["\155\x65\163\163\x61\x67\x65"] = "\125\160\144\x61\x74\145\x20\x6b\x6f\x6c\157\155"; goto Cbn3B; Cbn3B: $this->output_json($data); goto j4vTO; Bx3jQ: foreach ($scripts as $script) { $queries .= $script; OIn6J: } goto YLgbC; pV9Rg: $scripts = json_decode($this->encryption->decrypt($scripts)); goto suWuH; YLgbC: UUxGs: goto uyGhA; suWuH: $queries = ''; goto Bx3jQ; HRAkC: $scripts = $this->input->post("\x64\x61\164\141", true); goto FIaJw; j4vTO: } public function createColumn() { goto TK0CV; x0r3E: QkiQp: goto rMI0A; TK0CV: $scripts = $this->input->post("\x64\x61\x74\141", true); goto ssLBk; cZqaw: nLHzj: goto oGtxu; z1u7K: $data["\x6d\x65\163\x73\x61\147\145"] = "\115\157\144\151\x66\x79\x20\153\157\x6c\157\155"; goto LCiPK; oGtxu: $data["\163\165\143\143\145\163\163"] = $this->runQuery($queries); goto z1u7K; mAkSg: $this->updateUID(); goto cZqaw; x2D4z: $scripts = json_decode($this->encryption->decrypt($scripts)); goto qohrX; rMI0A: if (!(strpos("\140\165\151\144\140", $queries) !== false)) { goto nLHzj; } goto mAkSg; dVKf0: sleep(1); goto x2D4z; qohrX: $queries = ''; goto xsWbT; LCiPK: $this->output_json($data); goto KiFcz; xsWbT: foreach ($scripts as $script) { $queries .= $script; XEAsY: } goto x0r3E; ssLBk: str_replace("\x25\62\x42", "\x2b", $scripts); goto dVKf0; KiFcz: } public function editColumn() { goto g9GI9; Oivt9: foreach ($scripts as $script) { $queries .= $script; TZ3ig: } goto K91Rn; K91Rn: mG3Zp: goto Y08Jw; qE326: str_replace("\x25\x32\102", "\x2b", $scripts); goto gsjv4; DCEQe: $data["\155\145\163\x73\x61\147\x65"] = "\125\160\144\x61\x74\x65\40\163\x65\154\x65\x73\141\151"; goto jUXM4; jUXM4: $this->output_json($data); goto TW1q2; Y08Jw: $data["\163\165\x63\x63\145\163\x73"] = $this->runQuery($queries); goto DCEQe; qfs5m: $queries = ''; goto Oivt9; gsjv4: sleep(1); goto fUvte; g9GI9: $scripts = $this->input->post("\144\x61\x74\141", true); goto qE326; fUvte: $scripts = json_decode($this->encryption->decrypt($scripts)); goto qfs5m; TW1q2: } function runQuery($script) { goto hzmYE; sAh6X: if (!mysqli_connect_errno()) { goto f4l2r; } goto joLzf; U1YIO: $hostuser = $this->db->username; goto Yv6d5; joLzf: return mysqli_connect_errno(); goto HK1Dl; g1XP9: $mysqli->close(); goto CJffT; Yv6d5: $hostpass = $this->db->password; goto pv5_9; hzmYE: $hostname = $this->db->hostname; goto U1YIO; CJffT: return true; goto kJgqf; pv5_9: $database = $this->db->database; goto vtLhS; k7gRH: $mysqli->multi_query($script); goto g1XP9; HK1Dl: f4l2r: goto k7gRH; vtLhS: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto sAh6X; kJgqf: } function updateUID() { goto fu9gl; fu9gl: $this->load->library("\125\165\151\x64", "\165\165\151\x64"); goto ebI9N; TJieq: foreach ($siswas as $siswa) { $input[] = array("\151\x64\x5f\163\x69\163\167\141" => $siswa->id_siswa, "\x75\151\x64" => $this->uuid->v4()); hnnSc: } goto Fjx1S; Fjx1S: zWi9H: goto a9kUB; a9kUB: return $this->db->update_batch("\155\x61\163\x74\145\162\137\x73\x69\163\x77\x61", $input, "\151\144\x5f\x73\x69\x73\167\141"); goto PCIj6; Vb8oy: $input = array(); goto TJieq; ebI9N: $siswas = $this->db->get("\x6d\141\x73\164\145\162\137\x73\x69\163\167\141")->result(); goto Vb8oy; PCIj6: } function make_base() { } }
