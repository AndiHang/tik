<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\x42\x41\123\105\120\101\124\x48") or exit("\x4e\157\x20\x64\151\162\x65\143\164\40\163\143\162\x69\x70\x74\x20\x61\x63\143\145\163\163\40\x61\x6c\154\x6f\x77\x65\144"); class Update extends CI_Controller { function __construct() { goto vni1H; Knyf6: $this->load->database(); goto zjtjD; zjtjD: $this->load->library("\145\x6e\x63\x72\171\x70\x74\151\157\156"); goto ZHFgI; vni1H: parent::__construct(); goto qwuyn; qwuyn: include APPPATH . "\143\x6f\x6e\146\x69\x67\x2f\x64\x61\x74\x61\x62\x61\163\145\56\x70\x68\160"; goto IG_f8; IG_f8: $this->load->dbforge(); goto Knyf6; ZHFgI: } public function output_json($data, $encode = true) { goto ngB6t; z1Rvk: $data = json_encode($data); goto S_ARF; S_ARF: CUG_x: goto VQXh6; VQXh6: $this->output->set_content_type("\141\x70\160\154\151\143\141\x74\x69\157\x6e\x2f\x6a\163\157\x6e")->set_output($data); goto krJTt; ngB6t: if (!$encode) { goto CUG_x; } goto z1Rvk; krJTt: } public function index() { goto tQFd2; Qc014: $this->load->view("\151\156\x73\164\x61\x6c\154\57\x66\157\x6f\x74\145\162"); goto k0clO; R3N_J: $json = json_decode($json); goto omX5E; omX5E: $json = (array) $json; goto scEGX; sG4MG: $this->load->view("\x69\x6e\x73\x74\141\154\x6c\x2f\x68\x65\141\x64\145\x72", $data); goto sE4ef; sE4ef: $this->load->view("\x69\156\x73\x74\x61\x6c\154\57\165\x70\x64\141\x74\145"); goto Qc014; scEGX: $data["\x6a\163\x6f\x6e"] = $json; goto sG4MG; tQFd2: $json = file_get_contents("\x2e\x2f\141\163\x73\x65\164\x73\57\x61\160\x70\x2f\x64\142\x2f\x64\141\164\x61\142\141\x73\x65\56\x6a\x73\x6f\156"); goto R3N_J; k0clO: } function object_to_array($data) { goto rcliX; JJelE: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; RifZK: } goto D4M5l; rUbxT: xEexj: goto iNS_5; rcliX: if (!(is_array($data) || is_object($data))) { goto xEexj; } goto x7ZpH; Fbasc: return $result; goto rUbxT; iNS_5: return $data; goto Eereh; D4M5l: jpnNr: goto Fbasc; x7ZpH: $result = []; goto JJelE; Eereh: } public function checkDatabase() { goto aOK81; FavoW: $json = (array) $json; goto nTwnU; ULEoL: $json = file_get_contents("\56\x2f\x61\x73\x73\145\164\163\57\141\x70\x70\57\x64\142\x2f\x64\141\x74\x61\142\x61\163\x65\56\152\163\x6f\156"); goto xqKgH; ItQ1G: $data = ["\144\x62" => $fields, "\x63\x72\145\x61\164\x65" => $create_tables, "\x6d\x6f\x64\151\x66\171" => $edit_columns, "\141\x64\x64" => $add_columns, "\x63\157\165\156\x74\163" => $counts, "\152\163\x6f\156" => $json, "\143\165\162\x72\145\x6e\164" => $currentDb]; goto UcKAh; LeL19: $currentDb = []; goto EjyNh; FeAL_: QFOmD: goto OmxUM; FYpRG: $tbl_ada = array_keys($fields); goto rDaLU; rDaLU: $full_tables = array_merge($tbl_baru, $tbl_ada); goto kniO1; OmxUM: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto ItQ1G; UcKAh: $this->output_json($data); goto a05zn; zw2uv: $edit_columns = []; goto bDtdG; bDtdG: foreach ($full_tables as $table) { goto LrHZJ; I4Fzy: L3Te6: goto MFzuZ; ziIQl: kB75z: goto uvaIh; BHfxf: $create_tables[$table] = $json[$table]; goto PLNjk; PLNjk: goto pakde; goto I4Fzy; LrHZJ: if ($this->db->table_exists($table)) { goto L3Te6; } goto BHfxf; l9FV8: IzNO2: goto DDNsp; uvaIh: ke2Xf: goto Y_Bs2; jL1u4: foreach ($json[$table] as $jtbl) { goto wEVpy; V9oU2: gjBet: goto AlD9c; wEVpy: if ($this->db->field_exists($jtbl->name, $table)) { goto ry3XX; } goto DihQO; kuar0: foreach ($fields[$table] as $ftbl) { goto o0g1P; GOILA: uGHUv: goto uC8Ug; uC8Ug: QeTMj: goto SP59m; o0g1P: if (!($jtbl->name == $ftbl->name)) { goto uGHUv; } goto iqaFf; iqaFf: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto TBfpJ; } goto yz591; E7GzC: TBfpJ: goto GOILA; yz591: $edit_columns[$table][] = $jtbl; goto E7GzC; SP59m: } goto mf004; Vpwql: goto H8KjX; goto dCRkw; mf004: rlzFC: goto LiOLz; dCRkw: ry3XX: goto kuar0; LiOLz: H8KjX: goto V9oU2; DihQO: $add_columns[$table][] = $jtbl; goto Vpwql; AlD9c: } goto ziIQl; MFzuZ: if (!isset($json[$table])) { goto ke2Xf; } goto jL1u4; Y_Bs2: pakde: goto l9FV8; DDNsp: } goto FeAL_; EjyNh: foreach ($tabless as $table) { goto PgmUm; btjdm: $i++; goto dkP8j; MPddS: U7Fmu: goto uMDvF; tuOnM: $fields[$table] = $datafld; goto tQZek; dSxoH: $retval[$i]->name = $query[$i]->column_name; goto ulNeD; DfkIk: BWgIO: goto R237Q; aK5YQ: if (!($i < $c)) { goto n5QY6; } goto Tk12Q; n6MUo: $i = 0; goto ITcSG; ITcSG: $c = count($query); goto tdL7T; P0vff: $retval = array(); goto n6MUo; EFVNj: $query = $query->result_object(); goto P0vff; dkP8j: goto X7FAr; goto ADy12; iOPf1: $currentDb[$table] = $retval; goto tuOnM; uTbVY: $sql = "\123\x45\x4c\x45\x43\124\40\140\x63\x6f\x6c\165\155\x6e\x5f\x6e\x61\x6d\145\x60\x2c\x20\140\156\x75\155\x65\x72\x69\143\x5f\160\x72\145\143\151\x73\151\x6f\x6e\140\54\x20\140\x65\170\164\162\x61\x60\54\x20\140\x69\163\x5f\156\165\x6c\x6c\x61\142\154\145\140" . "\x20\x46\122\117\115\x20\x60\151\x6e\x66\157\162\x6d\x61\164\x69\157\156\x5f\x73\143\150\x65\x6d\x61\140\56\x60\x63\x6f\154\x75\x6d\x6e\x73\x60\40\127\x48\105\122\x45\x20\x74\x61\142\154\x65\x5f\163\143\x68\145\x6d\x61\x20\x3d\x20\x22" . $this->db->database . "\42\x20\x41\x4e\104\x20\x74\141\x62\x6c\145\x5f\156\141\155\145\40\x3d\40\x22" . $table . "\42"; goto SGvtY; tdL7T: X7FAr: goto aK5YQ; S3bHh: dXb2h: goto btjdm; Tk12Q: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto BWgIO; } goto EB_29; O6om4: if ($query[$i]->extra == "\x61\x75\164\x6f\x5f\x69\x6e\x63\x72\x65\155\x65\156\164") { goto U7Fmu; } goto CRZad; CRZad: $datafld[$i]->extra = $query[$i]->extra; goto vu5x8; uMDvF: $datafld[$i]->auto_increment = true; goto YwMku; R237Q: $retval[$i] = new stdClass(); goto dSxoH; PRJM8: Z8KiV: goto DfkIk; LwzBb: I8bIJ: goto EFVNj; SGvtY: if (!(($query = $this->db->query($sql)) === FALSE)) { goto I8bIJ; } goto yUkyn; PgmUm: $datafld = $this->db->field_data($table); goto uTbVY; vu5x8: goto u30YJ; goto MPddS; ulNeD: $retval[$i]->extra = $query[$i]->extra; goto S3bHh; ADy12: n5QY6: goto iOPf1; tQZek: K9N1p: goto X47_L; EB_29: if (!($query[$i]->extra != '')) { goto Z8KiV; } goto O6om4; yUkyn: $currentDb = FALSE; goto LwzBb; YwMku: u30YJ: goto PRJM8; X47_L: } goto U_rxh; BfpM1: $add_columns = []; goto zw2uv; xqKgH: $json = json_decode($json); goto FavoW; aOK81: $db_debug = $this->db->db_debug; goto k9N1X; nTwnU: $tbl_baru = array_keys($json); goto FYpRG; k9N1X: $this->db->db_debug = FALSE; goto mkJ6N; UziRG: sort($full_tables); goto h1mbi; h1mbi: $create_tables = []; goto BfpM1; yPkky: $fields = []; goto LeL19; kniO1: $full_tables = array_unique($full_tables); goto UziRG; U_rxh: CUuEz: goto ULEoL; mkJ6N: $tabless = $this->db->list_tables(); goto yPkky; a05zn: } public function updateDatabase() { goto LCthI; anS0d: $fields = []; goto bCZje; LaSOF: $tbl_ada = array_keys($fields); goto UjQx2; ViRK8: $full_tables = array_unique($full_tables); goto bXSUg; OjEiT: $json = (array) $json; goto Ej7gS; bCZje: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); lqr9n: } goto oLB9p; fWozU: $json = json_decode($json); goto OjEiT; o8OA_: $json = file_get_contents("\x2e\x2f\x61\163\163\145\164\x73\57\x61\x70\x70\57\144\x62\x2f\x64\x61\x74\x61\142\141\163\x65\56\152\163\157\x6e"); goto fWozU; avFOT: t4fof: goto YrEDY; YrEDY: echo true; goto CvRUH; NxQ6l: foreach ($full_tables as $table) { goto iYv6i; RjPGF: Kw6E_: goto tP0Mz; n7WGH: iibk7: goto AKpNu; Fu7cl: JnwQf: goto vipCh; KI1gD: $this->db->query("\x41\114\x54\105\122\40\x54\101\x42\114\x45\x20\x20\x60" . $table . "\x60\40\x45\116\x47\x49\x4e\105\x20\75\x20\111\x6e\x6e\x6f\x44\x42"); goto Y9ov5; k_UsC: foreach ($json[$table] as $jtbl) { goto pTYDd; hmlWg: foreach ($fields[$table] as $ftbl) { goto iWphy; Fy7uF: $this->dbforge->modify_column($table, $field); goto vLXAt; G31u7: H7MMv: goto xOUD0; pn3dx: $this->dbforge->modify_column($table, $field); goto szsom; iWphy: if (!($jtbl->name == $ftbl->name)) { goto cdlmZ; } goto vW2kq; A_uNL: goto sLcsW; goto TtgfQ; xOUD0: $this->dbforge->add_key($jtbl->name, true); goto Fy7uF; qeNUZ: goto H7MMv; goto Khr75; Sqnay: z0Zb7: goto H88OV; N0INu: $field = array($jtbl->name . "\40\144\141\x74\145\x74\151\155\x65\x20\x64\145\146\x61\x75\x6c\x74\x20\x63\x75\162\162\145\x6e\164\137\164\151\x6d\x65\x73\164\x61\155\x70" . $onUpdate); goto RtWaA; H88OV: if ($jtbl->default == "\103\125\x52\122\105\116\x54\x5f\124\x49\115\x45\123\124\101\115\x50") { goto w0ubV; } goto oWdKB; oWdKB: $field = array($jtbl->name => array("\164\171\160\145" => $jtbl->type, "\x63\157\x6e\x73\x74\162\141\151\x6e\x74" => $jtbl->max_length, "\x64\x65\x66\141\165\154\x74" => $jtbl->default)); goto A_uNL; vLXAt: goto YYNXb; goto Sqnay; szsom: YYNXb: goto nPeDC; DprRn: $onUpdate = isset($jtbl->extra) ? "\40" . strtolower($jtbl->extra) : ''; goto N0INu; JqhGb: cdlmZ: goto eo7WZ; Khr75: Z1uSU: goto HqfMR; HqfMR: $field = array($jtbl->name => array("\x74\171\x70\145" => $jtbl->type, "\x63\157\x6e\x73\x74\162\141\151\156\164" => $jtbl->max_length, "\156\x75\x6c\154" => false, "\x61\165\x74\157\x5f\x69\156\143\x72\145\x6d\145\156\x74" => true)); goto G31u7; eo7WZ: cRfyk: goto SbwIE; RtWaA: sLcsW: goto pn3dx; qSpA7: if ($jtbl->auto_increment == true) { goto Z1uSU; } goto RUaBf; nPeDC: aA9_f: goto JqhGb; TtgfQ: w0ubV: goto DprRn; C3EOT: if ($jtbl->primary_key == 0) { goto z0Zb7; } goto qSpA7; vW2kq: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto aA9_f; } goto C3EOT; RUaBf: $field = array($jtbl->name => array("\164\171\x70\x65" => $jtbl->type, "\143\x6f\x6e\163\164\x72\x61\151\156\164" => $jtbl->max_length, "\156\x75\154\x6c" => false)); goto qeNUZ; SbwIE: } goto tWYix; uTtAX: QmQR0: goto lLzXD; jl5YS: ZYz0z: goto q9hnF; xO5TR: goto ZYz0z; goto VUqi0; VUqi0: jGJ7G: goto XYFTX; v0vVq: powuv: goto uTtAX; q9hnF: goto powuv; goto ExKwD; pTYDd: if ($this->db->field_exists($jtbl->name, $table)) { goto oVofv; } goto sSoCS; V6Jqk: $this->dbforge->add_column($table, $field); goto xO5TR; sSoCS: if ($jtbl->primary_key == 0) { goto jGJ7G; } goto hH26F; hH26F: $field = array($jtbl->name => array("\164\x79\x70\x65" => $jtbl->type, "\143\157\x6e\x73\164\x72\x61\x69\156\x74" => $jtbl->max_length, "\156\x75\154\154" => false)); goto pyDU7; pyDU7: $this->dbforge->add_key($jtbl->name, true); goto V6Jqk; tWYix: VzZsm: goto v0vVq; XYFTX: $field = array($jtbl->name => array("\164\171\160\x65" => $jtbl->type, "\143\x6f\156\x73\164\162\141\151\156\164" => $jtbl->max_length, "\144\x65\146\141\x75\x6c\x74" => $jtbl->default)); goto q7AI4; ExKwD: oVofv: goto hmlWg; q7AI4: $this->dbforge->add_column($table, $field); goto jl5YS; lLzXD: } goto Fu7cl; tP1g1: zUlNO: goto bqFLw; vipCh: DiBZ3: goto JPkX4; iYv6i: if ($this->db->table_exists($table)) { goto iibk7; } goto jTyVQ; AKpNu: if (!isset($json[$table])) { goto DiBZ3; } goto k_UsC; ItmjX: foreach ($json[$table] as $tbl => $jtbl) { goto fZQiN; q3AaX: $this->dbforge->add_key($jtbl->name, true); goto lagcz; cgTl1: a0XlK: goto ATtgp; lagcz: BRur5: goto cgTl1; fZQiN: $field = [$jtbl->name => ["\164\171\x70\145" => $jtbl->type, "\143\x6f\x6e\x73\x74\x72\141\x69\x6e\164" => $jtbl->max_length, "\156\x75\154\x6c" => $jtbl->primary_key == 0]]; goto heRWh; heRWh: $this->dbforge->add_field($field); goto kEUlY; kEUlY: if (!($jtbl->primary_key == 1)) { goto BRur5; } goto q3AaX; ATtgp: } goto RjPGF; Y9ov5: Nia8e: goto L0PQa; JPkX4: WFsuO: goto tP1g1; tP0Mz: $this->dbforge->create_table($table, TRUE); goto KI1gD; L0PQa: goto WFsuO; goto n7WGH; jTyVQ: if (!isset($json[$table])) { goto Nia8e; } goto ItmjX; bqFLw: } goto avFOT; Ej7gS: $tbl_baru = array_keys($json); goto LaSOF; bXSUg: sort($full_tables); goto NxQ6l; UjQx2: $full_tables = array_merge($tbl_baru, $tbl_ada); goto ViRK8; LCthI: $tabless = $this->db->list_tables(); goto anS0d; oLB9p: MGUjO: goto o8OA_; CvRUH: } public function checkDb() { goto ULwLC; uUOzR: $tbl_seharusnya = array_keys($json); goto S8I0W; QuY4C: $tabless = $this->db->list_tables(); goto USDpo; ULwLC: $db_debug = $this->db->db_debug; goto lbqUr; jSdJd: sort($full_tables); goto wovEu; zfxDM: $json = (array) $json; goto uUOzR; zywH1: $script_create_table = []; goto RvCS6; S8I0W: $tbl_ada = array_keys($fields); goto sJysL; GOxqJ: MCzw0: goto c71KW; rbKwE: foreach ($tabless as $table) { goto n70dd; yHVx6: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto Z2dnt; Xhf3f: $c = count($query); goto zzqbe; mXqyg: goto gtvft; goto lxNS3; Vt6YD: L1SkT: goto NRo6N; AM5wh: xOMrG: goto Ge2mw; ssZ3A: $fields = FALSE; goto AM5wh; Z2dnt: $retval[$i]->default = $query[$i]->column_default; goto LIc4l; UPlaW: $retval[$i] = new stdClass(); goto PRrDf; DTT3t: $retval[$i]->collation = $query[$i]->collation_name; goto yHVx6; n70dd: $sql = "\123\105\x4c\105\x43\124\40\140\x63\x6f\x6c\x75\155\x6e\137\156\141\x6d\x65\x60\54\40\140\x63\x6f\x6c\165\x6d\156\x5f\164\171\x70\145\x60\x2c\40\x60\x63\157\x6c\x6c\x61\x74\x69\157\156\137\156\x61\155\x65\x60\54\x20\x60\x64\x61\164\141\137\164\171\x70\145\x60\54\x20\x60\x63\150\x61\x72\141\x63\164\x65\x72\x5f\155\x61\x78\x69\155\x75\155\x5f\x6c\x65\156\x67\164\x68\x60\x2c\x20\140\156\165\155\145\162\x69\143\137\160\162\x65\143\x69\x73\151\x6f\156\x60\54" . "\40\x60\x63\x6f\x6c\x75\x6d\x6e\x5f\x64\x65\146\141\165\154\164\x60\54\x20\140\143\x6f\x6c\165\155\x6e\137\x6b\x65\171\140\54\40\140\x63\157\154\x75\x6d\156\x5f\143\157\x6d\x6d\x65\156\x74\x60\x2c\40\x60\x65\170\x74\x72\141\140\x2c\x20\x60\x69\x73\137\x6e\165\x6c\x6c\141\142\x6c\145\x60\xd\xa\11\x9\x9\x46\x52\117\x4d\40\140\151\156\x66\x6f\162\x6d\x61\164\151\157\x6e\x5f\163\x63\150\x65\x6d\x61\140\56\x60\143\157\154\x75\x6d\x6e\x73\140\40\127\x48\105\x52\105\x20\x74\x61\142\154\x65\x5f\163\x63\150\x65\155\141\x20\x3d\x20\x22" . $this->db->database . "\42\40\101\x4e\x44\x20\x74\141\x62\x6c\145\x5f\x6e\x61\x6d\x65\x20\x3d\x20\x22" . $table . "\x22"; goto FOeh3; Ge2mw: $query = $query->result_object(); goto fN4f4; zzqbe: gtvft: goto KDQeJ; LIc4l: $retval[$i]->comment = $query[$i]->column_comment; goto lYbaa; As6pI: $fields[$table] = (object) ["\164\x61\x62\x6c\145\x5f\x6e\141\x6d\x65" => $table, "\143\x6f\x6c\x75\x6d\156\163" => $retval]; goto BLBGJ; kiTp4: $i = 0; goto Xhf3f; FOeh3: if (!(($query = $this->db->query($sql)) === FALSE)) { goto xOMrG; } goto ssZ3A; PRrDf: $retval[$i]->name = $query[$i]->column_name; goto YXEU0; KDQeJ: if (!($i < $c)) { goto ZFRFc; } goto UPlaW; lYbaa: $retval[$i]->extra = $query[$i]->extra; goto tPr_J; uD_Ev: $retval[$i]->primary = $query[$i]->column_key; goto Vt6YD; wjzRD: $retval[$i]->type = $query[$i]->data_type; goto DTT3t; NRo6N: $i++; goto mXqyg; lxNS3: ZFRFc: goto As6pI; BLBGJ: tWMGe: goto myx3b; tPr_J: $retval[$i]->nullable = $query[$i]->is_nullable; goto uD_Ev; fN4f4: $retval = array(); goto kiTp4; YXEU0: $retval[$i]->col_type = $query[$i]->column_type; goto wjzRD; myx3b: } goto GOxqJ; CcAcf: $script_edit_column = []; goto CBPPL; CBPPL: foreach ($full_tables as $table) { goto Pv5i9; HPq0K: xnr6X: goto N9hcw; rnTgH: evqkI: goto Or0Pq; N9hcw: if (!(count($modif_column) > 0)) { goto SrgpJ; } goto yCWNy; YwNTj: if (!isset($json[$table])) { goto eXb2R; } goto qE7o4; xuEhQ: hpoqe: goto fjSey; Pv5i9: if (!$this->db->table_exists($table)) { goto evqkI; } goto YwNTj; SorDU: $script .= $pri . "\51\40\x45\116\107\x49\116\105\75\x49\156\156\x6f\104\x42\40\x44\x45\106\x41\x55\114\124\40\103\110\101\x52\x53\105\x54\75\165\164\146\70\155\142\64\73"; goto vK1E4; yCWNy: $script_edit_column[$table] = "\x41\114\124\x45\x52\x20\x54\101\102\x4c\105\x20\140" . $table . "\x60\x20" . implode("\54\40", $modif_column) . "\x3b"; goto MoRYU; XoNjK: $pri = ''; goto qZjZs; D9MZD: cbdKB: goto SorDU; MoRYU: SrgpJ: goto uSXxk; brc0r: $script_create_column[$table] = "\x41\x4c\x54\x45\x52\40\x54\x41\x42\x4c\x45\40\x60" . $table . "\140\40" . implode("\54\x20", $add_column) . "\73"; goto HPq0K; S_YnW: $script = "\103\x52\105\101\x54\105\x20\x54\101\x42\x4c\x45\x20\140" . $table . "\140\x20\50"; goto XoNjK; rT3Vz: if (!(count($add_column) > 0)) { goto xnr6X; } goto brc0r; p8wov: PjrH6: goto rT3Vz; vK1E4: $script_create_table[$table] = $script; goto xuEhQ; tv0HW: $modif_column = []; goto IfxNW; mrMet: goto hpoqe; goto rnTgH; fjSey: d_Wss: goto DLRGw; IfxNW: foreach ($json[$table]->columns as $jtbl) { goto ZEzHG; bp9NZ: oF76b: goto gypY0; awRm4: pDb3N: goto wOMAG; CsOQs: $length = "\x28" . $jtbl->max_length . "\51"; goto YssbR; Y1LMt: DjoeE: goto dT41f; wOMAG: $length = ''; goto AGqNa; W01CI: $add_columns[$table][] = $jtbl; goto gNxs8; YssbR: goto cSX_V; goto Y1LMt; YsvK3: YYDuL: goto VwfFW; zO7xV: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto H4SZv; J5IrS: kjwbV: goto dNHbn; ZEzHG: if ($this->db->field_exists($jtbl->name, $table)) { goto hRl1D; } goto W01CI; AGqNa: goto YYDuL; goto bp9NZ; H4SZv: if (!(strtoupper($extra) == "\x20\x41\x55\x54\117\x5f\x49\116\x43\x52\105\x4d\105\x4e\x54")) { goto JEYix; } goto SUHDI; fKGCf: JEYix: goto PQrQ4; SMKCK: hRl1D: goto GrEDq; RkFsw: $length = ''; goto JY3ua; ZFNb0: if ($jtbl->type != "\x6c\x6f\x6e\x67\164\145\x78\164" && $jtbl->type != "\155\x65\144\151\x75\x6d\x74\145\x78\164" && $jtbl->type != "\x74\x65\170\x74") { goto oF76b; } goto RkFsw; x8lVY: cSX_V: goto YsvK3; ddQGT: array_push($add_column, "\101\x44\104\40\x60" . $jtbl->name . "\x60\x20" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto SMKCK; JY3ua: goto YYDuL; goto awRm4; PQrQ4: $comment = $jtbl->comment == '' ? '' : "\x20\x43\117\x4d\x4d\105\116\124\x20\47" . $jtbl->comment . "\x27"; goto ddQGT; dNHbn: ysyTI: goto CpsGX; gNxs8: if ($jtbl->max_length == null) { goto pDb3N; } goto ZFNb0; xXO0u: $default = $jtbl->default == null ? '' : "\40\x44\x45\x46\x41\x55\x4c\x54\40" . $jtbl->default; goto zO7xV; dT41f: $length = "\x28" . ($jtbl->max_length + 1) . "\x29"; goto x8lVY; SUHDI: $extra .= "\40\x50\122\111\115\x41\122\131\x20\x4b\x45\131"; goto fKGCf; GrEDq: foreach ($fields[$table]->columns as $ftbl) { goto OI6NL; tJ7Rj: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto X0scb; } goto xNIqM; pAldI: $edit_columns[$table][$jtbl->name]["\145\x78\x74\162\141"] = $jtbl->extra; goto u0BVa; pkyY1: UBJjA: goto RPXjG; R9zM0: array_push($modif_column, "\115\117\104\111\x46\131\40\140" . $jtbl->name . "\x60\40" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto pUmQh; OYobT: A82Vl: goto xK5Qo; u0BVa: IjZx0: goto RgCxR; j5y1N: if (!($ftbl->extra != null)) { goto dOMLH; } goto NScFe; ZipgX: if (!($jtbl->default != $ftbl->default)) { goto NOA9z; } goto aFndc; RgCxR: if (!($jtbl->comment != $ftbl->comment)) { goto Ch1Wt; } goto Hjp80; ODhil: $jtbl->extra = str_replace("\x28\51", '', $jtbl->extra); goto Zf4Hs; RPXjG: array_push($modif_column, "\x41\104\x44\x20\125\116\x49\121\x55\105\40\113\x45\131\40\x60" . $jtbl->name . "\x60\40\x28\x60" . $jtbl->name . "\x60\x29"); goto Treiy; rb3qV: if (!($jtbl->extra != $ftbl->extra)) { goto IjZx0; } goto pAldI; L8e5p: if (!($jtbl->default != null)) { goto FUBcB; } goto qPeY_; lFTgM: $comment = $jtbl->comment == '' ? '' : "\x20\x43\x4f\x4d\x4d\105\116\124\40\x27" . $jtbl->comment . "\x27"; goto R9zM0; kyV1v: if (!($jtbl->extra != null)) { goto tUO1R; } goto ODhil; SM3x4: Tw4K5: goto OYobT; xOuXY: NVQaL: goto L8e5p; Hjp80: $edit_columns[$table][$jtbl->name]["\143\157\x6d\x6d\145\156\x74"] = $jtbl->comment; goto x68jf; ZTIzH: $ftbl->default = str_replace("\50\51", '', $ftbl->default); goto ODtSW; x68jf: Ch1Wt: goto l2AOh; ODtSW: $ftbl->default = strtoupper($ftbl->default); goto FqEia; aFndc: $edit_columns[$table][$jtbl->name]["\144\145\x66\141\x75\154\x74"] = $jtbl->default; goto kkEAA; NScFe: $ftbl->extra = str_replace("\x28\x29", '', $ftbl->extra); goto RgQTb; vyvJe: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto lFTgM; pvmYc: if (strtolower($jtbl->primary) == "\x70\162\151") { goto Hr4gg; } goto fTIgt; XSV5t: dOMLH: goto rb3qV; swL0w: $edit_columns[$table][$jtbl->name]["\x6e\x75\x6c\x6c\141\142\154\x65"] = $jtbl->nullable; goto xOuXY; Treiy: sHMlr: goto kfI4H; dAtHN: if (!($jtbl->col_type != $ftbl->col_type)) { goto YzkoB; } goto wbCP4; ETB0d: $edit_columns[$table][$jtbl->name]["\x70\x72\151\155\x61\x72\171"] = $jtbl->primary; goto pvmYc; NwrPZ: tUO1R: goto j5y1N; Zf4Hs: $jtbl->extra = strtoupper($jtbl->extra); goto NwrPZ; pUmQh: X0scb: goto SM3x4; RgQTb: $ftbl->extra = strtoupper($ftbl->extra); goto XSV5t; U2bCs: FUBcB: goto dhPgG; CYnCk: if (!($jtbl->nullable != $ftbl->nullable)) { goto NVQaL; } goto swL0w; l2AOh: if (!($jtbl->primary != $ftbl->primary)) { goto FLL6Z; } goto ETB0d; wbCP4: $edit_columns[$table][$jtbl->name]["\143\x6f\x6c\137\164\171\160\x65"] = $jtbl->col_type; goto oy7w5; tfpVE: $jtbl->default = strtoupper($jtbl->default); goto U2bCs; kkEAA: NOA9z: goto kyV1v; qPeY_: $jtbl->default = str_replace("\x28\51", '', $jtbl->default); goto tfpVE; OULKZ: goto sHMlr; goto pkyY1; dhPgG: if (!($ftbl->default != null)) { goto NjGRI; } goto ZTIzH; fTIgt: if (strtolower($jtbl->primary) == "\x75\x6e\x69") { goto UBJjA; } goto S1b6g; oy7w5: YzkoB: goto CYnCk; OI6NL: if (!($jtbl->name == $ftbl->name)) { goto Tw4K5; } goto dAtHN; S1b6g: goto sHMlr; goto fylx8; FqEia: NjGRI: goto ZipgX; xNIqM: $nullable = $jtbl->nullable == "\x4e\x4f" ? "\40\116\x4f\124\40\116\125\114\x4c" : ''; goto EVti_; fylx8: Hr4gg: goto vPRL5; EVti_: $default = $jtbl->default == null ? '' : "\x20\x44\x45\106\101\125\114\124\x20" . $jtbl->default; goto vyvJe; kfI4H: FLL6Z: goto tJ7Rj; vPRL5: array_push($modif_column, "\x41\104\x44\40\120\122\111\115\101\122\x59\40\113\x45\x59\x20\50\140" . $jtbl->name . "\140\x29"); goto OULKZ; xK5Qo: } goto J5IrS; VwfFW: $nullable = $jtbl->nullable == "\x4e\x4f" ? "\40\116\x4f\x54\40\116\125\x4c\x4c" : ''; goto xXO0u; gypY0: if ($jtbl->type == "\151\156\164") { goto DjoeE; } goto CsOQs; CpsGX: } goto p8wov; qE7o4: $add_column = []; goto tv0HW; Or0Pq: $create_tables[] = $json[$table]; goto S_YnW; qZjZs: foreach ($json[$table]->columns as $column) { goto xCWhv; QB98f: $length = ''; goto S2xVg; ZFZgu: KXZHu: goto L_ead; YyI6R: $length = "\50" . ($column->max_length + 1) . "\x29"; goto dtIp8; bFmld: goto oufVq; goto mQ1ib; S2xVg: goto ChqJw; goto kZPMy; uNF0S: goto ChqJw; goto ZFZgu; dicEM: $nullable = $column->nullable == "\x4e\117" ? "\40\116\x4f\124\40\x4e\125\x4c\x4c" : ''; goto uzfgW; vRMah: if ($column->type != "\154\x6f\x6e\147\x74\145\170\x74" && $column->type != "\155\145\144\151\165\x6d\164\145\x78\164" && $column->type != "\164\145\170\164") { goto KXZHu; } goto QB98f; vKdp0: $comment = $column->comment == '' ? '' : "\x20\x43\117\x4d\x4d\x45\116\124\x20\x27" . $column->comment . "\x27"; goto llWzd; XPiZL: $length = "\x28" . $column->max_length . "\x29"; goto bFmld; Xz2zL: $extra = $column->extra == '' ? '' : "\x20" . strtoupper($column->extra); goto vKdp0; mQ1ib: HFmKE: goto YyI6R; L_ead: if ($column->type == "\x69\x6e\x74") { goto HFmKE; } goto XPiZL; llWzd: $script .= "\140" . $column->name . "\140\40" . $column->type . $length . $nullable . $default . $extra . $comment . "\x2c\x20"; goto ggloL; Ei4lm: zihG4: goto ackKS; vxTPP: ChqJw: goto dicEM; ggloL: $pri .= $column->primary != '' ? "\120\122\x49\x4d\101\x52\131\40\x4b\105\131\40\50\140" . $column->name . "\x60\x29" : ''; goto Ei4lm; uzfgW: $default = $column->default == null ? '' : "\x20\104\x45\x46\x41\125\x4c\x54\x20" . $column->default; goto Xz2zL; kZPMy: zMqGU: goto qRHgu; xCWhv: if ($column->max_length == null) { goto zMqGU; } goto vRMah; qRHgu: $length = ''; goto uNF0S; dtIp8: oufVq: goto vxTPP; ackKS: } goto D9MZD; uSXxk: eXb2R: goto mrMet; DLRGw: } goto fTY2W; lbqUr: $this->db->db_debug = FALSE; goto QuY4C; USDpo: $fields = []; goto rbKwE; F3igS: $this->db->db_debug = $db_debug; goto YbJ9G; c71KW: $json = file_get_contents("\56\x2f\x61\x73\x73\145\164\163\x2f\141\x70\x70\x2f\144\142\x2f\144\141\x74\141\142\x61\163\x65\56\152\163\157\x6e"); goto QW98F; e7SMB: $edit_columns = []; goto CcAcf; sJysL: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto CpEiL; fTY2W: ZDRXQ: goto F3igS; wovEu: $create_tables = []; goto zywH1; nG_9y: $this->output_json($data); goto V0k2y; QW98F: $json = json_decode($json); goto zfxDM; RvCS6: $add_columns = []; goto nc4T2; YbJ9G: $data = ["\146\x69\145\x6c\144\163" => $fields, "\x63\162\145\141\164\145\x5f\x74\141\142\x6c\145\163" => $create_tables, "\x63\x6f\x75\156\x74\x5f\164\x62\154" => count($create_tables), "\141\x64\144\x5f\x63\x6f\154\x75\x6d\156\163\137\x74\157\x5f\x74\141\x62\154\x65" => $add_columns, "\143\157\165\x6e\x74\137\x63\157\154" => count($add_columns), "\x65\x64\x69\164\x5f\x63\157\x6c\165\x6d\156\x73" => $edit_columns, "\x63\157\165\x6e\164\137\155\157\x64" => count($edit_columns), "\x61\144\144\137\164\142\154" => $this->encryption->encrypt(json_encode($script_create_table)), "\x61\x64\144\137\143\157\x6c" => $this->encryption->encrypt(json_encode($script_create_column)), "\x6d\157\x64\137\143\157\154" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto nG_9y; CpEiL: $full_tables = array_unique($full_tables); goto jSdJd; nc4T2: $script_create_column = []; goto e7SMB; V0k2y: } public function createTable() { goto mCQt2; aNWiT: str_replace("\x25\62\x42", "\53", $scripts); goto GSY0P; zXvFu: foreach ($scripts as $script) { $queries .= $script; ULx0A: } goto jKh7K; YA7gQ: $this->output_json($data); goto GUUAz; hjsSf: $scripts = json_decode($this->encryption->decrypt($scripts)); goto dYLts; Xb6T7: $data["\163\x75\x63\143\x65\163\x73"] = $this->runQuery($queries); goto oafHR; oafHR: $data["\x6d\x65\x73\x73\x61\147\x65"] = "\125\160\144\x61\x74\x65\x20\x6b\x6f\x6c\x6f\155"; goto YA7gQ; dYLts: $queries = ''; goto zXvFu; GSY0P: sleep(1); goto hjsSf; mCQt2: $scripts = $this->input->post("\144\x61\164\x61", true); goto aNWiT; jKh7K: djGj0: goto Xb6T7; GUUAz: } public function createColumn() { goto Kh4xP; W_JAD: if (!(strpos("\x60\165\x69\x64\x60", $queries) !== false)) { goto ofVem; } goto VzV1Y; PJssf: $this->output_json($data); goto F_HSx; KJWtP: ofVem: goto V03ZY; QABfo: $data["\x6d\145\x73\x73\141\147\x65"] = "\x4d\157\144\151\146\x79\x20\x6b\x6f\x6c\157\155"; goto PJssf; VFFdp: $queries = ''; goto Iuosc; SAUv3: sleep(1); goto iDIJu; Kh4xP: $scripts = $this->input->post("\x64\141\164\x61", true); goto jSC12; jSC12: str_replace("\45\62\102", "\x2b", $scripts); goto SAUv3; VzV1Y: $this->updateUID(); goto KJWtP; V03ZY: $data["\163\x75\x63\143\x65\x73\163"] = $this->runQuery($queries); goto QABfo; Iuosc: foreach ($scripts as $script) { $queries .= $script; hbJUV: } goto AKjPA; iDIJu: $scripts = json_decode($this->encryption->decrypt($scripts)); goto VFFdp; AKjPA: d7hfC: goto W_JAD; F_HSx: } public function editColumn() { goto JBbDQ; Bhw79: NxdbA: goto PT49m; FRgkx: $scripts = json_decode($this->encryption->decrypt($scripts)); goto Avz3M; PT49m: $data["\x73\x75\x63\143\145\163\x73"] = $this->runQuery($queries); goto p727y; FUiba: sleep(1); goto FRgkx; JBbDQ: $scripts = $this->input->post("\144\141\164\x61", true); goto jHMjI; Avz3M: $queries = ''; goto Ancoq; jHMjI: str_replace("\45\x32\x42", "\53", $scripts); goto FUiba; p727y: $data["\x6d\145\x73\x73\141\x67\145"] = "\x55\x70\144\141\x74\145\x20\163\x65\154\145\163\141\151"; goto QVLS0; Ancoq: foreach ($scripts as $script) { $queries .= $script; QZves: } goto Bhw79; QVLS0: $this->output_json($data); goto S6XWD; S6XWD: } function runQuery($script) { goto OyOSu; OGc0u: return true; goto DeNMv; eVtzI: $mysqli->multi_query($script); goto sd1eW; hbFM7: return mysqli_connect_errno(); goto hlNWr; ZiX7R: $hostpass = $this->db->password; goto gJqYj; lzCsC: $hostuser = $this->db->username; goto ZiX7R; sd1eW: $mysqli->close(); goto OGc0u; gJqYj: $database = $this->db->database; goto EhYoB; hlNWr: sGzHX: goto eVtzI; OyOSu: $hostname = $this->db->hostname; goto lzCsC; ZVTJR: if (!mysqli_connect_errno()) { goto sGzHX; } goto hbFM7; EhYoB: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto ZVTJR; DeNMv: } function updateUID() { goto RR6EB; t6Ath: $input = array(); goto dYVBU; dYVBU: foreach ($siswas as $siswa) { $input[] = array("\151\x64\137\x73\x69\163\x77\x61" => $siswa->id_siswa, "\x75\x69\x64" => $this->uuid->v4()); dAmX0: } goto pKJzE; pKJzE: dZ8mD: goto C3Ley; C3Ley: return $this->db->update_batch("\155\x61\x73\x74\x65\x72\x5f\163\151\x73\x77\141", $input, "\x69\x64\137\x73\x69\x73\x77\x61"); goto F7tT5; RR6EB: $this->load->library("\x55\x75\x69\144", "\165\x75\x69\144"); goto WWRCW; WWRCW: $siswas = $this->db->get("\155\141\163\164\x65\162\137\163\151\163\x77\141")->result(); goto t6Ath; F7tT5: } function make_base() { } }
