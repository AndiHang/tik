<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\101\x53\105\x50\101\124\110") or exit("\x4e\x6f\40\x64\x69\162\x65\x63\164\x20\163\143\x72\151\160\164\x20\141\x63\x63\145\x73\163\x20\141\154\x6c\157\167\145\x64"); class Install extends CI_Controller { function __construct() { goto lVTZj; xQoBM: Wl_YY: goto CjP7i; CjP7i: $this->load->model("\111\156\x73\x74\141\x6c\x6c\x5f\x6d\x6f\144\145\154", "\151\x6e\x73\x74\141\154\154"); goto VIcsg; r0waU: include APPPATH . "\x63\x6f\156\146\x69\147\57\x64\x61\x74\x61\142\x61\163\145\56\x70\150\x70"; goto rNAG9; rNAG9: if (!($db["\x64\145\x66\x61\x75\x6c\x74"]["\x64\x61\164\x61\x62\141\x73\145"] != '')) { goto Wl_YY; } goto EIfmq; lVTZj: parent::__construct(); goto r0waU; EIfmq: $this->load->database(); goto RJ0Yi; VIcsg: $this->load->model("\104\141\x73\x68\142\x6f\x61\x72\144\137\x6d\x6f\144\x65\154", "\144\141\163\x68\x62\157\141\x72\144"); goto eSikd; RJ0Yi: $this->load->dbforge(); goto xQoBM; eSikd: } public function output_json($data, $encode = true) { goto JiH32; eB5bc: $data = json_encode($data); goto f3dpF; f3dpF: UXT2x: goto xQpMp; xQpMp: $this->output->set_content_type("\x61\x70\x70\154\151\x63\x61\x74\x69\157\x6e\x2f\x6a\163\x6f\156")->set_output($data); goto dsEH1; JiH32: if (!$encode) { goto UXT2x; } goto eB5bc; dsEH1: } public function index() { goto S7kYR; JTPZb: OdewY: goto Dit_y; b3wJ9: DR71v: goto KyLt_; fNST6: $data->error = $res; goto sRovc; QTVfQ: BBx6z: goto YWigc; GLs_v: goto IKTbH; goto QTVfQ; QQc90: $data = $this->getSaved(); goto fNST6; gKFLO: if ($res == "\60") { goto tDj_L; } goto pHChB; yw5xX: $data["\x6d\163\x67"] = "\x62\145\154\165\x6d\40\x61\144\x61\x20\144\x61\164\141\40\x73\145\x6b\x6f\x6c\141\150"; goto korKe; fBcmQ: $this->load->view("\x69\156\163\164\x61\154\x6c\57\163\164\145\160"); goto n1og0; cw1Dw: if ($res == "\63") { goto BBx6z; } goto yw5xX; PX7Lu: goto DR71v; goto PmpoC; PmpoC: tDj_L: goto LsZ3O; pHChB: if ($res == "\x32") { goto OdewY; } goto cw1Dw; FtXwe: IKTbH: goto QQc90; korKe: goto IKTbH; goto JTPZb; YWigc: $data["\x6d\163\x67"] = "\x62\145\x6c\x75\155\40\141\144\x61\40\x61\144\155\151\156\x69\163\x74\162\141\164\x6f\162"; goto FtXwe; S7kYR: $res = $this->install->check_installer(); goto gKFLO; n1og0: $this->load->view("\x69\x6e\163\x74\141\154\154\x2f\x66\x6f\157\x74\x65\x72"); goto PX7Lu; LsZ3O: redirect("\x75\160\x64\141\164\x65"); goto b3wJ9; sRovc: $this->load->view("\151\156\163\164\141\x6c\154\57\150\x65\x61\144\145\x72", ["\x64\141\x74\x61" => $data]); goto fBcmQ; Dit_y: $data["\155\x73\x67"] = "\163\145\142\x61\147\x69\x61\x6e\x20\x74\141\142\145\x6c\40\x62\x65\154\x75\155\40\x64\x69\142\165\x61\x74"; goto GLs_v; KyLt_: } function getSaved() { goto Ww9er; EfS_e: $data["\153\157\164\x61"] = ''; goto GzBbd; gtf6C: $data["\x6b\145\143"] = $setting->kecamatan; goto NMQUp; QUSsZ: $data["\x64\x65\x73\x61"] = $setting->desa; goto gtf6C; TajiI: $data["\x64\x65\163\141"] = ''; goto qVF6y; ucaPh: if ($this->db->table_exists("\x75\163\145\x72\x73")) { goto GfI0O; } goto nJq3h; B43cN: $data["\160\x61\163\163\x77\x6f\x72\144"] = $db["\144\x65\x66\x61\165\154\164"]["\x70\141\163\x73\167\x6f\x72\x64"]; goto akPUk; sq5k8: $data["\141\154\141\x6d\141\x74"] = ''; goto TajiI; QGTSo: $data["\155\x73\147"] = "\x54\x61\142\154\x65\40\140\x75\x73\x65\162\x73\140\40\x62\x65\154\x75\155\x20\x64\151\x62\x75\141\164"; goto Vnfqk; aX87G: $data["\165\x73\x65\162\137\141\x64\155\151\x6e"] = $admin->username; goto tRy8e; Vnfqk: goto z8Yzd; goto BncLY; wOfky: $setting = $this->dashboard->getSetting(); goto yrHUY; ruJit: $data["\x61\x70\x6c\x69\153\x61\163\151"] = $setting->nama_aplikasi; goto X9Vyp; oRhvp: if (!($admin != null)) { goto CcGDm; } goto yKSps; s2Sui: I7o1l: goto G1jO6; gG0vo: $data["\x6e\141\155\x61\x5f\x61\x64\x6d\x69\156"] = ''; goto gHPOA; A3SpI: $data["\153\x65\160\163\145\x6b"] = $setting->kepsek; goto nrSeJ; akPUk: $data["\144\141\164\141\142\x61\x73\x65"] = $database; goto gG0vo; tRy8e: $data["\x70\141\163\x73\137\141\144\155\x69\156"] = $admin->password; goto dUK6B; X9Vyp: $data["\163\x65\x6b\x6f\x6c\x61\x68"] = $setting->sekolah; goto Ffvn5; ff07R: z8Yzd: goto XJgl7; Ww9er: include APPPATH . "\x63\157\x6e\146\151\147\57\x64\141\164\141\142\141\163\x65\x2e\x70\x68\x70"; goto MRwr5; NMQUp: $data["\x6b\x6f\164\141"] = $setting->kota; goto maAYM; G1jO6: $current_page = $admin == null ? 2 : ($setting == null ? 3 : 4); goto ff07R; dUK6B: CcGDm: goto wOfky; uVawi: $data["\x75\x73\x65\x72\156\141\155\145"] = $db["\x64\145\146\x61\x75\154\x74"]["\x75\163\x65\162\156\141\155\x65"]; goto B43cN; XJgl7: $data["\143\x75\x72\162\x65\x6e\x74\x5f\x70\x61\147\145"] = $current_page; goto Zb6T4; maAYM: $data["\164\x6c\x70"] = $setting->telp; goto s2Sui; gHPOA: $data["\165\x73\x65\162\137\x61\x64\x6d\x69\156"] = ''; goto nFYwJ; qVF6y: $data["\153\x65\x63"] = ''; goto EfS_e; QA_a2: $data["\x6b\145\160\163\x65\153"] = ''; goto sq5k8; sRgUH: $data["\x6a\x65\156\x6a\141\x6e\x67"] = ''; goto QA_a2; PHjXU: $data["\x61\160\x6c\151\x6b\141\x73\151"] = ''; goto VYkZk; xdMXI: $data["\150\x6f\x73\164\156\x61\x6d\145"] = $db["\x64\145\x66\141\165\154\164"]["\150\x6f\x73\164\156\x61\155\145"]; goto uVawi; yKSps: $data["\156\x61\x6d\x61\137\x61\144\x6d\151\x6e"] = $admin->first_name . "\x20" . $admin->last_name; goto aX87G; MRwr5: $database = $db["\x64\145\146\141\165\154\x74"]["\144\141\x74\x61\x62\141\163\x65"]; goto xdMXI; DBuvL: $admin = $this->db->get("\165\x73\145\162\163")->row(); goto oRhvp; nJq3h: $current_page = 2; goto QGTSo; GzBbd: $data["\x74\154\x70"] = ''; goto rJY9h; nrSeJ: $data["\x61\154\141\155\x61\x74"] = $setting->alamat; goto QUSsZ; Zb6T4: return json_decode(json_encode($data)); goto euC4_; Ffvn5: $data["\x6a\145\156\152\141\156\147"] = $setting->jenjang; goto A3SpI; BncLY: GfI0O: goto DBuvL; rJY9h: $current_page = 2; goto ucaPh; nFYwJ: $data["\x70\x61\163\x73\x5f\141\x64\x6d\x69\x6e"] = ''; goto PHjXU; VYkZk: $data["\163\x65\153\157\154\141\x68"] = ''; goto sRgUH; yrHUY: if (!($setting != null)) { goto I7o1l; } goto ruJit; euC4_: } public function steps() { goto n33oy; yqmKl: $this->load->view("\151\156\x73\164\141\154\154\57\150\x65\x61\x64\x65\x72", ["\x64\141\164\x61" => $data]); goto nQAaA; n33oy: $data = $this->getSaved(); goto yqmKl; UFkp7: $this->load->view("\151\x6e\x73\164\x61\x6c\x6c\x2f\146\x6f\x6f\164\145\x72"); goto Gps7s; nQAaA: $this->load->view("\x69\x6e\163\164\141\154\x6c\x2f\163\164\x65\x70"); goto UFkp7; Gps7s: } public function checkDatabase() { goto fhdgA; v9OSJ: hVyVt: goto nRirx; eM39U: $database_file = file_get_contents($template_path); goto vl7QC; EZp0M: $new = str_replace("\45\125\123\105\x52\x4e\x41\115\x45\45", $hostuser, $new); goto KDe5g; s_GAk: goto OtpoE; goto YXbXn; Dlwgs: $data["\150\x6f\163\x74\137\155\x73\147"] = "\x67\x61\x67\x61\154\40\x6d\145\x6d\x62\x75\x61\164\x20\x6e\141\155\141\40\144\141\164\141\142\x61\x73\145"; goto ptrdE; vl7QC: $new = str_replace("\45\110\x4f\x53\x54\x4e\x41\115\105\45", $hostname, $database_file); goto EZp0M; YXbXn: FP2Wh: goto tFi5U; Twjiz: $new = str_replace("\45\104\101\124\x41\102\x41\x53\105\45", $database, $new); goto Ut_dp; G5TlN: $hostpass = $this->input->post("\x68\x6f\x73\164\160\141\x73\163", true); goto mLLHT; mLLHT: $database = $this->input->post("\144\141\164\141\x62\x61\163\x65", true); goto DDP8v; bmO0F: $data["\x68\157\163\164"] = false; goto Dlwgs; y1Gzt: $data["\x68\x6f\163\164\137\x6d\163\147"] = "\164\x69\x64\x61\153\x20\x62\x6f\154\x65\150\40\141\x64\141\x20\171\141\156\x67\40\153\157\x73\x6f\x6e\x67"; goto FXBvx; ozAJT: $data["\x68\x6f\163\164"] = true; goto dWJ68; DR9mw: ARXLb: goto oEQnU; tCNps: $output_path = APPPATH . "\143\157\156\146\x69\147\57\144\x61\164\141\142\x61\163\145\x2e\160\150\160"; goto eM39U; pzwUo: $data["\x68\x6f\x73\164"] = false; goto y1Gzt; ArNrA: $data["\144\x61\164\x61\x62\x61\163\x65"] = $this->create_database($hostname, $hostuser, $hostpass, $database); goto ZybRT; KDe5g: $new = str_replace("\45\x50\101\x53\x53\x57\117\122\104\x25", $hostpass, $new); goto Twjiz; oibSd: OtpoE: goto DR9mw; tFi5U: if (fwrite($handle, $new)) { goto hVyVt; } goto bmO0F; oEQnU: $this->output_json($data); goto RpyUg; Le8Vp: $data["\x68\x6f\163\164\137\x6d\163\x67"] = "\164\x69\x64\x61\153\x20\x61\x64\141\40\x61\153\x73\145\x73\40\153\x65\x20\x66\x69\x6c\145\40\x64\141\x74\x61\142\141\x73\145\56\x70\x68\160\54\x20\160\x61\163\x74\x69\x6b\x61\x6e\40\160\145\162\155\151\x73\163\x69\157\x6e\40\163\165\144\141\x68\40\x64\151\x7a\x69\156\153\141\156"; goto s_GAk; MT81X: @chmod($output_path, 0777); goto I7Ezp; fhdgA: $hostname = $this->input->post("\150\x6f\163\x74\156\141\x6d\x65", true); goto NeT5z; ptrdE: goto W4fTC; goto v9OSJ; I7Ezp: if (is_writable($output_path)) { goto FP2Wh; } goto OA3PG; ibkOq: fAAiv: goto fkIUC; r1BxL: W4fTC: goto oibSd; DDP8v: if ($this->validate_host($hostname, $hostuser, $database)) { goto fAAiv; } goto pzwUo; ZybRT: $data["\164\141\142\154\145"] = $this->create_tables($hostname, $hostuser, $hostpass, $database); goto ozAJT; dWJ68: $data["\x68\157\163\x74\x5f\x6d\163\x67"] = "\163\x75\153\x73\145\x73"; goto YWSqM; nRirx: $data["\x68\157\163\x74"] = true; goto F4VuC; YWSqM: $data["\x64\141\164\141\x62\141\163\145"] = true; goto r1BxL; OA3PG: $data["\x68\157\163\x74"] = false; goto Le8Vp; NeT5z: $hostuser = $this->input->post("\150\x6f\x73\164\165\163\x65\x72", true); goto G5TlN; Ut_dp: $handle = fopen($output_path, "\x77\x2b"); goto MT81X; FXBvx: goto ARXLb; goto ibkOq; F4VuC: $data["\x68\x6f\x73\164\x5f\155\x73\x67"] = "\x62\x65\x68\x61\x73\151\154"; goto ArNrA; fkIUC: $template_path = "\56\x2f\141\x73\x73\145\164\163\x2f\x61\160\x70\57\x64\x62\57\x64\x61\164\x61\142\x61\x73\145\56\160\150\160"; goto tCNps; RpyUg: } public function createDb() { goto GO7Fl; GO7Fl: $page = $this->input->post("\x70\x61\x67\145", true); goto uhM8i; P5TGi: $data["\150\157\163\164"] = true; goto ybMYF; eXdBT: $data["\144\x61\x74\x61\x62\x61\163\145"] = true; goto B1KVP; Yu9t0: $data["\x74\x61\142\x6c\145"] = $this->create_tables($hostname, $hostuser, $hostpass, $database); goto P5TGi; CrNOq: Ih083: goto f9kg2; B1KVP: w2WD2: goto UMPmc; ZzbTb: $hostpass = $this->input->post("\150\x6f\163\x74\x70\x61\x73\x73", true); goto Pdjkt; ybMYF: $data["\x68\x6f\163\164\137\x6d\163\147"] = "\163\x75\x6b\163\x65\163"; goto eXdBT; PmoPy: $data["\x68\157\x73\164\x5f\155\163\x67"] = "\x73\164\x65\x70\40\x73\x61\154\141\x68"; goto yBUjZ; vUMy3: goto w2WD2; goto CrNOq; gAMLD: $data["\150\157\x73\164"] = true; goto PmoPy; f9kg2: $hostname = $this->input->post("\150\x6f\163\164\x6e\141\155\x65", true); goto Jk44E; s18xE: $data["\164\141\142\x6c\145"] = false; goto vUMy3; Pdjkt: $database = $this->input->post("\144\141\164\141\142\141\x73\145", true); goto Yu9t0; UMPmc: $this->output_json($data); goto alYMV; uhM8i: if ($page == "\60") { goto Ih083; } goto gAMLD; Jk44E: $hostuser = $this->input->post("\150\157\x73\164\x75\x73\x65\162", true); goto ZzbTb; yBUjZ: $data["\144\141\x74\x61\x62\x61\163\x65"] = false; goto s18xE; alYMV: } function validate_host($host, $usr, $db) { return !empty($host) && !empty($usr) && !empty($db); } function create_database($hostname, $hostuser, $hostpass, $database) { goto mpcOu; NqpJS: Me3g7: goto wFXfz; wFXfz: $mysqli->query("\103\x52\x45\101\124\105\x20\x44\x41\x54\101\102\101\123\105\40\x49\x46\x20\x4e\x4f\x54\x20\x45\x58\111\x53\x54\123\x20" . $database); goto XHdQZ; mpcOu: $mysqli = new mysqli($hostname, $hostuser, $hostpass, ''); goto kheFH; XHdQZ: $mysqli->close(); goto f94e6; kheFH: if (!mysqli_connect_errno()) { goto Me3g7; } goto d8vGz; f94e6: return true; goto tBZI6; d8vGz: return false; goto NqpJS; tBZI6: } function create_tables($hostname, $hostuser, $hostpass, $database) { goto uVhYr; U4sl7: EbtEI: goto Wpe17; toaXD: return true; goto U7qpV; Wpe17: $query = file_get_contents("\56\x2f\x61\163\x73\x65\164\x73\57\x61\160\160\x2f\144\142\x2f\x6d\x61\163\164\145\x72\x2e\163\x71\x6c"); goto ycpVY; Gxe9C: return false; goto U4sl7; DV8RA: if (!mysqli_connect_errno()) { goto EbtEI; } goto Gxe9C; uVhYr: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto DV8RA; ycpVY: $mysqli->multi_query($query); goto sfcIW; sfcIW: $mysqli->close(); goto toaXD; U7qpV: } public function createSetting() { goto JZbRi; X545K: $jenjang = $this->input->post("\152\x65\156\152\x61\156\x67", true); goto JbONZ; JZbRi: $nama_aplikasi = $this->input->post("\156\141\x6d\x61\137\x61\160\154\x69\x6b\x61\163\151", true); goto GhyfE; z3opA: $insert = ["\x69\x64\137\x73\x65\164\x74\151\x6e\x67" => 1, "\x73\x65\153\x6f\154\x61\x68" => $sekolah, "\152\x65\156\152\x61\x6e\x67" => $jenjang, "\163\141\164\x75\141\156\x5f\160\145\x6e\x64\151\x64\151\153\141\x6e" => $satuan_pendidikan, "\141\154\141\155\x61\164" => $alamat, "\144\x65\163\x61" => $desa, "\x6b\157\x74\x61" => $kota, "\x6b\145\143\x61\155\141\x74\x61\156" => $kec, "\164\x65\154\160" => $tlp, "\153\145\160\163\145\153" => $kepsek, "\x6e\x61\155\x61\x5f\141\x70\x6c\151\x6b\141\163\151" => $nama_aplikasi]; goto tq9ts; Jma9M: $desa = $this->input->post("\x64\x65\163\141", true); goto LudKm; x2EwH: $kec = $this->input->post("\153\145\x63", true); goto Jma9M; LudKm: $tlp = $this->input->post("\164\x6c\x70", true); goto z3opA; NZXIM: $data["\x73\x61\166\145\x64"] = $this->getSaved(); goto sMDpd; z7BqR: $kepsek = $this->input->post("\x6b\x65\160\163\145\153", true); goto PkBbR; sMDpd: $this->output_json($data); goto pYzEq; GhyfE: $sekolah = $this->input->post("\156\141\x6d\141\x5f\x73\x65\153\x6f\x6c\141\150", true); goto X545K; tq9ts: $data["\151\156\163\145\162\164"] = $this->db->insert("\x73\x65\164\x74\x69\156\147", $insert); goto NZXIM; PkBbR: $alamat = $this->input->post("\141\154\x61\155\141\164", true); goto Z0hcp; Z0hcp: $kota = $this->input->post("\x6b\157\x74\141", true); goto x2EwH; JbONZ: $satuan_pendidikan = $this->input->post("\163\141\164\x75\141\x6e\x5f\x70\x65\x6e\144\151\x64\151\153\141\x6e", true); goto z7BqR; pYzEq: } public function createAdmin() { goto QLoXM; v7ePG: $last_name = end($namaAdmin); goto HhST2; bcHYF: $first_name = $namaAdmin[0]; goto v7ePG; HhST2: $additional_data = ["\146\151\162\x73\x74\137\156\141\x6d\145" => $first_name, "\154\x61\x73\164\137\x6e\141\x6d\145" => $last_name]; goto TpkQN; Rh2W3: $password = $this->input->post("\x70\141\163\x73\x77\157\162\x64", true); goto RUy0W; aITHl: $create = $this->ion_auth->register($username, $password, $email, $additional_data, $group); goto JQlZv; eNtY3: $email = strtolower($nama) . "\x40\141\144\x6d\151\x6e\56\x63\157\x6d"; goto aITHl; yGLd3: $username = $this->input->post("\x75\163\145\162\x6e\x61\x6d\145", true); goto Rh2W3; RUy0W: $namaAdmin = explode("\x20", $nama); goto bcHYF; QLoXM: $nama = $this->input->post("\x6e\x61\155\141\137\154\x65\x6e\x67\x6b\x61\160", true); goto yGLd3; TfqeD: $this->output_json($data); goto RmIrq; JQlZv: $data["\141\144\x6d\151\x6e"] = $create; goto TfqeD; TpkQN: $group = array("\61"); goto eNtY3; RmIrq: } public function createApp() { goto Oxa1C; BaB3c: $data["\151\x6e\163\x65\x72\164"] = $this->db->insert("\x73\145\164\164\x69\x6e\x67", $insert); goto Ku0a8; PqYIN: $insert = ["\x69\x64\137\163\145\x74\x74\151\x6e\x67" => 1, "\x73\x65\153\x6f\154\141\x68" => $sekolah, "\152\145\156\152\141\x6e\x67" => $jenjang, "\141\x6c\x61\x6d\141\x74" => $alamat, "\x64\x65\x73\141" => $desa, "\153\157\x74\x61" => $kota, "\153\145\143\x61\x6d\141\x74\141\156" => $kec, "\x74\145\154\x70" => $tlp, "\x6b\x65\160\163\145\x6b" => $kepsek, "\x6e\x61\155\x61\137\141\160\154\151\153\141\163\151" => $nama_aplikasi]; goto DSyaD; RuDnj: $password = $this->input->post("\160\x61\x73\163\x77\157\x72\144", true); goto RigR8; i8hzY: $create = $this->ion_auth->register($username, $password, $email, $additional_data, $group); goto BaB3c; rWZcM: $alamat = $this->input->post("\141\x6c\x61\x6d\141\164", true); goto mB7kJ; BqBn9: $first_name = $namaAdmin[0]; goto Jv6Qw; Ku0a8: $data["\x61\144\x6d\x69\x6e"] = $create; goto xhyPL; arLA9: $tlp = $this->input->post("\x74\154\160", true); goto PqYIN; YOPMO: $email = strtolower($nama) . "\100\x61\144\155\151\x6e\56\143\x6f\x6d"; goto i8hzY; DSyaD: $namaAdmin = explode("\40", $nama); goto BqBn9; RigR8: $nama_aplikasi = $this->input->post("\x6e\x61\x6d\x61\137\141\x70\154\151\x6b\x61\x73\x69", true); goto djPOE; xhyPL: $this->output_json($data); goto UZTmJ; Oxa1C: $nama = $this->input->post("\x6e\141\x6d\x61\x5f\x6c\x65\x6e\147\153\x61\x70", true); goto xiYgj; djPOE: $sekolah = $this->input->post("\x6e\141\155\141\x5f\163\145\x6b\157\x6c\x61\x68", true); goto xMIJ7; YGcWJ: $additional_data = ["\146\x69\x72\163\x74\x5f\156\x61\x6d\x65" => $first_name, "\x6c\141\163\x74\x5f\156\141\x6d\x65" => $last_name]; goto fu050; CfgMy: $kepsek = $this->input->post("\x6b\x65\x70\x73\x65\x6b", true); goto rWZcM; xiYgj: $username = $this->input->post("\x75\163\145\162\x6e\141\x6d\x65", true); goto RuDnj; mB7kJ: $kota = $this->input->post("\x6b\x6f\x74\141", true); goto RsA_Y; RsA_Y: $kec = $this->input->post("\x6b\x65\143", true); goto mz9fk; mz9fk: $desa = $this->input->post("\x64\145\163\x61", true); goto arLA9; fu050: $group = array("\x31"); goto YOPMO; xMIJ7: $jenjang = $this->input->post("\x6a\145\x6e\152\141\x6e\147", true); goto CfgMy; Jv6Qw: $last_name = end($namaAdmin); goto YGcWJ; UZTmJ: } }
