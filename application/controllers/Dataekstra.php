<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\101\123\105\x50\101\x54\x48") or exit("\x4e\x6f\40\x64\151\162\145\143\x74\40\x73\143\x72\x69\160\x74\40\x61\143\143\145\163\x73\x20\141\x6c\x6c\x6f\x77\x65\144"); use PhpOffice\PhpSpreadsheet\Spreadsheet; use PhpOffice\PhpSpreadsheet\Writer\Xlsx; use PhpOffice\PhpSpreadsheet\Writer\Xls; use PhpOffice\PhpSpreadsheet\Writer\Csv; class Dataekstra extends CI_Controller { public function __construct() { goto ED_Hl; ZGwEU: $this->load->model("\x44\141\163\x68\142\x6f\141\x72\144\x5f\155\157\144\x65\154", "\144\141\x73\x68\x62\x6f\141\162\x64"); goto GD0a_; oQ2p4: e7ZfW: goto R04Yh; ED_Hl: parent::__construct(); goto r0gQJ; E1eK0: $this->form_validation->set_error_delimiters('', ''); goto dAaSr; Iqq_p: $this->load->library(["\x64\x61\x74\x61\164\141\142\x6c\x65\x73", "\146\x6f\x72\x6d\137\166\x61\x6c\x69\144\141\164\151\x6f\156"]); goto Ry8J2; r0gQJ: if (!$this->ion_auth->logged_in()) { goto XScki; } goto VYgKm; Tm_tX: $this->load->model("\x4b\145\x6c\141\x73\x5f\155\157\x64\145\154", "\153\145\154\141\x73"); goto E1eK0; gwt3v: SFAqw: goto Iqq_p; VYgKm: if ($this->ion_auth->is_admin()) { goto e7ZfW; } goto ZhQ6B; ZhQ6B: show_error("\110\x61\x6e\x79\141\x20\x41\x64\155\151\x6e\x69\163\164\162\141\164\157\x72\40\x79\x61\156\147\40\144\x69\142\x65\x72\x69\40\150\141\x6b\40\x75\x6e\x74\x75\153\40\x6d\x65\156\147\x61\153\x73\x65\163\x20\150\141\x6c\141\x6d\x61\156\x20\x69\x6e\151\54\x20\74\141\x20\150\x72\x65\146\x3d\x22" . base_url("\x64\141\x73\x68\142\157\x61\162\x64") . "\42\x3e\x4b\145\155\142\141\154\x69\40\153\x65\x20\x6d\x65\x6e\165\x20\141\167\x61\x6c\x3c\x2f\141\76", 403, "\x41\153\x73\145\163\40\x54\145\162\x6c\141\162\x61\156\147"); goto oQ2p4; bmDGh: redirect("\141\x75\x74\x68"); goto gwt3v; Ry8J2: $this->load->model("\x4d\141\163\x74\145\162\137\x6d\x6f\x64\x65\x6c", "\155\141\163\164\145\162"); goto ZGwEU; GD0a_: $this->load->model("\x44\162\157\x70\x64\157\167\156\x5f\155\x6f\x64\145\154", "\x64\x72\x6f\x70\x64\157\x77\x6e"); goto Tm_tX; R04Yh: goto SFAqw; goto PmqHA; PmqHA: XScki: goto bmDGh; dAaSr: } public function output_json($data, $encode = true) { goto a58ZM; ZKbAy: $this->output->set_content_type("\x61\x70\160\x6c\151\x63\x61\164\x69\157\156\57\x6a\x73\157\x6e")->set_output($data); goto wcPLU; a58ZM: if (!$encode) { goto zyP3F; } goto gmem2; gmem2: $data = json_encode($data); goto T6DKN; T6DKN: zyP3F: goto ZKbAy; wcPLU: } public function index() { goto OaKSj; Qo0C0: $data["\x70\x65\155\x62\x69\155\142\151\156\147"] = $this->dropdown->getAllGuru(); goto q8qKe; gDM0m: Fp3RL: goto NCAsf; oXHlM: $data["\153\x65\x6c\x61\163"] = $kelas; goto Qo0C0; Dv4iT: foreach ($kelas as $key => $kls) { $kelasEks[$key] = $this->kelas->getKelasEkskul($key, $tp->id_tp, $smt->id_smt); M6z47: } goto gDM0m; gwnKW: $this->load->view("\155\141\163\x74\145\x72\x2f\x65\153\x73\x74\162\x61\x2f\x64\x61\164\141"); goto zcPaY; NCAsf: $data["\145\x6b\163\x6b\x75\154\x5f\x6b\x65\154\141\163"] = $kelasEks; goto oXHlM; q8qKe: $this->load->view("\137\x74\x65\x6d\160\154\x61\164\x65\x73\57\x64\141\163\150\x62\x6f\x61\x72\144\57\137\x68\145\x61\144\145\x72", $data); goto gwnKW; iK4Fx: $data["\x65\x6b\x73\153\165\x6c"] = $this->dropdown->getAllEkskul(); goto qDd7W; bRVuY: $smt = $this->dashboard->getSemesterActive(); goto cqeuo; cqeuo: $data["\x74\160"] = $this->dashboard->getTahun(); goto VZlA1; VZlA1: $data["\x74\160\137\141\x63\164\x69\166\145"] = $tp; goto G4UXZ; wMiEL: $tp = $this->dashboard->getTahunActive(); goto bRVuY; RnRXi: $data["\163\155\x74\x5f\141\x63\164\x69\166\145"] = $smt; goto iK4Fx; zcPaY: $this->load->view("\x5f\x74\x65\155\x70\154\x61\x74\145\163\x2f\x64\141\163\150\x62\157\x61\x72\144\x2f\137\x66\157\x6f\164\145\162"); goto QYHtA; OaKSj: $user = $this->ion_auth->user()->row(); goto wENtW; wENtW: $data = ["\165\x73\x65\162" => $user, "\x6a\165\144\x75\x6c" => "\105\x6b\163\x74\162\x61\153\x75\162\151\153\165\x6c\x65\x72", "\x73\165\142\152\165\x64\x75\x6c" => "\x44\x61\164\x61\x20\115\x61\164\x61\40\120\145\x6c\141\x6a\x61\x72\141\156", "\x70\162\157\x66\151\x6c\x65" => $this->dashboard->getProfileAdmin($user->id), "\163\x65\x74\x74\151\x6e\x67" => $this->dashboard->getSetting()]; goto wMiEL; G4UXZ: $data["\163\x6d\x74"] = $this->dashboard->getSemester(); goto RnRXi; UHiml: $kelasEks = []; goto Dv4iT; qDd7W: $kelas = $this->dropdown->getAllKelas($tp->id_tp, $smt->id_smt); goto UHiml; QYHtA: } public function create() { goto dHElD; dHElD: $insert = ["\x6e\141\155\141\137\145\x6b\163\164\x72\141" => $this->input->post("\x6e\141\155\x61\x5f\145\153\163\164\x72\141", true), "\x6b\x6f\x64\145\x5f\145\x6b\163\164\162\141" => $this->input->post("\153\157\x64\145\x5f\145\153\x73\x74\x72\141", true)]; goto inaKj; w2P7s: $this->output->set_content_type("\x61\x70\160\x6c\x69\x63\x61\x74\x69\x6f\156\x2f\x6a\x73\x6f\x6e")->set_output($data); goto NI69E; inaKj: $data = $this->master->create("\155\x61\x73\x74\x65\x72\x5f\x65\153\163\x74\162\141", $insert); goto w2P7s; NI69E: } public function read() { goto tz7Bo; V0Lez: $this->datatables->from("\155\141\x73\164\145\x72\137\x65\153\x73\164\x72\141"); goto a_ky3; a_ky3: echo $this->datatables->generate(); goto NW5yt; tz7Bo: $this->datatables->select("\52"); goto V0Lez; NW5yt: } public function update() { $data = $this->master->updateEkstra(); $this->output->set_content_type("\x61\160\x70\154\151\x63\x61\164\151\157\x6e\57\152\x73\x6f\x6e")->set_output($data); } public function delete($id) { goto rZJXs; w6rzC: if (count($messages) > 0) { goto jqeEH; } goto Jg9ZT; awsOH: $this->output_json(["\x73\164\141\x74\x75\x73" => false, "\164\x6f\x74\141\x6c" => "\115\x61\160\145\x6c\x20\x64\x69\147\x75\x6e\x61\153\x61\156\40\x64\x69\40" . count($messages) . "\x20\x74\x61\x62\145\154\x3a\74\142\x72\x3e" . implode("\74\142\162\x3e", $messages)]); goto zokoO; S4Rrs: $this->output_json($tables); goto XSMY7; zokoO: XVnDx: goto xlYwR; Jg9ZT: if ($this->master->delete("\x6d\141\163\x74\x65\162\137\x65\153\x73\164\162\141", [$id], "\x69\144\x5f\145\153\x73\x74\x72\x61")) { goto z_5I6; } goto lOhir; S21Ho: OEvgo: goto cCSTx; X6SuW: $this->output_json(["\x73\x74\x61\x74\x75\x73" => true, "\155\x65\x73\x73\x61\x67\145" => "\105\x6b\163\153\x75\154\x20\142\145\x72\150\141\163\x69\x6c\x20\144\x69\x68\x61\160\165\163"]); goto S21Ho; Lqb3I: jqeEH: goto awsOH; sM4yu: z_5I6: goto X6SuW; MoGlO: $tables = []; goto BTd_8; AketX: foreach ($tabless as $table) { goto RG2JF; THD39: foreach ($fields as $field) { goto YeAGS; UozhC: rK8gz: goto wl1MS; yc6ED: lemKA: goto UozhC; ZedNc: array_push($tables, $table); goto yc6ED; YeAGS: if (!($field->name == "\151\x64\x5f\x65\x6b\163\164\162\141" || $field->name == "\145\x6b\x73\x74\x72\x61\137\151\144")) { goto lemKA; } goto ZedNc; wl1MS: } goto wfmdz; wfmdz: kLeOX: goto o0xxc; RG2JF: $fields = $this->db->field_data($table); goto THD39; o0xxc: nBako: goto WsRPY; WsRPY: } goto DtOTw; XSMY7: foreach ($tables as $table) { goto KErCj; UCqCC: $num = $this->db->count_all_results($table); goto Z_a3N; Z_a3N: if (!($num > 0)) { goto eu2H8; } goto ovv9J; y2L7q: QOO0I: goto LFhhd; ovv9J: array_push($messages, $table); goto abFgi; ifNOW: $this->db->where("\x69\144\137\x65\153\x73\x74\162\141", $id); goto UCqCC; abFgi: eu2H8: goto GRqso; KErCj: if (!($table != "\x6d\141\163\x74\145\162\137\x65\153\163\164\x72\141")) { goto ZmEm1; } goto ifNOW; GRqso: ZmEm1: goto y2L7q; LFhhd: } goto RkfsT; cCSTx: goto XVnDx; goto Lqb3I; crRVk: goto OEvgo; goto sM4yu; BTd_8: $tabless = $this->db->list_tables(); goto AketX; DtOTw: SjhDt: goto S4Rrs; rZJXs: $messages = []; goto MoGlO; lOhir: $this->output_json(["\163\x74\x61\x74\165\x73" => false, "\x6d\145\163\x73\141\147\145" => "\x45\153\x73\153\165\154\x20\x67\141\147\x61\154\40\144\x69\x68\141\x70\165\x73"]); goto crRVk; RkfsT: h8RRh: goto w6rzC; xlYwR: } public function save() { goto rZFOK; r8obP: BcoL4: goto MIsNW; YNaX4: $smt = $this->master->getSemesterActive()->id_smt; goto QzuL_; MIsNW: $res["\163\164\141\164\x75\163"] = true; goto cGBCo; cGBCo: $res["\165\160\x64\x61\x74\x65"] = $update; goto H0Zoy; hCbjM: foreach ($check_kelas as $key => $kls) { goto dehg6; SJP_L: $ekstra[] = ["\145\x6b\163\164\162\141" => $kelaseks]; goto Z9RbD; Z9RbD: yVhL2: goto XJFOl; kPuzo: goto w3AAr; goto MCWZh; LXe3O: $j = 0; goto SUN5V; y5KoE: if (!$check_ekskul) { goto q0JT1; } goto zOsBu; KTtMa: $update[] = $this->db->replace("\153\x65\154\141\163\137\x65\153\x73\x74\162\141", $ekstras); goto lWlFH; SUN5V: w3AAr: goto ZV8Jz; lWlFH: q0JT1: goto cZzff; zOsBu: $row_ekskul = count($this->input->post("\145\x6b\x73\x6b\x75\x6c" . $kls->kls_id, true)); goto NI1tc; MCWZh: nyzun: goto YtCXp; XJFOl: $j++; goto kPuzo; ZV8Jz: if (!($j <= $row_ekskul)) { goto nyzun; } goto aZSXC; cZzff: UOb4K: goto EC5Yy; NI1tc: $ekstra = []; goto LXe3O; YtCXp: $ekstras = ["\151\x64\137\153\145\154\141\163\137\145\x6b\163\x74\x72\141" => $kls->kls_id . $tp . $smt, "\x69\144\x5f\x6b\145\x6c\141\x73" => $kls->kls_id, "\151\x64\x5f\x74\160" => $tp, "\x69\144\137\163\x6d\164" => $smt, "\145\x6b\x73\164\162\x61" => serialize($ekstra)]; goto KTtMa; dehg6: $check_ekskul = $this->input->post("\145\153\163\x6b\x75\154" . $kls->kls_id, true); goto y5KoE; aZSXC: $kelaseks = $this->input->post("\145\x6b\x73\153\165\154" . $kls->kls_id . "\x5b" . $j . "\x5d", true); goto SJP_L; EC5Yy: } goto r8obP; erck4: $update = []; goto hCbjM; W7cDp: $tp = $this->master->getTahunActive()->id_tp; goto YNaX4; rZFOK: $check_kelas = json_decode(json_encode(json_decode($this->input->post("\x6b\x65\x6c\141\163", true)))); goto W7cDp; H0Zoy: $this->output_json($res); goto nNfqj; QzuL_: $row_insert = 0; goto erck4; nNfqj: } public function import($import_data = null) { goto mi5bZ; dA1mQ: W1TMJ: goto RV5_m; ZKfPu: $data["\163\155\164\137\x61\143\x74\151\166\145"] = $this->dashboard->getSemesterActive(); goto xjqJ5; rfvpj: $data = ["\165\x73\145\162" => $user, "\x6a\165\144\x75\x6c" => "\x4d\x61\164\x61\40\x50\x65\x6c\141\x6a\x61\162\141\x6e", "\163\165\x62\x6a\165\x64\x75\x6c" => "\111\155\160\157\x72\164\x20\x4d\x61\164\141\40\x50\145\x6c\141\x6a\141\x72\141\156", "\160\162\x6f\x66\151\154\x65" => $this->dashboard->getProfileAdmin($user->id), "\x73\145\164\164\x69\156\147" => $this->dashboard->getSetting()]; goto NwNVz; HRtSv: $data["\x73\x6d\x74"] = $this->dashboard->getSemester(); goto ZKfPu; XnkKQ: $data["\151\x6d\160\157\162\164"] = $import_data; goto dA1mQ; EhZfx: $this->load->view("\x5f\164\145\155\x70\x6c\141\164\145\163\57\x64\x61\x73\x68\142\x6f\x61\x72\144\x2f\x5f\x66\157\x6f\164\x65\x72"); goto YasAS; iml_R: $this->load->view("\155\x61\163\164\145\162\57\145\153\x73\164\162\141\57\x69\x6d\x70\x6f\162\x74"); goto EhZfx; NwNVz: if (!($import_data != null)) { goto W1TMJ; } goto XnkKQ; RV5_m: $data["\164\x70"] = $this->dashboard->getTahun(); goto zFRBs; xjqJ5: $this->load->view("\x5f\164\145\x6d\160\154\141\164\145\163\x2f\144\141\x73\x68\x62\x6f\141\x72\x64\57\137\x68\145\141\x64\145\x72", $data); goto iml_R; mi5bZ: $user = $this->ion_auth->user()->row(); goto rfvpj; zFRBs: $data["\164\160\137\141\x63\x74\x69\x76\x65"] = $this->dashboard->getTahunActive(); goto HRtSv; YasAS: } }
