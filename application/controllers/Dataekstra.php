<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\101\x53\x45\x50\101\124\110") or exit("\116\x6f\x20\x64\x69\x72\145\143\164\40\x73\x63\162\151\x70\x74\40\x61\x63\x63\x65\x73\163\40\141\154\154\157\x77\x65\x64"); use PhpOffice\PhpSpreadsheet\Spreadsheet; use PhpOffice\PhpSpreadsheet\Writer\Xlsx; use PhpOffice\PhpSpreadsheet\Writer\Xls; use PhpOffice\PhpSpreadsheet\Writer\Csv; class Dataekstra extends CI_Controller { public function __construct() { goto ohPVF; rbke2: $this->load->model("\x44\x72\x6f\160\144\157\x77\156\137\155\157\144\x65\154", "\x64\x72\x6f\x70\144\157\167\156"); goto EBNSz; bny5R: $this->form_validation->set_error_delimiters('', ''); goto W9AFQ; YELwr: $this->load->library(["\144\x61\x74\x61\x74\141\142\x6c\x65\163", "\146\157\x72\155\137\x76\x61\x6c\151\x64\x61\x74\151\157\x6e"]); goto Pr7Kh; toWzR: show_error("\x48\141\x6e\171\x61\40\x41\x64\x6d\151\x6e\151\163\164\x72\141\x74\x6f\162\40\171\141\x6e\x67\40\144\151\142\145\162\x69\40\150\141\x6b\40\x75\x6e\x74\165\153\x20\155\145\x6e\x67\x61\153\x73\x65\x73\x20\x68\x61\x6c\141\x6d\x61\x6e\x20\x69\156\151\x2c\40\x3c\141\40\150\x72\x65\x66\75\x22" . base_url("\144\x61\x73\150\142\x6f\x61\x72\x64") . "\x22\x3e\x4b\145\155\x62\141\x6c\x69\x20\153\x65\x20\x6d\x65\156\x75\40\141\x77\141\154\74\57\x61\x3e", 403, "\101\153\x73\x65\x73\x20\124\x65\x72\x6c\141\162\141\x6e\147"); goto ighTZ; vgYau: if (!$this->ion_auth->logged_in()) { goto lrO3A; } goto AOllQ; ohPVF: parent::__construct(); goto vgYau; YFEoe: goto lTABu; goto P2puy; ighTZ: bci7C: goto YFEoe; Pr7Kh: $this->load->model("\115\141\163\164\145\x72\137\x6d\157\x64\x65\154", "\x6d\141\163\164\145\162"); goto y6HhA; EBNSz: $this->load->model("\113\x65\x6c\x61\163\x5f\x6d\x6f\144\145\x6c", "\x6b\145\x6c\x61\163"); goto bny5R; P2puy: lrO3A: goto WE5Pv; WE5Pv: redirect("\x61\x75\164\x68"); goto Y40hE; AOllQ: if ($this->ion_auth->is_admin()) { goto bci7C; } goto toWzR; y6HhA: $this->load->model("\104\x61\163\x68\x62\x6f\141\162\x64\137\155\x6f\x64\145\x6c", "\144\x61\163\150\142\x6f\141\x72\x64"); goto rbke2; Y40hE: lTABu: goto YELwr; W9AFQ: } public function output_json($data, $encode = true) { goto bpp23; bpp23: if (!$encode) { goto NddtD; } goto CmC4s; CmC4s: $data = json_encode($data); goto KY0JZ; jYx8U: $this->output->set_content_type("\x61\x70\x70\x6c\151\143\141\x74\x69\157\156\x2f\x6a\163\157\156")->set_output($data); goto dY4md; KY0JZ: NddtD: goto jYx8U; dY4md: } public function index() { goto D0Wke; Y1Ggx: $data["\164\x70\137\141\143\x74\x69\x76\x65"] = $tp; goto o45F7; pcvI0: $kelas = $this->dropdown->getAllKelas($tp->id_tp, $smt->id_smt); goto g9FKo; NykpW: $data["\x6b\x65\x6c\141\163"] = $kelas; goto YZJTd; S2NTW: $data = ["\x75\163\145\162" => $user, "\x6a\165\144\x75\x6c" => "\105\153\x73\164\162\141\x6b\x75\162\x69\x6b\165\154\x65\162", "\163\x75\142\x6a\x75\144\x75\x6c" => "\x44\x61\164\141\x20\x4d\141\164\141\x20\120\x65\154\141\152\x61\x72\141\156", "\x70\162\x6f\146\151\154\x65" => $this->dashboard->getProfileAdmin($user->id), "\163\x65\164\164\x69\156\147" => $this->dashboard->getSetting()]; goto O3h0i; g9FKo: $kelasEks = []; goto EVbCy; htRd4: $data["\145\x6b\163\x6b\x75\x6c"] = $this->dropdown->getAllEkskul(); goto pcvI0; oMLZg: $data["\x74\x70"] = $this->dashboard->getTahun(); goto Y1Ggx; aQFRy: $this->load->view("\137\x74\x65\x6d\160\x6c\141\164\145\163\x2f\144\x61\163\x68\x62\157\x61\162\144\57\x5f\x66\157\x6f\164\145\x72"); goto tuypd; D0Wke: $user = $this->ion_auth->user()->row(); goto S2NTW; O3h0i: $tp = $this->dashboard->getTahunActive(); goto hEOfl; o45F7: $data["\163\155\x74"] = $this->dashboard->getSemester(); goto pfFsR; hEOfl: $smt = $this->dashboard->getSemesterActive(); goto oMLZg; m9v4U: $this->load->view("\137\164\x65\x6d\160\154\141\x74\x65\163\x2f\144\x61\163\150\142\157\x61\162\x64\x2f\137\150\x65\141\144\145\x72", $data); goto Vsaxs; YZJTd: $data["\160\x65\155\x62\x69\155\x62\x69\x6e\x67"] = $this->dropdown->getAllGuru(); goto m9v4U; Vsaxs: $this->load->view("\155\x61\163\x74\x65\162\57\x65\x6b\163\x74\x72\141\57\x64\x61\164\141"); goto aQFRy; pfFsR: $data["\163\155\164\137\141\x63\164\151\x76\x65"] = $smt; goto htRd4; M8iek: OSbmm: goto JEKi0; EVbCy: foreach ($kelas as $key => $kls) { $kelasEks[$key] = $this->kelas->getKelasEkskul($key, $tp->id_tp, $smt->id_smt); Ask0O: } goto M8iek; JEKi0: $data["\x65\153\163\x6b\x75\x6c\137\x6b\x65\154\x61\163"] = $kelasEks; goto NykpW; tuypd: } public function create() { goto yx76B; NHFvc: $this->output->set_content_type("\141\x70\x70\154\151\x63\x61\x74\x69\x6f\156\x2f\x6a\x73\157\x6e")->set_output($data); goto YwGzQ; yx76B: $insert = ["\x6e\141\x6d\x61\137\x65\153\163\x74\162\x61" => $this->input->post("\x6e\141\x6d\x61\137\145\153\x73\164\x72\x61", true), "\153\157\x64\x65\137\x65\x6b\163\x74\162\x61" => $this->input->post("\153\x6f\x64\x65\x5f\x65\153\x73\164\162\x61", true)]; goto jaflP; jaflP: $data = $this->master->create("\155\141\x73\x74\x65\x72\137\145\x6b\163\164\162\x61", $insert); goto NHFvc; YwGzQ: } public function read() { goto r0mFK; ceFty: $this->datatables->from("\x6d\141\163\x74\145\x72\x5f\x65\x6b\163\164\162\x61"); goto BqT1i; r0mFK: $this->datatables->select("\x2a"); goto ceFty; BqT1i: echo $this->datatables->generate(); goto LhmZ0; LhmZ0: } public function update() { $data = $this->master->updateEkstra(); $this->output->set_content_type("\141\160\x70\x6c\x69\x63\141\164\x69\x6f\x6e\57\x6a\x73\x6f\156")->set_output($data); } public function delete($id) { goto Hv9AV; epLvZ: qG5TM: goto nUIY5; Hv9AV: $messages = []; goto qYIy7; Qkn3K: Zs2KN: goto hqfi3; Kpfyf: iFg7o: goto hUkR6; Jc6AO: goto Zs2KN; goto epLvZ; TWlX6: goto o2Jvd; goto XWFpH; BE2Ay: vPxb1: goto LI5OQ; Y265i: $tabless = $this->db->list_tables(); goto grcIE; qYIy7: $tables = []; goto Y265i; GlgcB: foreach ($tables as $table) { goto o8s5N; dWngL: EExiG: goto OTgSL; Ggv92: $this->db->where("\151\144\137\145\153\x73\x74\x72\141", $id); goto kS4HH; PGRqM: tBTYA: goto dWngL; fol3C: if (!($num > 0)) { goto tBTYA; } goto dn5ee; OTgSL: Nsrp1: goto UhVEA; dn5ee: array_push($messages, $table); goto PGRqM; o8s5N: if (!($table != "\x6d\141\x73\164\x65\162\x5f\145\153\x73\164\x72\x61")) { goto EExiG; } goto Ggv92; kS4HH: $num = $this->db->count_all_results($table); goto fol3C; UhVEA: } goto Kpfyf; UX9AN: $this->output_json(["\x73\x74\x61\164\x75\163" => false, "\x6d\x65\x73\163\141\147\145" => "\105\153\x73\153\165\x6c\x20\x67\141\147\141\154\40\144\x69\x68\x61\160\165\163"]); goto TWlX6; Uw8wN: if ($this->master->delete("\x6d\141\163\x74\x65\x72\x5f\145\x6b\x73\x74\162\x61", [$id], "\151\x64\x5f\145\x6b\163\x74\162\x61")) { goto EySmQ; } goto UX9AN; nUIY5: $this->output_json(["\163\x74\x61\164\165\x73" => false, "\164\157\x74\141\154" => "\115\x61\160\145\154\40\x64\151\147\x75\156\141\153\x61\156\x20\x64\151\x20" . count($messages) . "\40\x74\x61\x62\x65\x6c\x3a\74\142\x72\76" . implode("\x3c\x62\162\76", $messages)]); goto Qkn3K; grcIE: foreach ($tabless as $table) { goto qoO6a; qoO6a: $fields = $this->db->field_data($table); goto HSU_o; VZWzM: FgHdc: goto Krlqy; Krlqy: nHhFZ: goto HXZZx; HSU_o: foreach ($fields as $field) { goto dnRvj; EPKTC: array_push($tables, $table); goto uZbXK; dnRvj: if (!($field->name == "\x69\144\x5f\x65\x6b\163\164\x72\141" || $field->name == "\145\x6b\163\x74\162\x61\x5f\x69\144")) { goto wmVTw; } goto EPKTC; uZbXK: wmVTw: goto fWNJA; fWNJA: d7zmv: goto TF6Mv; TF6Mv: } goto VZWzM; HXZZx: } goto BE2Ay; Cpc3H: $this->output_json(["\163\x74\141\x74\x75\x73" => true, "\x6d\145\163\163\x61\147\145" => "\x45\x6b\163\153\165\x6c\40\142\x65\162\x68\x61\x73\x69\154\40\144\151\x68\141\160\x75\x73"]); goto NVvil; XWFpH: EySmQ: goto Cpc3H; hUkR6: if (count($messages) > 0) { goto qG5TM; } goto Uw8wN; NVvil: o2Jvd: goto Jc6AO; LI5OQ: $this->output_json($tables); goto GlgcB; hqfi3: } public function save() { goto Jriw6; eQ26a: $this->output_json($res); goto KPHAe; Jriw6: $check_kelas = json_decode(json_encode(json_decode($this->input->post("\x6b\x65\x6c\x61\x73", true)))); goto fvOQk; ehSpn: foreach ($check_kelas as $key => $kls) { goto u_sv3; GpURg: if (!$check_ekskul) { goto KjqoP; } goto FARsU; DA5C0: if (!($j <= $row_ekskul)) { goto LIV3K; } goto hRi3u; AHQYS: $ekstra[] = ["\145\153\x73\x74\x72\x61" => $kelaseks]; goto CfY3l; CfY3l: JqRV2: goto mEKxG; GjAHw: KjqoP: goto pksTV; ENN1B: $ekstras = ["\x69\x64\x5f\x6b\x65\154\141\x73\x5f\145\x6b\x73\164\162\x61" => $kls->kls_id . $tp . $smt, "\x69\144\137\153\x65\x6c\x61\x73" => $kls->kls_id, "\151\144\137\x74\160" => $tp, "\x69\x64\x5f\x73\x6d\164" => $smt, "\145\153\163\164\162\141" => serialize($ekstra)]; goto qLee2; mEKxG: $j++; goto U3w1f; hRi3u: $kelaseks = $this->input->post("\x65\x6b\163\153\165\x6c" . $kls->kls_id . "\x5b" . $j . "\135", true); goto AHQYS; pksTV: X_RbN: goto JvUB0; OgT3B: $j = 0; goto dkTMB; qLee2: $update[] = $this->db->replace("\x6b\145\154\141\163\x5f\145\153\163\x74\x72\141", $ekstras); goto GjAHw; dkTMB: H5lFX: goto DA5C0; u_sv3: $check_ekskul = $this->input->post("\x65\x6b\x73\153\165\x6c" . $kls->kls_id, true); goto GpURg; U3w1f: goto H5lFX; goto JA9En; FARsU: $row_ekskul = count($this->input->post("\x65\153\x73\x6b\x75\x6c" . $kls->kls_id, true)); goto vptUA; vptUA: $ekstra = []; goto OgT3B; JA9En: LIV3K: goto ENN1B; JvUB0: } goto VEp2y; fvOQk: $tp = $this->master->getTahunActive()->id_tp; goto P1jcH; AkO3X: $res["\163\164\x61\x74\x75\x73"] = true; goto IIcTx; P1jcH: $smt = $this->master->getSemesterActive()->id_smt; goto zFakL; VEp2y: TcPcJ: goto AkO3X; iYZH3: $update = []; goto ehSpn; IIcTx: $res["\x75\160\x64\x61\164\145"] = $update; goto eQ26a; zFakL: $row_insert = 0; goto iYZH3; KPHAe: } public function import($import_data = null) { goto yGPNW; xE5le: $data = ["\x75\163\145\162" => $user, "\x6a\x75\144\x75\x6c" => "\115\x61\x74\x61\x20\120\145\x6c\141\152\141\x72\x61\156", "\163\165\x62\x6a\x75\x64\x75\154" => "\111\x6d\160\157\x72\164\x20\115\x61\164\x61\40\x50\x65\154\141\x6a\x61\x72\141\156", "\160\162\157\146\x69\x6c\x65" => $this->dashboard->getProfileAdmin($user->id), "\163\145\x74\x74\x69\156\x67" => $this->dashboard->getSetting()]; goto XHIJD; XHIJD: if (!($import_data != null)) { goto x41Jv; } goto rvKnd; oa5nP: $data["\163\x6d\164\x5f\x61\x63\x74\x69\x76\145"] = $this->dashboard->getSemesterActive(); goto Mkmns; Mkmns: $this->load->view("\x5f\x74\145\x6d\x70\x6c\x61\164\x65\x73\57\144\141\x73\150\x62\157\141\x72\x64\57\137\150\x65\x61\144\x65\162", $data); goto hxzAU; MtyBl: $this->load->view("\137\164\x65\155\x70\x6c\141\164\x65\163\x2f\x64\141\x73\x68\142\157\x61\x72\144\57\x5f\x66\x6f\157\x74\145\162"); goto qzCUZ; rvKnd: $data["\x69\155\x70\157\x72\x74"] = $import_data; goto WYojv; OUoDL: $data["\164\160\137\141\x63\x74\x69\166\x65"] = $this->dashboard->getTahunActive(); goto FXttN; yGPNW: $user = $this->ion_auth->user()->row(); goto xE5le; FXttN: $data["\163\x6d\x74"] = $this->dashboard->getSemester(); goto oa5nP; hxzAU: $this->load->view("\155\141\163\164\x65\162\57\x65\x6b\x73\x74\x72\x61\57\x69\x6d\160\157\x72\x74"); goto MtyBl; WYojv: x41Jv: goto n69nG; n69nG: $data["\x74\x70"] = $this->dashboard->getTahun(); goto OUoDL; qzCUZ: } }
