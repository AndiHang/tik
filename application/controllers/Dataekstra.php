<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\101\x53\x45\120\101\124\x48") or exit("\116\157\40\x64\151\162\x65\x63\164\x20\x73\x63\162\151\160\164\x20\141\x63\x63\x65\163\x73\40\x61\154\x6c\x6f\167\x65\x64"); use PhpOffice\PhpSpreadsheet\Spreadsheet; use PhpOffice\PhpSpreadsheet\Writer\Xlsx; use PhpOffice\PhpSpreadsheet\Writer\Xls; use PhpOffice\PhpSpreadsheet\Writer\Csv; class Dataekstra extends CI_Controller { public function __construct() { goto D5d7F; M7R2G: $this->load->model("\x44\x72\x6f\160\x64\157\167\x6e\x5f\155\157\144\x65\x6c", "\144\162\157\x70\144\x6f\167\x6e"); goto fH09u; UBH_o: redirect("\141\165\x74\x68"); goto f9pRH; hOQfW: $this->load->model("\115\x61\163\x74\x65\162\x5f\155\157\x64\x65\154", "\x6d\141\163\164\x65\162"); goto m19ZS; lLVdK: $this->form_validation->set_error_delimiters('', ''); goto T23e6; fH09u: $this->load->model("\x4b\x65\x6c\x61\x73\137\155\157\144\145\x6c", "\153\145\x6c\x61\x73"); goto lLVdK; N17py: show_error("\x48\x61\156\171\141\40\101\x64\155\x69\x6e\151\163\164\x72\141\x74\x6f\x72\40\171\x61\x6e\147\40\x64\151\x62\x65\x72\151\x20\x68\x61\x6b\x20\165\156\x74\x75\153\x20\x6d\x65\x6e\x67\141\x6b\163\145\x73\40\x68\141\x6c\x61\155\141\156\40\151\x6e\151\54\x20\x3c\x61\x20\150\x72\145\x66\x3d\x22" . base_url("\144\x61\163\x68\x62\x6f\x61\162\x64") . "\42\76\113\145\x6d\142\141\154\x69\40\153\145\x20\155\145\156\x75\40\141\167\141\x6c\74\x2f\141\x3e", 403, "\x41\x6b\163\x65\163\x20\x54\x65\x72\154\141\x72\141\x6e\147"); goto zKjLW; WMUDl: if ($this->ion_auth->is_admin()) { goto ql7aR; } goto N17py; zKjLW: ql7aR: goto GyNr9; gRRAi: if (!$this->ion_auth->logged_in()) { goto LAI_p; } goto WMUDl; Uf916: LAI_p: goto UBH_o; m19ZS: $this->load->model("\104\141\x73\150\x62\x6f\141\x72\144\x5f\155\157\x64\x65\x6c", "\144\141\x73\x68\142\x6f\141\x72\144"); goto M7R2G; D5d7F: parent::__construct(); goto gRRAi; f9pRH: aKVuy: goto Gf7mZ; Gf7mZ: $this->load->library(["\144\x61\164\x61\x74\141\x62\x6c\x65\163", "\x66\x6f\x72\x6d\x5f\166\x61\x6c\151\x64\x61\x74\x69\x6f\x6e"]); goto hOQfW; GyNr9: goto aKVuy; goto Uf916; T23e6: } public function output_json($data, $encode = true) { goto ixz7O; rS1vg: $data = json_encode($data); goto UUc8E; UUc8E: V2X6a: goto PCt4Y; PCt4Y: $this->output->set_content_type("\x61\x70\160\x6c\151\x63\141\x74\151\x6f\156\57\152\163\x6f\x6e")->set_output($data); goto zmdDz; ixz7O: if (!$encode) { goto V2X6a; } goto rS1vg; zmdDz: } public function index() { goto zb5Z7; KKcp5: $data["\x65\x6b\x73\x6b\x75\154\137\153\145\x6c\141\x73"] = $kelasEks; goto ukahT; gApy4: $data["\160\145\x6d\142\151\x6d\x62\x69\x6e\147"] = $this->dropdown->getAllGuru(); goto R5qD0; VWZlX: $data["\163\155\x74\x5f\x61\143\164\x69\166\x65"] = $smt; goto Dzd5e; OllON: gFZ7c: goto KKcp5; WA4mo: $data = ["\165\x73\x65\x72" => $user, "\152\165\x64\165\154" => "\105\153\163\x74\162\141\153\x75\x72\151\153\165\x6c\x65\162", "\163\x75\x62\x6a\x75\x64\165\x6c" => "\x44\141\x74\x61\x20\115\x61\164\141\x20\x50\x65\x6c\141\152\141\x72\x61\x6e", "\x70\162\x6f\146\151\x6c\145" => $this->dashboard->getProfileAdmin($user->id), "\x73\145\164\164\x69\156\147" => $this->dashboard->getSetting()]; goto U7lj9; ao34i: $this->load->view("\x5f\x74\x65\155\160\154\x61\x74\145\163\57\144\x61\x73\150\142\157\x61\x72\x64\57\137\146\157\157\x74\145\x72"); goto Zxp2M; yBFga: $data["\164\x70\x5f\x61\x63\x74\151\x76\x65"] = $tp; goto xbi31; ukahT: $data["\x6b\x65\154\x61\163"] = $kelas; goto gApy4; aPrLR: $kelas = $this->dropdown->getAllKelas($tp->id_tp, $smt->id_smt); goto du2sU; zb5Z7: $user = $this->ion_auth->user()->row(); goto WA4mo; xbi31: $data["\x73\155\x74"] = $this->dashboard->getSemester(); goto VWZlX; Pin0t: foreach ($kelas as $key => $kls) { $kelasEks[$key] = $this->kelas->getKelasEkskul($key, $tp->id_tp, $smt->id_smt); mAuTD: } goto OllON; U7lj9: $tp = $this->dashboard->getTahunActive(); goto cRMCu; PHAld: $data["\164\x70"] = $this->dashboard->getTahun(); goto yBFga; cRMCu: $smt = $this->dashboard->getSemesterActive(); goto PHAld; R5qD0: $this->load->view("\137\x74\x65\x6d\160\154\141\164\145\x73\57\144\141\163\x68\x62\x6f\141\162\x64\x2f\x5f\150\145\141\144\x65\162", $data); goto Hk5lR; Dzd5e: $data["\145\x6b\x73\153\165\154"] = $this->dropdown->getAllEkskul(); goto aPrLR; Hk5lR: $this->load->view("\155\x61\163\x74\145\162\x2f\145\153\163\164\162\141\57\144\x61\x74\141"); goto ao34i; du2sU: $kelasEks = []; goto Pin0t; Zxp2M: } public function create() { goto WgVvv; OnX1F: $this->output->set_content_type("\x61\x70\160\x6c\x69\x63\141\x74\x69\x6f\156\57\x6a\x73\157\x6e")->set_output($data); goto BTMHh; WgVvv: $insert = ["\x6e\x61\x6d\x61\x5f\145\x6b\163\164\x72\141" => $this->input->post("\x6e\x61\155\x61\137\145\153\x73\x74\x72\x61", true), "\x6b\157\x64\x65\137\x65\153\x73\164\x72\141" => $this->input->post("\153\x6f\144\x65\137\145\x6b\x73\164\x72\141", true)]; goto J_cuL; J_cuL: $data = $this->master->create("\155\141\163\x74\145\x72\137\145\153\163\164\162\x61", $insert); goto OnX1F; BTMHh: } public function read() { goto NxcZ9; phZRv: $this->datatables->from("\155\x61\163\x74\145\162\137\145\153\163\x74\x72\x61"); goto IqeKN; IqeKN: echo $this->datatables->generate(); goto Tnpxh; NxcZ9: $this->datatables->select("\52"); goto phZRv; Tnpxh: } public function update() { $data = $this->master->updateEkstra(); $this->output->set_content_type("\141\160\x70\x6c\151\143\x61\x74\151\x6f\x6e\x2f\152\x73\x6f\x6e")->set_output($data); } public function delete($id) { goto NJcvd; Sy67S: vg6yi: goto wEkcM; wEkcM: goto m9Cy8; goto rFcDP; DKIHv: foreach ($tables as $table) { goto tgZ50; UJQmP: if (!($num > 0)) { goto RFJz8; } goto Aiqom; tgZ50: if (!($table != "\x6d\x61\163\164\145\x72\137\145\x6b\x73\164\x72\141")) { goto iG792; } goto aMTxG; Ex__4: RFJz8: goto LlMFj; jU1v2: N3EEu: goto hd9r1; aMTxG: $this->db->where("\x69\x64\137\145\153\163\164\162\141", $id); goto b32OO; Aiqom: array_push($messages, $table); goto Ex__4; b32OO: $num = $this->db->count_all_results($table); goto UJQmP; LlMFj: iG792: goto jU1v2; hd9r1: } goto l3t6C; MjQQT: QGsiy: goto X7DcN; NJcvd: $messages = []; goto bKpyr; cU26t: foreach ($tabless as $table) { goto LmpYk; CXdDq: qrCRB: goto nVbR3; LmpYk: $fields = $this->db->field_data($table); goto vqGIL; pnaAs: HmTQY: goto CXdDq; vqGIL: foreach ($fields as $field) { goto Tk0uM; neEx4: array_push($tables, $table); goto HsDUh; HsDUh: lvAKg: goto jjl7x; jjl7x: F4xe4: goto fpfb3; Tk0uM: if (!($field->name == "\151\144\x5f\x65\153\x73\164\162\x61" || $field->name == "\145\x6b\163\164\162\x61\x5f\151\x64")) { goto lvAKg; } goto neEx4; fpfb3: } goto pnaAs; nVbR3: } goto mVvbx; PssvB: $this->output_json(["\x73\x74\x61\164\x75\163" => false, "\x74\x6f\164\x61\154" => "\x4d\x61\160\145\154\40\144\151\x67\165\x6e\x61\x6b\141\156\40\x64\151\x20" . count($messages) . "\40\164\141\142\145\154\72\74\142\162\x3e" . implode("\74\x62\162\x3e", $messages)]); goto sEo56; JurFt: if (count($messages) > 0) { goto yno3P; } goto QjzaF; l3t6C: Vs54j: goto JurFt; KCi7V: $this->output_json(["\163\x74\141\x74\x75\163" => false, "\155\145\163\x73\141\147\x65" => "\x45\x6b\x73\153\165\154\40\x67\x61\147\x61\x6c\x20\x64\x69\150\x61\160\x75\163"]); goto gamjQ; bKpyr: $tables = []; goto JDmS7; rFcDP: yno3P: goto PssvB; X7DcN: $this->output_json(["\163\x74\x61\164\165\163" => true, "\155\x65\x73\163\141\x67\x65" => "\105\x6b\x73\x6b\x75\x6c\40\x62\145\162\x68\141\163\151\154\40\144\x69\150\141\x70\x75\163"]); goto Sy67S; mVvbx: xOrxv: goto lFoO1; gamjQ: goto vg6yi; goto MjQQT; QjzaF: if ($this->master->delete("\x6d\x61\163\x74\145\162\x5f\x65\153\163\164\x72\141", [$id], "\151\144\137\145\x6b\163\x74\x72\x61")) { goto QGsiy; } goto KCi7V; sEo56: m9Cy8: goto gUtW_; JDmS7: $tabless = $this->db->list_tables(); goto cU26t; lFoO1: $this->output_json($tables); goto DKIHv; gUtW_: } public function save() { goto D2rOF; sAmMf: $res["\163\x74\x61\x74\x75\163"] = true; goto q78xU; D2rOF: $check_kelas = json_decode(json_encode(json_decode($this->input->post("\x6b\145\x6c\141\163", true)))); goto NlC1Y; MuH4f: $smt = $this->master->getSemesterActive()->id_smt; goto VopQ3; NlC1Y: $tp = $this->master->getTahunActive()->id_tp; goto MuH4f; APe34: $update = []; goto Z6ftN; VopQ3: $row_insert = 0; goto APe34; FtweF: ukYer: goto sAmMf; Z6ftN: foreach ($check_kelas as $key => $kls) { goto FlXFd; FlXFd: $check_ekskul = $this->input->post("\x65\x6b\x73\153\x75\x6c" . $kls->kls_id, true); goto Sw2lD; Yvbeg: $row_ekskul = count($this->input->post("\x65\153\x73\x6b\165\x6c" . $kls->kls_id, true)); goto b1_6G; b1_6G: $ekstra = []; goto iAiPc; Sw2lD: if (!$check_ekskul) { goto CTW6z; } goto Yvbeg; TOAr9: $ekstras = ["\x69\x64\137\x6b\x65\x6c\x61\163\x5f\x65\153\x73\164\x72\141" => $kls->kls_id . $tp . $smt, "\151\144\x5f\x6b\145\154\x61\163" => $kls->kls_id, "\151\x64\137\x74\160" => $tp, "\151\x64\x5f\163\155\x74" => $smt, "\145\x6b\x73\x74\x72\x61" => serialize($ekstra)]; goto Y2yvF; IKJMD: $ekstra[] = ["\145\153\x73\164\x72\x61" => $kelaseks]; goto tjgSj; FTm54: vyP2M: goto FJGV8; wiWQa: zhPI_: goto QYpp8; o7CGZ: nYmHi: goto TOAr9; tjgSj: GTXRL: goto ygKSR; ygKSR: $j++; goto QSpAt; iAiPc: $j = 0; goto wiWQa; QYpp8: if (!($j <= $row_ekskul)) { goto nYmHi; } goto qfPmQ; bSVsY: CTW6z: goto FTm54; qfPmQ: $kelaseks = $this->input->post("\x65\153\x73\153\x75\154" . $kls->kls_id . "\x5b" . $j . "\135", true); goto IKJMD; Y2yvF: $update[] = $this->db->replace("\153\x65\x6c\x61\163\137\145\x6b\x73\x74\x72\141", $ekstras); goto bSVsY; QSpAt: goto zhPI_; goto o7CGZ; FJGV8: } goto FtweF; Kz3xq: $this->output_json($res); goto iuKQn; q78xU: $res["\x75\160\x64\x61\x74\x65"] = $update; goto Kz3xq; iuKQn: } public function import($import_data = null) { goto JFrq0; SJSaG: $data["\x69\x6d\160\x6f\x72\x74"] = $import_data; goto XITZ4; XhtrL: $this->load->view("\x6d\x61\163\x74\x65\x72\57\x65\153\163\164\162\141\x2f\151\x6d\160\x6f\x72\x74"); goto F1x94; JFrq0: $user = $this->ion_auth->user()->row(); goto AmETp; qAoNe: $data["\163\x6d\x74"] = $this->dashboard->getSemester(); goto yGX21; rIxo1: if (!($import_data != null)) { goto lqbSJ; } goto SJSaG; yGX21: $data["\163\155\x74\137\141\143\164\151\x76\145"] = $this->dashboard->getSemesterActive(); goto Wpo0o; A8KfQ: $data["\164\160"] = $this->dashboard->getTahun(); goto pTqkz; pTqkz: $data["\x74\160\x5f\x61\143\x74\151\166\x65"] = $this->dashboard->getTahunActive(); goto qAoNe; XITZ4: lqbSJ: goto A8KfQ; F1x94: $this->load->view("\137\164\x65\x6d\x70\x6c\141\164\145\x73\x2f\144\141\163\150\x62\x6f\141\x72\x64\x2f\137\x66\157\x6f\x74\145\x72"); goto rMwcS; Wpo0o: $this->load->view("\137\164\x65\x6d\160\x6c\x61\164\x65\163\x2f\144\141\163\x68\x62\x6f\x61\162\x64\57\x5f\x68\145\141\144\x65\162", $data); goto XhtrL; AmETp: $data = ["\x75\x73\145\162" => $user, "\152\165\x64\x75\154" => "\x4d\x61\164\x61\40\x50\145\154\x61\152\x61\162\x61\x6e", "\163\x75\142\152\165\144\165\154" => "\111\x6d\x70\157\162\x74\40\x4d\x61\164\x61\x20\120\x65\154\x61\152\x61\x72\141\x6e", "\x70\x72\157\x66\151\154\x65" => $this->dashboard->getProfileAdmin($user->id), "\163\x65\x74\x74\151\x6e\147" => $this->dashboard->getSetting()]; goto rIxo1; rMwcS: } }
