<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\x41\x53\x45\x50\x41\124\x48") or exit("\x4e\x6f\x20\x64\x69\x72\x65\143\x74\40\163\x63\162\151\x70\x74\40\x61\143\143\145\x73\x73\40\x61\x6c\x6c\157\167\145\x64"); use PhpOffice\PhpSpreadsheet\Spreadsheet; use PhpOffice\PhpSpreadsheet\Writer\Xlsx; use PhpOffice\PhpSpreadsheet\Writer\Xls; use PhpOffice\PhpSpreadsheet\Writer\Csv; class Dataekstra extends CI_Controller { public function __construct() { goto ykftz; See49: $this->load->model("\104\x61\163\x68\142\x6f\141\162\x64\x5f\155\x6f\144\x65\x6c", "\x64\x61\x73\x68\x62\157\141\x72\x64"); goto iu3_v; BSKVp: $this->form_validation->set_error_delimiters('', ''); goto E3N9n; z2Ufh: $this->load->model("\113\x65\x6c\141\163\x5f\x6d\157\144\145\154", "\x6b\145\154\x61\x73"); goto BSKVp; JWFdm: if ($this->ion_auth->is_admin()) { goto yHBut; } goto uUpaX; uUpaX: show_error("\110\x61\156\171\x61\x20\101\x64\x6d\x69\156\151\163\164\x72\x61\164\157\x72\40\x79\141\156\x67\40\x64\x69\x62\145\x72\x69\40\150\x61\x6b\40\x75\x6e\164\165\153\x20\155\145\x6e\147\141\x6b\x73\145\x73\x20\150\141\154\141\155\x61\156\x20\151\x6e\151\54\40\x3c\141\x20\x68\162\145\146\x3d\x22" . base_url("\x64\141\x73\x68\142\x6f\x61\x72\144") . "\x22\x3e\x4b\x65\x6d\x62\x61\154\151\40\153\x65\40\155\145\x6e\165\40\141\167\x61\154\74\57\141\76", 403, "\x41\153\163\x65\x73\40\x54\145\162\154\x61\162\141\156\147"); goto QNaSa; GfjPj: WkvN3: goto i085H; AUQQf: Pra48: goto tNyuY; tNyuY: $this->load->library(["\x64\x61\x74\141\x74\x61\x62\154\x65\x73", "\x66\157\x72\x6d\x5f\166\x61\154\x69\x64\141\x74\151\157\156"]); goto k74wz; ZzqLo: if (!$this->ion_auth->logged_in()) { goto WkvN3; } goto JWFdm; QNaSa: yHBut: goto cliuL; cliuL: goto Pra48; goto GfjPj; ykftz: parent::__construct(); goto ZzqLo; iu3_v: $this->load->model("\104\x72\x6f\x70\144\157\x77\156\x5f\155\157\x64\x65\154", "\144\x72\x6f\160\144\x6f\x77\x6e"); goto z2Ufh; k74wz: $this->load->model("\115\141\x73\164\x65\162\137\x6d\x6f\x64\x65\x6c", "\x6d\141\163\164\145\162"); goto See49; i085H: redirect("\x61\165\x74\150"); goto AUQQf; E3N9n: } public function output_json($data, $encode = true) { goto jrByL; kBfCX: k0jXg: goto tJo3y; Z70RU: $data = json_encode($data); goto kBfCX; jrByL: if (!$encode) { goto k0jXg; } goto Z70RU; tJo3y: $this->output->set_content_type("\141\x70\160\154\151\143\141\x74\x69\157\x6e\x2f\152\163\x6f\x6e")->set_output($data); goto wPt4s; wPt4s: } public function index() { goto jjnCJ; weFme: zdpvZ: goto qN0L_; ooq06: foreach ($kelas as $key => $kls) { $kelasEks[$key] = $this->kelas->getKelasEkskul($key, $tp->id_tp, $smt->id_smt); nARSL: } goto weFme; WapQQ: $data["\x70\x65\155\142\x69\x6d\x62\x69\x6e\147"] = $this->dropdown->getAllGuru(); goto ZPqvl; zkRCQ: $this->load->view("\137\164\x65\x6d\x70\154\141\x74\145\163\57\144\x61\163\150\142\x6f\x61\162\x64\57\x5f\x66\157\x6f\x74\145\x72"); goto kv38L; jjnCJ: $user = $this->ion_auth->user()->row(); goto pFXO8; KGrSd: $smt = $this->dashboard->getSemesterActive(); goto r_omy; fuC1h: $this->load->view("\155\141\x73\164\145\x72\x2f\x65\153\163\x74\x72\x61\x2f\144\141\164\141"); goto zkRCQ; pFXO8: $data = ["\x75\163\145\x72" => $user, "\152\165\x64\x75\154" => "\105\x6b\x73\x74\x72\x61\x6b\x75\162\x69\153\165\x6c\x65\x72", "\163\165\142\152\165\x64\165\154" => "\x44\x61\x74\x61\x20\115\x61\164\x61\40\x50\x65\x6c\x61\x6a\x61\162\x61\156", "\160\x72\x6f\x66\151\x6c\x65" => $this->dashboard->getProfileAdmin($user->id), "\x73\x65\x74\164\x69\x6e\147" => $this->dashboard->getSetting()]; goto Zq6K2; ZPqvl: $this->load->view("\x5f\x74\x65\155\160\154\141\164\x65\163\57\x64\x61\163\150\x62\x6f\141\x72\x64\57\137\150\145\141\x64\x65\x72", $data); goto fuC1h; EMjjT: $data["\x73\155\164\137\x61\x63\164\151\x76\x65"] = $smt; goto Uw65l; qN0L_: $data["\145\x6b\163\153\x75\x6c\x5f\x6b\145\154\141\163"] = $kelasEks; goto EpR5f; r_omy: $data["\164\x70"] = $this->dashboard->getTahun(); goto Y_Sf3; mBbcS: $data["\163\155\164"] = $this->dashboard->getSemester(); goto EMjjT; Y_Sf3: $data["\164\160\x5f\x61\x63\x74\x69\166\x65"] = $tp; goto mBbcS; OQXg4: $kelasEks = []; goto ooq06; Zq6K2: $tp = $this->dashboard->getTahunActive(); goto KGrSd; EpR5f: $data["\x6b\x65\154\x61\x73"] = $kelas; goto WapQQ; Uw65l: $data["\145\x6b\x73\153\165\154"] = $this->dropdown->getAllEkskul(); goto u6VhV; u6VhV: $kelas = $this->dropdown->getAllKelas($tp->id_tp, $smt->id_smt); goto OQXg4; kv38L: } public function create() { goto Av7HJ; Av7HJ: $insert = ["\x6e\x61\x6d\x61\137\x65\153\x73\x74\x72\x61" => $this->input->post("\x6e\141\x6d\141\137\x65\x6b\163\164\x72\141", true), "\x6b\x6f\144\x65\137\x65\x6b\x73\x74\x72\141" => $this->input->post("\153\157\144\x65\137\145\x6b\163\164\x72\141", true)]; goto NQBJ8; JtdLG: $this->output->set_content_type("\x61\160\x70\x6c\x69\143\141\164\x69\x6f\156\x2f\x6a\x73\x6f\156")->set_output($data); goto n4IcN; NQBJ8: $data = $this->master->create("\x6d\141\163\164\x65\162\137\145\x6b\x73\x74\x72\x61", $insert); goto JtdLG; n4IcN: } public function read() { goto K8zYP; M_5mh: echo $this->datatables->generate(); goto J8e24; K8zYP: $this->datatables->select("\x2a"); goto HvfTm; HvfTm: $this->datatables->from("\155\141\163\164\145\x72\137\145\153\163\164\x72\141"); goto M_5mh; J8e24: } public function update() { $data = $this->master->updateEkstra(); $this->output->set_content_type("\141\160\160\x6c\x69\x63\141\164\151\x6f\156\x2f\x6a\x73\157\156")->set_output($data); } public function delete($id) { goto mD9rr; AisSy: fV0pC: goto tmKBy; SfTHg: goto TJpPA; goto VuMmO; tmKBy: $this->output_json(["\163\x74\x61\x74\x75\163" => true, "\x6d\145\x73\x73\141\147\145" => "\x45\153\163\x6b\x75\x6c\40\142\x65\x72\x68\141\x73\151\154\x20\x64\151\150\141\160\x75\163"]); goto pvVB1; FHHUP: TJpPA: goto TkWxy; hOjQY: $this->output_json($tables); goto PXlwr; DM3bN: $tables = []; goto y_A8E; y_A8E: $tabless = $this->db->list_tables(); goto UCM_6; yYEQL: goto n3ImP; goto AisSy; UMIYT: if ($this->master->delete("\x6d\141\x73\x74\x65\x72\137\x65\x6b\x73\x74\x72\141", [$id], "\151\144\x5f\145\153\x73\x74\162\141")) { goto fV0pC; } goto m3wph; pvVB1: n3ImP: goto SfTHg; zkxQE: aUsws: goto hOjQY; PXlwr: foreach ($tables as $table) { goto lOAkN; xZw_H: vTCa5: goto hQvgV; wrWCI: $num = $this->db->count_all_results($table); goto ApUT0; lOAkN: if (!($table != "\x6d\141\163\164\145\162\x5f\x65\153\163\x74\x72\141")) { goto vTCa5; } goto wGLCD; h3gGm: CM4vF: goto xZw_H; ApUT0: if (!($num > 0)) { goto CM4vF; } goto LBc6t; hQvgV: AcxxC: goto Shu89; wGLCD: $this->db->where("\151\144\137\x65\x6b\x73\164\162\x61", $id); goto wrWCI; LBc6t: array_push($messages, $table); goto h3gGm; Shu89: } goto Uu4KB; UCM_6: foreach ($tabless as $table) { goto Q87Z7; G_QOT: jTC02: goto sc2l6; EJeUC: foreach ($fields as $field) { goto y0ge9; LQa5l: FJlf4: goto YzccZ; YzccZ: JftqQ: goto yuFRe; y0ge9: if (!($field->name == "\151\144\137\145\153\x73\164\x72\141" || $field->name == "\x65\x6b\x73\x74\x72\x61\x5f\151\144")) { goto FJlf4; } goto xJao4; xJao4: array_push($tables, $table); goto LQa5l; yuFRe: } goto dMyN7; Q87Z7: $fields = $this->db->field_data($table); goto EJeUC; dMyN7: grN0D: goto G_QOT; sc2l6: } goto zkxQE; NdU6T: if (count($messages) > 0) { goto ZNw6t; } goto UMIYT; VuMmO: ZNw6t: goto lldFd; mD9rr: $messages = []; goto DM3bN; m3wph: $this->output_json(["\x73\x74\141\164\x75\163" => false, "\155\x65\x73\x73\x61\x67\145" => "\x45\153\x73\x6b\165\154\x20\x67\x61\147\141\154\x20\x64\x69\150\x61\160\x75\163"]); goto yYEQL; lldFd: $this->output_json(["\x73\164\141\x74\165\x73" => false, "\x74\x6f\x74\141\x6c" => "\115\x61\160\x65\154\x20\x64\151\x67\165\156\141\153\x61\x6e\40\x64\x69\x20" . count($messages) . "\x20\x74\x61\x62\145\x6c\72\74\x62\162\76" . implode("\x3c\x62\162\x3e", $messages)]); goto FHHUP; Uu4KB: eYxxe: goto NdU6T; TkWxy: } public function save() { goto q60lb; YNcoi: $row_insert = 0; goto Mn067; zW6w4: tvjUY: goto Y31o4; EfdP8: $tp = $this->master->getTahunActive()->id_tp; goto Im964; Mn067: $update = []; goto MsqXM; Im964: $smt = $this->master->getSemesterActive()->id_smt; goto YNcoi; MsqXM: foreach ($check_kelas as $key => $kls) { goto L_7LD; Att2t: if (!$check_ekskul) { goto pLUuH; } goto pe6zl; NraS4: $ekstra = []; goto qbZY4; BLFNN: goto neyPJ; goto Fgnsl; Tx77R: $ekstras = ["\151\x64\137\153\145\154\x61\x73\x5f\x65\x6b\x73\164\162\141" => $kls->kls_id . $tp . $smt, "\151\x64\x5f\x6b\145\154\141\x73" => $kls->kls_id, "\151\144\137\164\160" => $tp, "\x69\144\137\x73\x6d\x74" => $smt, "\145\153\x73\164\162\x61" => serialize($ekstra)]; goto p7XUw; ThtQR: CUwQl: goto OABaS; Fgnsl: wlPvv: goto Tx77R; aEWGU: pLUuH: goto ThtQR; pOas3: $j++; goto BLFNN; FfYu4: $ekstra[] = ["\x65\x6b\x73\x74\x72\x61" => $kelaseks]; goto veu2b; pe6zl: $row_ekskul = count($this->input->post("\x65\153\163\x6b\x75\x6c" . $kls->kls_id, true)); goto NraS4; veu2b: JIZQB: goto pOas3; p7XUw: $update[] = $this->db->replace("\153\145\154\141\x73\137\145\153\163\164\162\141", $ekstras); goto aEWGU; qbZY4: $j = 0; goto GVAIy; HiiSD: if (!($j <= $row_ekskul)) { goto wlPvv; } goto wSQBw; L_7LD: $check_ekskul = $this->input->post("\145\x6b\x73\x6b\x75\154" . $kls->kls_id, true); goto Att2t; wSQBw: $kelaseks = $this->input->post("\145\153\x73\153\165\x6c" . $kls->kls_id . "\133" . $j . "\135", true); goto FfYu4; GVAIy: neyPJ: goto HiiSD; OABaS: } goto zW6w4; DP3lJ: $this->output_json($res); goto TMuOO; xcxhP: $res["\165\x70\144\141\x74\145"] = $update; goto DP3lJ; Y31o4: $res["\163\x74\141\164\165\x73"] = true; goto xcxhP; q60lb: $check_kelas = json_decode(json_encode(json_decode($this->input->post("\x6b\x65\x6c\x61\163", true)))); goto EfdP8; TMuOO: } public function import($import_data = null) { goto u5bCZ; jgVYQ: $data["\x73\x6d\164"] = $this->dashboard->getSemester(); goto UB4PO; a0GWb: $data["\164\x70\x5f\x61\x63\x74\x69\x76\x65"] = $this->dashboard->getTahunActive(); goto jgVYQ; u5bCZ: $user = $this->ion_auth->user()->row(); goto nbT5w; QusOW: $this->load->view("\155\141\163\164\x65\162\57\145\x6b\163\164\162\141\x2f\151\155\x70\157\162\x74"); goto rScQg; UB4PO: $data["\163\x6d\x74\137\x61\x63\x74\x69\166\x65"] = $this->dashboard->getSemesterActive(); goto EIIwl; iVjNw: $data["\x74\160"] = $this->dashboard->getTahun(); goto a0GWb; rScQg: $this->load->view("\x5f\164\145\155\160\154\x61\x74\x65\163\57\144\x61\x73\x68\142\157\x61\x72\144\57\x5f\146\x6f\157\164\x65\x72"); goto NUMD_; nbT5w: $data = ["\x75\x73\x65\x72" => $user, "\152\165\x64\165\x6c" => "\x4d\x61\x74\141\40\x50\145\x6c\141\x6a\x61\162\x61\x6e", "\163\165\142\152\165\x64\x75\x6c" => "\111\x6d\x70\x6f\x72\164\x20\115\141\x74\141\40\120\145\x6c\x61\x6a\141\162\141\x6e", "\160\x72\x6f\146\x69\154\x65" => $this->dashboard->getProfileAdmin($user->id), "\x73\x65\164\164\x69\x6e\147" => $this->dashboard->getSetting()]; goto x_IxU; x_IxU: if (!($import_data != null)) { goto WS6ry; } goto VFlEe; EIIwl: $this->load->view("\137\164\145\x6d\x70\154\141\x74\x65\163\57\144\141\163\x68\x62\157\x61\x72\144\57\137\x68\x65\141\x64\145\x72", $data); goto QusOW; VFlEe: $data["\x69\x6d\x70\157\162\x74"] = $import_data; goto rkO_l; rkO_l: WS6ry: goto iVjNw; NUMD_: } }
