<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 class Cbttoken extends CI_Controller { public function __construct() { goto SiaRs; CAYfl: GhIrd: goto ao3tn; VGjFH: $this->load->dbforge(); goto I01TR; j8CoP: $this->load->model("\114\157\147\137\x6d\157\x64\x65\154", "\154\x6f\147\x67\x69\156\x67"); goto ACeDT; ACeDT: $this->form_validation->set_error_delimiters('', ''); goto ho3KA; q8Mae: $this->load->model("\x43\142\x74\x5f\x6d\x6f\144\x65\x6c", "\x63\142\x74"); goto j8CoP; ao3tn: goto j6a19; goto hzC8H; q3OYQ: if (!(!$this->ion_auth->is_admin() && !$this->ion_auth->in_group("\x67\x75\162\165"))) { goto GhIrd; } goto U9RWx; OZyTX: $this->load->library(["\144\x61\164\141\164\x61\142\x6c\x65\x73", "\x66\x6f\162\155\137\166\141\x6c\151\x64\x61\164\x69\x6f\x6e"]); goto ugURS; SiaRs: parent::__construct(); goto VGjFH; U9RWx: show_error("\110\x61\156\x79\141\x20\101\x64\155\x69\x6e\151\x73\x74\x72\141\164\157\x72\x20\171\x61\x6e\147\40\144\x69\142\x65\162\151\40\150\x61\153\x20\x75\x6e\x74\165\x6b\x20\x6d\145\156\147\141\x6b\163\x65\x73\x20\x68\141\154\141\x6d\x61\x6e\40\151\156\151\54\40\74\141\x20\150\x72\145\x66\75\42" . base_url("\144\141\163\x68\142\x6f\x61\162\x64") . "\42\x3e\113\x65\155\x62\141\x6c\151\x20\153\x65\x20\x6d\x65\156\x75\x20\x61\167\141\x6c\x3c\57\141\x3e", 403, "\101\153\x73\x65\163\40\124\x65\x72\x6c\x61\x72\141\156\147"); goto CAYfl; wfDMM: j6a19: goto OZyTX; hzC8H: pjhLU: goto Kh3fq; ugURS: $this->load->model("\x4d\141\x73\x74\145\162\137\155\157\144\x65\154", "\155\x61\x73\164\145\x72"); goto eATZk; eATZk: $this->load->model("\x44\x61\x73\x68\x62\157\141\x72\144\137\155\157\144\145\x6c", "\144\141\x73\150\x62\157\141\x72\x64"); goto q8Mae; Kh3fq: redirect("\141\x75\x74\150"); goto wfDMM; I01TR: if (!$this->ion_auth->logged_in()) { goto pjhLU; } goto q3OYQ; ho3KA: } public function output_json($data, $encode = true) { goto jOgxk; jOgxk: if (!$encode) { goto BfEpE; } goto glnzu; F01Av: $this->output->set_content_type("\141\160\x70\x6c\x69\x63\x61\x74\151\x6f\x6e\x2f\152\x73\157\x6e")->set_output($data); goto tO5Eq; glnzu: $data = json_encode($data); goto Wf7YZ; Wf7YZ: BfEpE: goto F01Av; tO5Eq: } public function index() { goto wnkgf; T0gLZ: $tkn["\x6a\x61\x72\141\x6b"] = "\x31"; goto zXwBU; LeG7R: $data["\x74\157\153\x65\x6e"] = $token != null ? $token : json_decode(json_encode($tkn)); goto csvN9; TPxqF: Ehto6: goto nleW7; BnI8Y: $tkn["\x74\157\x6b\x65\156"] = ''; goto Aeeo6; tWLnn: $tp = $this->master->getTahunActive(); goto dmWBO; JuXNz: $this->load->view("\143\142\x74\57\164\x6f\153\x65\156\57\144\x61\164\x61"); goto iCnVF; s1Iwl: $data["\163\x6d\164"] = $this->dashboard->getSemester(); goto pr64j; ceQx2: $this->load->view("\x6d\145\155\142\x65\162\x73\x2f\147\165\x72\x75\x2f\x74\x65\x6d\x70\154\x61\x74\145\x73\57\x68\x65\x61\x64\x65\x72", $data); goto B2Qps; o6elk: N9Zwk: goto hpZFk; n0YWC: $this->load->view("\x5f\x74\145\x6d\160\154\141\x74\x65\x73\57\144\141\x73\x68\x62\x6f\x61\162\144\x2f\x5f\150\145\x61\144\145\x72", $data); goto JuXNz; zXwBU: $tkn["\145\x6c\141\x70\163\x65\x64"] = "\60\60\72\x30\x30\72\60\x30"; goto LeG7R; ZNBQ7: $token = $this->cbt->getToken(); goto BnI8Y; wvwHn: $this->load->view("\x6d\x65\155\x62\x65\162\163\x2f\147\x75\x72\165\57\164\x65\155\160\x6c\x61\x74\145\163\x2f\146\157\x6f\x74\145\162"); goto htg2J; pr64j: $data["\163\155\x74\137\x61\143\164\151\x76\x65"] = $smt; goto ZNBQ7; B2Qps: $this->load->view("\x6d\145\155\142\x65\162\163\57\x67\x75\x72\165\x2f\x63\x62\164\57\164\x6f\x6b\145\x6e\57\144\x61\164\x61"); goto wvwHn; htg2J: goto Ehto6; goto o6elk; hdUo7: $data["\164\160\137\x61\143\x74\x69\166\145"] = $tp; goto s1Iwl; csvN9: if ($this->ion_auth->is_admin()) { goto N9Zwk; } goto H0jyF; dmWBO: $smt = $this->master->getSemesterActive(); goto JQLuz; Aeeo6: $tkn["\141\x75\x74\x6f"] = "\60"; goto T0gLZ; wnkgf: $user = $this->ion_auth->user()->row(); goto IxcdE; IxcdE: $data = ["\165\x73\145\162" => $user, "\x6a\x75\144\x75\154" => "\x54\x6f\x6b\x65\x6e\40\125\152\151\141\156", "\163\165\x62\x6a\165\144\165\154" => "\x54\x6f\x6b\x65\x6e", "\x73\x65\x74\164\151\x6e\147" => $this->dashboard->getSetting()]; goto tWLnn; JQLuz: $data["\x74\x70"] = $this->dashboard->getTahun(); goto hdUo7; hpZFk: $data["\160\162\157\x66\151\x6c\x65"] = $this->dashboard->getProfileAdmin($user->id); goto n0YWC; H0jyF: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto RDtT0; iCnVF: $this->load->view("\x5f\164\145\155\x70\x6c\x61\x74\x65\163\x2f\144\x61\163\x68\142\x6f\141\x72\x64\x2f\137\146\157\157\x74\x65\162"); goto TPxqF; RDtT0: $data["\x67\x75\162\x75"] = $guru; goto ceQx2; nleW7: } public function generateToken() { goto wQ5zp; HidGV: $force = $this->input->get("\146\157\162\143\145"); goto SdsY0; q6m8A: $token = $this->cbt->getToken(); goto qKSU6; qKSU6: $token->now = $updated; goto mJv3D; RNX_z: $this->cbt->saveToken($post_token); goto QTKdd; ag6ox: $updated = date("\131\x2d\155\55\x64\40\110\72\x69\x3a\163"); goto g_i15; zLJzr: $post_token->token = $new; goto rs_uf; TbL7C: LayZQ: goto W1wxx; L6qoF: $this->cbt->saveToken($post_token); goto XBLeJ; SdsY0: $token = $this->cbt->getToken(); goto ag6ox; FILi0: $post_token->updated = $updated; goto RNX_z; S3Fs2: $total_minutes += $diff->h * 60; goto aeiW_; Fjt_q: goto sZptI; goto TbL7C; c53F3: $diff = $mulai->diff(new DateTime()); goto BBAjk; Rq7Tz: if (!($total_minutes >= $post_token->jarak)) { goto tFcGz; } goto uoxRy; BBAjk: $total_minutes = $diff->days * 24 * 60; goto S3Fs2; rs_uf: $post_token->updated = $updated; goto L6qoF; fw7TZ: $post_token->token = $new; goto FILi0; XBLeJ: tFcGz: goto Fjt_q; QTKdd: sZptI: goto q6m8A; mJv3D: $this->output_json($token); goto t5GOT; W1wxx: $new = $this->createNewToken(); goto fw7TZ; uoxRy: $new = $this->createNewToken(); goto zLJzr; wQ5zp: $post_token = json_decode($this->input->get("\x64\141\164\141")); goto HidGV; vKCSo: $mulai = new DateTime($token->updated); goto c53F3; g_i15: if ($force == "\x31") { goto LayZQ; } goto vKCSo; aeiW_: $total_minutes += $diff->i; goto Rq7Tz; t5GOT: } public function loadToken() { goto ViW9t; K2bLW: if ($token == null) { goto D6cqG; } goto XIlnB; F60JZ: foreach ($dataflds as $fild) { goto L9jWs; L9jWs: if (!($fild->name == "\165\x70\144\x61\164\x65\144")) { goto uDN7T; } goto rc37o; eAd9y: uDN7T: goto ycklh; tiUvq: $field = ["\x75\x70\144\141\164\x65\x64" => array("\164\171\160\145" => "\126\x41\x52\x43\110\x41\122", "\143\x6f\x6e\163\164\162\141\x69\156\164" => 20, "\x64\x65\x66\141\165\x6c\x74" => '')]; goto F008q; JG7Fu: DLZGL: goto eAd9y; F008q: $table_changed = $this->dbforge->modify_column("\x63\142\164\x5f\164\x6f\x6b\145\156", $field); goto JG7Fu; ycklh: lpWZV: goto ZBvD0; rc37o: if (!($fild->type != "\166\141\x72\143\150\x61\x72")) { goto DLZGL; } goto tiUvq; ZBvD0: } goto gQKeg; T04K1: goto qQY2e; goto CAnp_; CAnp_: D6cqG: goto mOT16; LsPGD: $table_changed = false; goto F60JZ; JvcpX: qQY2e: goto e_hYA; mOT16: $data["\164\157\x6b\x65\x6e"] = ''; goto taTux; EXdxy: $this->output_json($token); goto T04K1; gQKeg: oCkVC: goto sbueA; XIlnB: $token->now = date("\x59\55\x6d\x2d\x64\40\110\72\x69\72\163"); goto EXdxy; WcenA: $data["\145\154\x61\160\x73\x65\x64"] = "\60\x30\x3a\x30\60\x3a\60\60"; goto EQ76D; EQ76D: $this->output_json($data); goto JvcpX; taTux: $data["\141\165\x74\x6f"] = "\60"; goto WcenA; ViW9t: $dataflds = $this->db->field_data("\x63\x62\164\x5f\164\x6f\x6b\x65\156"); goto LsPGD; sbueA: $token = $this->cbt->getToken(); goto K2bLW; e_hYA: } private function createNewToken() { goto PKhsk; RHtrD: $i++; goto cT1K4; TVkgN: return $new_token; goto F1oed; qmy_J: $new_token .= $random_character; goto fi2N_; hm1cn: $random_character = $chars[mt_rand(0, $input_length - 1)]; goto qmy_J; Ke8lt: $i = 0; goto TzVoT; WIXn5: if (!($i < 6)) { goto mHGgB; } goto hm1cn; TzVoT: yLi1V: goto WIXn5; PKhsk: $chars = "\x41\102\x43\x44\105\x46\107\x48\111\x4a\x4b\x4c\115\x4e\117\x50\121\x52\x53\124\125\x56\127\130\x59\x5a"; goto vv9YV; Qvfc6: $new_token = ''; goto Ke8lt; fi2N_: d45T0: goto RHtrD; Klt1C: mHGgB: goto TVkgN; vv9YV: $input_length = strlen($chars); goto Qvfc6; cT1K4: goto yLi1V; goto Klt1C; F1oed: } }
