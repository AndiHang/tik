<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 class Cbttoken extends CI_Controller { public function __construct() { goto WeKxE; odcnK: if (!(!$this->ion_auth->is_admin() && !$this->ion_auth->in_group("\x67\165\162\x75"))) { goto d0Ycy; } goto uCdQ2; uCdQ2: show_error("\110\141\x6e\171\141\x20\x41\x64\155\151\156\151\x73\x74\x72\x61\164\157\x72\x20\171\x61\x6e\147\40\x64\151\142\x65\162\x69\x20\x68\x61\x6b\x20\x75\156\x74\x75\x6b\x20\155\x65\x6e\147\141\x6b\x73\x65\x73\x20\x68\141\x6c\x61\155\x61\156\x20\151\x6e\x69\54\x20\74\x61\x20\150\162\x65\146\x3d\x22" . base_url("\x64\141\163\x68\142\157\x61\x72\x64") . "\x22\76\113\145\x6d\x62\x61\154\151\40\x6b\x65\40\155\145\156\165\40\141\167\141\x6c\x3c\57\x61\x3e", 403, "\101\x6b\163\145\163\40\124\145\x72\154\141\x72\x61\156\x67"); goto h2EVE; jvpc6: $this->load->model("\x43\x62\x74\x5f\155\x6f\x64\x65\154", "\143\x62\164"); goto k22h6; CTyJE: if (!$this->ion_auth->logged_in()) { goto JJr7C; } goto odcnK; Y4REa: $this->load->model("\x4d\x61\163\x74\145\162\137\155\x6f\x64\x65\x6c", "\155\x61\x73\x74\x65\162"); goto bA99Y; wmDDc: JJr7C: goto xnEA3; h2EVE: d0Ycy: goto fH2PG; bA99Y: $this->load->model("\104\x61\x73\x68\142\157\141\x72\x64\137\155\x6f\x64\x65\x6c", "\x64\x61\x73\150\x62\x6f\x61\x72\x64"); goto jvpc6; uezfX: XUt7G: goto snrx4; WeKxE: parent::__construct(); goto CTyJE; xnEA3: redirect("\141\x75\x74\x68"); goto uezfX; V4_do: $this->form_validation->set_error_delimiters('', ''); goto fsKAa; fH2PG: goto XUt7G; goto wmDDc; snrx4: $this->load->library(["\x64\141\164\141\164\141\142\154\x65\x73", "\x66\157\x72\155\137\x76\141\154\x69\144\141\164\151\157\156"]); goto Y4REa; k22h6: $this->load->model("\114\157\x67\x5f\x6d\157\144\x65\154", "\154\x6f\x67\x67\151\x6e\x67"); goto V4_do; fsKAa: } public function output_json($data, $encode = true) { goto SgfAR; EAfj1: $data = json_encode($data); goto j6voP; BZz43: $this->output->set_content_type("\x61\160\x70\x6c\x69\143\141\x74\x69\x6f\x6e\x2f\152\163\157\x6e")->set_output($data); goto mMWFj; SgfAR: if (!$encode) { goto QGiK3; } goto EAfj1; j6voP: QGiK3: goto BZz43; mMWFj: } public function index() { goto Q7Y9r; sQWnR: $this->load->view("\x6d\x65\x6d\142\x65\x72\x73\57\147\x75\162\x75\57\x74\145\155\160\154\x61\164\x65\x73\57\x66\157\x6f\x74\x65\162"); goto iHr6Y; Okb4n: $this->load->view("\137\x74\x65\155\160\154\141\164\x65\x73\57\144\141\163\x68\x62\x6f\141\x72\x64\x2f\137\x66\157\157\x74\145\162"); goto RB2CS; goW_a: $data["\x74\160"] = $this->dashboard->getTahun(); goto lAovY; SJ5m4: $this->load->view("\x6d\x65\x6d\142\145\162\163\57\x67\165\x72\165\57\164\x65\x6d\160\x6c\x61\x74\145\x73\x2f\x68\145\x61\144\x65\162", $data); goto G1O2S; G1O2S: $this->load->view("\155\x65\x6d\142\145\x72\163\57\147\x75\x72\x75\57\143\142\x74\57\x74\157\x6b\x65\x6e\x2f\144\x61\164\x61"); goto sQWnR; b2Xpt: $data["\163\155\164"] = $this->dashboard->getSemester(); goto yT0RP; WYO5l: $data["\x67\165\x72\x75"] = $guru; goto SJ5m4; Rt2s8: $this->load->view("\x5f\164\x65\155\x70\154\x61\164\x65\163\x2f\144\141\163\x68\142\157\141\162\144\57\x5f\x68\145\141\144\x65\x72", $data); goto l_Y0J; NUqzp: $data = ["\x75\163\145\x72" => $user, "\152\165\144\165\x6c" => "\x54\157\x6b\145\156\x20\125\x6a\x69\141\x6e", "\x73\x75\x62\x6a\x75\144\165\x6c" => "\124\x6f\153\145\156", "\163\145\x74\164\151\x6e\x67" => $this->dashboard->getSetting()]; goto JZwS3; rZZ0M: $data["\x74\x6f\x6b\x65\x6e"] = $this->cbt->getToken(); goto bOol9; iHr6Y: goto dBSbu; goto z2rck; pxC_4: $data["\x70\x72\x6f\x66\x69\x6c\x65"] = $this->dashboard->getProfileAdmin($user->id); goto Rt2s8; STYB3: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto WYO5l; RRMFT: $smt = $this->master->getSemesterActive(); goto goW_a; JZwS3: $tp = $this->master->getTahunActive(); goto RRMFT; lAovY: $data["\x74\160\137\x61\x63\164\x69\166\145"] = $tp; goto b2Xpt; l_Y0J: $this->load->view("\143\x62\164\x2f\x74\x6f\153\145\156\x2f\x64\x61\x74\141"); goto Okb4n; bOol9: if ($this->ion_auth->is_admin()) { goto wxc09; } goto STYB3; z2rck: wxc09: goto pxC_4; RB2CS: dBSbu: goto spt7P; yT0RP: $data["\163\155\164\137\x61\143\x74\151\x76\145"] = $smt; goto rZZ0M; Q7Y9r: $user = $this->ion_auth->user()->row(); goto NUqzp; spt7P: } public function generateToken() { goto Tu7ZX; AqLdz: $this->output_json($token); goto mg5e5; w3lGt: $new = $this->createNewToken(); goto KhEoD; RhIxj: $mulai = new DateTime($token->updated); goto kktc0; C2Gjn: $diff = $mulai->diff(new DateTime()); goto foF3q; Y8edr: $force = $this->input->get("\x66\x6f\x72\x63\x65"); goto POrVU; Pt0ay: voJx5: goto BLxr7; Tu7ZX: $post_token = json_decode($this->input->get("\144\x61\x74\141")); goto Y8edr; XZFIN: $mulai = new DateTime($token->updated); goto C2Gjn; AVIMI: goto YC5b0; goto Pt0ay; KhEoD: $post_token->token = $new; goto Ah08C; uA6lg: ubsJa: goto AVIMI; yCRu7: $total_minutes += $diff->i; goto YJpYG; lXQLF: $this->cbt->saveToken($post_token); goto QIICY; QVsyk: $total_minutes = $diff->days * 24 * 60; goto cyKmz; QIICY: YC5b0: goto iPBQ3; kktc0: $diff = $mulai->diff(new DateTime()); goto QVsyk; cyKmz: $total_minutes += $diff->h * 60; goto yCRu7; eNcfP: if ($force == "\x31") { goto voJx5; } goto RhIxj; BLxr7: $new = $this->createNewToken(); goto jacK3; foF3q: $token->elapsed = $diff->format("\45\110\72\x25\111\x3a\x25\x53"); goto AqLdz; jacK3: $post_token->token = $new; goto lXQLF; YJpYG: if (!($total_minutes >= $post_token->jarak)) { goto ubsJa; } goto w3lGt; iPBQ3: $token = $this->cbt->getToken(); goto XZFIN; POrVU: $token = $this->cbt->getToken(); goto eNcfP; Ah08C: $this->cbt->saveToken($post_token); goto uA6lg; mg5e5: } public function loadToken() { goto WOhNO; b5uYj: $this->output_json($token); goto WRk_j; YSsr_: E7Ypj: goto Cac_T; xKUrI: AkUf_: goto QDMES; ZbHtt: $data["\x65\154\x61\x70\163\145\x64"] = "\60\60\72\60\x30\x3a\60\60"; goto nuEgh; nuEgh: $this->output_json($data); goto xKUrI; Cac_T: $data["\x74\x6f\153\x65\156"] = ''; goto Tc3mg; nU7hi: if ($token == null) { goto E7Ypj; } goto uw7r3; WOhNO: $token = $this->cbt->getToken(); goto nU7hi; uw7r3: $mulai = new DateTime($token->updated); goto mbiLE; O4o9E: $token->elapsed = $diff->format("\45\x48\x3a\45\111\72\x25\x53"); goto b5uYj; Tc3mg: $data["\141\x75\164\x6f"] = "\x30"; goto ZbHtt; WRk_j: goto AkUf_; goto YSsr_; mbiLE: $diff = $mulai->diff(new DateTime()); goto O4o9E; QDMES: } private function createNewToken() { goto W6lcH; rTew0: jx308: goto cjPdo; Gm5Ub: goto pjKMV; goto jAXAP; Ovxv8: return $new_token; goto Q9jvx; A_xCE: $new_token = ''; goto kR3aO; cjPdo: $i++; goto Gm5Ub; jAXAP: Eigw2: goto Ovxv8; A2HO3: $random_character = $chars[mt_rand(0, $input_length - 1)]; goto yyw9j; fM2yq: if (!($i < 6)) { goto Eigw2; } goto A2HO3; R8ICG: pjKMV: goto fM2yq; kR3aO: $i = 0; goto R8ICG; yyw9j: $new_token .= $random_character; goto rTew0; W6lcH: $chars = "\101\x42\103\104\x45\106\x47\110\111\x4a\x4b\114\x4d\x4e\x4f\120\x51\x52\x53\124\x55\126\x57\130\x59\x5a"; goto P0FTC; P0FTC: $input_length = strlen($chars); goto A_xCE; Q9jvx: } }
