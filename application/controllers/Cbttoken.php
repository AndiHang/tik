<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 class Cbttoken extends CI_Controller { public function __construct() { goto qkD7v; tpKh3: if (!$this->ion_auth->logged_in()) { goto J46BA; } goto jrwaS; TzcAj: sDuIg: goto qT6KK; qkD7v: parent::__construct(); goto dggD2; rxiDp: $this->form_validation->set_error_delimiters('', ''); goto FHY0f; uXUmZ: J46BA: goto LcX5J; kk88t: cR7pf: goto gY4uh; oK01Z: $this->load->model("\x44\x61\x73\150\142\157\x61\162\x64\137\155\x6f\144\x65\x6c", "\144\x61\163\150\142\x6f\141\162\x64"); goto B2mTS; qT6KK: goto cR7pf; goto uXUmZ; gY4uh: $this->load->library(["\144\x61\x74\141\x74\141\142\x6c\145\163", "\146\157\162\x6d\137\166\x61\x6c\x69\x64\x61\x74\x69\157\156"]); goto Ecqdm; jrwaS: if (!(!$this->ion_auth->is_admin() && !$this->ion_auth->in_group("\x67\165\162\x75"))) { goto sDuIg; } goto l3Wwu; dggD2: $this->load->dbforge(); goto tpKh3; l3Wwu: show_error("\110\141\156\x79\x61\40\101\x64\x6d\151\156\x69\x73\164\x72\x61\164\157\162\40\171\x61\156\147\40\x64\151\x62\x65\162\x69\x20\x68\x61\153\x20\x75\x6e\164\165\153\x20\155\x65\x6e\147\x61\x6b\163\x65\x73\x20\x68\141\154\141\155\x61\156\40\x69\156\x69\x2c\x20\74\141\40\x68\162\x65\x66\x3d\x22" . base_url("\x64\x61\x73\150\x62\157\x61\162\144") . "\x22\x3e\x4b\145\x6d\142\141\x6c\151\40\153\145\x20\155\x65\x6e\165\x20\x61\167\x61\x6c\74\57\141\76", 403, "\x41\153\163\145\x73\x20\124\x65\162\154\x61\162\x61\x6e\147"); goto TzcAj; B2mTS: $this->load->model("\103\142\164\x5f\155\x6f\x64\x65\x6c", "\x63\x62\x74"); goto a0pOp; a0pOp: $this->load->model("\114\157\x67\137\155\x6f\x64\145\154", "\154\x6f\x67\147\151\156\x67"); goto rxiDp; Ecqdm: $this->load->model("\115\141\163\x74\145\162\137\155\x6f\144\145\154", "\x6d\x61\x73\164\145\x72"); goto oK01Z; LcX5J: redirect("\x61\165\164\150"); goto kk88t; FHY0f: } public function output_json($data, $encode = true) { goto npntn; IBU0V: $this->output->set_content_type("\141\160\x70\154\151\143\x61\x74\151\157\x6e\57\x6a\x73\157\156")->set_output($data); goto zQ0c0; XFpW1: $data = json_encode($data); goto zi5Y7; npntn: if (!$encode) { goto EYT19; } goto XFpW1; zi5Y7: EYT19: goto IBU0V; zQ0c0: } public function index() { goto QdAwI; hEV1n: DxsRc: goto CKF7i; Xl9an: $data = ["\x75\163\145\x72" => $user, "\x6a\x75\x64\165\154" => "\124\x6f\x6b\x65\156\40\125\x6a\151\x61\x6e", "\163\x75\142\x6a\x75\x64\x75\x6c" => "\x54\157\x6b\x65\156", "\163\x65\x74\164\151\156\x67" => $this->dashboard->getSetting()]; goto s3QjP; VT7YV: vZu5H: goto s8aKS; Gf1g7: $tkn["\152\141\x72\141\153"] = "\x31"; goto mSGHI; Q7B2a: $smt = $this->master->getSemesterActive(); goto KkhnB; gxYfF: $this->load->view("\137\164\x65\155\x70\154\141\x74\145\x73\x2f\144\141\163\x68\142\157\141\162\144\x2f\x5f\150\145\141\x64\145\x72", $data); goto WSaX5; HzM8B: $this->load->view("\x5f\x74\x65\155\160\154\x61\x74\145\x73\x2f\144\x61\163\150\142\x6f\141\x72\x64\x2f\x5f\x66\157\x6f\164\x65\x72"); goto hEV1n; balQE: $data["\164\160\x5f\x61\143\x74\151\166\x65"] = $tp; goto N0PO2; b85ba: $this->load->view("\155\x65\x6d\x62\145\162\x73\x2f\x67\x75\x72\x75\57\x74\145\x6d\160\x6c\141\164\x65\x73\57\x68\145\141\144\x65\x72", $data); goto mfqNr; WSaX5: $this->load->view("\143\142\164\x2f\164\x6f\x6b\145\156\x2f\144\x61\x74\141"); goto HzM8B; FHCxJ: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto IeXta; SMKlo: goto DxsRc; goto VT7YV; N0PO2: $data["\x73\x6d\164"] = $this->dashboard->getSemester(); goto hRMEo; KkhnB: $data["\x74\x70"] = $this->dashboard->getTahun(); goto balQE; nnmVR: $data["\x74\157\x6b\145\156"] = $token != null ? $token : json_decode(json_encode($tkn)); goto KLe0Z; QdAwI: $user = $this->ion_auth->user()->row(); goto Xl9an; KLe0Z: if ($this->ion_auth->is_admin()) { goto vZu5H; } goto FHCxJ; s8aKS: $data["\x70\162\157\x66\x69\x6c\x65"] = $this->dashboard->getProfileAdmin($user->id); goto gxYfF; mfqNr: $this->load->view("\x6d\x65\x6d\x62\145\162\x73\x2f\147\x75\162\x75\57\x63\x62\164\x2f\x74\x6f\153\145\x6e\57\144\x61\164\x61"); goto ekDQs; AgeGS: $token = $this->cbt->getToken(); goto Q4GSV; ekDQs: $this->load->view("\x6d\x65\155\x62\145\x72\163\57\147\165\162\165\57\164\145\x6d\x70\154\141\x74\x65\163\57\146\x6f\x6f\164\145\x72"); goto SMKlo; Q4GSV: $tkn["\164\x6f\153\145\x6e"] = ''; goto Nhwnf; Nhwnf: $tkn["\141\165\164\x6f"] = "\x30"; goto Gf1g7; hRMEo: $data["\163\155\x74\x5f\x61\x63\164\x69\x76\x65"] = $smt; goto AgeGS; s3QjP: $tp = $this->master->getTahunActive(); goto Q7B2a; mSGHI: $tkn["\x65\154\x61\x70\x73\145\144"] = "\60\60\x3a\60\x30\72\60\x30"; goto nnmVR; IeXta: $data["\x67\165\x72\165"] = $guru; goto b85ba; CKF7i: } public function generateToken() { goto Rs_X6; LHtBk: $token = $this->cbt->getToken(); goto b2WyW; OxgjF: $post_token->token = $new; goto Fl7rT; Rs_X6: $post_token = json_decode($this->input->get("\144\141\x74\141")); goto NmGKq; RooU7: $post_token->updated = $updated; goto zaAl0; DE122: $mulai = new DateTime($token->updated); goto FxVVz; Pu0jh: $token->now = $updated; goto Xd4aY; NOvSI: if (!($total_minutes >= $post_token->jarak)) { goto sEgmW; } goto cM7m2; cM7m2: $new = $this->createNewToken(); goto OxgjF; ZIVRi: $new = $this->createNewToken(); goto U1HFA; FxVVz: $diff = $mulai->diff(new DateTime()); goto Tn8QB; zLipr: aiw8Y: goto ZIVRi; RfJIY: goto LvSve; goto zLipr; iYbS0: $token = $this->cbt->getToken(); goto Pu0jh; b2WyW: $updated = date("\x59\x2d\x6d\55\x64\40\110\72\151\x3a\x73"); goto S7fXS; VJNKS: $total_minutes += $diff->i; goto NOvSI; U1HFA: $post_token->token = $new; goto RooU7; NmGKq: $force = $this->input->get("\146\x6f\162\x63\145"); goto LHtBk; Fl7rT: $post_token->updated = $updated; goto nG99_; gDRjj: sEgmW: goto RfJIY; Xd4aY: $this->output_json($token); goto aFzLd; S7fXS: if ($force == "\x31") { goto aiw8Y; } goto DE122; nG99_: $this->cbt->saveToken($post_token); goto gDRjj; Tn8QB: $total_minutes = $diff->days * 24 * 60; goto qj69B; qj69B: $total_minutes += $diff->h * 60; goto VJNKS; vIQDa: LvSve: goto iYbS0; zaAl0: $this->cbt->saveToken($post_token); goto vIQDa; aFzLd: } public function loadToken() { goto brZcF; D9jQj: foreach ($dataflds as $fild) { goto nmmmI; nmmmI: if (!($fild->name == "\165\160\x64\x61\164\x65\x64")) { goto ur8OG; } goto XrrI3; Dv54d: ur8OG: goto pXtAl; rMZzk: $table_changed = $this->dbforge->modify_column("\x63\x62\x74\137\x74\157\x6b\x65\156", $field); goto x9cKv; pXtAl: St7vm: goto ZaS_v; x9cKv: hjTTi: goto Dv54d; XrrI3: if (!($fild->type != "\x76\x61\162\x63\150\x61\162")) { goto hjTTi; } goto uqvDq; uqvDq: $field = ["\x75\160\144\x61\164\145\x64" => array("\x74\171\160\145" => "\x56\x41\122\103\110\x41\122", "\x63\157\x6e\163\164\x72\x61\151\x6e\164" => 20, "\144\145\146\x61\165\x6c\164" => '')]; goto rMZzk; ZaS_v: } goto t3tR_; h888v: $this->output_json($token); goto jocqC; zvRjw: VjNcs: goto jDvR9; gTzKz: Wu6Sw: goto s6u2F; t3tR_: PjUtZ: goto a2wF3; brZcF: $dataflds = $this->db->field_data("\x63\x62\x74\137\164\157\x6b\x65\156"); goto rels6; r42NS: $this->output_json($data); goto gTzKz; gsdiS: $data["\x61\165\164\157"] = "\60"; goto qYCDB; qYCDB: $data["\x65\154\141\x70\x73\x65\144"] = "\x30\x30\72\60\60\x3a\x30\60"; goto r42NS; a2wF3: $token = $this->cbt->getToken(); goto iFJYP; iFJYP: if ($token == null) { goto VjNcs; } goto cilta; cilta: $token->now = date("\131\55\x6d\x2d\x64\x20\110\72\151\x3a\x73"); goto h888v; jDvR9: $data["\164\x6f\153\145\x6e"] = ''; goto gsdiS; rels6: $table_changed = false; goto D9jQj; jocqC: goto Wu6Sw; goto zvRjw; s6u2F: } private function createNewToken() { goto F8YuJ; FRkVU: $i++; goto Fbsyw; bSDVe: DHvDG: goto u0p3u; f1eL4: Qr0wa: goto FRkVU; g4Od8: $input_length = strlen($chars); goto aOE8t; aOE8t: $new_token = ''; goto daUkS; Fbsyw: goto DHvDG; goto b2S0_; VXVOa: return $new_token; goto lNjg0; MieWz: $new_token .= $random_character; goto f1eL4; u9fKM: $random_character = $chars[mt_rand(0, $input_length - 1)]; goto MieWz; F8YuJ: $chars = "\x41\102\x43\x44\105\106\x47\110\x49\x4a\x4b\114\115\x4e\117\x50\121\x52\123\x54\x55\x56\127\130\131\x5a"; goto g4Od8; u0p3u: if (!($i < 6)) { goto NIgmz; } goto u9fKM; daUkS: $i = 0; goto bSDVe; b2S0_: NIgmz: goto VXVOa; lNjg0: } }
