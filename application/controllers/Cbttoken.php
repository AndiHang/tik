<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 class Cbttoken extends CI_Controller { public function __construct() { goto oB4n0; S54mo: if (!$this->ion_auth->logged_in()) { goto hJ9rw; } goto G5Xdz; S2e6v: show_error("\110\x61\x6e\171\141\x20\x41\x64\x6d\x69\x6e\151\x73\164\x72\141\164\x6f\x72\x20\171\x61\x6e\x67\40\144\151\x62\145\162\151\40\x68\x61\153\x20\165\156\164\165\153\x20\x6d\145\156\147\141\153\x73\145\163\40\150\141\x6c\141\155\x61\156\x20\151\x6e\151\54\x20\74\x61\x20\x68\x72\x65\x66\75\x22" . base_url("\x64\141\163\150\142\157\141\162\144") . "\42\x3e\113\x65\155\142\x61\x6c\151\40\153\x65\40\155\145\x6e\x75\x20\x61\x77\x61\x6c\x3c\x2f\x61\x3e", 403, "\101\153\x73\x65\x73\x20\124\x65\162\154\x61\x72\x61\x6e\147"); goto sU1N9; G5Xdz: if (!(!$this->ion_auth->is_admin() && !$this->ion_auth->in_group("\x67\x75\x72\165"))) { goto Tin_h; } goto S2e6v; Yn29X: goto vD2lh; goto OUssJ; sU1N9: Tin_h: goto Yn29X; oB4n0: parent::__construct(); goto TGudb; QCO4k: $this->load->model("\x44\x61\x73\150\142\157\141\162\144\x5f\x6d\157\144\145\154", "\x64\141\x73\x68\142\x6f\141\162\144"); goto y3hSs; kGJ5l: $this->load->model("\x4c\x6f\147\137\155\157\x64\145\x6c", "\x6c\x6f\147\x67\151\x6e\147"); goto hIUQd; TGudb: $this->load->dbforge(); goto S54mo; PG2ap: $this->load->library(["\144\x61\x74\x61\164\141\142\154\x65\x73", "\x66\157\x72\155\137\166\141\154\151\144\141\164\x69\157\x6e"]); goto IZiO3; IZiO3: $this->load->model("\x4d\x61\163\x74\145\x72\137\155\157\x64\145\x6c", "\x6d\x61\163\164\x65\162"); goto QCO4k; COcnJ: vD2lh: goto PG2ap; OUssJ: hJ9rw: goto PMf2o; hIUQd: $this->form_validation->set_error_delimiters('', ''); goto jB65o; PMf2o: redirect("\x61\165\x74\150"); goto COcnJ; y3hSs: $this->load->model("\103\x62\164\137\x6d\157\x64\145\154", "\143\x62\164"); goto kGJ5l; jB65o: } public function output_json($data, $encode = true) { goto NLMiw; GfwkQ: YEwuu: goto xrJeO; aHHfI: $data = json_encode($data); goto GfwkQ; xrJeO: $this->output->set_content_type("\141\x70\160\x6c\x69\x63\141\x74\151\x6f\x6e\x2f\152\163\157\156")->set_output($data); goto J5GXE; NLMiw: if (!$encode) { goto YEwuu; } goto aHHfI; J5GXE: } public function index() { goto yOPwV; UWIDF: $this->load->view("\155\x65\x6d\x62\x65\x72\163\x2f\147\165\x72\x75\57\164\x65\x6d\160\x6c\x61\x74\x65\163\x2f\146\157\157\164\x65\x72"); goto bZGKY; afWDK: $smt = $this->master->getSemesterActive(); goto cQqE3; hXxF9: $this->load->view("\x5f\x74\145\155\x70\154\x61\164\145\163\x2f\144\x61\163\150\142\157\x61\162\144\x2f\137\146\x6f\x6f\164\145\162"); goto OFPj6; bNjZf: $data = ["\x75\163\145\162" => $user, "\x6a\x75\x64\165\154" => "\124\x6f\x6b\x65\156\40\125\x6a\151\141\156", "\163\x75\x62\x6a\165\144\x75\x6c" => "\x54\x6f\x6b\145\156", "\163\145\164\x74\x69\156\x67" => $this->dashboard->getSetting()]; goto Cj7dM; bZGKY: goto VJJUj; goto qSTDm; cQqE3: $data["\x74\x70"] = $this->dashboard->getTahun(); goto OUoEb; vInfS: $tkn["\x74\x6f\x6b\x65\156"] = ''; goto Evs1p; Evs1p: $tkn["\141\x75\x74\157"] = "\x30"; goto l1K3X; l1K3X: $tkn["\152\141\x72\141\x6b"] = "\61"; goto m8iew; m8iew: $tkn["\x65\154\x61\x70\163\145\x64"] = "\x30\60\72\x30\x30\x3a\x30\60"; goto pJ7Iv; efHV8: $data["\147\165\x72\x75"] = $guru; goto WKCDM; OUoEb: $data["\x74\160\137\x61\143\164\151\166\145"] = $tp; goto Gjh81; qSTDm: oToZv: goto Pm2g6; Gjh81: $data["\x73\x6d\164"] = $this->dashboard->getSemester(); goto Mm3qf; WLwIN: $this->load->view("\x63\142\164\x2f\x74\x6f\x6b\145\156\57\144\x61\164\x61"); goto hXxF9; yOPwV: $user = $this->ion_auth->user()->row(); goto bNjZf; Cj7dM: $tp = $this->master->getTahunActive(); goto afWDK; NEVAl: $this->load->view("\x6d\145\155\142\x65\x72\163\x2f\x67\165\162\x75\x2f\143\142\164\57\164\x6f\153\x65\x6e\57\144\141\164\141"); goto UWIDF; Pm2g6: $data["\x70\162\157\x66\x69\154\x65"] = $this->dashboard->getProfileAdmin($user->id); goto FzEhP; FzEhP: $this->load->view("\137\164\x65\x6d\x70\154\141\x74\x65\x73\57\144\141\x73\x68\x62\157\141\x72\x64\x2f\x5f\150\x65\x61\x64\145\x72", $data); goto WLwIN; WKCDM: $this->load->view("\155\x65\155\142\x65\162\163\57\x67\165\x72\165\x2f\164\145\155\x70\x6c\x61\x74\x65\x73\57\150\145\x61\x64\x65\x72", $data); goto NEVAl; OFPj6: VJJUj: goto N4b0B; wnk_u: $token = $this->cbt->getToken(); goto vInfS; Mm3qf: $data["\163\x6d\x74\x5f\x61\143\164\151\x76\145"] = $smt; goto wnk_u; pJ7Iv: $data["\x74\157\153\145\x6e"] = $token != null ? $token : json_decode(json_encode($tkn)); goto Whw2_; Whw2_: if ($this->ion_auth->is_admin()) { goto oToZv; } goto Ssaa1; Ssaa1: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto efHV8; N4b0B: } public function generateToken() { goto BGqds; upT7C: $new = $this->createNewToken(); goto t8v4x; jhNro: $this->cbt->saveToken($post_token); goto hJn8i; P3iPP: $post_token->updated = $updated; goto jhNro; xSuHg: $post_token->token = $new; goto LLxTJ; WkRyN: $this->output_json($token); goto N08Gb; wWNRY: if (!($total_minutes >= $post_token->jarak)) { goto xh2rn; } goto upT7C; l8IIT: $total_minutes += $diff->i; goto wWNRY; LLxTJ: $post_token->updated = $updated; goto GXBK8; qS3Lq: $token->now = $updated; goto WkRyN; fwjmq: SROoS: goto fKBeI; GXBK8: $this->cbt->saveToken($post_token); goto fwjmq; DAuyn: $force = $this->input->get("\146\x6f\162\143\x65"); goto hP8Wv; hJn8i: xh2rn: goto ezefC; ezefC: goto SROoS; goto BjpZL; BjpZL: Q4Goy: goto qevFR; t8v4x: $post_token->token = $new; goto P3iPP; gilRK: $total_minutes += $diff->h * 60; goto l8IIT; rtElp: $total_minutes = $diff->days * 24 * 60; goto gilRK; qevFR: $new = $this->createNewToken(); goto xSuHg; dbwRr: $mulai = new DateTime($token->updated); goto F1Ll6; F1Ll6: $diff = $mulai->diff(new DateTime()); goto rtElp; hP8Wv: $token = $this->cbt->getToken(); goto lWeIk; BGqds: $post_token = json_decode($this->input->get("\144\x61\x74\x61")); goto DAuyn; v_41a: if ($force == "\61") { goto Q4Goy; } goto dbwRr; lWeIk: $updated = date("\x59\55\155\x2d\x64\x20\x48\72\151\72\163"); goto v_41a; fKBeI: $token = $this->cbt->getToken(); goto qS3Lq; N08Gb: } public function loadToken() { goto Frcrq; QKGuC: $data["\x74\x6f\x6b\x65\x6e"] = ''; goto X7Awd; iAlfB: $data["\145\154\x61\x70\x73\x65\x64"] = "\60\x30\x3a\x30\x30\x3a\x30\60"; goto uIqyS; X7Awd: $data["\x61\x75\x74\157"] = "\60"; goto iAlfB; Spjxy: foreach ($dataflds as $fild) { goto GDJ57; Kl9O2: UGb8n: goto fH5sp; SZesb: jV7wc: goto uXfTa; uXfTa: Qm9l3: goto Kl9O2; GDJ57: if (!($fild->name == "\x75\x70\x64\x61\x74\145\144")) { goto Qm9l3; } goto FIwT6; FIwT6: if (!($fild->type != "\166\x61\162\x63\x68\x61\x72")) { goto jV7wc; } goto rGGGJ; rr9Bn: $table_changed = $this->dbforge->modify_column("\143\x62\x74\x5f\164\157\153\145\156", $field); goto SZesb; rGGGJ: $field = ["\x75\160\144\141\164\145\x64" => array("\x74\171\160\x65" => "\x56\101\x52\103\110\101\x52", "\143\157\x6e\163\164\x72\x61\x69\x6e\164" => 20, "\144\145\146\x61\x75\x6c\164" => '')]; goto rr9Bn; fH5sp: } goto uvqBZ; MpEOY: FN5_f: goto bAaDo; PKsoK: goto FN5_f; goto JpGoI; ga7uH: $this->output_json($token); goto PKsoK; HYmxx: $token->now = date("\131\55\x6d\55\x64\40\110\72\x69\72\163"); goto ga7uH; uIqyS: $this->output_json($data); goto MpEOY; GD1bO: $token = $this->cbt->getToken(); goto XT0ca; XT0ca: if ($token == null) { goto D9vlt; } goto HYmxx; uvqBZ: tlmuk: goto GD1bO; JpGoI: D9vlt: goto QKGuC; cWL6S: $table_changed = false; goto Spjxy; Frcrq: $dataflds = $this->db->field_data("\143\x62\x74\x5f\164\x6f\153\145\x6e"); goto cWL6S; bAaDo: } private function createNewToken() { goto Fzpo2; vSxnT: goto pLThm; goto f5W6W; u97a1: $new_token = ''; goto cZoZh; GxsQo: b8IEf: goto O5s7g; rCrKM: $input_length = strlen($chars); goto u97a1; cZoZh: $i = 0; goto lt8IX; Z4gBA: $new_token .= $random_character; goto GxsQo; O5s7g: $i++; goto vSxnT; G6JPv: if (!($i < 6)) { goto zYTCO; } goto rA1b3; rA1b3: $random_character = $chars[mt_rand(0, $input_length - 1)]; goto Z4gBA; Fzpo2: $chars = "\101\102\103\x44\105\106\x47\x48\x49\x4a\113\x4c\x4d\116\117\120\x51\x52\x53\x54\125\126\x57\130\x59\132"; goto rCrKM; f5W6W: zYTCO: goto C4imX; C4imX: return $new_token; goto vuzck; lt8IX: pLThm: goto G6JPv; vuzck: } }
