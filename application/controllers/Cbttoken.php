<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 class Cbttoken extends CI_Controller { public function __construct() { goto EMY1U; woKrs: $this->load->model("\115\141\x73\164\145\162\x5f\155\x6f\x64\145\154", "\x6d\x61\163\x74\145\162"); goto CaYZW; A2R9U: $this->load->model("\114\x6f\x67\137\x6d\157\144\145\154", "\x6c\x6f\147\147\151\x6e\x67"); goto JX9uO; TE_71: if (!(!$this->ion_auth->is_admin() && !$this->ion_auth->in_group("\147\165\x72\x75"))) { goto UO5pn; } goto aO8ew; aJMIK: redirect("\x61\165\164\x68"); goto D5iZT; D5iZT: fH4jJ: goto vTdxS; irgoo: $this->load->model("\x43\142\x74\137\x6d\157\144\145\154", "\x63\x62\x74"); goto A2R9U; aO8ew: show_error("\110\141\x6e\x79\x61\40\x41\x64\155\x69\156\151\163\164\x72\x61\164\157\x72\40\x79\141\x6e\147\x20\144\151\x62\145\162\x69\x20\150\141\x6b\x20\165\x6e\x74\165\x6b\40\x6d\145\x6e\x67\141\x6b\163\145\x73\40\x68\x61\154\x61\x6d\x61\156\40\151\156\x69\x2c\40\74\141\x20\150\x72\145\146\75\42" . base_url("\144\x61\x73\x68\142\x6f\x61\x72\x64") . "\x22\x3e\113\x65\155\142\141\x6c\x69\40\153\x65\40\155\x65\156\165\x20\x61\167\141\x6c\x3c\x2f\x61\x3e", 403, "\x41\x6b\x73\x65\x73\x20\124\x65\x72\154\141\x72\x61\x6e\x67"); goto HRgE9; mbIRc: $this->load->dbforge(); goto qZat1; vTdxS: $this->load->library(["\x64\141\x74\x61\x74\141\142\154\x65\163", "\x66\157\x72\155\x5f\166\x61\x6c\x69\144\x61\x74\151\157\x6e"]); goto woKrs; JX9uO: $this->form_validation->set_error_delimiters('', ''); goto L6Ttq; CaYZW: $this->load->model("\104\141\x73\x68\x62\157\x61\x72\144\137\x6d\157\x64\145\154", "\144\141\163\x68\142\x6f\x61\x72\144"); goto irgoo; qZat1: if (!$this->ion_auth->logged_in()) { goto FuCAe; } goto TE_71; qe_OQ: goto fH4jJ; goto NN_b0; HRgE9: UO5pn: goto qe_OQ; NN_b0: FuCAe: goto aJMIK; EMY1U: parent::__construct(); goto mbIRc; L6Ttq: } public function output_json($data, $encode = true) { goto NpCDM; E0hgx: $data = json_encode($data); goto b6NGS; Phr4f: $this->output->set_content_type("\141\x70\160\154\151\x63\x61\164\151\157\156\57\152\163\157\156")->set_output($data); goto n0Hms; b6NGS: SSIs1: goto Phr4f; NpCDM: if (!$encode) { goto SSIs1; } goto E0hgx; n0Hms: } public function index() { goto sKhT3; F752W: $tkn["\152\141\x72\141\x6b"] = "\x31"; goto ngSVB; oQRN0: $this->load->view("\x5f\164\x65\155\160\x6c\141\164\x65\163\x2f\144\x61\x73\150\142\x6f\141\x72\144\x2f\137\146\157\x6f\x74\145\162"); goto xaCGe; bdR0a: goto JWbHl; goto U0Dtr; WeONx: $data["\x70\x72\157\x66\x69\x6c\x65"] = $this->dashboard->getProfileAdmin($user->id); goto qSTOF; xCBwX: $data["\x74\160\137\x61\143\164\151\x76\145"] = $tp; goto ZKcc1; Ii5RT: $this->load->view("\x6d\145\x6d\x62\145\162\x73\57\x67\x75\x72\x75\x2f\x74\x65\155\160\x6c\141\164\x65\163\57\x68\145\x61\144\x65\x72", $data); goto SsjKn; U0Dtr: Jt2yw: goto WeONx; jDSjJ: $data["\x74\157\153\x65\x6e"] = $token != null ? $token : json_decode(json_encode($tkn)); goto fi72i; ZKcc1: $data["\163\x6d\x74"] = $this->dashboard->getSemester(); goto pdc1f; fi72i: if ($this->ion_auth->is_admin()) { goto Jt2yw; } goto yHOAA; sKhT3: $user = $this->ion_auth->user()->row(); goto ZF75z; uWJ6L: $data["\x67\x75\x72\x75"] = $guru; goto Ii5RT; ngSVB: $tkn["\145\x6c\141\x70\x73\x65\144"] = "\60\60\x3a\60\x30\72\x30\x30"; goto jDSjJ; YHezD: $data["\x74\x70"] = $this->dashboard->getTahun(); goto xCBwX; gjdm6: $tp = $this->master->getTahunActive(); goto LTbd7; cX31V: $tkn["\x74\157\153\145\x6e"] = ''; goto wZdn3; yHOAA: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto uWJ6L; cKsGk: $token = $this->cbt->getToken(); goto cX31V; ixaSC: $this->load->view("\143\142\164\57\164\x6f\153\x65\156\x2f\144\x61\164\x61"); goto oQRN0; wZdn3: $tkn["\x61\x75\164\x6f"] = "\x30"; goto F752W; pdc1f: $data["\163\155\164\137\141\x63\x74\151\166\x65"] = $smt; goto cKsGk; LTbd7: $smt = $this->master->getSemesterActive(); goto YHezD; w9BEF: $this->load->view("\155\x65\x6d\142\x65\x72\163\57\x67\165\x72\x75\x2f\x74\145\155\x70\154\141\x74\x65\163\x2f\146\x6f\157\164\x65\162"); goto bdR0a; qSTOF: $this->load->view("\x5f\164\x65\155\x70\154\141\164\x65\x73\x2f\144\x61\x73\x68\x62\157\x61\x72\x64\57\137\150\145\141\x64\145\x72", $data); goto ixaSC; SsjKn: $this->load->view("\x6d\145\155\x62\145\x72\163\57\147\165\x72\165\x2f\x63\x62\x74\57\164\x6f\x6b\145\x6e\57\x64\141\164\x61"); goto w9BEF; ZF75z: $data = ["\x75\163\x65\162" => $user, "\x6a\165\x64\x75\x6c" => "\124\x6f\153\145\x6e\40\x55\x6a\x69\141\x6e", "\x73\165\142\152\x75\x64\x75\x6c" => "\124\157\153\x65\x6e", "\x73\145\164\x74\x69\156\147" => $this->dashboard->getSetting()]; goto gjdm6; xaCGe: JWbHl: goto qs0r2; qs0r2: } public function generateToken() { goto oGde2; Ambfv: $token = $this->cbt->getToken(); goto wuas6; ebQs_: ajNcT: goto YOKY1; JGgvD: $force = $this->input->get("\146\157\x72\x63\x65"); goto BnJKo; OJC0D: $updated = date("\131\x2d\x6d\x2d\x64\x20\x48\x3a\x69\x3a\163"); goto Cpm7F; YTsPd: $mulai = new DateTime($token->updated); goto prnnx; x6vrd: $total_minutes += $diff->h * 60; goto vKmFC; bid1P: $new = $this->createNewToken(); goto WbROj; lyBZY: $post_token->token = $new; goto WXYKP; Zbfpp: m8DbC: goto Ambfv; z24JD: $this->output_json($token); goto mnd8p; vKmFC: $total_minutes += $diff->i; goto Tzdtx; YOKY1: goto m8DbC; goto K2nI5; DE3sd: $new = $this->createNewToken(); goto lyBZY; wuas6: $token->now = $updated; goto z24JD; w8uMD: $this->cbt->saveToken($post_token); goto Zbfpp; oGde2: $post_token = json_decode($this->input->get("\x64\141\x74\x61")); goto JGgvD; K2nI5: ibSIP: goto bid1P; WbROj: $post_token->token = $new; goto KvbcA; AoNq7: $this->cbt->saveToken($post_token); goto ebQs_; Cpm7F: if ($force == "\x31") { goto ibSIP; } goto YTsPd; Tzdtx: if (!($total_minutes >= $post_token->jarak)) { goto ajNcT; } goto DE3sd; prnnx: $diff = $mulai->diff(new DateTime()); goto YJxwJ; KvbcA: $post_token->updated = $updated; goto w8uMD; YJxwJ: $total_minutes = $diff->days * 24 * 60; goto x6vrd; BnJKo: $token = $this->cbt->getToken(); goto OJC0D; WXYKP: $post_token->updated = $updated; goto AoNq7; mnd8p: } public function loadToken() { goto CSx1v; upe5Y: iUwts: goto JBHcf; S72Qa: $table_changed = false; goto AV_ce; CSx1v: $dataflds = $this->db->field_data("\x63\142\x74\x5f\164\157\153\145\x6e"); goto S72Qa; s5RSh: $data["\x61\x75\x74\x6f"] = "\x30"; goto tV064; cRQ2_: n4ZWy: goto Hm5NL; qnSwe: $data["\x74\x6f\153\145\156"] = ''; goto s5RSh; tV064: $data["\145\154\141\x70\163\145\144"] = "\60\x30\72\x30\60\72\x30\x30"; goto Z08Dv; pfWaU: goto n4ZWy; goto F263Z; AV_ce: foreach ($dataflds as $fild) { goto JGG0t; mzVpp: $table_changed = $this->dbforge->modify_column("\x63\x62\x74\x5f\x74\x6f\x6b\x65\x6e", $field); goto Y0MGm; iEgxO: Ga4IY: goto nERMp; DBFQf: $field = ["\x75\x70\144\141\164\145\144" => array("\164\171\x70\145" => "\x56\101\122\103\110\x41\x52", "\143\x6f\156\163\164\x72\141\x69\156\164" => 20, "\x64\x65\146\141\165\154\164" => '')]; goto mzVpp; ZXksT: if (!($fild->type != "\x76\141\x72\143\150\141\162")) { goto M_ZLM; } goto DBFQf; JGG0t: if (!($fild->name == "\x75\x70\x64\x61\164\145\x64")) { goto n6TZW; } goto ZXksT; Y0MGm: M_ZLM: goto ahPOI; ahPOI: n6TZW: goto iEgxO; nERMp: } goto upe5Y; UpZIy: $this->output_json($token); goto pfWaU; F263Z: f473M: goto qnSwe; JBHcf: $token = $this->cbt->getToken(); goto pN9lC; Z08Dv: $this->output_json($data); goto cRQ2_; kB1XS: $token->now = date("\131\55\x6d\x2d\144\40\x48\x3a\151\72\163"); goto UpZIy; pN9lC: if ($token == null) { goto f473M; } goto kB1XS; Hm5NL: } private function createNewToken() { goto BDP_6; BDP_6: $chars = "\x41\102\103\x44\x45\106\107\110\111\x4a\x4b\x4c\115\x4e\x4f\x50\x51\122\123\x54\x55\x56\127\130\131\132"; goto jSohg; oWMAU: $new_token = ''; goto J3ARp; jSohg: $input_length = strlen($chars); goto oWMAU; w1zp_: $i++; goto jjk33; E61Tz: $random_character = $chars[mt_rand(0, $input_length - 1)]; goto LeFlG; EpX2L: GrcGt: goto w1zp_; IreUn: xmrOh: goto K0uet; J3ARp: $i = 0; goto goAk2; jjk33: goto jokgT; goto IreUn; pIY9i: if (!($i < 6)) { goto xmrOh; } goto E61Tz; K0uet: return $new_token; goto TSUHB; goAk2: jokgT: goto pIY9i; LeFlG: $new_token .= $random_character; goto EpX2L; TSUHB: } }
