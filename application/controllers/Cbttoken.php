<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 class Cbttoken extends CI_Controller { public function __construct() { goto BJ3Ut; c4QB8: show_error("\110\x61\156\171\x61\40\101\x64\x6d\x69\156\x69\163\164\162\141\164\157\x72\40\171\x61\156\147\40\x64\151\x62\145\x72\x69\x20\x68\141\153\x20\x75\x6e\x74\165\153\x20\x6d\x65\x6e\x67\x61\x6b\163\145\x73\40\150\x61\154\141\x6d\x61\x6e\40\151\x6e\x69\54\x20\74\141\40\x68\162\x65\146\x3d\42" . base_url("\x64\x61\163\x68\x62\157\x61\162\144") . "\x22\76\113\x65\x6d\142\x61\x6c\151\x20\153\145\x20\x6d\145\156\165\x20\x61\167\141\x6c\74\x2f\141\x3e", 403, "\x41\x6b\163\145\x73\x20\x54\145\x72\x6c\141\162\x61\156\147"); goto k5OPW; sW0pD: FMd13: goto W_AdR; XRQhD: wVPAV: goto S14p5; HNELC: $this->load->model("\115\x61\163\x74\145\162\x5f\155\157\x64\x65\x6c", "\x6d\141\x73\x74\x65\162"); goto AVKvk; BJ3Ut: parent::__construct(); goto FjXh2; lLX_S: $this->load->model("\114\x6f\147\137\x6d\157\144\x65\154", "\154\157\147\147\151\x6e\147"); goto zKInY; AVKvk: $this->load->model("\104\141\163\150\x62\x6f\x61\x72\144\137\x6d\157\144\145\x6c", "\x64\141\163\150\142\x6f\x61\162\x64"); goto PMu6g; k5OPW: NL1gX: goto IqLz9; zKInY: $this->form_validation->set_error_delimiters('', ''); goto nGS1R; PMu6g: $this->load->model("\103\x62\x74\137\x6d\x6f\x64\x65\154", "\x63\142\164"); goto lLX_S; IqLz9: goto wVPAV; goto sW0pD; W_AdR: redirect("\141\x75\164\150"); goto XRQhD; S14p5: $this->load->library(["\x64\141\x74\x61\164\141\x62\x6c\x65\x73", "\x66\157\162\x6d\x5f\x76\x61\154\x69\x64\x61\164\x69\157\156"]); goto HNELC; FjXh2: $this->load->dbforge(); goto O_2Ed; SQaG8: if (!(!$this->ion_auth->is_admin() && !$this->ion_auth->in_group("\147\x75\162\x75"))) { goto NL1gX; } goto c4QB8; O_2Ed: if (!$this->ion_auth->logged_in()) { goto FMd13; } goto SQaG8; nGS1R: } public function output_json($data, $encode = true) { goto aCXqD; aCXqD: if (!$encode) { goto hRzqy; } goto o5UBY; o5UBY: $data = json_encode($data); goto AC6P1; H9Sz8: $this->output->set_content_type("\141\x70\x70\x6c\151\x63\141\164\151\x6f\156\57\152\163\157\x6e")->set_output($data); goto djB0K; AC6P1: hRzqy: goto H9Sz8; djB0K: } public function index() { goto DFbSc; pj1j3: $data["\x70\x72\x6f\x66\151\x6c\x65"] = $this->dashboard->getProfileAdmin($user->id); goto XYbGB; yFxNS: $data["\163\155\164"] = $this->dashboard->getSemester(); goto w5H52; zkkmM: $this->load->view("\155\x65\155\x62\x65\162\x73\57\147\165\x72\165\57\x74\145\155\160\x6c\x61\164\x65\163\x2f\x66\157\x6f\x74\145\162"); goto HJc3i; rM7uG: $this->load->view("\143\142\164\x2f\x74\x6f\153\x65\156\57\x64\141\x74\x61"); goto e1vmA; w5H52: $data["\x73\155\x74\137\x61\x63\x74\151\166\145"] = $smt; goto h1PL7; DCweO: $tp = $this->master->getTahunActive(); goto cJMTm; gNusx: $data["\x67\165\162\x75"] = $guru; goto mFZ_V; xIj85: $data["\x74\x6f\153\145\156"] = $token != null ? $token : json_decode(json_encode($tkn)); goto TDB4m; AgEFS: ic7ba: goto nArNn; XYbGB: $this->load->view("\137\164\145\x6d\160\154\x61\x74\145\x73\57\144\x61\163\x68\x62\157\141\x72\144\57\x5f\x68\x65\x61\144\x65\x72", $data); goto rM7uG; TDB4m: if ($this->ion_auth->is_admin()) { goto ywDGP; } goto h2Ttj; hR6Fc: $data["\x74\x70\137\x61\143\x74\x69\x76\145"] = $tp; goto yFxNS; WiAcE: $data["\x74\160"] = $this->dashboard->getTahun(); goto hR6Fc; DFbSc: $user = $this->ion_auth->user()->row(); goto m8_k5; h1KmA: $tkn["\164\x6f\x6b\145\156"] = ''; goto jSS0I; m8_k5: $data = ["\x75\163\145\162" => $user, "\x6a\x75\x64\x75\154" => "\124\x6f\x6b\145\156\40\125\152\x69\141\x6e", "\x73\x75\142\152\x75\x64\x75\154" => "\x54\157\153\145\156", "\163\145\x74\x74\x69\x6e\x67" => $this->dashboard->getSetting()]; goto DCweO; h2Ttj: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto gNusx; JceiM: $tkn["\x6a\141\162\x61\153"] = "\x31"; goto Qi5m_; HJc3i: goto ic7ba; goto lcqHj; jSS0I: $tkn["\141\165\164\x6f"] = "\x30"; goto JceiM; kfEUT: $this->load->view("\155\x65\x6d\142\145\162\x73\x2f\147\x75\x72\x75\57\143\142\x74\57\164\x6f\153\145\156\x2f\144\x61\x74\x61"); goto zkkmM; e1vmA: $this->load->view("\137\x74\x65\155\160\x6c\141\164\x65\x73\57\144\x61\163\x68\x62\157\141\x72\144\57\137\x66\157\157\164\145\x72"); goto AgEFS; h1PL7: $token = $this->cbt->getToken(); goto h1KmA; Qi5m_: $tkn["\145\x6c\141\x70\x73\145\144"] = "\60\60\72\x30\x30\x3a\60\60"; goto xIj85; lcqHj: ywDGP: goto pj1j3; cJMTm: $smt = $this->master->getSemesterActive(); goto WiAcE; mFZ_V: $this->load->view("\155\145\155\x62\145\x72\x73\57\x67\x75\162\165\x2f\164\145\x6d\x70\x6c\x61\x74\x65\163\57\150\145\141\144\145\162", $data); goto kfEUT; nArNn: } public function generateToken() { goto WWaQ7; WWaQ7: $post_token = json_decode($this->input->get("\x64\141\164\141")); goto ywHdY; cgrZT: if ($force == "\61") { goto IJ4HQ; } goto yLb5q; YeGzo: $token->now = $updated; goto wbA3W; wbA3W: $this->output_json($token); goto zePez; iUVRi: $total_minutes += $diff->i; goto PAbkb; XYVJ5: $this->cbt->saveToken($post_token); goto hAHz7; oXJXz: $diff = $mulai->diff(new DateTime()); goto GTxTC; tE3Kj: IJ4HQ: goto xMLGv; AEGAl: $post_token->updated = $updated; goto CPqPF; vQWtR: $token = $this->cbt->getToken(); goto GiBEy; n16wQ: $post_token->token = $new; goto AEGAl; GiBEy: $updated = date("\x59\55\155\x2d\144\x20\110\72\x69\x3a\x73"); goto cgrZT; CPqPF: $this->cbt->saveToken($post_token); goto xACBY; ywHdY: $force = $this->input->get("\146\157\162\x63\145"); goto vQWtR; wZOPl: $token = $this->cbt->getToken(); goto YeGzo; GTxTC: $total_minutes = $diff->days * 24 * 60; goto r80pj; HL3Zr: goto ZS51U; goto tE3Kj; hAHz7: uGbnD: goto HL3Zr; f_Lmb: $post_token->token = $new; goto vAGTH; yLb5q: $mulai = new DateTime($token->updated); goto oXJXz; xMLGv: $new = $this->createNewToken(); goto n16wQ; r80pj: $total_minutes += $diff->h * 60; goto iUVRi; PAbkb: if (!($total_minutes >= $post_token->jarak)) { goto uGbnD; } goto yIBx4; xACBY: ZS51U: goto wZOPl; vAGTH: $post_token->updated = $updated; goto XYVJ5; yIBx4: $new = $this->createNewToken(); goto f_Lmb; zePez: } public function loadToken() { goto xlKo1; Lsjzm: if ($token == null) { goto dfMiI; } goto RPg_v; se7Tq: FG10S: goto OShOg; UGuLA: foreach ($dataflds as $fild) { goto C47il; H872N: HxOE3: goto gQ2P9; MJBo9: $field = ["\165\160\144\x61\x74\145\x64" => array("\x74\x79\160\x65" => "\x56\x41\x52\x43\110\x41\122", "\x63\157\x6e\163\x74\x72\141\x69\156\164" => 20, "\x64\145\x66\141\165\x6c\164" => '')]; goto W8D7N; ql5JU: gsC8v: goto H872N; C47il: if (!($fild->name == "\x75\x70\x64\x61\164\145\x64")) { goto gsC8v; } goto a_JFO; ALhwV: eZOC1: goto ql5JU; W8D7N: $table_changed = $this->dbforge->modify_column("\x63\142\164\137\x74\x6f\153\x65\156", $field); goto ALhwV; a_JFO: if (!($fild->type != "\x76\x61\162\143\x68\x61\162")) { goto eZOC1; } goto MJBo9; gQ2P9: } goto se7Tq; tzozK: $data["\145\154\x61\x70\x73\145\x64"] = "\60\x30\x3a\60\60\x3a\60\x30"; goto mWqVM; nD6Fc: $data["\x61\x75\x74\157"] = "\60"; goto tzozK; xDhkI: $table_changed = false; goto UGuLA; OShOg: $token = $this->cbt->getToken(); goto Lsjzm; HVEWu: $this->output_json($token); goto e3lRs; xlKo1: $dataflds = $this->db->field_data("\143\142\164\x5f\x74\157\153\x65\x6e"); goto xDhkI; pu6Ge: pYWkX: goto dhyxU; EwD9N: $data["\164\x6f\x6b\x65\x6e"] = ''; goto nD6Fc; e3lRs: goto pYWkX; goto YLJMG; YLJMG: dfMiI: goto EwD9N; RPg_v: $token->now = date("\131\x2d\155\x2d\x64\x20\110\72\x69\72\x73"); goto HVEWu; mWqVM: $this->output_json($data); goto pu6Ge; dhyxU: } private function createNewToken() { goto JhIBr; JhIBr: $chars = "\x41\102\x43\104\105\x46\x47\110\111\112\113\114\x4d\x4e\117\x50\x51\x52\123\124\125\126\127\130\x59\132"; goto gINM0; qsp49: $new_token = ''; goto Fw9MG; jZyie: HvSJx: goto Xv2cF; Xv2cF: if (!($i < 6)) { goto J7hrS; } goto JewVW; z4uFf: J7hrS: goto A7C_S; gINM0: $input_length = strlen($chars); goto qsp49; Fw9MG: $i = 0; goto jZyie; O6hYG: HrAsK: goto bXey1; JewVW: $random_character = $chars[mt_rand(0, $input_length - 1)]; goto osJZG; osJZG: $new_token .= $random_character; goto O6hYG; euSWJ: goto HvSJx; goto z4uFf; bXey1: $i++; goto euSWJ; A7C_S: return $new_token; goto pz59E; pz59E: } }
