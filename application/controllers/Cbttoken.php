<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 class Cbttoken extends CI_Controller { public function __construct() { goto YJ74f; PBppq: $this->load->model("\x43\142\x74\137\x6d\157\144\145\x6c", "\x63\142\x74"); goto bc26m; CtUOS: if (!(!$this->ion_auth->is_admin() && !$this->ion_auth->in_group("\147\165\162\165"))) { goto qLY08; } goto o7TDU; thdE1: if (!$this->ion_auth->logged_in()) { goto QN4lA; } goto CtUOS; iVFL3: $this->load->library(["\144\x61\164\x61\x74\x61\142\154\x65\x73", "\146\157\162\155\x5f\x76\141\154\x69\144\141\164\x69\x6f\156"]); goto RVWFk; bc26m: $this->load->model("\114\x6f\147\x5f\155\157\144\145\x6c", "\154\x6f\147\147\151\156\x67"); goto myBGq; EKkJX: $this->load->model("\x44\x61\163\x68\x62\x6f\x61\162\144\x5f\x6d\157\144\x65\154", "\144\141\x73\x68\x62\x6f\141\162\144"); goto PBppq; icSBl: qLY08: goto fcQqy; hK9fA: $this->load->dbforge(); goto thdE1; myBGq: $this->form_validation->set_error_delimiters('', ''); goto IbN5V; NBeoS: QN4lA: goto f7qR4; RVWFk: $this->load->model("\115\x61\163\164\145\162\137\155\x6f\x64\145\154", "\155\141\163\164\145\x72"); goto EKkJX; fcQqy: goto nyHLS; goto NBeoS; YJ74f: parent::__construct(); goto hK9fA; xcpwy: nyHLS: goto iVFL3; o7TDU: show_error("\x48\141\156\x79\x61\40\101\x64\155\151\156\x69\163\164\x72\141\x74\x6f\162\x20\x79\141\156\147\x20\x64\x69\x62\145\162\x69\x20\x68\141\153\x20\165\156\x74\165\x6b\x20\x6d\x65\x6e\147\141\153\163\145\163\40\150\x61\154\x61\155\x61\156\x20\x69\156\151\54\40\x3c\141\40\x68\x72\x65\x66\x3d\x22" . base_url("\144\141\163\150\142\x6f\141\x72\144") . "\x22\x3e\x4b\145\x6d\142\x61\154\x69\40\153\x65\x20\x6d\145\x6e\165\x20\x61\167\x61\154\74\57\141\x3e", 403, "\x41\153\163\145\163\40\124\x65\162\x6c\141\162\x61\x6e\x67"); goto icSBl; f7qR4: redirect("\x61\x75\164\150"); goto xcpwy; IbN5V: } public function output_json($data, $encode = true) { goto Pss1d; cg6oh: $data = json_encode($data); goto KANSf; Pss1d: if (!$encode) { goto zobAd; } goto cg6oh; nJdIe: $this->output->set_content_type("\x61\160\x70\x6c\151\x63\141\164\151\157\x6e\x2f\152\x73\157\x6e")->set_output($data); goto M229T; KANSf: zobAd: goto nJdIe; M229T: } public function index() { goto jdXjc; qzT4e: if ($this->ion_auth->is_admin()) { goto K0762; } goto Wkw_N; RBY5g: $data["\x73\155\x74\137\141\143\164\x69\x76\145"] = $smt; goto OIPwP; Wkw_N: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto notjW; gL34e: $tkn["\x74\x6f\153\145\x6e"] = ''; goto YD6bq; rHu6w: lMpMr: goto NxP1i; jdXjc: $user = $this->ion_auth->user()->row(); goto I9yRC; dYsCX: $this->load->view("\x5f\x74\145\x6d\160\x6c\x61\164\145\163\57\144\141\163\x68\x62\x6f\141\162\144\57\x5f\150\x65\141\144\145\162", $data); goto A3aG5; r3ePF: $data["\164\160\x5f\x61\x63\164\151\x76\145"] = $tp; goto s7pNr; I_izI: $smt = $this->master->getSemesterActive(); goto oZmVY; OIPwP: $token = $this->cbt->getToken(); goto gL34e; x7yEG: $data["\160\x72\x6f\x66\x69\154\145"] = $this->dashboard->getProfileAdmin($user->id); goto dYsCX; s7pNr: $data["\x73\x6d\x74"] = $this->dashboard->getSemester(); goto RBY5g; A3aG5: $this->load->view("\143\142\x74\x2f\x74\157\153\145\x6e\57\144\141\x74\141"); goto T3Agp; notjW: $data["\147\165\162\165"] = $guru; goto Po5Rv; YD6bq: $tkn["\x61\x75\x74\x6f"] = "\x30"; goto gVWrD; zm1gE: K0762: goto x7yEG; I9yRC: $data = ["\x75\163\145\162" => $user, "\x6a\x75\x64\165\x6c" => "\x54\x6f\x6b\145\x6e\x20\x55\152\x69\141\x6e", "\163\x75\x62\x6a\x75\x64\x75\154" => "\124\x6f\x6b\x65\x6e", "\163\x65\164\x74\x69\156\x67" => $this->dashboard->getSetting()]; goto a4v4x; kw1NW: $tkn["\x65\x6c\x61\160\x73\x65\x64"] = "\60\x30\72\60\60\72\x30\x30"; goto I8dhm; I8dhm: $data["\164\x6f\153\x65\x6e"] = $token != null ? $token : json_decode(json_encode($tkn)); goto qzT4e; oZmVY: $data["\164\160"] = $this->dashboard->getTahun(); goto r3ePF; gVWrD: $tkn["\x6a\x61\x72\141\x6b"] = "\x31"; goto kw1NW; a4v4x: $tp = $this->master->getTahunActive(); goto I_izI; TuT8Z: $this->load->view("\x6d\x65\x6d\142\x65\x72\x73\57\x67\165\162\165\57\x63\x62\164\57\164\x6f\153\x65\156\x2f\144\x61\x74\141"); goto SpjjQ; Po5Rv: $this->load->view("\155\145\155\142\145\x72\163\x2f\x67\x75\x72\x75\x2f\164\x65\155\160\154\141\x74\145\163\x2f\150\145\141\x64\145\x72", $data); goto TuT8Z; SpjjQ: $this->load->view("\x6d\x65\155\142\x65\x72\163\x2f\147\165\x72\165\x2f\164\145\155\x70\154\141\164\x65\x73\57\146\157\x6f\x74\145\x72"); goto Drn5P; T3Agp: $this->load->view("\137\164\x65\x6d\x70\154\x61\164\145\x73\x2f\x64\x61\x73\150\x62\157\x61\162\144\x2f\x5f\146\x6f\157\164\145\162"); goto rHu6w; Drn5P: goto lMpMr; goto zm1gE; NxP1i: } public function generateToken() { goto CcLGy; JPuvI: $total_minutes += $diff->h * 60; goto tgM2e; j7sgx: goto qE52G; goto Ylmb7; GDeXn: $post_token->updated = $updated; goto efUR3; k_HYv: $post_token->updated = $updated; goto TN5Ev; qtYBV: qE52G: goto MmBeU; o1nmT: $post_token->token = $new; goto GDeXn; SEwI3: $token = $this->cbt->getToken(); goto Q1wnO; wWpyR: if (!($total_minutes >= $post_token->jarak)) { goto yfza6; } goto wggLu; efUR3: $this->cbt->saveToken($post_token); goto YESs_; mRuCA: $this->output_json($token); goto uBD2B; MmBeU: $token = $this->cbt->getToken(); goto Vldyi; zBM2F: $post_token->token = $new; goto k_HYv; nflrY: if ($force == "\x31") { goto NXtHo; } goto KRrt7; Ylmb7: NXtHo: goto qBIJZ; YESs_: yfza6: goto j7sgx; KRrt7: $mulai = new DateTime($token->updated); goto oHhN2; Vldyi: $token->now = $updated; goto mRuCA; TN5Ev: $this->cbt->saveToken($post_token); goto qtYBV; CcLGy: $post_token = json_decode($this->input->get("\144\141\164\141")); goto sPZR0; Q1wnO: $updated = date("\131\x2d\155\55\144\40\x48\72\151\72\163"); goto nflrY; oHhN2: $diff = $mulai->diff(new DateTime()); goto imeos; tgM2e: $total_minutes += $diff->i; goto wWpyR; qBIJZ: $new = $this->createNewToken(); goto zBM2F; sPZR0: $force = $this->input->get("\x66\x6f\162\143\145"); goto SEwI3; imeos: $total_minutes = $diff->days * 24 * 60; goto JPuvI; wggLu: $new = $this->createNewToken(); goto o1nmT; uBD2B: } public function loadToken() { goto XM0jx; IrpN1: $token->now = date("\131\55\x6d\55\144\x20\x48\72\151\72\163"); goto M7zHa; K6R32: nkJtA: goto AGujP; t13hR: $token = $this->cbt->getToken(); goto MKDdM; j53Vs: oXEBO: goto cS2sX; MKDdM: if ($token == null) { goto nkJtA; } goto IrpN1; XM0jx: $dataflds = $this->db->field_data("\x63\142\164\137\164\x6f\153\x65\156"); goto KigBL; SJp3r: goto oXEBO; goto K6R32; xR2QK: $data["\141\x75\x74\157"] = "\60"; goto ayAw7; pbzaZ: jcvMl: goto t13hR; ayAw7: $data["\x65\x6c\141\160\163\145\144"] = "\60\60\72\x30\60\x3a\x30\x30"; goto Wveyl; ARC4m: foreach ($dataflds as $fild) { goto oSQk4; ti7eC: $table_changed = $this->dbforge->modify_column("\143\142\164\137\x74\157\x6b\x65\x6e", $field); goto qvmDi; wCqAg: $field = ["\x75\160\x64\x61\164\145\144" => array("\164\x79\160\145" => "\126\101\x52\103\110\x41\122", "\x63\x6f\x6e\x73\x74\162\x61\151\x6e\x74" => 20, "\144\x65\146\x61\165\x6c\164" => '')]; goto ti7eC; u_u_F: if (!($fild->type != "\x76\x61\x72\143\x68\141\162")) { goto HzPpz; } goto wCqAg; WDFgL: KQUJ2: goto e6Asp; e6Asp: bJnOb: goto qP7_X; qvmDi: HzPpz: goto WDFgL; oSQk4: if (!($fild->name == "\165\x70\144\x61\x74\x65\x64")) { goto KQUJ2; } goto u_u_F; qP7_X: } goto pbzaZ; KigBL: $table_changed = false; goto ARC4m; Wveyl: $this->output_json($data); goto j53Vs; AGujP: $data["\x74\x6f\x6b\145\x6e"] = ''; goto xR2QK; M7zHa: $this->output_json($token); goto SJp3r; cS2sX: } private function createNewToken() { goto G0aq3; G0aq3: $chars = "\x41\102\103\x44\x45\x46\x47\110\x49\112\x4b\114\115\x4e\117\120\121\x52\123\124\x55\x56\x57\x58\131\132"; goto WM_Eo; XA4dH: return $new_token; goto jfmpt; hV5s8: if (!($i < 6)) { goto fEV4K; } goto bp2zt; Grgi4: $i++; goto HZrvl; knBEi: $new_token .= $random_character; goto SN6FK; YQA8C: DRBeH: goto hV5s8; Tb68E: $new_token = ''; goto JtRQ1; HZrvl: goto DRBeH; goto h_CfY; bp2zt: $random_character = $chars[mt_rand(0, $input_length - 1)]; goto knBEi; SN6FK: ifa5_: goto Grgi4; h_CfY: fEV4K: goto XA4dH; WM_Eo: $input_length = strlen($chars); goto Tb68E; JtRQ1: $i = 0; goto YQA8C; jfmpt: } }
