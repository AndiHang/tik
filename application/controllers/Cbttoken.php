<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 class Cbttoken extends CI_Controller { public function __construct() { goto k5tRx; S3Pvp: show_error("\x48\141\x6e\x79\x61\x20\x41\144\x6d\151\156\x69\x73\164\162\141\164\157\x72\x20\171\x61\156\x67\40\x64\x69\142\145\162\151\x20\150\x61\153\x20\x75\x6e\x74\x75\x6b\40\155\x65\x6e\x67\x61\x6b\163\145\163\x20\x68\x61\154\141\x6d\141\x6e\x20\x69\x6e\x69\54\40\x3c\x61\40\150\x72\145\146\75\42" . base_url("\144\141\163\150\142\157\x61\162\x64") . "\42\x3e\113\145\x6d\x62\x61\x6c\x69\40\153\145\x20\155\145\156\165\x20\141\167\141\x6c\x3c\57\141\x3e", 403, "\101\153\x73\145\163\x20\124\145\162\154\141\x72\x61\x6e\x67"); goto lr6x8; mSkSp: if (!$this->ion_auth->logged_in()) { goto lIQwR; } goto UM1TW; UXb6A: redirect("\x61\x75\x74\x68"); goto DKWuU; Eqr9a: $this->load->library(["\x64\x61\x74\141\x74\141\x62\154\x65\163", "\146\157\x72\155\137\166\x61\154\x69\144\x61\164\151\157\156"]); goto VMXEu; lr6x8: fXMyA: goto jiR1u; yghMS: $this->load->model("\114\x6f\x67\x5f\155\x6f\144\145\x6c", "\x6c\157\x67\147\x69\156\147"); goto HUNgS; k5tRx: parent::__construct(); goto mSkSp; UM1TW: if (!(!$this->ion_auth->is_admin() && !$this->ion_auth->in_group("\x67\x75\162\165"))) { goto fXMyA; } goto S3Pvp; jiR1u: goto YA1IG; goto od0Kp; BsJ0R: $this->load->model("\x43\x62\164\137\155\157\x64\x65\x6c", "\x63\142\x74"); goto yghMS; od0Kp: lIQwR: goto UXb6A; DKWuU: YA1IG: goto Eqr9a; VMXEu: $this->load->model("\115\141\x73\164\145\x72\x5f\155\x6f\x64\x65\154", "\155\141\163\x74\145\x72"); goto r5avo; r5avo: $this->load->model("\x44\141\163\x68\142\157\x61\x72\144\x5f\x6d\x6f\144\145\x6c", "\x64\x61\163\150\x62\x6f\x61\162\x64"); goto BsJ0R; HUNgS: $this->form_validation->set_error_delimiters('', ''); goto HXWIU; HXWIU: } public function output_json($data, $encode = true) { goto qKNA8; qKNA8: if (!$encode) { goto kOscn; } goto ZX1PU; jFppr: kOscn: goto ianWL; ZX1PU: $data = json_encode($data); goto jFppr; ianWL: $this->output->set_content_type("\141\160\x70\154\151\143\x61\x74\x69\x6f\156\x2f\152\163\157\x6e")->set_output($data); goto kjwa8; kjwa8: } public function index() { goto DDHut; INhQK: $data["\147\x75\162\x75"] = $guru; goto vOh9F; iyw2t: $smt = $this->master->getSemesterActive(); goto LIIct; gIraD: $data["\x70\162\x6f\146\x69\154\145"] = $this->dashboard->getProfileAdmin($user->id); goto kJZ6y; Rcr3g: goto Lj6nH; goto m2LHt; Orokf: $data = ["\165\x73\145\162" => $user, "\152\x75\144\x75\154" => "\124\157\x6b\145\x6e\40\125\x6a\x69\x61\x6e", "\163\x75\142\x6a\165\x64\165\154" => "\124\157\x6b\145\156", "\x73\145\x74\164\x69\156\x67" => $this->dashboard->getSetting()]; goto tlYgc; m2LHt: zdYb1: goto gIraD; ou5NW: $this->load->view("\137\x74\x65\x6d\x70\x6c\x61\x74\145\x73\x2f\144\x61\163\x68\x62\157\141\162\144\57\x5f\x66\x6f\x6f\164\x65\162"); goto geril; geril: Lj6nH: goto cmxRy; Hmk_e: if ($this->ion_auth->is_admin()) { goto zdYb1; } goto k3YEi; Dy6J0: $data["\x73\x6d\x74"] = $this->dashboard->getSemester(); goto D9DE8; PkOt9: $this->load->view("\x6d\x65\155\142\145\162\163\57\147\165\x72\165\57\x63\x62\x74\57\x74\157\153\145\x6e\57\x64\x61\164\141"); goto QNTxo; tlYgc: $tp = $this->master->getTahunActive(); goto iyw2t; g1QUR: $this->load->view("\143\x62\x74\x2f\164\x6f\x6b\145\156\x2f\144\x61\164\141"); goto ou5NW; D9DE8: $data["\163\x6d\164\137\141\x63\164\x69\x76\145"] = $smt; goto s4G2O; LIIct: $data["\164\x70"] = $this->dashboard->getTahun(); goto U7egA; kJZ6y: $this->load->view("\x5f\x74\145\x6d\x70\154\x61\164\x65\x73\57\x64\141\x73\x68\x62\157\x61\x72\x64\x2f\x5f\x68\145\141\144\x65\x72", $data); goto g1QUR; U7egA: $data["\x74\x70\x5f\x61\143\164\151\x76\x65"] = $tp; goto Dy6J0; QNTxo: $this->load->view("\x6d\145\x6d\x62\145\162\163\x2f\x67\165\x72\x75\x2f\164\x65\x6d\160\154\141\x74\145\x73\57\x66\x6f\x6f\x74\x65\x72"); goto Rcr3g; vOh9F: $this->load->view("\x6d\x65\x6d\x62\145\x72\x73\x2f\147\165\x72\x75\57\x74\145\155\x70\154\x61\x74\x65\163\x2f\150\x65\x61\x64\145\x72", $data); goto PkOt9; k3YEi: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto INhQK; s4G2O: $data["\x74\x6f\153\145\156"] = $this->cbt->getToken(); goto Hmk_e; DDHut: $user = $this->ion_auth->user()->row(); goto Orokf; cmxRy: } public function generateToken() { goto OdJ5B; h9gWf: $force = $this->input->get("\146\157\162\x63\x65"); goto K8Izo; xxmFO: oZHO9: goto v93y_; jddgS: $mulai = new DateTime($token->updated); goto vUSCO; gvgzW: if ($force == "\61") { goto kejs5; } goto RacyE; Py0eo: $total_minutes += $diff->i; goto rxwot; OdJ5B: $post_token = json_decode($this->input->get("\144\x61\x74\141")); goto h9gWf; vUSCO: $diff = $mulai->diff(new DateTime()); goto aJq3m; aJq3m: $minutes = $diff->days * 24 * 60; goto nHRiW; mmruK: $this->output_json($token); goto ATyxM; GLdsD: $total_minutes = $diff->days * 24 * 60; goto qXkpy; mPEZ8: $token = $this->cbt->getToken(); goto jddgS; UJWYw: $new = $this->createNewToken(); goto a9ua7; B_NzN: $minutes += $diff->i; goto C4uhz; qXkpy: $total_minutes += $diff->h * 60; goto Py0eo; UHXoj: $this->cbt->saveToken($post_token); goto tm8Ua; vG1bb: $this->cbt->saveToken($post_token); goto xxmFO; C4uhz: $second = $diff->s + $minutes * 60; goto TfGjY; RacyE: $mulai = new DateTime($token->updated); goto oFY55; fcGUN: $token->elapsed = $diff->format("\45\x48\x3a\45\x49\72\x25\123"); goto o4xl7; tm8Ua: rbLkE: goto mPEZ8; rxwot: if (!($total_minutes >= $post_token->jarak)) { goto oZHO9; } goto nBy3b; nBy3b: $new = $this->createNewToken(); goto D3KpZ; nHRiW: $minutes += $diff->h * 60; goto B_NzN; oFY55: $diff = $mulai->diff(new DateTime()); goto GLdsD; TfGjY: $token->timeout = (int) $token->jarak * 60000 - $second * 1000; goto fcGUN; K8Izo: $token = $this->cbt->getToken(); goto gvgzW; v93y_: goto rbLkE; goto E6mxO; E6mxO: kejs5: goto UJWYw; D3KpZ: $post_token->token = $new; goto vG1bb; a9ua7: $post_token->token = $new; goto UHXoj; o4xl7: $token->now = new DateTime(); goto mmruK; ATyxM: } public function loadToken() { goto NGA3_; yTOH1: aYDfU: goto fT6Xe; HBFVG: $token->timeout = (int) $token->jarak * 60000 - $second * 1000; goto NjX8K; c7s80: $minutes = $diff->days * 24 * 60; goto p1bzJ; bdaoX: goto Z3SSA; goto yTOH1; aQS4X: $mulai = new DateTime($token->updated); goto Qg7lV; NjX8K: $token->elapsed = $diff->format("\45\110\72\45\111\72\45\x53"); goto ypz5U; HxG9_: Z3SSA: goto qkgPs; QAgsS: $second = $diff->s + $minutes * 60; goto HBFVG; fT6Xe: $data["\164\157\153\145\x6e"] = ''; goto htiPC; WchBZ: if ($token == null) { goto aYDfU; } goto aQS4X; p1bzJ: $minutes += $diff->h * 60; goto uH0_j; WcG5h: $this->output_json($token); goto bdaoX; uH0_j: $minutes += $diff->i; goto QAgsS; igAmt: $data["\x65\x6c\141\160\x73\145\144"] = "\x30\x30\x3a\60\x30\x3a\x30\x30"; goto s_NPa; NGA3_: $token = $this->cbt->getToken(); goto WchBZ; htiPC: $data["\141\x75\x74\x6f"] = "\60"; goto igAmt; s_NPa: $this->output_json($data); goto HxG9_; Qg7lV: $diff = $mulai->diff(new DateTime()); goto c7s80; ypz5U: $token->now = new DateTime(); goto WcG5h; qkgPs: } private function createNewToken() { goto ms7oG; ddZpB: $input_length = strlen($chars); goto OAU2x; ms7oG: $chars = "\101\x42\x43\104\105\x46\107\110\x49\112\x4b\x4c\115\x4e\117\x50\121\x52\123\x54\125\x56\x57\x58\131\132"; goto ddZpB; K63Gm: if (!($i < 6)) { goto d3yH9; } goto vtouE; O67ek: wCNTy: goto K63Gm; ZKArM: $i = 0; goto O67ek; yhRiz: $new_token .= $random_character; goto MH8Qe; vtouE: $random_character = $chars[mt_rand(0, $input_length - 1)]; goto yhRiz; ZIk8R: return $new_token; goto mQ0QZ; dkRyP: goto wCNTy; goto fjqKP; OAU2x: $new_token = ''; goto ZKArM; fjqKP: d3yH9: goto ZIk8R; MH8Qe: SVEIe: goto VV3HN; VV3HN: $i++; goto dkRyP; mQ0QZ: } }
