<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 class Cbttoken extends CI_Controller { public function __construct() { goto KxYWn; SUJJH: CxMsh: goto jIfOe; kGLHg: $this->load->model("\x4c\x6f\x67\137\x6d\x6f\x64\145\x6c", "\154\x6f\147\147\151\x6e\x67"); goto U5jzx; jIfOe: redirect("\141\165\164\x68"); goto x7bF3; gE1qP: $this->load->model("\x44\141\x73\150\x62\157\141\162\x64\137\x6d\x6f\x64\x65\154", "\144\x61\x73\150\142\157\x61\162\x64"); goto v4ivP; KxYWn: parent::__construct(); goto J3MZ8; U5jzx: $this->form_validation->set_error_delimiters('', ''); goto onLPa; pVXnH: if (!$this->ion_auth->logged_in()) { goto CxMsh; } goto iEY2J; VJBb2: show_error("\110\x61\x6e\171\141\x20\101\x64\x6d\151\x6e\x69\x73\x74\x72\141\164\157\162\40\x79\x61\156\x67\x20\144\x69\142\145\162\151\x20\x68\x61\153\40\x75\156\164\x75\153\40\155\145\156\x67\x61\x6b\163\145\163\40\x68\141\x6c\141\155\x61\x6e\x20\151\x6e\x69\x2c\x20\74\x61\40\150\162\145\x66\x3d\x22" . base_url("\x64\141\x73\150\x62\x6f\141\x72\144") . "\x22\76\x4b\145\x6d\142\x61\154\x69\x20\x6b\x65\40\155\145\x6e\165\x20\x61\x77\141\x6c\x3c\x2f\141\x3e", 403, "\x41\x6b\163\145\163\40\x54\145\162\x6c\141\162\x61\x6e\x67"); goto AprNY; x7bF3: SofnZ: goto mYM37; mYM37: $this->load->library(["\x64\141\x74\141\164\x61\x62\x6c\x65\163", "\x66\x6f\x72\155\137\x76\x61\x6c\x69\x64\x61\164\151\157\156"]); goto z_kCm; J3MZ8: $this->load->dbforge(); goto pVXnH; AprNY: bAoQA: goto gyGJZ; gyGJZ: goto SofnZ; goto SUJJH; v4ivP: $this->load->model("\103\142\164\x5f\155\157\x64\145\x6c", "\143\142\164"); goto kGLHg; z_kCm: $this->load->model("\115\141\x73\x74\145\x72\x5f\155\157\x64\145\154", "\155\141\x73\x74\x65\x72"); goto gE1qP; iEY2J: if (!(!$this->ion_auth->is_admin() && !$this->ion_auth->in_group("\x67\x75\x72\x75"))) { goto bAoQA; } goto VJBb2; onLPa: } public function output_json($data, $encode = true) { goto GtYcT; mtPdE: $data = json_encode($data); goto QSI9j; QSI9j: JrK8i: goto ov0b1; ov0b1: $this->output->set_content_type("\x61\x70\x70\154\151\x63\x61\164\x69\157\x6e\x2f\152\x73\157\x6e")->set_output($data); goto me0AG; GtYcT: if (!$encode) { goto JrK8i; } goto mtPdE; me0AG: } public function index() { goto RHvii; rTQhJ: rrDDK: goto OZB11; RBMwX: $token = $this->cbt->getToken(); goto dkXyj; RHvii: $user = $this->ion_auth->user()->row(); goto wbhqP; YaxYh: $tkn["\x6a\141\x72\141\153"] = "\61"; goto vXUGg; WCDVQ: $this->load->view("\155\145\x6d\142\x65\x72\163\x2f\147\165\x72\165\57\x63\142\x74\57\164\x6f\x6b\x65\x6e\57\x64\x61\164\x61"); goto LNKk6; WMtX4: goto rrDDK; goto tAX6u; IEUgb: $this->load->view("\155\x65\x6d\x62\x65\x72\x73\57\x67\x75\162\x75\57\164\145\x6d\x70\154\141\164\x65\163\57\x68\145\x61\144\x65\162", $data); goto WCDVQ; RoTFP: $data["\x74\x6f\153\145\x6e"] = $token != null ? $token : json_decode(json_encode($tkn)); goto wChKs; tAX6u: DUZqY: goto kTe8Z; kTe8Z: $data["\x70\x72\x6f\146\x69\154\x65"] = $this->dashboard->getProfileAdmin($user->id); goto x7jb2; x6j8J: $tkn["\141\x75\164\x6f"] = "\x30"; goto YaxYh; dqU8L: $this->load->view("\x63\142\164\x2f\x74\157\153\145\x6e\x2f\x64\x61\x74\141"); goto HeUp7; LNKk6: $this->load->view("\x6d\x65\x6d\142\x65\x72\x73\57\147\x75\162\x75\x2f\x74\x65\x6d\160\154\x61\x74\145\x73\57\x66\x6f\157\x74\x65\162"); goto WMtX4; ulmpv: $data["\x74\x70"] = $this->dashboard->getTahun(); goto udoDq; bmXlE: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto MFoKz; HeUp7: $this->load->view("\137\x74\145\155\160\154\141\x74\145\163\57\x64\x61\x73\150\x62\x6f\141\162\x64\x2f\137\146\x6f\157\x74\145\162"); goto rTQhJ; wChKs: if ($this->ion_auth->is_admin()) { goto DUZqY; } goto bmXlE; gU0Ny: $smt = $this->master->getSemesterActive(); goto ulmpv; x7jb2: $this->load->view("\137\x74\x65\155\x70\x6c\x61\164\145\163\x2f\144\141\163\x68\142\157\141\162\x64\x2f\x5f\150\145\141\144\145\162", $data); goto dqU8L; TmxgW: $data["\163\155\x74"] = $this->dashboard->getSemester(); goto tichQ; wbhqP: $data = ["\165\163\x65\162" => $user, "\x6a\x75\144\165\x6c" => "\124\x6f\x6b\145\156\x20\x55\152\x69\141\156", "\163\165\142\x6a\x75\144\x75\154" => "\124\157\x6b\x65\x6e", "\x73\145\164\x74\151\x6e\147" => $this->dashboard->getSetting()]; goto OPQmE; MFoKz: $data["\x67\x75\162\165"] = $guru; goto IEUgb; OPQmE: $tp = $this->master->getTahunActive(); goto gU0Ny; dkXyj: $tkn["\x74\x6f\153\x65\x6e"] = ''; goto x6j8J; udoDq: $data["\x74\160\137\141\x63\x74\151\x76\x65"] = $tp; goto TmxgW; vXUGg: $tkn["\x65\x6c\141\160\163\145\x64"] = "\x30\x30\x3a\60\x30\x3a\x30\60"; goto RoTFP; tichQ: $data["\163\155\164\137\x61\143\164\151\166\x65"] = $smt; goto RBMwX; OZB11: } public function generateToken() { goto YZEU1; o4tgs: $total_minutes = $diff->days * 24 * 60; goto We9q2; o02Br: PverO: goto T772x; We9q2: $total_minutes += $diff->h * 60; goto Mn5T3; vLSlc: $this->output_json($token); goto efqy1; zeXN6: $this->cbt->saveToken($post_token); goto tKHxR; FX8Dv: if (!($total_minutes >= $post_token->jarak)) { goto KWEIx; } goto qlbIk; DPByv: $mulai = new DateTime($token->updated); goto GQxvI; IhFXu: KWEIx: goto L78hb; Plhvx: $token = $this->cbt->getToken(); goto cxxCE; nE461: $post_token->token = $new; goto JKLdX; lSnEh: $post_token->updated = $updated; goto l42QM; L78hb: goto SCPF5; goto o02Br; cxxCE: $token->now = $updated; goto vLSlc; eByfm: $updated = date("\x59\x2d\x6d\x2d\144\40\110\72\151\72\x73"); goto Qfgzl; T772x: $new = $this->createNewToken(); goto nE461; tKHxR: SCPF5: goto Plhvx; ss2Fw: $force = $this->input->get("\x66\x6f\162\143\145"); goto GGRm3; qlbIk: $new = $this->createNewToken(); goto c4Tn1; Qfgzl: if ($force == "\x31") { goto PverO; } goto DPByv; YZEU1: $post_token = json_decode($this->input->get("\144\141\x74\141")); goto ss2Fw; c4Tn1: $post_token->token = $new; goto lSnEh; l42QM: $this->cbt->saveToken($post_token); goto IhFXu; GQxvI: $diff = $mulai->diff(new DateTime()); goto o4tgs; JKLdX: $post_token->updated = $updated; goto zeXN6; GGRm3: $token = $this->cbt->getToken(); goto eByfm; Mn5T3: $total_minutes += $diff->i; goto FX8Dv; efqy1: } public function loadToken() { goto wuLit; pbTnP: if ($token == null) { goto n_X4z; } goto eX3DZ; BlBf_: $data["\x74\157\153\x65\156"] = ''; goto f913y; SmOwD: n_X4z: goto BlBf_; TzHc4: $table_changed = false; goto fQq0l; vmlnV: goto UnT03; goto SmOwD; BtCkP: GdBQ0: goto f2PEf; eX3DZ: $token->now = date("\131\55\155\55\x64\40\110\72\151\72\163"); goto wOCQG; f2PEf: $token = $this->cbt->getToken(); goto pbTnP; wOCQG: $this->output_json($token); goto vmlnV; fQq0l: foreach ($dataflds as $fild) { goto gUOHE; iT1rF: $field = ["\x75\160\144\141\164\x65\x64" => array("\164\171\160\x65" => "\126\101\x52\103\110\101\122", "\143\157\x6e\x73\x74\162\141\x69\x6e\x74" => 20, "\144\x65\x66\x61\x75\154\164" => '')]; goto EqiLP; gUOHE: if (!($fild->name == "\x75\160\144\x61\164\x65\x64")) { goto JHzNX; } goto FsB_P; MeGy4: j_cpc: goto aU5Jo; EqiLP: $table_changed = $this->dbforge->modify_column("\x63\x62\164\137\164\157\x6b\x65\x6e", $field); goto qeg1y; qeg1y: pFefW: goto vnlKR; vnlKR: JHzNX: goto MeGy4; FsB_P: if (!($fild->type != "\166\x61\x72\143\150\x61\x72")) { goto pFefW; } goto iT1rF; aU5Jo: } goto BtCkP; m3OiD: $data["\x65\x6c\141\160\x73\145\144"] = "\x30\x30\x3a\x30\60\x3a\60\60"; goto mi0DD; f913y: $data["\x61\165\x74\x6f"] = "\x30"; goto m3OiD; wuLit: $dataflds = $this->db->field_data("\x63\142\164\137\164\x6f\153\x65\156"); goto TzHc4; mi0DD: $this->output_json($data); goto El8GS; El8GS: UnT03: goto kuO9T; kuO9T: } private function createNewToken() { goto YtTVV; pp08R: goto tmXmS; goto uDTJz; vIPIU: $random_character = $chars[mt_rand(0, $input_length - 1)]; goto dUrDW; pvbDc: return $new_token; goto QC5xP; uDTJz: mf3ML: goto pvbDc; dUrDW: $new_token .= $random_character; goto l0TIk; xz1Tj: if (!($i < 6)) { goto mf3ML; } goto vIPIU; YtTVV: $chars = "\101\x42\103\104\105\x46\x47\110\x49\x4a\x4b\x4c\x4d\116\117\x50\121\122\x53\x54\125\126\127\x58\131\x5a"; goto dOGjm; g_GkY: $i = 0; goto lLmMh; lLmMh: tmXmS: goto xz1Tj; wn0LX: $i++; goto pp08R; l0TIk: HRMxX: goto wn0LX; nvhGl: $new_token = ''; goto g_GkY; dOGjm: $input_length = strlen($chars); goto nvhGl; QC5xP: } }
