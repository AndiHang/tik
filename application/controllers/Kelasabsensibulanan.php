<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 class Kelasabsensibulanan extends CI_Controller { public function __construct() { goto apWIM; AUssA: if (!(!$this->ion_auth->is_admin() && !$this->ion_auth->in_group("\x67\x75\162\165"))) { goto imeRh; } goto bTKks; lEd2_: if (!$this->ion_auth->logged_in()) { goto LfCxn; } goto AUssA; X4XYb: XPtnF: goto J1Ifh; J1Ifh: $this->load->library(["\144\141\x74\141\x74\141\142\x6c\x65\x73", "\x66\157\x72\x6d\x5f\166\x61\154\x69\144\x61\164\151\x6f\156"]); goto ahOUP; GrW4p: redirect("\141\x75\164\150"); goto X4XYb; eWFdc: $this->load->model("\104\x72\157\x70\x64\x6f\167\156\137\x6d\x6f\x64\145\154", "\144\x72\x6f\x70\144\157\x77\x6e"); goto K4nQ8; apWIM: parent::__construct(); goto lEd2_; bTKks: show_error("\110\x61\x6e\171\x61\x20\x41\144\155\151\x6e\151\163\x74\x72\x61\164\157\162\x20\x79\141\x6e\147\40\144\x69\142\145\x72\x69\40\x68\141\153\40\165\x6e\164\165\x6b\x20\x6d\145\x6e\x67\141\x6b\163\x65\163\40\x68\141\x6c\141\155\141\156\x20\x69\x6e\x69\x2c\40\x3c\141\40\150\x72\145\x66\75\x22" . base_url("\144\x61\x73\150\142\x6f\x61\162\144") . "\x22\76\x4b\x65\x6d\142\x61\x6c\x69\x20\153\x65\x20\155\145\156\165\x20\x61\167\141\x6c\74\x2f\x61\76", 403, "\x41\153\x73\x65\x73\40\x44\151\x62\x61\x74\141\163\x69"); goto oA_21; PEXJ1: $this->load->model("\104\x61\x73\150\142\157\141\162\x64\x5f\155\x6f\144\145\154", "\144\141\163\150\142\157\141\162\144"); goto eWFdc; CYxgj: goto XPtnF; goto TAmMI; oA_21: imeRh: goto CYxgj; lSPg3: $this->form_validation->set_error_delimiters('', ''); goto KuDil; K4nQ8: $this->load->model("\113\145\154\141\x73\x5f\x6d\157\144\x65\x6c", "\x6b\145\154\x61\163"); goto lSPg3; ahOUP: $this->load->model("\x4d\141\x73\x74\145\162\x5f\x6d\x6f\x64\145\154", "\x6d\141\x73\164\145\162"); goto PEXJ1; TAmMI: LfCxn: goto GrW4p; KuDil: } public function output_json($data, $encode = true) { goto xaDTa; IFyJS: $data = json_encode($data); goto f13IS; xaDTa: if (!$encode) { goto MGEfY; } goto IFyJS; jCuaB: $this->output->set_content_type("\141\160\x70\154\151\x63\141\164\151\157\156\x2f\x6a\163\157\x6e")->set_output($data); goto OMACB; f13IS: MGEfY: goto jCuaB; OMACB: } public function index() { goto kCXqn; vzXv1: $data["\x62\x75\x6c\x61\x6e"] = $this->dropdown->getBulan(); goto oZoe0; ferMU: lgU2i: goto Ugc2X; CN5ps: $data["\164\160\x5f\141\143\x74\151\x76\x65"] = $tp; goto I48h1; JIKVO: $this->load->view("\137\164\x65\155\160\x6c\x61\164\x65\x73\57\x64\141\x73\150\x62\x6f\141\162\144\57\x5f\x68\145\141\x64\145\x72", $data); goto OBPnj; pKtys: $data["\x73\155\164\x5f\141\x63\164\151\x76\x65"] = $smt; goto vzXv1; rNDSX: $data["\x67\x75\x72\165"] = $guru; goto v58Tp; Lrxbv: $smt = $this->master->getSemesterActive(); goto i4LZ4; kCXqn: $user = $this->ion_auth->user()->row(); goto rL5KQ; F0AzE: foreach ($mapel as $m) { goto Tp79p; Tp79p: $arrMapel[$m->id_mapel] = $m->nama_mapel; goto Ykxvc; xouv0: vGZVw: goto KC9s_; Ykxvc: foreach ($m->kelas_mapel as $kls) { $arrKelas[$m->id_mapel][] = ["\151\x64\x5f\153\145\x6c\x61\163" => $kls->kelas, "\x6e\x61\155\141\137\153\145\x6c\x61\163" => $this->dropdown->getNamaKelasById($tp->id_tp, $smt->id_smt, $kls->kelas)]; dbtkS: } goto VlqRE; VlqRE: U53fW: goto xouv0; KC9s_: } goto KByiB; bbHc0: ptGse: goto PVVcm; LNqJZ: $mapel_guru = $this->kelas->getGuruMapelKelas($guru->id_guru, $tp->id_tp, $smt->id_smt); goto aboQH; KByiB: kjlSF: goto ferMU; bQc6K: $data["\155\141\160\x65\154"] = $this->dropdown->getAllMapel(); goto JIKVO; H2PoC: if (!($mapel != null)) { goto UjuB7; } goto GOYg4; Ipxzw: $data["\x61\x72\162\x6b\145\154\x61\x73"] = $arrKelas; goto mZoEE; cPGU7: $arrKelas = []; goto rLmWJ; IJE7x: $nguru[$guru->id_guru] = $guru->nama_guru; goto rNDSX; rL5KQ: $data = ["\x75\x73\145\x72" => $user, "\x6a\165\144\165\x6c" => "\104\x61\x66\164\141\162\40\x48\x61\144\x69\162\x20\x42\x75\154\x61\156\141\156", "\163\165\x62\152\x75\x64\165\154" => "\104\x61\146\164\141\162\x20\x48\141\x64\x69\x72\x20\x42\x75\154\x61\x6e\x61\156\x20\123\151\163\167\x61", "\x73\x65\x74\x74\151\156\147" => $this->dashboard->getSetting()]; goto Gb8j2; GOYg4: foreach ($mapel[0]->kelas_mapel as $id_mapel) { array_push($arrId, $id_mapel->kelas); jzVKD: } goto bbHc0; rLmWJ: if (!($mapel != null)) { goto lgU2i; } goto F0AzE; kUjZH: goto uyjfV; goto Yd11d; tQZQP: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto IJE7x; OBPnj: $this->load->view("\x6b\x65\x6c\x61\x73\57\141\x62\163\x65\156\142\165\154\141\156\141\156\57\x64\x61\x74\x61"); goto RP9jz; Gb8j2: $tp = $this->master->getTahunActive(); goto Lrxbv; v58Tp: $data["\151\x64\137\147\165\162\165"] = $guru->id_guru; goto LNqJZ; Iqqur: $arrMapel = []; goto cPGU7; SJdcP: $data["\155\x61\x70\145\x6c"] = $arrMapel; goto Ipxzw; bLlZl: $data["\153\x65\x6c\141\x73"] = $this->dropdown->getAllKelas($tp->id_tp, $smt->id_smt); goto tSD7c; mZoEE: $data["\153\x65\x6c\x61\x73"] = count($arrId) > 0 ? $this->dropdown->getAllKelasByArrayId($tp->id_tp, $smt->id_smt, $arrId) : []; goto R_pKL; I48h1: $data["\163\x6d\164"] = $this->dashboard->getSemester(); goto pKtys; RP9jz: $this->load->view("\137\x74\145\x6d\160\154\x61\x74\145\163\x2f\x64\x61\x73\x68\x62\157\x61\x72\144\x2f\137\x66\157\157\x74\x65\162"); goto kGPSp; xWLTz: $this->load->view("\155\145\155\142\145\x72\163\x2f\x67\x75\x72\165\x2f\164\x65\x6d\160\154\141\164\145\163\x2f\146\157\x6f\164\145\162"); goto kUjZH; oZoe0: if ($this->ion_auth->is_admin()) { goto wsCN3; } goto tQZQP; Yd11d: wsCN3: goto JfcZk; kGPSp: uyjfV: goto icEj0; i4LZ4: $data["\164\160"] = $this->dashboard->getTahun(); goto CN5ps; aboQH: $mapel = json_decode(json_encode(unserialize($mapel_guru->mapel_kelas))); goto Iqqur; JfcZk: $data["\x70\162\x6f\146\x69\154\145"] = $this->dashboard->getProfileAdmin($user->id); goto bLlZl; tSD7c: $data["\x67\165\x72\x75"] = $this->dropdown->getAllGuru(); goto bQc6K; PVVcm: UjuB7: goto SJdcP; cHxHK: $this->load->view("\x6b\x65\x6c\141\x73\x2f\x61\x62\x73\145\156\x62\x75\x6c\141\156\x61\156\57\144\141\x74\141"); goto xWLTz; R_pKL: $this->load->view("\155\145\155\142\145\x72\163\57\x67\165\x72\165\57\x74\x65\x6d\x70\x6c\141\164\145\x73\57\150\145\141\144\145\162", $data); goto cHxHK; Ugc2X: $arrId = []; goto H2PoC; icEj0: } public function loadAbsensiMapel() { goto QMEPQ; Nl61y: $mapel_bulan_ini = []; goto OMZkn; uRhSb: $id_tp = $this->master->getTahunActive()->id_tp; goto opbNW; QMEPQ: $id_kelas = $this->input->post("\x6b\145\x6c\x61\163", true); goto srKRg; Gse0I: $tgl = cal_days_in_month(CAL_GREGORIAN, $bulan, $tahun); goto MchO7; ymc_X: $t = $i + 1 < 10 ? "\x30" . ($i + 1) : $i + 1; goto ee_p8; MchO7: $jadwal_materi = []; goto qAJsp; yxVsm: goto DCFMO; goto rwbXP; r7J57: $bulan = $this->input->post("\x62\x6c\x6e", true); goto uRhSb; QpXas: $this->output_json(["\x6c\x6f\147" => $log, "\x6a\141\x64\167\x61\154" => $jadwal, "\x6d\141\164\145\x72\x69" => $jadwal_materi, "\x6d\x61\x70\145\154\163" => $mapel_bulan_ini]); goto MU2BV; MU2BV: DCFMO: goto CwDl3; gd_bQ: $materi_perbulan = $this->kelas->getRekapBulananSiswa($id_mapel, $id_kelas, $tahun, $bulan); goto d4bKZ; A9NGC: $i++; goto u4iQ1; d4bKZ: $log = []; goto urgJE; rySQm: $jadwal_materi[$t] = (array) $this->kelas->getAllMateriByTgl($id_kelas, $tahun . "\x2d" . $b . "\55" . $t, [$id_mapel]); goto f9reY; rwbXP: jC3AI: goto nE55V; opbNW: $id_smt = $this->master->getSemesterActive()->id_smt; goto JFgDU; u4iQ1: goto LhXa4; goto qCMuj; urgJE: $siswa = $this->kelas->getKelasSiswa($id_kelas, $id_tp, $id_smt); goto jtgfA; qCMuj: KI7uo: goto gd_bQ; srKRg: $id_mapel = $this->input->post("\155\141\x70\145\x6c", true); goto rA8N4; pqIEE: LhXa4: goto swA0F; qAJsp: $i = 0; goto pqIEE; ztCb4: foreach ($infos as $info) { goto LUJNP; LgNXb: bpJFN: goto GwNxj; LUJNP: $dates = $this->total_hari($info->id_hari, $bulan, $tahun); goto jFu9R; jFu9R: foreach ($dates as $date) { goto R0yVv; rWfeI: Ot3Sh: goto Mnjsg; R0yVv: $d = explode("\55", $date); goto sOoAg; sOoAg: $mapel_bulan_ini[$d[2]][$info->jam_ke] = $date; goto rWfeI; Mnjsg: } goto LgNXb; GwNxj: GFWK_: goto bQUU4; bQUU4: } goto ojcrW; swA0F: if (!($i < $tgl)) { goto KI7uo; } goto ymc_X; JFgDU: $jadwal = $this->dashboard->getJadwalKbm($id_tp, $id_smt, $id_kelas); goto K3v21; ojcrW: i_Rt2: goto QpXas; SbhrS: etsQT: goto Nl61y; f9reY: buAXP: goto A9NGC; hruiT: $this->output_json(["\152\x61\144\x77\x61\x6c" => $jadwal]); goto yxVsm; rA8N4: $tahun = $this->input->post("\x74\150\156", true); goto r7J57; K3v21: if ($jadwal != null) { goto jC3AI; } goto hruiT; nE55V: $jadwal->istirahat = unserialize($jadwal->istirahat); goto Gse0I; jtgfA: foreach ($siswa as $s) { goto KEyq4; ONrRB: if (!($i < $tgl)) { goto DRPgs; } goto TV0bV; KkKuT: hpmm2: goto Wma06; Mvxvq: goto TKnA0; goto A8X_p; TV0bV: $t = $i + 1 < 10 ? "\x30" . ($i + 1) : $i + 1; goto FK1ue; WlrhS: TKnA0: goto ONrRB; ARxUn: $log[$s->id_siswa] = ["\x6e\141\155\141" => $s->nama, "\156\x69\x73" => $s->nis, "\x6b\x65\154\x61\x73" => $s->nama_kelas, "\x6d\141\x74\x65\162\x69" => $arrMateri[1], "\164\x75\147\141\x73" => $arrMateri[2]]; goto KkKuT; CytRO: $arrMateri[1][] = $materi_perbulan != null && isset($materi_perbulan[$s->id_siswa]) && isset($materi_perbulan[$s->id_siswa][1]) && isset($materi_perbulan[$s->id_siswa][1][$tahun . "\x2d" . $b . "\x2d" . $t]) ? $materi_perbulan[$s->id_siswa][1][$tahun . "\55" . $b . "\x2d" . $t] : null; goto iy59S; K3Rl0: $i = 0; goto WlrhS; J8xt7: $i++; goto Mvxvq; A8X_p: DRPgs: goto ARxUn; FK1ue: $b = $bulan < 10 ? "\x30" . $bulan : $bulan; goto CytRO; iy59S: $arrMateri[2][] = $materi_perbulan != null && isset($materi_perbulan[$s->id_siswa]) && isset($materi_perbulan[$s->id_siswa][2]) && isset($materi_perbulan[$s->id_siswa][2][$tahun . "\x2d" . $b . "\55" . $t]) ? $materi_perbulan[$s->id_siswa][2][$tahun . "\55" . $b . "\55" . $t] : null; goto zh6Ns; KEyq4: $arrMateri = []; goto K3Rl0; zh6Ns: n2rS5: goto J8xt7; Wma06: } goto SbhrS; ee_p8: $b = $bulan < 10 ? "\x30" . $bulan : $bulan; goto rySQm; OMZkn: $infos = $this->kelas->getJadwalMapelByMapel($id_kelas, $id_mapel, $id_tp, $id_smt); goto ztCb4; CwDl3: } function total_hari($id_day, $bulan, $taun) { goto vTzSM; VrEom: yZv9s: goto wAAjo; vTzSM: $days = 0; goto GUHEO; Mvp5x: return $dates; goto PE2re; dsKWM: $i = 1; goto aygtj; wAAjo: $i++; goto TeQS0; RpCc3: sY1i1: goto VrEom; GUHEO: $dates = []; goto uoLSx; rpNF7: $idday = $id_day == "\x37" ? 0 : $id_day; goto dsKWM; aygtj: CNllu: goto eqIIe; QiADn: array_push($dates, date("\131\55\x6d\x2d\x64", strtotime($taun . "\x2d" . $bulan . "\55" . $i))); goto RpCc3; TeQS0: goto CNllu; goto h_H1B; eqIIe: if (!($i < $total_days)) { goto UdS6K; } goto mbnl0; h_H1B: UdS6K: goto Mvp5x; mbnl0: if (!(date("\116", strtotime($taun . "\55" . $bulan . "\x2d" . $i)) == $idday)) { goto sY1i1; } goto nidU_; uoLSx: $total_days = cal_days_in_month(CAL_GREGORIAN, $bulan, $taun); goto rpNF7; nidU_: $days++; goto QiADn; PE2re: } }
